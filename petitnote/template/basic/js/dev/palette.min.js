var DynamicColor=1,Palettes=[],d,p,s,m,t,n,o,e,i,c,l,pe,ps,se;Palettes[0]="#000000\n#FFFFFF\n#B47575\n#888888\n#FA9696\n#C096C0\n#FFB6FF\n#8080FF\n#25C7C9\n#E7E58D\n#E7962D\n#99CB7B\n#FCECE2\n#F9DDCF";Palettes[1]="#FFF0DC\n#52443C\n#FFE7D0\n#5E3920\n#FFD6C0\n#B06A54\n#FFCBB3\n#C07A64\n#FFC0A3\n#DEA197\n#FFB7A2\n#ECA385\n#000000\n#FFFFFF";Palettes[2]="#FFEEF7\n#FFE6E6\n#FFCAE4\n#FFC4C4\n#FF9DCE\n#FF7D7D\n#FF6AB5\n#FF5151\n#FF2894\n#FF0000\n#CF1874\n#BF0000\n#851B53\n#800000";Palettes[3]="#FFE3D7\n#FFFFDD\n#FFCBB3\n#FFFFA2\n#FFA275\n#FFFF00\n#FF8040\n#D9D900\n#FF5F11\n#AAAA00\n#DB4700\n#7D7D00\n#BD3000\n#606000";
Palettes[4]="#C6FDD9\n#E8FACD\n#8EF09F\n#B9E97E\n#62D99D\n#9ADC65\n#1DB67C\n#65B933\n#1A8C5F\n#4F8729\n#136246\n#2B6824\n#0F3E2B\n#004000";Palettes[5]="#DFF4FF\n#C1FFFF\n#80C6FF\n#6DEEFC\n#60A8FF\n#44D0EE\n#1D56DC\n#209CCC\n#273D8F\n#2C769A\n#1C2260\n#295270\n#000040\n#003146";Palettes[6]="#E9D2FF\n#E1E1FF\n#DAB5FF\n#C1C1FF\n#CE9DFF\n#8080FF\n#B366FF\n#6262FF\n#9428FF\n#3D44C9\n#6900D2\n#33309E\n#3F007D\n#252D6B";Palettes[7]="#ECD3BD\n#F7E2BD\n#E4C098\n#DBC7AC\n#C8A07D\n#D9B571\n#896952\n#C09450\n#825444\n#AE7B3E\n#5E4435\n#8E5C2F\n#493830\n#5F492C";
Palettes[8]="#FFEADD\n#DED8F5\n#FFCAAB\n#9C89C4\n#F19D71\n#CF434A\n#52443C\n#F09450\n#5BADFF\n#FDF666\n#0077D9\n#4AA683\n#000000\n#FFFFFF";Palettes[9]="#F6CD8A\n#FFF99D\n#89CA9D\n#C7E19E\n#8DCFF4\n#8CCCCA\n#9595C6\n#94AAD6\n#AE88B8\n#9681B7\n#F49F9B\n#F4A0BD\n#8C6636\n#FFFFFF";Palettes[10]="#C7E19E\n#D1E1FF\n#A8D59D\n#8DCFE0\n#7DC622\n#00A49E\n#528413\n#CBB99C\n#00B03B\n#766455\n#007524\n#5B3714\n#0F0F0F\n#FFFFFF";Palettes[11]="#FFFF80\n#F4C1D4\n#EE9C00\n#F4BDB0\n#C45914\n#ED6B9E\n#FEE7DB\n#E76568\n#FFC89D\n#BD3131\n#ECA385\n#AE687E\n#0F0F0F\n#FFFFFF";
Palettes[12]="#FFFFFF\n#7F7F7F\n#EFEFEF\n#5F5F5F\n#DFDFDF\n#4F4F4F\n#CFCFCF\n#3F3F3F\n#BFBFBF\n#2F2F2F\n#AFAFAF\n#1F1F1F\n#0F0F0F\n#000000";function setPalette(){d=document;d.paintbbs.setColors(Palettes[d.Palette.select.selectedIndex]);d.grad.view.checked&&GetPalette()}async function PaletteSave(){Palettes[0]=String(await document.paintbbs.getColors())}var cutomP=0;
async function PaletteNew(){d=document;p=String(await d.paintbbs.getColors());s=d.Palette.select;Palettes[s.length]=p;cutomP++;const a=prompt("\u30d1\u30ec\u30c3\u30c8\u540d","\u30d1\u30ec\u30c3\u30c8 "+cutomP);null==a||""==a?cutomP--:(s.options[s.length]=new Option(a),30>s.length&&(s.size=s.length),PaletteListSetColor())}async function PaletteRenew(){d=document;Palettes[d.Palette.select.selectedIndex]=String(await d.paintbbs.getColors());PaletteListSetColor()}
function PaletteDel(){p=Palettes.length;s=document.Palette.select;i=s.selectedIndex;if(-1!=i&&confirm("\u300c"+s.options[i].text+"\u300d\u3092\u524a\u9664\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")){for(s.options[i]=null;p>i;)Palettes[i]=Palettes[i+1],i++;30>s.length&&(s.size=s.length)}}
async function P_Effect(a){a=parseInt(a);let b=1;255==a&&(b=-1);d=document.paintbbs;p=String(await d.getColors()).split("\n");l=p.length;var f="";for(n=0;l>n;n++){let h=a+parseInt("0x"+p[n].substring(1,3))*b,g=a+parseInt("0x"+p[n].substring(3,5))*b,k=a+parseInt("0x"+p[n].substring(5,7))*b;255<h?h=255:0>h&&(h=0);255<g?g=255:0>g&&(g=0);255<k?k=255:0>k&&(k=0);f+="#"+Hex(h)+Hex(g)+Hex(k)+"\n"}d.setColors(f);PaletteListSetColor()}
async function PaletteMatrixGet(){d=document.Palette;p=Palettes.length;s=d.select;m=d.m_m.selectedIndex;t=d.setr;switch(m){default:t.value="";for(c=n=0;p>n;)null!=s.options[n]&&(t.value=t.value+"\n!"+s.options[n].text+"\n"+Palettes[n],c++),n++;alert("\u30d1\u30ec\u30c3\u30c8\u6570\uff1a"+c+"\n\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f");break;case 1:t.value="!Palette\n"+String(await document.paintbbs.getColors()),alert("\u73fe\u5728\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u30d1\u30ec\u30c3\u30c8\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f")}t.value=
t.value.trim()+"\n!Matrix"}
function PalleteMatrixSet(){m=document.Palette.m_m.selectedIndex;let a;switch(m){default:a=confirm("\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u73fe\u5728\u306e\u5168\u30d1\u30ec\u30c3\u30c8\u60c5\u5831\u306f\u5931\u308f\u308c\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f");break;case 1:a=confirm("\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u73fe\u5728\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d1\u30ec\u30c3\u30c8\u3068\u7f6e\u304d\u63db\u3048\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f");break;
case 2:a=confirm("\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u73fe\u5728\u306e\u30d1\u30ec\u30c3\u30c8\u60c5\u5831\u306b\u8ffd\u52a0\u3057\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")}a&&(PaletteSet(),s.size=30>s.length?s.length:30,DynamicColor&&PaletteListSetColor())}
function PalleteMatrixHelp(){alert("\u2605PALETTE MATRIX\n\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3068\u306f\u30d1\u30ec\u30c3\u30c8\u60c5\u5831\u3092\u5217\u6319\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u3092\u7528\u3044\u308b\u4e8b\u306b\u3088\u308a\n\u81ea\u7531\u306a\u30d1\u30ec\u30c3\u30c8\u8a2d\u5b9a\u3092\u4f7f\u7528\u3059\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u25a1\u30de\u30c8\u30ea\u30af\u30b9\u306e\u53d6\u5f97\n1)\u300c\u53d6\u5f97\u300d\u30dc\u30bf\u30f3\u3088\u308a\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n2)\u53d6\u5f97\u3055\u308c\u305f\u60c5\u5831\u304c\u4e0b\u306e\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u51fa\u307e\u3059\u3001\u3053\u308c\u3092\u5168\u3066\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n3)\u3053\u306e\u30de\u30c8\u30ea\u30af\u30b9\u60c5\u5831\u3092\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304f\u306a\u308a\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u25a1\u30de\u30c8\u30ea\u30af\u30b9\u306e\u30bb\u30c3\u30c8\n1\uff09\u30b3\u30d4\u30fc\u3057\u305f\u30de\u30c8\u30ea\u30af\u30b9\u3092\u4e0b\u306e\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u8cbc\u308a\u4ed8\u3051(\u30da\u30fc\u30b9\u30c8)\u3057\u307e\u3059\u3002\n2)\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u3066\u3042\u308b\u5834\u5408\u306f\u3001\u305d\u308c\u3092\u30b3\u30d4\u30fc\u3057\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u3002\n3)\u300c\u30bb\u30c3\u30c8\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u305b\u3070\u4fdd\u5b58\u3055\u308c\u305f\u30d1\u30ec\u30c3\u30c8\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u4f59\u5206\u306a\u60c5\u5831\u304c\u3042\u308b\u3068\u30d1\u30ec\u30c3\u30c8\u304c\u6b63\u3057\u304f\u30bb\u30c3\u30c8\u3055\u308c\u307e\u305b\u3093\u306e\u3067\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002")}
function PaletteSet(){d=document.Palette;se=d.setr.value;s=d.select;m=d.m_m.selectedIndex;l=se.length;let a;if(1>l)alert("\u30de\u30c8\u30ea\u30af\u30b9\u60c5\u5831\u304c\u3042\u308a\u307e\u305b\u3093\u3002");else{e=o=n=0;switch(m){default:for(n=s.length;0<n;)n--,s.options[n]=null;case 2:i=s.options.length;n=se.indexOf("!",0)+1;if(0==n)return;for(;n<l;){e=se.indexOf("\n#",n);if(-1==e)return;const b=se.substring(n,e+1);o=se.indexOf("!",e);if(-1==o)return;a=se.substring(e+1,o+-1);"Palette"!=b?(0<=i&&
(s.options[i]=new Option(b)),Palettes[i]=a,i++):document.paintbbs.setColors(a);n=o+1}break;case 1:n=se.indexOf("!",0)+1;if(0==n)return;e=se.indexOf("\n#",n);o=se.indexOf("!",e);0<=e&&(a=se.substring(e+1,o-1));document.paintbbs.setColors(a)}PaletteListSetColor()}}function PaletteListSetColor(){var a=document.Palette.select;for(i=1;a.options.length>i;i++){var b=Palettes[i].split("\n");a.options[i].style.background=b[4];a.options[i].style.color=GetBright(b[4])}}
function GetBright(a){let b=parseInt("0x"+a.substring(1,3)),f=parseInt("0x"+a.substring(3,5));a=parseInt("0x"+a.substring(5,7));a=b>=f?b>=a?b:a:f>=a?f:a;return 128>a?"#FFFFFF":"#000000"}function Chenge_(){var a=document.grad.pst.value,b=document.grad.ped.value;isNaN(parseInt("0x"+a))||isNaN(parseInt("0x"+b))||GradView("#"+a,"#"+b)}
function ChengeGrad(){var a=document,b=a.grad.pst.value,f=a.grad.ped.value;Chenge_();var h=parseInt("0x"+b.substring(0,2)),g=parseInt("0x"+b.substring(2,4)),k=parseInt("0x"+b.substring(4,6));b=parseInt((h-parseInt("0x"+f.substring(0,2)))/15);var q=parseInt((g-parseInt("0x"+f.substring(2,4)))/15);f=parseInt((k-parseInt("0x"+f.substring(4,6)))/15);isNaN(b)&&(b=1);isNaN(q)&&(q=1);isNaN(f)&&(f=1);var u=new String;let r;for(r=0;14>r;r++,h-=b,g-=q,k-=f){if(255<h||0>h)b*=-1,h-=b;if(255<g||0>g)q*=-1,g-=q;
if(255<k||0>k)f*=-1,g-=f;u+="#"+Hex(h)+Hex(g)+Hex(k)+"\n"}a.paintbbs.setColors(u)}function Hex(a){a=parseInt(a);0>a&&(a*=-1);for(var b=new String,f;16<a;)f=a,16<a&&(a=parseInt(a/16),f-=16*a),f=Hex_(f),b=f+b;f=Hex_(a);for(b=f+b;2>b.length;)b="0"+b;return b}function Hex_(a){isNaN(a)?a="":10==a?a="A":11==a?a="B":12==a?a="C":13==a?a="D":14==a?a="E":15==a&&(a="F");return a}
async function GetPalette(){d=document;p=String(await d.paintbbs.getColors());if("null"!=p&&""!=p){ps=p.split("\n");var a=d.grad.p_st.selectedIndex,b=d.grad.p_ed.selectedIndex;d.grad.pst.value=ps[a].substring(1,7);d.grad.ped.value=ps[b].substring(1,7);GradSelC();GradView(ps[a],ps[b]);PaletteListSetColor()}}
function GradSelC(){if(d.grad.view.checked){d=document.grad;l=ps.length;pe="";for(n=0;l>n;n++){let a=255+-1*parseInt("0x"+ps[n].substring(1,3)),b=255+-1*parseInt("0x"+ps[n].substring(3,5)),f=255+-1*parseInt("0x"+ps[n].substring(5,7));255<a?a=255:0>a&&(a=0);255<b?b=255:0>b&&(b=0);255<f?f=255:0>f&&(f=0);pe+="#"+Hex(a)+Hex(b)+Hex(f)+"\n"}pe=pe.split("\n");for(n=0;l>n;n++)d.p_st.options[n].style.background=ps[n],d.p_st.options[n].style.color=pe[n],d.p_ed.options[n].style.background=ps[n],d.p_ed.options[n].style.color=
pe[n]}}function GradView(a,b){d=document}function showHideLayer(){d=document;var a=d.layers?d.layers.psft:d.getElementById("psft").style;d.grad.view.checked||(a.visibility="hidden");d.grad.view.checked&&(a.visibility="visible",GetPalette())};
