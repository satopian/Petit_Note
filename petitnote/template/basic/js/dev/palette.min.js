var DynamicColor=1,Palettes="#000000\n#FFFFFF\n#B47575\n#888888\n#FA9696\n#C096C0\n#FFB6FF\n#8080FF\n#25C7C9\n#E7E58D\n#E7962D\n#99CB7B\n#FCECE2\n#F9DDCF #FFF0DC\n#52443C\n#FFE7D0\n#5E3920\n#FFD6C0\n#B06A54\n#FFCBB3\n#C07A64\n#FFC0A3\n#DEA197\n#FFB7A2\n#ECA385\n#000000\n#FFFFFF #FFEEF7\n#FFE6E6\n#FFCAE4\n#FFC4C4\n#FF9DCE\n#FF7D7D\n#FF6AB5\n#FF5151\n#FF2894\n#FF0000\n#CF1874\n#BF0000\n#851B53\n#800000 #FFE3D7\n#FFFFDD\n#FFCBB3\n#FFFFA2\n#FFA275\n#FFFF00\n#FF8040\n#D9D900\n#FF5F11\n#AAAA00\n#DB4700\n#7D7D00\n#BD3000\n#606000 #C6FDD9\n#E8FACD\n#8EF09F\n#B9E97E\n#62D99D\n#9ADC65\n#1DB67C\n#65B933\n#1A8C5F\n#4F8729\n#136246\n#2B6824\n#0F3E2B\n#004000 #DFF4FF\n#C1FFFF\n#80C6FF\n#6DEEFC\n#60A8FF\n#44D0EE\n#1D56DC\n#209CCC\n#273D8F\n#2C769A\n#1C2260\n#295270\n#000040\n#003146 #E9D2FF\n#E1E1FF\n#DAB5FF\n#C1C1FF\n#CE9DFF\n#8080FF\n#B366FF\n#6262FF\n#9428FF\n#3D44C9\n#6900D2\n#33309E\n#3F007D\n#252D6B #ECD3BD\n#F7E2BD\n#E4C098\n#DBC7AC\n#C8A07D\n#D9B571\n#896952\n#C09450\n#825444\n#AE7B3E\n#5E4435\n#8E5C2F\n#493830\n#5F492C #FFEADD\n#DED8F5\n#FFCAAB\n#9C89C4\n#F19D71\n#CF434A\n#52443C\n#F09450\n#5BADFF\n#FDF666\n#0077D9\n#4AA683\n#000000\n#FFFFFF #F6CD8A\n#FFF99D\n#89CA9D\n#C7E19E\n#8DCFF4\n#8CCCCA\n#9595C6\n#94AAD6\n#AE88B8\n#9681B7\n#F49F9B\n#F4A0BD\n#8C6636\n#FFFFFF #C7E19E\n#D1E1FF\n#A8D59D\n#8DCFE0\n#7DC622\n#00A49E\n#528413\n#CBB99C\n#00B03B\n#766455\n#007524\n#5B3714\n#0F0F0F\n#FFFFFF #FFFF80\n#F4C1D4\n#EE9C00\n#F4BDB0\n#C45914\n#ED6B9E\n#FEE7DB\n#E76568\n#FFC89D\n#BD3131\n#ECA385\n#AE687E\n#0F0F0F\n#FFFFFF #FFFFFF\n#7F7F7F\n#EFEFEF\n#5F5F5F\n#DFDFDF\n#4F4F4F\n#CFCFCF\n#3F3F3F\n#BFBFBF\n#2F2F2F\n#AFAFAF\n#1F1F1F\n#0F0F0F\n#000000".split(" ");
function setPalette(){document.paintbbs.setColors(Palettes[document.forms.Palette.select.selectedIndex]);document.forms.grad.view.checked&&GetPalette()}async function PaletteSave(){Palettes[0]=String(await document.paintbbs.getColors())}var cutomP=0;
async function PaletteNew(){var a=String(await document.paintbbs.getColors());const b=document.forms.Palette.select;Palettes[b.length]=a;cutomP++;a=prompt("\u30d1\u30ec\u30c3\u30c8\u540d","\u30d1\u30ec\u30c3\u30c8 "+cutomP);null==a||""==a?cutomP--:(b.options[b.length]=new Option(a),30>b.length&&(b.size=b.length),PaletteListSetColor())}async function PaletteRenew(){Palettes[document.forms.Palette.select.selectedIndex]=String(await document.paintbbs.getColors());PaletteListSetColor()}
function PaletteDel(){const a=Palettes.length,b=document.forms.Palette.select;let c=b.selectedIndex;if(-1!=c&&confirm("\u300c"+b.options[c].text+"\u300d\u3092\u524a\u9664\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")){for(b.options[c]=null;a>c;)Palettes[c]=Palettes[c+1],c++;30>b.length&&(b.size=b.length)}}
async function P_Effect(a){a=parseInt(a);let b,c=1;255==a&&(c=-1);const f=document.paintbbs;let e=String(await f.getColors()).split("\n");const d=e.length;let g="";for(b=0;d>b;b++){let h=a+parseInt("0x"+e[b].substring(1,3))*c,k=a+parseInt("0x"+e[b].substring(3,5))*c,l=a+parseInt("0x"+e[b].substring(5,7))*c;255<h?h=255:0>h&&(h=0);255<k?k=255:0>k&&(k=0);255<l?l=255:0>l&&(l=0);g+="#"+Hex(h)+Hex(k)+Hex(l)+"\n"}f.setColors(g);PaletteListSetColor()}
async function PaletteMatrixGet(){const a=Palettes.length;var b=document.forms.Palette;const c=b.select;let f=b.setr;switch(b.m_m.selectedIndex){default:f.value="";let e=b=0;for(;a>b;)null!=c.options[b]&&(f.value=f.value+"\n!"+c.options[b].text+"\n"+Palettes[b],e++),b++;alert("\u30d1\u30ec\u30c3\u30c8\u6570\uff1a"+e+"\n\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f");break;case 1:f.value="!Palette\n"+String(await document.paintbbs.getColors()),alert("\u73fe\u5728\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u30d1\u30ec\u30c3\u30c8\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f")}f.value=
f.value.trim()+"\n!Matrix"}
function PalleteMatrixSet(){var a=document.forms.Palette;const b=a.select;switch(a.m_m.selectedIndex){default:a=confirm("\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u73fe\u5728\u306e\u5168\u30d1\u30ec\u30c3\u30c8\u60c5\u5831\u306f\u5931\u308f\u308c\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f");break;case 1:a=confirm("\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u73fe\u5728\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d1\u30ec\u30c3\u30c8\u3068\u7f6e\u304d\u63db\u3048\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f");break;
case 2:a=confirm("\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u73fe\u5728\u306e\u30d1\u30ec\u30c3\u30c8\u60c5\u5831\u306b\u8ffd\u52a0\u3057\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")}a&&(PaletteSet(),b.size=30>b.length?b.length:30,DynamicColor&&PaletteListSetColor())}
function PalleteMatrixHelp(){alert("\u2605PALETTE MATRIX\n\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3068\u306f\u30d1\u30ec\u30c3\u30c8\u60c5\u5831\u3092\u5217\u6319\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u3092\u7528\u3044\u308b\u4e8b\u306b\u3088\u308a\n\u81ea\u7531\u306a\u30d1\u30ec\u30c3\u30c8\u8a2d\u5b9a\u3092\u4f7f\u7528\u3059\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u25a1\u30de\u30c8\u30ea\u30af\u30b9\u306e\u53d6\u5f97\n1)\u300c\u53d6\u5f97\u300d\u30dc\u30bf\u30f3\u3088\u308a\u30d1\u30ec\u30c3\u30c8\u30de\u30c8\u30ea\u30af\u30b9\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n2)\u53d6\u5f97\u3055\u308c\u305f\u60c5\u5831\u304c\u4e0b\u306e\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u51fa\u307e\u3059\u3001\u3053\u308c\u3092\u5168\u3066\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n3)\u3053\u306e\u30de\u30c8\u30ea\u30af\u30b9\u60c5\u5831\u3092\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304f\u306a\u308a\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u25a1\u30de\u30c8\u30ea\u30af\u30b9\u306e\u30bb\u30c3\u30c8\n1\uff09\u30b3\u30d4\u30fc\u3057\u305f\u30de\u30c8\u30ea\u30af\u30b9\u3092\u4e0b\u306e\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u8cbc\u308a\u4ed8\u3051(\u30da\u30fc\u30b9\u30c8)\u3057\u307e\u3059\u3002\n2)\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u3066\u3042\u308b\u5834\u5408\u306f\u3001\u305d\u308c\u3092\u30b3\u30d4\u30fc\u3057\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u3002\n3)\u300c\u30bb\u30c3\u30c8\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u305b\u3070\u4fdd\u5b58\u3055\u308c\u305f\u30d1\u30ec\u30c3\u30c8\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u4f59\u5206\u306a\u60c5\u5831\u304c\u3042\u308b\u3068\u30d1\u30ec\u30c3\u30c8\u304c\u6b63\u3057\u304f\u30bb\u30c3\u30c8\u3055\u308c\u307e\u305b\u3093\u306e\u3067\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002")}
function PaletteSet(){var a=document.forms.Palette;const b=a.setr.value,c=a.select;var f=a.m_m.selectedIndex;a=b.length;let e;if(1>a)alert("\u30de\u30c8\u30ea\u30af\u30b9\u60c5\u5831\u304c\u3042\u308a\u307e\u305b\u3093\u3002");else{var d;switch(f){default:for(d=c.length;0<d;)d--,c.options[d]=null;case 2:f=c.options.length;d=b.indexOf("!",0)+1;if(0==d)return;for(;d<a;){var g=b.indexOf("\n#",d);if(-1==g)return;const h=b.substring(d,g+1);d=b.indexOf("!",g);if(-1==d)return;e=b.substring(g+1,d+-1);"Palette"!=
h?(0<=f&&(c.options[f]=new Option(h)),Palettes[f]=e,f++):document.paintbbs.setColors(e);d+=1}break;case 1:d=b.indexOf("!",0)+1;if(0==d)return;g=b.indexOf("\n#",d);d=b.indexOf("!",g);0<=g&&(e=b.substring(g+1,d-1));document.paintbbs.setColors(e)}PaletteListSetColor()}}function PaletteListSetColor(){let a;const b=document.forms.Palette.select;for(a=1;b.options.length>a;a++){var c=Palettes[a].split("\n");b.options[a].style.background=c[4];b.options[a].style.color=GetBright(c[4])}}
function GetBright(a){let b=parseInt("0x"+a.substring(1,3)),c=parseInt("0x"+a.substring(3,5));a=parseInt("0x"+a.substring(5,7));a=b>=c?b>=a?b:a:c>=a?c:a;return 128>a?"#FFFFFF":"#000000"}function Chenge_(){const a=document.forms.grad;var b=a.ped.value;isNaN(parseInt("0x"+a.pst.value))||isNaN(parseInt("0x"+b))||GradView()}
function ChengeGrad(){var a=document.forms.grad,b=a.pst.value,c=a.ped.value;Chenge_();var f=parseInt("0x"+b.substring(0,2)),e=parseInt("0x"+b.substring(2,4)),d=parseInt("0x"+b.substring(4,6));b=Math.trunc((f-parseInt("0x"+c.substring(0,2)))/15);a=Math.trunc((e-parseInt("0x"+c.substring(2,4)))/15);c=Math.trunc((d-parseInt("0x"+c.substring(4,6)))/15);isNaN(b)&&(b=1);isNaN(a)&&(a=1);isNaN(c)&&(c=1);var g="";let h;for(h=0;14>h;h++,f-=b,e-=a,d-=c){if(255<f||0>f)b*=-1,f-=b;if(255<e||0>e)a*=-1,e-=a;if(255<
d||0>d)c*=-1,e-=c;g+="#"+Hex(f)+Hex(e)+Hex(d)+"\n"}document.paintbbs.setColors(g)}function Hex(a){a=Math.trunc(a);0>a&&(a*=-1);for(var b="",c;16<a;)c=a,16<a&&(a=Math.trunc(a/16),c-=16*a),c=Hex_(c),b=c+b;c=Hex_(a);for(b=c+b;2>b.length;)b="0"+b;return b}function Hex_(a){isNaN(a)?a="":10==a?a="A":11==a?a="B":12==a?a="C":13==a?a="D":14==a?a="E":15==a&&(a="F");return a}
async function GetPalette(){var a=String(await document.paintbbs.getColors());if("null"!=a&&""!=a){a=a.split("\n");var b=document.forms.grad,c=b.p_ed.selectedIndex;b.pst.value=a[b.p_st.selectedIndex].substring(1,7);b.ped.value=a[c].substring(1,7);GradSelC();PaletteListSetColor()}}
async function GradSelC(){var a=String(await document.paintbbs.getColors());if("null"!=a&&""!=a){a=a.split("\n");var b=document.forms.grad,c;if(b.view.checked){var f=a.length,e="";for(c=0;f>c;c++){let d=255+-1*parseInt("0x"+a[c].substring(1,3)),g=255+-1*parseInt("0x"+a[c].substring(3,5)),h=255+-1*parseInt("0x"+a[c].substring(5,7));255<d?d=255:0>d&&(d=0);255<g?g=255:0>g&&(g=0);255<h?h=255:0>h&&(h=0);e+="#"+Hex(d)+Hex(g)+Hex(h)+"\n"}e=e.split("\n");for(c=0;f>c;c++)b.p_st.options[c].style.background=
a[c],b.p_st.options[c].style.color=e[c],b.p_ed.options[c].style.background=a[c],b.p_ed.options[c].style.color=e[c]}}}function GradView(){}function showHideLayer(){const a=document.forms.grad;var b;(b=(b=document.getElementById("psft"))?b.style:null)&&!a.view.checked&&(b.visibility="hidden");b&&a.view.checked&&(b.visibility="visible",GetPalette())};
