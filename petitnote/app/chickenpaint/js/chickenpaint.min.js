/*
    ChickenPaint Be
    https://github.com/satopian/ChickenPaint_Be
    by satopian
    Customized from ChickenPaint by Nicholas Sherlock.
    GNU GENERAL PUBLIC LICENSE
    Version 3, 29 June 2007
    <http://www.gnu.org/licenses/>
*/
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/
/*
    jQuery JavaScript Library
    (c) OpenJS Foundation and other contributors | https://jquery.com/license/

    Bootstrap (https://getbootstrap.com/)
    Copyright The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)

    EventEmitter v5.2.9 - git.io/ee
    Unlicense - http://unlicense.org/
    Oliver Caldwell - https://oli.me.uk/
*/
!function(){function pa(a){return a&&a.__esModule?a.default:a}function md(a,c,d,b){Object.defineProperty(a,c,{get:d,set:b,enumerable:!0,configurable:!0})}function Ba(a){for(var c in Ba.DEFAULTS)Ba.DEFAULTS.hasOwnProperty(c)&&(this[c]=Ba.DEFAULTS[c]);for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])}function Ha(a,c,d,b){this.left=a;this.top=c;this.right=d;this.bottom=b}function yd(a,c){this.width=0|a;this.height=0|c}function Zc(a,c){var d=document.createElement("canvas");return d.width=a,d.height=c,d}
function lf(a,c){return document.createElement("canvas").getContext("2d").createImageData(a,c)}function G(a,c){"number"==typeof a?(yd.call(this,a,c),this.imageData=lf(this.width,this.height)):(yd.call(this,a.width,a.height),this.imageData=a);this.data=this.imageData.data}function hg(a,c,d,b){var h,p=0,g=[0,0,0,0];var e=0;for(h=0;h<b&&h<d;h++){for(var m=0;m<G.BYTES_PER_PIXEL;m++)g[m]+=a[e++];p++}h=0;for(m=0;m<d;m++){if(m+b<d){e=(m+b)*G.BYTES_PER_PIXEL;for(var l=0;l<G.BYTES_PER_PIXEL;l++)g[l]+=a[e++];
p++}for(e=0;e<G.BYTES_PER_PIXEL;e++)c[h++]=Math.round(g[e]/p);if(0<=m-b){e=(m-b)*G.BYTES_PER_PIXEL;for(l=0;l<G.BYTES_PER_PIXEL;l++)g[l]-=a[e++];p--}}}function ig(a,c){if(0==(c%=4))return a;let d=Zc(0,0),b=d.getContext("2d");switch(0==c%2?(d.width=a.width,d.height=a.height):(d.width=a.height,d.height=a.width),c){case 1:b.rotate(Math.PI/2);b.drawImage(a,0,-a.height);break;case 2:b.rotate(Math.PI);b.drawImage(a,-a.width,-a.height);break;case 3:b.rotate(-Math.PI/2);b.drawImage(a,-a.width,0);break;default:return a}return d}
function nb(a,c){qb.call(this,a);this.layers=[];this.expanded=!0;this.blendMode=c}function rh(a,c){return a+c}function Za(a,c,d){yd.call(this,a,c);this.createBitmap(a,c,d)}function jg(a,c,d,b){var h,p=0,g=0;for(h=0;h<b&&h<d;h++)g+=a[h],p++;h=0;for(let e=0;e<d;e++)e+b<d&&(g+=a[e+b],p++),c[h++]=Math.round(g/p),0<=e-b&&(g-=a[e-b],p--)}function T(){}function qb(a){this.name=a||"";this.parent=null;this.lockAlpha=!1;this.alpha=100;this.visible=!0;this.blendMode=T.LM_NORMAL;this.mask=null;this.maskVisible=
this.maskLinked=!0;this.maskThumbnail=null;this.useLegacyMultiply=!1}function Pa(a,c,d){qb.call(this,d);0<a&&0<c?this.image=new G(a,c):this.image=null;this.clip=!1;this.imageThumbnail=null}function ee(a,c,d){d?(this.isGroup=d instanceof nb,this.image=d.image,this.mask=d.getEffectiveMask(),this.layer=d,this.blendMode=d.blendMode,this.alpha=d.alpha,this.visible=d.visible):(this.isGroup=!0,this.image=null,this.mask=null,this.layer=null,this.blendMode=T.LM_PASSTHROUGH,this.alpha=100,this.visible=!0);
this.dirtyRect=new Ha(0,0,a,c);this.layers=[];this.parent=null;this.clip=!1}function mf(a,c,d,b){function h(){return 0<l.length?l.pop():new G(c,d)}function p(n){if(0==n.layers.length)return null;if(1==n.layers.length&&(null==n.mask||null==n.layers[0].mask)){let r=n.layers[0];return r.alpha=Math.round(n.alpha*r.alpha/100),n.blendMode!=T.LM_PASSTHROUGH&&(r.blendMode=n.blendMode),r.mask=n.mask||r.mask,n.layer&&k.set(n.layer,r),r}return n.blendMode==T.LM_PASSTHROUGH&&100==n.alpha&&null==n.mask?n.layers:
(n.image=h(),n)}function g(n){let r=new ee(c,d,n);return k.set(n,r),r}function e(n,r){n&&(n.dirtyRect.union(r),e(n.parent,r))}let m,l=[],k=new Map;this.invalidateLayerRect=function(n,r){e(k.get(n),r)};this.buildTree=function(){if(!m){if(m=function u(r){if(0==r.getEffectiveAlpha())return null;let v=g(r);for(var x=0;x<r.layers.length;x++){let H=r.layers[x];var D=r.layers[x+1];if(H instanceof Pa&&D&&D.clip){D=new ee(c,d,null);D.blendMode=H.blendMode;D.alpha=100;D.clip=!0;D.addChildren(g(H));for(x+=1;x<
r.layers.length;x++)if(r.layers[x].clip)0<r.layers[x].getEffectiveAlpha()&&D.addChildren(g(r.layers[x]));else break;0<H.getEffectiveAlpha()&&v.addChildren(p(D));--x}else H instanceof nb?v.addChildren(u(H)):0<H.getEffectiveAlpha()&&v.addChildren(g(H))}return p(v)}(a)){if(Array.isArray(m)||b&&(100>m.alpha||m.mask)){let r=m;(m=new ee(c,d)).blendMode=Array.isArray(r)?T.LM_NORMAL:r.blendMode;m.alpha=100;m.image=h();m.addChildren(r)}}else(m=new ee(c,d,{image:h(),blendMode:T.LM_NORMAL,alpha:100,getEffectiveMask:()=>
null,visible:!0})).image.clearAll(0);l=[]}};this.resetTree=function(){m&&(!function u(r){if(r.isGroup)for(let v of(r.image&&l.push(r.image),r.layers))u(v)}(m),m=null,k.clear())};this.layerPropertyChanged=function(n,r){let u=k.get(n);u&&u.visible==n.visible&&u.alpha==n.alpha&&null==u.mask==(null==n.getEffectiveMask())&&u.blendMode==T.LM_PASSTHROUGH==(n.blendMode==T.LM_PASSTHROUGH)&&"clip"!==r?(u.blendMode=n.blendMode,e(u,new Ha(0,0,c,d))):this.resetTree()};this.blendTree=function(){return function u(r){if(!r||
!r.isGroup)return r;let v=r.dirtyRect;var x=!0,D=!0;if(r.blendMode==T.LM_PASSTHROUGH&&r.parent&&v.union(r.parent.dirtyRect),v.isEmpty())return r;if(r.blendMode==T.LM_PASSTHROUGH&&r.parent){x=!1;var H=r.image;var L=r.parent.image;v.getWidth()==H.width&&v.getHeight()==H.height?H.copyPixelsFrom(L):T.replaceOntoFusionWithOpaqueLayer(H,L,100,v)}for(H=0;H<r.layers.length;H++){var J=u(r.layers[H]);if(x){x=r.image;L=J.image;var O=J.alpha,K=v;J=J.mask;if(100!=O||J||K.getWidth()!=x.width||K.getHeight()!=x.height){let X=
"replaceOntoFusionWith";100==O?X+="OpaqueLayer":X+="TransparentLayer";J&&(X+="Masked");T[X](x,L,O,K,J)}else x.copyPixelsFrom(L);!0;x=!1}else D=D&&r.image.hasAlphaInRect(v),T.fuseImageOntoImage(r.image,D,J.image,J.alpha,J.blendMode,v,J.mask)}r.clip&&(D=r.layers[0],100>D.alpha?D.mask?T.replaceAlphaOntoFusionWithTransparentLayerMasked(r.image,D.image,D.alpha,v,D.mask):T.replaceAlphaOntoFusionWithTransparentLayer(r.image,D.image,D.alpha,v):D.mask?T.replaceAlphaOntoFusionWithOpaqueLayerMasked(r.image,
D.image,100,v,D.mask):T.replaceAlphaOntoFusionWithOpaqueLayer(r.image,D.image,100,v));return r.dirtyRect.makeEmpty(),r}(m)}}function sh(){function a(k){if(null!=h&&k.curSize==p&&k.curSqueeze==g&&k.curAngle==e&&k.tip==m)return h;switch(k.tip){case Ba.TIP_ROUND_AIRBRUSH:!function(n,r){let u=Math.ceil(r.curSize),v=u/2,x=r.curSize/2*(r.curSize/2),D=1+10*r.curSqueeze,H=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let L=0;for(let K=0;K<u;K++)for(let X=0;X<u;X++){var J=X+.5-v;let W=K+.5-v;var O=(J*H-W*r)*
D;J=W*H+J*r;O=O*O+J*J;O<=x?n[L++]=~~(255*(1-O/x)):n[L++]=0}}(c,k);break;case Ba.TIP_ROUND_AA:!function(n,r){let u=Math.ceil(r.curSize),v=u/2,x=r.curSize/2*(r.curSize/2),D=(r.curSize-2)/2*((r.curSize-2)/2),H=(r.curSize+2)/2*((r.curSize+2)/2),L=1+10*r.curSqueeze,J=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let O=0;for(let X=0;X<u;X++)for(let W=0;W<u;W++){let Y=W+.5-v,ka=X+.5-v,va=(Y*J-ka*r)*L,Ia=ka*J+Y*r;var K=va*va+Ia*Ia;if(K<=D)n[O++]=255;else if(K>H)n[O++]=0;else{K=0;for(let S=0;4>S;S++)for(let ya=
0;4>ya;ya++)(va=((Y=W+.25*ya-v)*J-(ka=X+.25*S-v)*r)*L)*va+(Ia=ka*J+Y*r)*Ia<=x&&(K+=1);n[O++]=Math.min(16*K,255)}}}(c,k);break;case Ba.TIP_ROUND_PIXEL:!function(n,r){let u=Math.ceil(r.curSize),v=u/2,x=r.curSize/2*(r.curSize/2),D=1+10*r.curSqueeze,H=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let L=0;for(let O=0;O<u;O++)for(let K=0;K<u;K++){var J=K+.5-v;let X=O+.5-v,W=(J*H-X*r)*D;J=X*H+J*r;W*W+J*J<=x?n[L++]=255:n[L++]=0}}(c,k);break;case Ba.TIP_SQUARE_AA:!function(n,r){let u=Math.ceil(r.curSize),v=
u/2;var x=r.curSize*Math.sin(Math.PI/4);let D=x/2/(1+10*r.curSqueeze);x/=2;let H=D-1,L=x-1,J=D+1,O=x+1,K=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let X=0;for(let Y=0;Y<u;Y++)for(let ka=0;ka<u;ka++){var W=ka+.5-v;let va=Y+.5-v,Ia=Math.abs(W*K-va*r);W=Math.abs(va*K+W*r);if(Ia<=H&&W<=L)n[X++]=255;else if(Ia>J||W>O)n[X++]=0;else{let S=0;for(let ya=0;4>ya;ya++)for(let na=0;4>na;na++)Ia=Math.abs((W=ka+.25*na-v)*K-(va=Y+.25*ya-v)*r),W=Math.abs(va*K+W*r),Ia<=D&&W<=x&&S++;n[X++]=Math.min(16*S,255)}}}(c,
k);break;case Ba.TIP_SQUARE_PIXEL:!function(n,r){let u=Math.ceil(r.curSize),v=u/2;var x=r.curSize*Math.sin(Math.PI/4);let D=x/2/(1+10*r.curSqueeze);x/=2;let H=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let L=0;for(let J=0;J<u;J++)for(let O=0;O<u;O++){let K=O+.5-v,X=J+.5-v,W=Math.abs(X*H+K*r);Math.abs(K*H-X*r)<=D&&W<=x?n[L++]=255:n[L++]=0}}(c,k)}return h=c,p=k.curSize,m=k.tip,g=k.curSqueeze,e=k.curAngle,c}let c=new Uint8Array(160801),d=new Uint8Array(161604),b=[new Float32Array(402),new Float32Array(402)],
h=null,p,g,e,m,l=this;this.getDab=function(k,n,r){let u={alpha:r.curAlpha,width:Math.ceil(r.curSize),height:Math.ceil(r.curSize)},v=r.isAA&&r.tip!=Ba.TIP_ROUND_PIXEL;v&&(u.width++,u.height++);k=k-u.width/2+.5;n=n-u.height/2+.5;let x=Math.floor(k),D=Math.floor(n);return v?u.brush=function(H,L,J){var O=a(H);let K=Math.ceil(H.curSize);H=Math.ceil(H.curSize)+1;let X=(1-L)*(1-J),W=L*(1-J),Y=L*J,ka=(1-L)*J,va=0;L=0;J=b[0];let Ia=b[1];J.fill(0);for(let ya=0;ya<K;ya++){var S=0;for(Ia[0]=0;S<K;S++,va++,L++){let na=
O[va];d[L]=J[S]+na*X+.5|0;J[S+1]+=na*W;Ia[S]+=na*ka;Ia[S+1]=na*Y}d[L++]=J[S]+.5|0;S=J;J=Ia;Ia=S}for(O=0;O<H;O++,L++)d[L]=J[O]+.5|0;return d}(r,k-x,n-D):u.brush=a(r),u.x=x,u.y=D,0<r.texture&&null!=this.texture&&(u.brush==c&&(d.set(c),u.brush=d),!function(H,L){L=Math.floor(255*L);let J=l.texture,O=H.x%J.width,K=H.y%J.height,X=0,W,Y;0>O&&(O+=J.width);0>K&&(K+=J.height);for(let ka=0;ka<H.height;ka++){W=K*J.width+O;Y=K*J.width+J.width;for(let va=0;va<H.width;va++)H.brush[X]=~~(H.brush[X]*(J.data[W]*L/
255^255)/255),X++,++W==Y&&(W-=J.width);++K==J.height&&(K=0)}}(u,r.texture)),u};this.setTexture=function(k){this.texture=k}}function nf(a,c,d){this.bmp=a;this.x=c;this.y=d}function Ce(a){if(0==a.saturation)return a.value<<16|a.value<<8|a.value;var c=a.hue/60;c-=Math.floor(c);var d=a.saturation/255,b=~~(a.value*(1-d)),h=~~(a.value*(1-d*c));c=~~(a.value*(1-d*(1-c)));switch(~~(a.hue/60)){case 0:return a.value<<16|c<<8|b;case 1:return h<<16|a.value<<8|b;case 2:return b<<16|a.value<<8|c;case 3:return b<<
16|h<<8|a.value;case 4:return c<<16|b<<8|a.value;case 5:return a.value<<16|b<<8|h;default:return 0}}function Bb(a){this.value=this.saturation=this.hue=this.rgb=0;this.setRgb(a||0)}function th(){var a,c=!1;this.nextGaussian=function(){if(c)return c=!1,a;do var d=(b=2*Math.random()-1)*b+(h=2*Math.random()-1)*h;while(1<=d||0==d);var b,h;d=Math.sqrt(-2*Math.log(d)/d);return a=h*d,c=!0,b*d}}function Kb(){this.setToIdentity()}function of(a){for(var c=["imageSmoothingEnabled","mozImageSmoothingEnabled",
"webkitImageSmoothingEnabled","msImageSmoothingEnabled"],d=0;d<c.length;d++)if(c[d]in a)return c[d];return null}function pf(a,c){var d=of(a);d&&(a[d]=c)}function dd(a,c,d){this.r=a;this.g=c;this.b=d}function kg(a){let c=0;for(let d=0;d<a.length;d++)c+=a[d];return c/a.length}function lg(a){let c=new dd(0,0,0);for(let d=0;d<a.length;d++){let b=a[d];c.r+=b.r;c.g+=b.g;c.b+=b.b}return c.r/=a.length,c.g/=a.length,c.b/=a.length,c}function mg(a,c){let d=a.data;if(0<c.left)for(var b=c.top;b<c.bottom;b++){var h=
b*a.width,p=h;h=d[h+c.left];for(var g=0;g<c.left;g++,p++)d[p]=h}if(c.right<a.width)for(b=c.top;b<c.bottom;b++)for(p=b*a.width+c.right,h=d[p-1],g=c.right;g<a.width;g++,p++)d[p]=h;b=0;for(p=0;p<c.top;p++)for(h=c.top*a.width,g=0;g<a.width;g++,h++,b++)d[b]=d[h];b=c.bottom*a.width;for(p=c.bottom;p<a.width;p++)for(h=(c.bottom-1)*a.width,g=0;g<a.width;g++,h++,b++)d[b]=d[h]}function De(a,c){return a+c}function ng(a){return a?a.width*a.height*4:0}function Dc(a,c){function d(C){Jc=!1;(0<Va.size||0<ec.size)&&
(C?e():eb||setTimeout(e,1E3))}function b(){fa.emitEvent("changeSelection",[])}function h(C){fa.emitEvent("updateRegion",[C])}function p(){fa.emitEvent("changeStructure");Wa.resetTree();x();h(fa.getBounds())}function g(C,Q,ca){fa.emitEvent("changeLayer",[C]);ca||(Wa.layerPropertyChanged(C,Q),h(fa.getBounds()))}function e(){for(let C of Va)C.rebuildImageThumbnail(),fa.emitEvent("changeLayerImageThumb",[C]);for(let C of ec)C.rebuildMaskThumbnail(),fa.emitEvent("changeLayerMaskThumb",[C]);Va.clear();
eb&&(clearTimeout(eb),eb=null)}function m(C,Q,ca,ea){Array.isArray(C)||(C=[C]);C.forEach(N=>Wa.invalidateLayerRect(N,Q));let F=!1;if(ca)for(let N of(Fb.union(Q),C))N instanceof Pa&&(Va.add(N),F=!0);ea&&(Na.union(Q),C.forEach(N=>{ec.add(N);Ja&&Ja.layer==N&&Ja.invalidateRect(Q)}),F=!0);F&&(eb&&(clearTimeout(eb),eb=null),Jc||(eb=setTimeout(e,1E3)));h(Q)}function l(C,Q){m(C,Q,!Ua,Ua)}function k(){return Ua?ma.mask:ma.image}function n(){if(!Aa.isEmpty()){if(Ua){var C=ma.mask;hb.brushMode==Ba.BRUSH_MODE_ERASE?
Qa[Ba.BRUSH_MODE_PAINT].mergeOntoMask(C,La,4278190080):Qa[hb.brushMode].mergeOntoMask(C,La,255&Xb)}else{C=ma.image;let Q=ma.getLockAlpha();hb.brushMode==Ba.BRUSH_MODE_ERASE&&Q?Qa[Ba.BRUSH_MODE_PAINT].mergeOntoImage(C,Lb,16777215):Qa[hb.brushMode].mergeOntoImage(C,Lb,Xb);Q&&C.copyAlphaFrom(Lb,Aa)}Aa.makeEmpty()}}function r(){ma instanceof Pa&&!Fb.isEmpty()&&(Lb.copyBitmapRect(ma.image,Fb.left,Fb.top,Fb),Fb.makeEmpty())}function u(){ma.mask&&!Na.isEmpty()&&(La.copyBitmapRect(ma.mask,Na.left,Na.top,
Na),Na.makeEmpty())}function v(){Ua?u():r()}function x(){let C=fa.getBounds();Fb.set(C);Na.set(C)}function D(C){fa.setHasUnsavedChanges(!0);0<rb.length&&(rb=[]);0!==lb.length&&lb[lb.length-1].merge(C)?lb[lb.length-1].noChange()&&lb.pop():(30<=lb.length&&lb.shift(),fa.compactUndo(),lb.push(C))}function H(C,Q){C||Q||(C=!Ua,Q=Ua);let ca=kb.clone(),ea=C?Lb.copyRectXOR(ma.image,ca):null,F=Q?La.copyRectXOR(ma.mask,ca):null;this.layer=ma;kb.makeEmpty();this.redo=this.undo=function(){ea&&this.layer.image.setRectXOR(ea,
ca);F&&this.layer.mask.setRectXOR(F,ca);m(this.layer,ca,null!=ea,null!=F)};this.getMemoryUsed=function(N,da){return(ea?ea.length:0)+(F?F.length:0)}}function L(C){let Q=C.maskLinked,ca=C.maskVisible;this.undo=function(){C.setMask(null);C.maskLinked=Q;C.maskVisible=ca;p();fa.setActiveLayer(C,!1)};this.redo=function(){let ea=new Za(fa.width,fa.height,8);ea.clearAll(255);C.maskLinked=!0;C.maskVisible=!0;C.setMask(ea);p();fa.setActiveLayer(C,!0)};this.redo()}function J(C,Q){let ca=C.mask,ea,F=!1;ea=Q&&
C instanceof Pa?C.image.clone():null;F=ma==C&&Ua;this.undo=function(){C.setMask(ca);ea&&(C.image.copyPixelsFrom(ea),m(C,C.image.getBounds(),!0,!1));F&&fa.setActiveLayer(C,!0);p()};this.redo=function(){ea&&(T.multiplyAlphaByMask(C.image,100,C.mask),m(C,fa.getBounds(),!0,!1));F&&fa.setActiveLayer(C,!1);C.setMask(null);p()};this.redo()}function O(C,Q,ca){let ea=ca instanceof Pa&&ca.clip,F=C.layers[Q],N=F instanceof Pa&&F.clip,da=Ua;this.undo=function(){C.removeLayer(ca);let ia=C.layers[Q-1]||C.layers[0]||
C;F instanceof Pa&&(F.clip=N);ca instanceof Pa&&(ca.clip=ea);p();fa.setActiveLayer(ia,da)};this.redo=function(){C.insertLayer(Q,ca);N&&(ca instanceof Pa?ca.clip=!0:F.clip=!1);p();fa.setActiveLayer(ca,!1)};this.redo()}function K(C){let Q=C.clone(),ca=Ua;this.undo=function(){Q.parent.removeLayer(Q);p();fa.setActiveLayer(C,ca)};this.redo=function(){let ea=C.name;ea.endsWith(" Copy")||(ea+=" Copy");Q.name=ea;C.parent.insertLayer(C.parent.indexOf(C)+1,Q);p();fa.setActiveLayer(Q,!1)};this.redo()}function X(C){let Q=
C.parent,ca=Q.indexOf(C),ea=Ua,F=0;if(C instanceof Pa&&!C.clip)for(let N=ca+1;N<Q.layers.length;N++)if(Q.layers[N]instanceof Pa&&Q.layers[N].clip)F++;else break;this.undo=function(){Q.insertLayer(ca,C);for(let N=0;N<F;N++)Q.layers[N+ca+1].clip=!0;p();fa.setActiveLayer(C,ea)};this.redo=function(){var N;for(N=0;N<F;N++)Q.layers[N+ca+1].clip=!1;Q.removeLayerAtIndex(ca);N=0==Q.layers.length?C.parent:Q.layers[Math.max(ca-1,0)];p();fa.setActiveLayer(N,!1)};this.getMemoryUsed=function(N,da){return N?0:C.getMemoryUsed()};
this.redo()}function W(C){let Q=C.parent.indexOf(C),ca=Ua,ea=new Pa(fa.width,fa.height,"");this.undo=function(){C.parent.setLayerAtIndex(Q,C);p();fa.setActiveLayer(C,ca)};this.redo=function(){C.parent.setLayerAtIndex(Q,ea);p();fa.setActiveLayer(ea,!1)};this.getMemoryUsed=function(N,da){return N?0:C.getMemoryUsed()};var F=new mf(C,fa.width,fa.height,!1);F.buildTree();F=F.blendTree();ea.name=C.name;ea.alpha=F.alpha;ea.image=F.image;ea.blendMode=F.blendMode;ea.mask=F.mask;ea.blendMode==T.LM_PASSTHROUGH&&
(ea.blendMode=T.LM_NORMAL);this.redo()}function Y(C){let Q=C.parent,ca=Q.layers[Q.indexOf(C)-1],ea=new Pa(fa.width,fa.height,""),F=Ua;this.undo=function(){let N=Q.indexOf(ea);Q.removeLayerAtIndex(N);Q.insertLayer(N,C);Q.insertLayer(N,ca);p();fa.setActiveLayer(C,F)};this.redo=function(){if(ca.clip||!C.clip)ea.copyFrom(ca),0<C.getEffectiveAlpha()&&(ea.mask?T.multiplyAlphaByMask(ea.image,ea.alpha,ea.mask):T.multiplyAlphaBy(ea.image,ea.alpha),T.fuseImageOntoImage(ea.image,!0,C.image,C.alpha,C.blendMode,
C.getBounds(),C.mask));else{var N=new nb;N.layers=[ca,C];N.parent=null;N.name="Temporary Group";N=new mf(N,fa.width,fa.height,!1);N.buildTree();ea.image=N.blendTree().image}ea.name=ca.name;ea.alpha=100;ea.blendMode=ca.blendMode;ea.mask=null;N=Q.indexOf(ca);Q.removeLayerAtIndex(N);Q.removeLayerAtIndex(N);Q.insertLayer(N,ea);p();fa.setActiveLayer(ea,!1)};this.getMemoryUsed=function(N,da){return N?0:C.getMemoryUsed()+ea.getMemoryUsed()};this.redo()}function ka(){let C=fa.getActiveLayer(),Q=wb.layers.slice(0),
ca=new Pa(fa.width,fa.height,"");this.undo=function(){wb.layers=Q.slice(0);p();fa.setActiveLayer(C,!1)};this.redo=function(){let ea=fa.fusionLayers();ca.copyImageFrom(ea);wb.clearLayers();ca.setName(fa.getDefaultLayerName(!1));wb.addLayer(ca);p();fa.setActiveLayer(ca,!1)};this.getMemoryUsed=function(ea,F){return Q.map(N=>N.getMemoryUsed()).reduce(De,0)};this.redo()}function va(C,Q,ca){let ea=C.parent,F=C.parent.indexOf(C),N=Ua,da=ea.layers[ea.indexOf(C)+1],ia=Q.layers[ca],wa=C instanceof Pa&&C.clip,
za=!!wa&&C.getClippingBase(),cb=0,gb=0;if(C instanceof Pa&&!C.clip)for(var Ca=F+1;Ca<ea.layers.length;Ca++)if(ea.layers[Ca]instanceof Pa&&ea.layers[Ca].clip)cb++;else break;else if(C instanceof nb)for(Ca=ca;Ca<Q.layers.length;Ca++)if(Q.layers[Ca]instanceof Pa&&Q.layers[Ca].clip)gb++;else break;this.undo=function(){C.parent.removeLayer(C);var jb=da?ea.indexOf(da):ea.layers.length;ea.insertLayer(jb,C);C instanceof Pa&&(C.clip=wa);for(jb=0;jb<cb;jb++)ea.layers[jb+F+1].clip=!0;for(jb=0;jb<gb;jb++)Q.layers[jb+
ca].clip=!0;p();fa.setActiveLayer(C,N)};this.redo=function(){for(var jb=0;jb<cb;jb++)ea.layers[jb+F+1].clip=!1;C.parent.removeLayer(C);jb=ia?Q.indexOf(ia):Q.layers.length;Q.insertLayer(jb,C);for(var ac=0;ac<gb;ac++)Q.layers[ac+jb+1].clip=!1;C instanceof Pa&&(C.clip&&C.getClippingBase()!=za&&(C.clip=!1),ia instanceof Pa&&ia.clip&&(C.clip=!0));for(ac=0;ac<gb;ac++)Q.layers[ac+jb+1].clip=!1;p();fa.setActiveLayer(C,!1)};this.redo()}function Ia(C,Q){let ca=C.substring(0,1).toUpperCase()+C.substring(1),
ea=function(F,N){Array.isArray(F)||(F=[F]);this.layers=F;this.from=this.layers.map(da=>da["get"+ca]());this.to=N;this.redo()};return ea.prototype=Object.create(zc.prototype),ea.prototype.constructor=ea,ea.prototype.undo=function(){this.layers.forEach((F,N)=>F["set"+ca](this.from[N]));this.layers.forEach(F=>g(F,C,!Q))},ea.prototype.redo=function(){this.layers.forEach(F=>F["set"+ca](this.to));this.layers.forEach(F=>g(F,C,!Q))},ea.prototype.merge=function(F){var N;if(N=F instanceof ea)a:{N=this.layers;
var da=F.layers;if(N.length!=da.length)N=!1;else{for(let ia=0;ia<N.length;ia++)if(N[ia]!=da[ia]){N=!1;break a}N=!0}}return!!N&&(this.to=F.to,!0)},ea.prototype.noChange=function(){for(let F=0;F<this.from.length;F++)if(this.from[F]!=this.to)return!1;return!0},ea}function S(C,Q){C=C.clone();Q=Q.clone();this.undo=function(){fa.setSelection(C);h(fa.getBounds())};this.redo=function(){fa.setSelection(Q);h(fa.getBounds())};this.noChange=function(){return C.equals(Q)}}function ya(C,Q,ca){let ea=Q?C.mask:C.image,
F=ea.cloneRect(ca);ca=ca.clone();this.undo=function(){ea.copyBitmapRect(F,ca.left,ca.top,F.getBounds());fa.setActiveLayer(C,Q);fa.setSelection(ca);m(C,ca,!Q,Q)};this.redo=function(){Q?ea.clearRect(ca,0):ea.clearRect(ca,16777215);Vb=new nf(F,ca.left,ca.top);fa.setActiveLayer(C,Q);fa.emptySelection();m(C,ca,!Q,Q)};this.getMemoryUsed=function(N,da){return F==da?0:F.getMemorySize()};this.redo()}function na(C){let Q=fa.getSelection(),ca=Ua,ea=new Pa(fa.width,fa.height,fa.getDefaultLayerName(!1)),F=ma,
N=F.parent;this.undo=function(){N.removeLayer(ea);fa.setSelection(Q);p();fa.setActiveLayer(F,ca)};this.redo=function(){var da=N.indexOf(F);let ia=C.bmp.getBounds(),wa,za;(N.insertLayer(da+1,ea),ia.isInside(fa.getBounds())?(wa=C.x,za=C.y):(wa=(fa.width-C.bmp.width)/2|0,za=(fa.height-C.bmp.height)/2|0),C.bmp instanceof Za)?(da=new G(C.bmp.width,C.bmp.height),da.copyPixelsFromGreyscale(C.bmp),ea.image.copyBitmapRect(da,wa,za,ia)):ea.image.copyBitmapRect(C.bmp,wa,za,ia);fa.emptySelection();p();fa.setActiveLayer(ea,
!1)};this.getMemoryUsed=function(da,ia){return C.bmp==ia?0:C.bmp.getMemorySize()};this.redo()}a|=0;c|=0;let wb=new nb("Root",T.LM_NORMAL),Wa=new mf(wb,a,c,!0),Lb=new G(a,c),Fb=new Ha(0,0,a,c),La=new Za(a,c,8),Na=new Ha(0,0,a,c),ja=new Za(a,c,32),Aa=new Ha(0,0,0,0),xa=new sh,fa=this,Qa=[],ma=wb,Ua=!1,Ja=null,kb=new Ha(0,0,0,0),bc=!1,jc=new Ha(0,0,0,0),Nb=null,Db=new th,sb=null,Vb=null,lb=[],rb=[],hb=null,Tb=0,ub=0,Rb=0,Ib=!1,Jc=!1,ec=new Set,Va=new Set,eb=null,Xb=0,Xa="smooth";this.getLayersRoot=function(){return wb};
this.getSelectionAutoSelect=function(){return jc.isEmpty()?this.getBounds():this.getSelection()};this.getSelection=function(){return jc.clone()};this.setHasUnsavedChanges=function(C){C!=bc&&(bc=C,this.emitEvent("unsavedChanges",[C]))};this.getHasUnsavedChanges=function(){return bc};this.isAddLayerMaskAllowed=function(){return!ma.mask};this.addLayerMask=function(){this.isAddLayerMaskAllowed()&&D(new L(ma))};this.isRemoveLayerMaskAllowed=function(){return null!==ma.mask};this.removeLayerMask=function(){this.isRemoveLayerMaskAllowed()&&
D(new J(ma,!1))};this.isApplyLayerMaskAllowed=function(){return null!==ma.mask&&ma instanceof Pa};this.applyLayerMask=function(C){this.isApplyLayerMaskAllowed()&&D(new J(ma,!0))};this.addLayer=function(C){let Q,ca;if(ma instanceof nb&&ma.expanded?(Q=ma,ca=ma.layers.length):ca=(Q=ma.parent).layers.indexOf(ma)+1,"group"===C){for(;Q.layers[ca]instanceof Pa&&Q.layers[ca].clip;)ca++;C=new nb(this.getDefaultLayerName(!0),T.LM_PASSTHROUGH)}else(C=new Pa(this.width,this.height,this.getDefaultLayerName(!1))).image.clearAll(16777215);
return D(new O(Q,ca,C)),C};this.addLayerObject=function(C,Q){C.addLayer(Q);C==wb&&1==wb.layers.length&&(ma=Q);p()};this.addLayerGroupObject=function(C,Q,ca){let ea=[];for(let F=0;F<ca;F++)ea.unshift(C.layers.pop());ea.forEach(F=>Q.addLayer(F));this.addLayerObject(C,Q)};this.isRemoveLayerAllowed=function(){return ma instanceof Pa?wb.getLinearizedLayerList(!1).some(C=>C instanceof Pa&&C!=ma):ma instanceof nb&&wb.getLinearizedLayerList(!1).some(C=>C instanceof Pa&&!C.hasAncestor(ma))};this.removeLayer=
function(){return!!this.isRemoveLayerAllowed()&&(D(new X(ma)),!0)};this.duplicateLayer=function(){D(new K(ma))};this.isMergeDownAllowed=function(){let C=ma.parent.indexOf(ma);return 0<C&&ma instanceof Pa&&ma.parent.layers[C-1]instanceof Pa};this.mergeDown=function(){this.isMergeDownAllowed()&&D(new Y(ma))};this.isMergeGroupAllowed=function(){return ma instanceof nb&&0<ma.getEffectiveAlpha()};this.mergeGroup=function(){this.isMergeGroupAllowed()&&D(new W(ma))};this.isMergeAllLayersAllowed=function(){return 1<
wb.getLinearizedLayerList(!1).length};this.mergeAllLayers=function(){this.isMergeAllLayersAllowed()&&D(new ka)};this.relocateLayer=function(C,Q,ca){C&&Q&&C!=Q&&!Q.hasAncestor(C)&&D(new va(C,Q,ca))};this.setLayerVisibility=function(C,Q){let ca=[];if(C.ancestorsAreVisible())C.visible!=Q&&D(new A(C,Q));else{for(;null!=C;C=C.parent)C.visible||ca.push(C);D(new A(ca,!0))}};this.expandLayerGroup=function(C,Q){C.expanded!=Q&&(C.expanded=Q,!Q&&ma.hasAncestor(C)&&this.setActiveLayer(C,!1),g(C,"expanded",!0))};
this.setLayerAlpha=function(C){ma.getAlpha()!=C&&D(new Rc(ma,C))};this.setLayerMaskLinked=function(C){ma.maskLinked!=C&&D(new $c(ma,C))};this.setLayerMaskVisible=function(C,Q){C.maskVisible!=Q&&D(new uc(C,Q))};this.setLayerBlendMode=function(C){ma.getBlendMode()!=C&&(C!=T.LM_PASSTHROUGH||ma instanceof nb)&&D(new Sc(ma,C))};this.setLayerName=function(C,Q){C.getName()!=Q&&D(new Nc(C,Q))};this.paintDab=function(C,Q,ca){hb.applyPressure(ca);0<hb.scattering&&(C+=Db.nextGaussian()*hb.curScattering/4,Q+=
Db.nextGaussian()*hb.curScattering/4);ca=Qa[hb.brushMode];C=xa.getDab(C,Q,hb);Q=new Ha(0,0,C.width,C.height);let ea=new Ha(0,0,C.width,C.height);if(ea.translate(C.x,C.y),fa.getBounds().clipSourceDest(Q,ea),!ea.isEmpty()){kb.union(ea);var F=Ua?ma.mask:ma.image;ca.paintDab(F,ea,Ib&&!Ua?Nb:F,hb,Q,C,Xb);!Ua&&ca.noMergePhase&&ma.getLockAlpha()&&F.copyAlphaFrom(Lb,ea);ca.wantsOutputAsInput&&(n(),Ib&&!Ua&&fa.fusionLayers());l(ma,ea)}};this.getDefaultLayerName=function(C){let Q=C?"Group ":"Layer ";C=C?/^Group [0-9]+$/:
/^Layer [0-9]+$/;let ca=0,ea=wb.getLinearizedLayerList(!1);for(let F=0;F<ea.length;F++){let N=ea[F];C.test(N.name)&&(ca=Math.max(ca,parseInt(N.name.substring(Q.length),10)))}return Q+(ca+1)};this.addBackgroundLayer=function(){let C=new Pa(fa.width,fa.height,this.getDefaultLayerName(!1));C.image.clearAll(4294967295);this.addLayerObject(this.getLayersRoot(),C)};this.addDefaultLayer=function(){let C=new Pa(fa.width,fa.height,this.getDefaultLayerName(!1));C.image.clearAll(16777215);this.addLayerObject(this.getLayersRoot(),
C);this.setActiveLayer(C,!1)};this.fusionLayers=function(){n();Wa.buildTree();return Nb=Wa.blendTree().image};this.upgradeMultiplyLayers=function(C){let Q=this.getLayersRoot().getLinearizedLayerList(!1,[]),ca=-1;for(var ea=0;ea<Q.length;ea++){var F=Q[ea];if(!(F instanceof Pa)||F.mask||F.blendMode>T.LM_LAST_CHIBIPAINT)throw Error("Bad layer type during multiply upgrade");F.blendMode===T.LM_MULTIPLY&&(ca=ea)}if(-1!==ca){ea=new G(this.width,this.height);let N=F=!0,da=this.getBounds();ea.clearAll(da,
16777215);for(let ia=0;ia<=ca;ia++){let wa=Q[ia];N||(F=F&&ea.hasAlphaInRect(da));wa.blendMode===T.LM_MULTIPLY&&("bake"===C?!F&&0<wa.getEffectiveAlpha()&&(100===wa.alpha?T.upgradeMultiplyOfOpaqueLayer(ea,wa.image,100,da):T.upgradeMultiplyOfTransparentLayer(ea,wa.image,wa.alpha,da),wa.setBlendMode(T.LM_MULTIPLY2)):F&&wa.setBlendMode(T.LM_MULTIPLY2));0<wa.getEffectiveAlpha()&&(N=!1,T.fuseImageOntoImage(ea,F,wa.image,wa.alpha,wa.blendMode,da,null))}}};this.isCreateClippingMaskAllowed=function(){var C=
ma.parent.indexOf(ma);C=ma.parent.layers[C-1];return ma instanceof Pa&&!ma.clip&&C instanceof Pa};this.createClippingMask=function(){this.isCreateClippingMaskAllowed()&&D(new sa(ma,!0))};this.isReleaseClippingMaskAllowed=function(){return ma instanceof Pa&&ma.clip};this.releaseClippingMask=function(){this.isReleaseClippingMaskAllowed()&&D(new sa(ma,!1))};this.setActiveLayer=function(C,Q){if(C){let ca=(Q=C.mask&&Q)!=Ua;if(ma!=C||ca){let ea=ma;ma=C;Ua=Q;x();this.emitEvent("changeActiveLayer",[ea,C,
Ua]);ca&&this.emitEvent("editModeChanged",[Ua?Dc.EDITING_MODE_MASK:Dc.EDITING_MODE_IMAGE]);Ja&&Ja.layer==ea&&(Q?Ja.setLayer(C):this.closeMaskView())}}};this.closeMaskView=function(){Ja.close();Ja=null};this.toggleMaskView=function(){return null!=Ja&&Ja.isOpen()?this.closeMaskView():Ja=ma.mask?new uh(ma,n):null,Ja};this.selectTopmostVisibleLayer=function(){let C=wb.getLinearizedLayerList(!1);for(var Q=C.length-1;0<=Q;Q--)if(C[Q]instanceof Pa&&0<C[Q].getEffectiveAlpha()){this.setActiveLayer(C[Q],!1);
return}for(Q=C.length-1;0<=Q;Q--)if(C[Q]instanceof Pa){this.setActiveLayer(C[Q],!1);return}this.setActiveLayer(C[C.length-1],!1)};this.getActiveLayer=function(){return ma};this.isEditingMask=function(){return Ua};this.isActiveLayerDrawable=function(){return Ua&&ma.mask||!Ua&&ma instanceof Pa};this.getUndoMemoryUsed=function(){let C=0;for(let Q of rb)C+=Q.getMemoryUsed(!0,null);for(let Q of lb)C+=Q.getMemoryUsed(!1,null);return C};this.isUndoAllowed=function(){return 0<lb.length};this.isRedoAllowed=
function(){return 0<rb.length};this.undo=function(){if(this.isUndoAllowed()){this.setHasUnsavedChanges(!0);var C=lb.pop();C.undo();rb.push(C)}};this.redo=function(){if(this.isRedoAllowed()){this.setHasUnsavedChanges(!0);var C=rb.pop();C.redo();lb.push(C)}};this.performIdleTasks=function(){v();n();Wa.buildTree()};this.compactUndo=function(){0<lb.length&&lb[lb.length-1].compact()};this.clearHistory=function(){lb=[];rb=[]};this.colorPicker=function(C,Q){return Ua&&ma.mask?Bb.greyToRGB(ma.mask.getPixel(~~C,
~~Q)):16777215&Nb.getPixel(~~C,~~Q)};this.setSelection=function(C){jc.set(C);jc.roundNearest();jc.clipTo(this.getBounds())};this.emptySelection=function(){jc.makeEmpty()};this.floodFill=function(C,Q){let ca=k();ca&&(v(),kb=this.getBounds(),ca.floodFill(~~C,~~Q,4278190080|Xb),D(new H),l(ma,this.getBounds()))};this.gradientFill=function(C,Q,ca,ea,F){let N=this.getSelectionAutoSelect(),da=k();da&&(v(),kb=N.clone(),da.gradient(N,C,Q,ca,ea,F,!1),this.getLayerLockAlpha()&&da instanceof G&&da.copyAlphaFrom(Lb,
N),D(new H),l(ma,N))};this.fill=function(C){let Q=this.getSelectionAutoSelect(),ca=k();ca&&(v(),kb=Q.clone(),ca.clearRect(Q,C),D(new H),l(ma,Q))};this.clear=function(){Ua?this.fill(0):this.fill(16777215)};this.flip=function(C){let Q=this.getSelection(),ca=Q.isEmpty();var ea=ca&&ma instanceof Pa&&ma.mask&&ma.maskLinked;let F=(!Ua||ea)&&ma instanceof Pa;ea=(Ua||ea)&&ma.mask;C=C?"copyRegionHFlip":"copyRegionVFlip";(F||ea)&&(ca&&(Q=this.getBounds()),kb=Q.clone(),F&&(r(),ma.image[C](Q,Lb)),ea&&(u(),ma.mask[C](Q,
La)),D(new H(F,ea)),m(ma,Q,F,ea))};this.hFlip=function(){this.flip(!0)};this.vFlip=function(){this.flip(!1)};this.monochromaticNoise=function(){let C=this.getSelectionAutoSelect(),Q=k();Q&&(v(),kb=C.clone(),Q.fillWithNoise(C),D(new H),l(ma,C))};this.isColorNoiseAllowed=function(){return!this.isEditingMask()&&this.isActiveLayerDrawable()};this.colorNoise=function(){if(this.isColorNoiseAllowed()){let C=this.getSelectionAutoSelect();v();kb=C.clone();ma.image.fillWithColorNoise(C);D(new H(!0,!1));m(ma,
C,!0,!1)}};this.invert=function(){let C=this.getSelectionAutoSelect(),Q=k();Q&&(v(),kb=C.clone(),Q.invert(C),D(new H),l(ma,C))};this.brightnessToOpacity=function(){let C=this.getSelectionAutoSelect(),Q=k();Q&&(v(),kb=C.clone(),Q.brightnessToOpacity(C),D(new H),l(ma,C))};this.boxBlur=function(C,Q,ca){let ea=this.getSelectionAutoSelect(),F=k();if(F){v();kb=ea.clone();for(let N=0;N<ca;N++)F.boxBlur(ea,C,Q);D(new H);l(ma,ea)}};this.rectangleSelection=function(C){C=C.clone();C.clipTo(this.getBounds());
D(new S(this.getSelection(),C));this.setSelection(C)};this.move=function(C,Q,ca){if(Q|=0,0!=(C|=0)||0!=Q){var ea=0<lb.length?lb[lb.length-1]:null;!ca&&ea instanceof vc&&ea.layer==this.getActiveLayer()?(ea.amend(C,Q),rb=[],this.setHasUnsavedChanges(!0)):(C=new vc(C,Q,ca),D(C),C.redo())}};this.setTransformInterpolation=function(C){Xa=C;sb instanceof fc&&sb.setInterpolation(C)};this.transformAffineAbort=function(){sb instanceof fc&&(sb.undo(),sb=null,d(!0))};this.transformAffineBegin=function(){if(sb instanceof
fc)return{transform:sb.getTransform(),rect:sb.getInitialTransformRect(),selection:sb.getInitialSelectionRect()};let C=new Kb,Q;return(Q=new fc(C,Xa)).getInitialTransformRect().isEmpty()?null:(sb=Q,Jc=!0,{transform:C,rect:Q.getInitialTransformRect(),selection:Q.getInitialSelectionRect()})};this.transformAffineFinish=function(){sb instanceof fc&&(D(sb),sb=null,d(!0))};this.transformAffineAmend=function(C){sb instanceof fc&&sb.amend(C)};this.isCopySelectionAllowed=this.isCutSelectionAllowed=function(){return!this.getSelection().isEmpty()&&
null!==k()};this.cutSelection=function(){this.isCutSelectionAllowed()&&D(new ya(ma,Ua,this.getSelection()))};this.copySelection=function(){if(this.isCopySelectionAllowed()){let C=fa.getSelection();Vb=new nf(k().cloneRect(C),C.left,C.top)}};this.isCopySelectionMergedAllowed=function(){return!this.getSelection().isEmpty()};this.copySelectionMerged=function(){if(this.isCopySelectionMergedAllowed()){let C=fa.getSelection();Vb=new nf(this.fusionLayers().cloneRect(C),C.left,C.top)}};this.isPasteClipboardAllowed=
function(){return!this.isClipboardEmpty()};this.pasteClipboard=function(){this.isPasteClipboardAllowed()&&D(new na(Vb))};this.getClipboard=function(){return Vb};this.setClipboard=function(C){Vb=C};this.isClipboardEmpty=function(){return null==Vb};this.setSampleAllLayers=function(C){Ib=C};this.getLayerLockAlpha=function(){return this.getActiveLayer().getLockAlpha()};this.setLayerLockAlpha=function(C){ma.getLockAlpha()!=C&&D(new Wb(ma,C))};this.setForegroundColor=function(C){Xb=C};this.setBrush=function(C){hb=
C};this.setBrushTexture=function(C){xa.setTexture(C)};this.beginStroke=function(C,Q,ca){return null!==hb&&!!this.isActiveLayerDrawable()&&(v(),kb.makeEmpty(),ja.clearAll(0),Aa.makeEmpty(),Tb=C,ub=Q,Rb=ca,Jc=!0,Qa[hb.brushMode].beginStroke(),this.paintDab(C,Q,ca),!0)};this.continueStroke=function(C,Q,ca){if(null!=hb){var ea=Math.sqrt((Tb-C)*(Tb-C)+(ub-Q)*(ub-Q)),F=Math.max(hb.minSpacing,hb.curSize*hb.spacing);if(ea>F){let N=Tb,da=ub,ia=Rb;ea=(F-.001)/ea;for(F=ea;1>=F;F+=ea)N=F*C+(1-F)*Tb,da=F*Q+(1-
F)*ub,ia=F*ca+(1-F)*Rb,this.paintDab(N,da,ia);Tb=N;ub=da;Rb=ia}}};this.endStroke=function(){null!=hb&&(n(),Qa[hb.brushMode].endStroke(),kb.clipTo(this.getBounds()),kb.isEmpty()||(D(new H),v()),d(!1))};this.hasAlpha=function(){return Nb.hasAlpha()};this.getFlatPNG=function(C){return this.fusionLayers(),Nb.getAsPNG(C)};this.getFlatPNGBuffer=function(C){return this.fusionLayers(),Nb.getAsPNGBuffer(C)};this.isSimpleDrawing=function(){return 1==wb.layers.length&&wb.layers[0]instanceof Pa&&!wb.layers[0].mask&&
100==wb.layers[0].getEffectiveAlpha()};H.prototype=Object.create(zc.prototype);H.prototype.constructor=H;L.prototype=Object.create(zc.prototype);L.prototype.constructor=L;J.prototype=Object.create(zc.prototype);J.prototype.constructor=J;O.prototype=Object.create(zc.prototype);O.prototype.constructor=O;K.prototype=Object.create(zc.prototype);K.prototype.constructor=K;X.prototype=Object.create(zc.prototype);X.prototype.constructor=X;W.prototype=Object.create(zc.prototype);W.prototype.constructor=W;
Y.prototype=Object.create(zc.prototype);Y.prototype.constructor=Y;ka.prototype=Object.create(zc.prototype);ka.prototype.constructor=ka;va.prototype=Object.create(zc.prototype);va.prototype.constructor=va;let Rc=Ia("alpha",!0),Sc=Ia("blendMode",!0),A=Ia("visible",!0),sa=Ia("clip",!0),uc=Ia("maskVisible",!0),Nc=Ia("name",!1),Wb=Ia("lockAlpha",!1),$c=Ia("maskLinked",!1);S.prototype=Object.create(zc.prototype);S.prototype.constructor=S;class ta extends zc{undo(){let C=[];this.dstRect.isEmpty()||C.push(this.dstRect);
this.erasesSourceRect&&(C.push(this.srcRect),C=Ha.union(C));this.movingLayers.forEach(Q=>{this.hasFullUndo?C.forEach(ca=>{Q.moveImage&&Q.layer.image.copyBitmapRect(Q.imageUndo,ca.left,ca.top,ca);Q.moveMask&&Q.layer.mask.copyBitmapRect(Q.maskUndo,ca.left,ca.top,ca)}):(Q.moveImage&&Q.imageRect.forEach((ca,ea)=>{Q.layer.image.copyBitmapRect(ca,ea.left,ea.top,ca.getBounds())}),Q.moveMask&&Q.maskRect.forEach((ca,ea)=>{Q.layer.mask.copyBitmapRect(ca,ea.left,ea.top,ca.getBounds())}))});m(this.movingLayers.map(Q=>
Q.layer),C.reduce((Q,ca)=>Q.getUnion(ca),new Ha(0,0,0,0)),!0,!0);this.dstRect.makeEmpty();fa.setSelection(this.fromSelection);fa.setActiveLayer(this.layer,this.fromMaskMode);b()}getMemoryUsed(C,Q){return this.movingLayers.map(function(ca){return[ca.imageUndo,ca.maskUndo,ca.imageRect,ca.maskRect].map(ea=>ea?ea.getMemorySize():0).reduce(De,0)}).reduce(De,0)}buildFullUndo(){this.hasFullUndo||(this.movingLayers.forEach(function(C){C.moveImage&&(C.imageUndo=C.layer.image.clone());C.moveMask&&(C.maskUndo=
C.layer.mask.clone());C.imageRect.clear();C.maskRect.clear()}),this.hasFullUndo=!0)}compact(){if(this.hasFullUndo){let C=[];this.dstRect.isEmpty()||C.push(this.dstRect);this.erasesSourceRect&&(C.push(this.srcRect),C=Ha.union(C));this.movingLayers.forEach(Q=>{Q.imageRect.clear();Q.maskRect.clear();C.forEach(ca=>{Q.moveImage&&Q.imageRect.set(ca,Q.imageUndo.cloneRect(ca));Q.moveMask&&Q.maskRect.set(ca,Q.maskUndo.cloneRect(ca))});Q.imageUndo=null;Q.maskUndo=null});this.hasFullUndo=!1}}constructor(){super();
this.layer=ma;this.fromSelection=fa.getSelection();this.fromMaskMode=Ua;this.movingWholeLayer=this.fromSelection.isEmpty();this.movingImage=!Ua||this.movingWholeLayer&&this.layer.maskLinked;this.movingMask=Ua||this.movingWholeLayer&&this.layer.maskLinked;this.erasesSourceRect=this.hasFullUndo=!1;this.dstRect=new Ha(0,0,0,0);this.movingLayers=[{layer:this.layer,moveImage:this.layer instanceof Pa&&this.movingImage,moveMask:null!==this.layer.mask&&this.movingMask,imageRect:new Map,maskRect:new Map}];
this.layer instanceof nb&&this.movingImage&&this.movingWholeLayer&&(this.movingLayers=this.movingLayers.concat(this.layer.getLinearizedLayerList(!1).map(ea=>({layer:ea,moveImage:ea instanceof Pa,moveMask:null!==ea.mask&&ea.maskLinked,imageRect:new Map,maskRect:new Map}))));let C=new Ha(0,0,0,0);if(this.movingWholeLayer){this.srcRect=fa.getBounds();for(var Q=0;Q<this.movingLayers.length&&!C.equals(this.srcRect);Q++){var ca=this.movingLayers[Q];ca.moveMask&&C.union(ca.layer.mask.getValueBounds(this.srcRect,
255));ca.moveImage&&C.union(ca.layer.image.getNonTransparentBounds(this.srcRect))}}else for(this.srcRect=this.fromSelection.clone(),Q=0;Q<this.movingLayers.length&&!C.equals(this.srcRect);Q++)ca=this.movingLayers[Q],ca.moveMask&&C.union(ca.layer.mask.getValueBounds(this.srcRect,0)),ca.moveImage&&C.union(ca.layer.image.getNonTransparentBounds(this.srcRect));this.srcRect=C}}class fc extends ta{buildFullUndo(){this.hasFullUndo||(super.buildFullUndo(),this.movingLayers.forEach(C=>{if(C.moveImage){var Q=
Zc(this.srcRect.getWidth(),this.srcRect.getHeight());Q.getContext("2d").putImageData(C.layer.image.getImageData(),-this.srcRect.left,-this.srcRect.top,this.srcRect.left,this.srcRect.top,this.srcRect.getWidth(),this.srcRect.getHeight());C.imageSourceCanvas=Q}C.moveMask&&(Q=Zc(this.srcRect.getWidth(),this.srcRect.getHeight()),Q.getContext("2d").putImageData(C.layer.mask.getImageData(this.srcRect.left,this.srcRect.top,this.srcRect.getWidth(),this.srcRect.getHeight()),0,0),C.maskSourceCanvas=Q)}),this.composeCanvas=
Zc(fa.width,fa.height),this.composeCanvasContext=this.composeCanvas.getContext("2d",{willReadFrequently:!0}),pf(this.composeCanvasContext,"smooth"==this.interpolation),this.junk=this.composeCanvasContext.getImageData(0,0,1,1))}redo(){this.buildFullUndo();var C=this.dstRect.clone();let Q=this.srcRect.toPoints();this.affineTransform.transformPoints(Q);this.dstRect.set(Ha.createBoundingBox(Q).roundContain().clipTo(fa.getBounds()));let ca=Ha.subtract(this.dstRect,this.srcRect),ea=Ha.subtract(C.isEmpty()?
this.srcRect:this.srcRect.getIntersection(C),this.dstRect),F=this.srcRect.getIntersection(this.dstRect),N=Ha.subtract(C,[this.dstRect,this.srcRect]);C=this.srcRect.getUnion(this.dstRect).getUnion(C);(this.movingLayers.forEach(da=>{if(ea.forEach(ia=>{da.moveImage&&da.layer.image.clearRect(ia,16777215);da.moveMask&&(this.movingWholeLayer?da.layer.mask.clearRect(ia,255):da.layer.mask.clearRect(ia,0))}),!this.dstRect.isEmpty()){if(da.moveImage){let ia=da.imageUndo.getImageData();ca.forEach(wa=>{this.composeCanvasContext.putImageData(ia,
0,0,wa.left,wa.top,wa.getWidth(),wa.getHeight())});this.composeCanvasContext.clearRect(F.left,F.top,F.getWidth(),F.getHeight());this.composeCanvasContext.save();this.composeCanvasContext.setTransform(this.affineTransform.m[0],this.affineTransform.m[1],this.affineTransform.m[2],this.affineTransform.m[3],this.affineTransform.m[4],this.affineTransform.m[5]);this.composeCanvasContext.drawImage(da.imageSourceCanvas,this.srcRect.left,this.srcRect.top);this.composeCanvasContext.restore();da.layer.image.copyBitmapRect(new G(this.composeCanvasContext.getImageData(this.dstRect.left,
this.dstRect.top,this.dstRect.getWidth(),this.dstRect.getHeight())),this.dstRect.left,this.dstRect.top,new Ha(0,0,this.dstRect.getWidth(),this.dstRect.getHeight()))}da.moveMask&&(ca.forEach(ia=>{this.composeCanvasContext.putImageData(da.layer.mask.getImageData(ia.left,ia.top,ia.getWidth(),ia.getHeight()),ia.left,ia.top)}),this.movingWholeLayer?this.composeCanvasContext.fillStyle="#FFF":this.composeCanvasContext.fillStyle="#000",this.composeCanvasContext.fillRect(F.left,F.top,F.getWidth(),F.getHeight()),
this.composeCanvasContext.save(),this.composeCanvasContext.setTransform(this.affineTransform.m[0],this.affineTransform.m[1],this.affineTransform.m[2],this.affineTransform.m[3],this.affineTransform.m[4],this.affineTransform.m[5]),this.composeCanvasContext.drawImage(da.maskSourceCanvas,this.srcRect.left,this.srcRect.top),this.composeCanvasContext.restore(),da.layer.mask.pasteImageData(this.composeCanvasContext.getImageData(this.dstRect.left,this.dstRect.top,this.dstRect.getWidth(),this.dstRect.getHeight()),
this.dstRect.left,this.dstRect.top))}N.forEach(ia=>{da.moveImage&&da.layer.image.copyBitmapRect(da.imageUndo,ia.left,ia.top,ia);da.moveMask&&da.layer.mask.copyBitmapRect(da.maskUndo,ia.left,ia.top,ia)})}),m(this.movingLayers.map(da=>da.layer),C,!0,!0),this.fromSelection.isEmpty())||(C=this.fromSelection.toPoints(),this.affineTransform.transformPoints(C),(C=Ha.createBoundingBox(C)).roundNearest(),fa.setSelection(C),b());fa.setActiveLayer(this.layer,this.fromMaskMode)}amend(C){this.hasFullUndo||this.undo();
this.affineTransform=C.clone();this.redo()}setInterpolation(C){C!=this.interpolation&&(this.interpolation=C,this.composeCanvasContext&&pf(this.composeCanvasContext,"smooth"==this.interpolation),this.undo(),this.redo())}compact(){super.compact();this.composeCanvasContext=this.composeCanvas=null;this.movingLayers.forEach(C=>C.imageSourceCanvas=null)}getMemoryUsed(C,Q){C=super.getMemoryUsed(C,Q);return C+=ng(this.composeCanvas),C+=this.movingLayers.map(ca=>ng(ca.imageSourceCanvas)).reduce(De,0)}getTransform(){return this.affineTransform.clone()}getInitialTransformRect(){return this.srcRect.clone()}getInitialSelectionRect(){return this.fromSelection.clone()}constructor(C,
Q){super();this.erasesSourceRect=!0;this.affineTransform=C.clone();this.interpolation=Q||"smooth";this.composeCanvasContext=this.composeCanvas=null}}class vc extends ta{redo(){var C=this.dstRect.clone();let Q,ca,ea=C.clone(),F=null;(this.buildFullUndo(),this.dstRect.set(this.srcRect),this.dstRect.translate(this.offsetX,this.offsetY),Q=this.dstRect.clone(),this.dstRect.clipTo(fa.getBounds()),this.erasesSourceRect?(F=C.isEmpty()?this.srcRect:this.srcRect.getIntersection(C),ea.union(F),ca=C.subtract(this.srcRect)):
ca=[C],this.movingLayers.forEach(N=>{F&&(N.moveImage&&N.layer.image.clearRect(F,16777215),N.moveMask&&N.layer.mask.clearRect(F,255*!!this.movingWholeLayer));ca.forEach(function(da){N.moveImage&&N.layer.image.copyBitmapRect(N.imageUndo,da.left,da.top,da);N.moveMask&&N.layer.mask.copyBitmapRect(N.maskUndo,da.left,da.top,da)});N.moveImage&&T.normalFuseImageOntoImageAtPosition(N.layer.image,N.imageUndo,Q.left,Q.top,this.srcRect);N.moveMask&&N.layer.mask.copyBitmapRect(N.maskUndo,Q.left,Q.top,this.srcRect)}),
ea.union(this.dstRect),m(this.movingLayers.map(N=>N.layer),ea,!0,!0),this.fromSelection.isEmpty())||(C=this.fromSelection.clone(),C.translate(this.offsetX,this.offsetY),fa.setSelection(C),b())}amend(C,Q){this.hasFullUndo||this.undo();this.offsetX+=C;this.offsetY+=Q;this.redo()}constructor(C,Q,ca){super();this.offsetX=C;this.offsetY=Q;this.erasesSourceRect=!ca}}ya.prototype=Object.create(zc.prototype);ya.prototype.constructor=ya;na.prototype=Object.create(zc.prototype);na.prototype.constructor=na;
Qa=[Nd,vh,wh,xh,fe,yh,zh,Ah].map(C=>new C(ja,Aa));this.width=a;this.height=c}function vb(a,c,d){this.data=a;this.eof=!1;this.start=void 0===c?0:c;this.end=void 0===d?a.length:d;this.pos=this.start}function Od(a){for(var c=a.length;0<=--c;)a[c]=0}function qf(a,c,d,b,h){this.static_tree=a;this.extra_bits=c;this.extra_base=d;this.elems=b;this.max_length=h;this.has_stree=a&&a.length}function rf(a,c){this.dyn_tree=a;this.max_code=0;this.stat_desc=c}function og(a){return 256>a?ge[a]:ge[256+(a>>>7)]}function he(a,
c){a.pending_buf[a.pending++]=255&c;a.pending_buf[a.pending++]=c>>>8&255}function Ec(a,c,d){a.bi_valid>16-d?(a.bi_buf|=c<<a.bi_valid&65535,he(a,a.bi_buf),a.bi_buf=c>>16-a.bi_valid,a.bi_valid+=d-16):(a.bi_buf|=c<<a.bi_valid&65535,a.bi_valid+=d)}function ad(a,c,d){Ec(a,d[2*c],d[2*c+1])}function pg(a,c){var d=0;do d|=1&a,a>>>=1,d<<=1;while(0<--c);return d>>>1}function qg(a,c,d){var b,h=Array(16),p=0;for(b=1;15>=b;b++)h[b]=p=p+d[b-1]<<1;for(d=0;d<=c;d++)b=a[2*d+1],0!==b&&(a[2*d]=pg(h[b]++,b))}function rg(a){var c;
for(c=0;286>c;c++)a.dyn_ltree[2*c]=0;for(c=0;30>c;c++)a.dyn_dtree[2*c]=0;for(c=0;19>c;c++)a.bl_tree[2*c]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function sg(a){8<a.bi_valid?he(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function tg(a,c,d,b){var h=2*c,p=2*d;return a[h]<a[p]||a[h]===a[p]&&b[c]<=b[d]}function sf(a,c,d){for(var b=a.heap[d],h=d<<1;h<=a.heap_len&&(h<a.heap_len&&tg(c,a.heap[h+1],a.heap[h],a.depth)&&h++,!tg(c,b,a.heap[h],
a.depth));)a.heap[d]=a.heap[h],d=h,h<<=1;a.heap[d]=b}function ug(a,c,d){var b,h,p=0;if(0!==a.last_lit){do{var g=a.pending_buf[a.d_buf+2*p]<<8|a.pending_buf[a.d_buf+2*p+1];var e=a.pending_buf[a.l_buf+p];p++;0===g?ad(a,e,c):(ad(a,(b=ie[e])+256+1,c),0!==(h=tf[b])&&Ec(a,e-uf[b],h),ad(a,b=og(--g),d),0!==(h=Ee[b])&&Ec(a,g-Fe[b],h))}while(p<a.last_lit)}ad(a,256,c)}function vf(a,c){var d,b=c.dyn_tree;var h=c.stat_desc.static_tree;var p=c.stat_desc.has_stree,g=c.stat_desc.elems,e=-1;var m=0;a.heap_len=0;for(a.heap_max=
573;m<g;m++)0!==b[2*m]?(a.heap[++a.heap_len]=e=m,a.depth[m]=0):b[2*m+1]=0;for(;2>a.heap_len;)b[2*(d=a.heap[++a.heap_len]=2>e?++e:0)]=1,a.depth[d]=0,a.opt_len--,p&&(a.static_len-=h[2*d+1]);c.max_code=e;for(m=a.heap_len>>1;1<=m;m--)sf(a,b,m);d=g;do m=a.heap[1],a.heap[1]=a.heap[a.heap_len--],sf(a,b,1),h=a.heap[1],a.heap[--a.heap_max]=m,a.heap[--a.heap_max]=h,b[2*d]=b[2*m]+b[2*h],a.depth[d]=(a.depth[m]>=a.depth[h]?a.depth[m]:a.depth[h])+1,b[2*m+1]=b[2*h+1]=d,a.heap[1]=d++,sf(a,b,1);while(2<=a.heap_len);
a.heap[--a.heap_max]=a.heap[1];var l,k,n,r,u;m=c.dyn_tree;d=c.max_code;h=c.stat_desc.static_tree;p=c.stat_desc.has_stree;g=c.stat_desc.extra_bits;var v=c.stat_desc.extra_base,x=c.stat_desc.max_length,D=0;for(n=0;15>=n;n++)a.bl_count[n]=0;m[2*a.heap[a.heap_max]+1]=0;for(c=a.heap_max+1;573>c;c++)(n=m[2*m[2*(l=a.heap[c])+1]+1]+1)>x&&(n=x,D++),m[2*l+1]=n,l>d||(a.bl_count[n]++,r=0,l>=v&&(r=g[l-v]),u=m[2*l],a.opt_len+=u*(n+r),!p||(a.static_len+=u*(h[2*l+1]+r)));if(0!==D){do{for(n=x-1;0===a.bl_count[n];)n--;
a.bl_count[n]--;a.bl_count[n+1]+=2;a.bl_count[x]--;D-=2}while(0<D);for(n=x;0!==n;n--)for(l=a.bl_count[n];0!==l;)(k=a.heap[--c])>d||(m[2*k+1]!==n&&(a.opt_len+=(n-m[2*k+1])*m[2*k],m[2*k+1]=n),l--)}qg(b,e,a.bl_count)}function vg(a,c,d){var b,h=-1,p=c[1],g=0,e=7,m=4;0===p&&(e=138,m=3);c[2*(d+1)+1]=65535;for(b=0;b<=d;b++){var l=p;p=c[2*(b+1)+1];++g<e&&l===p||(g<m?a.bl_tree[2*l]+=g:0!==l?(l!==h&&a.bl_tree[2*l]++,a.bl_tree[32]++):10>=g?a.bl_tree[34]++:a.bl_tree[36]++,g=0,h=l,0===p?(e=138,m=3):l===p?(e=6,
m=3):(e=7,m=4))}}function wg(a,c,d){var b,h,p=-1,g=c[1],e=0,m=7,l=4;0===g&&(m=138,l=3);for(b=0;b<=d;b++)if(h=g,g=c[2*(b+1)+1],!(++e<m)||h!==g){if(e<l){do ad(a,h,a.bl_tree);while(0!=--e)}else 0!==h?(h!==p&&(ad(a,h,a.bl_tree),e--),ad(a,16,a.bl_tree),Ec(a,e-3,2)):10>=e?(ad(a,17,a.bl_tree),Ec(a,e-3,3)):(ad(a,18,a.bl_tree),Ec(a,e-11,7));e=0;p=h;0===g?(m=138,l=3):h===g?(m=6,l=3):(m=7,l=4)}}function xg(a,c,d,b){Ec(a,+!!b,3);sg(a);he(a,d);he(a,~d);$a.arraySet(a.pending_buf,a.window,c,d,a.pending);a.pending+=
d}function nd(a,c){return a.msg=zd[c],c}function od(a){for(var c=a.length;0<=--c;)a[c]=0}function pd(a){var c=a.state,d=c.pending;d>a.avail_out&&(d=a.avail_out);0!==d&&($a.arraySet(a.output,c.pending_buf,c.pending_out,d,a.next_out),a.next_out+=d,c.pending_out+=d,a.total_out+=d,a.avail_out-=d,c.pending-=d,0===c.pending&&(c.pending_out=0))}function mc(a,c){Bh(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,c);a.block_start=a.strstart;pd(a.strm)}function Eb(a,c){a.pending_buf[a.pending++]=
c}function je(a,c){a.pending_buf[a.pending++]=c>>>8&255;a.pending_buf[a.pending++]=255&c}function yg(a,c){var d,b,h=a.max_chain_length,p=a.strstart,g=a.prev_length,e=a.nice_match,m=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,l=a.window,k=a.w_mask,n=a.prev,r=a.strstart+258,u=l[p+g-1],v=l[p+g];a.prev_length>=a.good_match&&(h>>=2);e>a.lookahead&&(e=a.lookahead);do if(l[(d=c)+g]===v&&l[d+g-1]===u&&l[d]===l[p]&&l[++d]===l[p+1]){p+=2;for(d++;l[++p]===l[++d]&&l[++p]===l[++d]&&l[++p]===l[++d]&&l[++p]===
l[++d]&&l[++p]===l[++d]&&l[++p]===l[++d]&&l[++p]===l[++d]&&l[++p]===l[++d]&&p<r;);if(b=258-(r-p),p=r-258,b>g){if(a.match_start=c,g=b,b>=e)break;u=l[p+g-1];v=l[p+g]}}while((c=n[c&k])>m&&0!=--h);return g<=a.lookahead?g:a.lookahead}function Ad(a){var c,d,b=a.w_size;do{if(d=a.window_size-a.lookahead-a.strstart,a.strstart>=b+(b-262)){$a.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;var h=c=a.hash_size;do{var p=a.head[--h];a.head[h]=p>=b?p-b:0}while(--c);h=c=b;do p=a.prev[--h],
a.prev[h]=p>=b?p-b:0;while(--c);d+=b}if(0===a.strm.avail_in)break;h=a.strm;p=a.window;var g=a.strstart+a.lookahead,e=h.avail_in;if(c=(e>d&&(e=d),0===e)?0:(h.avail_in-=e,$a.arraySet(p,h.input,h.next_in,e,g),1===h.state.wrap?h.adler=Pd(h.adler,p,e,g):2===h.state.wrap&&(h.adler=gc(h.adler,p,e,g)),h.next_in+=e,h.total_in+=e,e),a.lookahead+=c,3<=a.lookahead+a.insert)for(d=a.strstart-a.insert,a.ins_h=a.window[d],a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^
a.window[d+3-1])&a.hash_mask,a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++,a.insert--,!(3>a.lookahead+a.insert)););}while(262>a.lookahead&&0!==a.strm.avail_in)}function wf(a,c){for(var d,b;;){if(262>a.lookahead){if(Ad(a),262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}if(d=0,3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==d&&a.strstart-d<=a.w_size-262&&(a.match_length=
yg(a,d)),3<=a.match_length)if(b=qd(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+
1])&a.hash_mask;else b=qd(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(b&&(mc(a,!1),0===a.strm.avail_out))return 1}return(a.insert=2>a.strstart?a.strstart:2,4===c)?(mc(a,!0),0===a.strm.avail_out)?3:4:a.last_lit&&(mc(a,!1),0===a.strm.avail_out)?1:2}function Qd(a,c){for(var d,b,h;;){if(262>a.lookahead){if(Ad(a),262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}if(d=0,3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=
a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==d&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-262&&(a.match_length=yg(a,d),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2)),3<=a.prev_length&&a.match_length<=a.prev_length){h=a.strstart+a.lookahead-3;b=qd(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=
h&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!=--a.prev_length);if(a.match_available=0,a.match_length=2,a.strstart++,b&&(mc(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if(qd(a,0,a.window[a.strstart-1])&&mc(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return(a.match_available&&(qd(a,0,a.window[a.strstart-
1]),a.match_available=0),a.insert=2>a.strstart?a.strstart:2,4===c)?(mc(a,!0),0===a.strm.avail_out)?3:4:a.last_lit&&(mc(a,!1),0===a.strm.avail_out)?1:2}function bd(a,c,d,b,h){this.good_length=a;this.max_lazy=c;this.nice_length=d;this.max_chain=b;this.func=h}function Ch(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=
null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new $a.Buf16(1146);this.dyn_dtree=new $a.Buf16(122);this.bl_tree=new $a.Buf16(78);od(this.dyn_ltree);od(this.dyn_dtree);od(this.bl_tree);
this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new $a.Buf16(16);this.heap=new $a.Buf16(573);od(this.heap);this.heap_max=this.heap_len=0;this.depth=new $a.Buf16(573);od(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function zg(a,c){if(65534>c&&(a.subarray&&Ag||!a.subarray&&Bg))return String.fromCharCode.apply(null,$a.shrinkBuf(a,c));for(var d="",b=0;b<c;b++)d+=String.fromCharCode(a[b]);return d}
function Bd(a){if(!(this instanceof Bd))return new Bd(a);this.options=$a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});var c,d,b;a=this.options;a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new xf;this.strm.avail_out=0;var h=this.strm;var p=a.level;var g=a.method,e=a.windowBits,m=a.memLevel,l=a.strategy;if(h){var k,n,r,u=1;if(-1===
p&&(p=6),0>e?(u=0,e=-e):15<e&&(u=2,e-=16),1>m||9<m||8!==g||8>e||15<e||0>p||9<p||0>l||4<l)p=nd(h,-2);else{8===e&&(e=9);var v=new Ch;p=(h.state=v,v.strm=h,v.wrap=u,v.gzhead=null,v.w_bits=e,v.w_size=1<<v.w_bits,v.w_mask=v.w_size-1,v.hash_bits=m+7,v.hash_size=1<<v.hash_bits,v.hash_mask=v.hash_size-1,v.hash_shift=~~((v.hash_bits+3-1)/3),v.window=new $a.Buf8(2*v.w_size),v.head=new $a.Buf16(v.hash_size),v.prev=new $a.Buf16(v.w_size),v.lit_bufsize=1<<m+6,v.pending_buf_size=4*v.lit_bufsize,v.pending_buf=new $a.Buf8(v.pending_buf_size),
v.d_buf=+v.lit_bufsize,v.l_buf=3*v.lit_bufsize,v.level=p,v.strategy=l,v.method=g,0===(r=h&&h.state?(h.total_in=h.total_out=0,h.data_type=2,(k=h.state).pending=0,k.pending_out=0,0>k.wrap&&(k.wrap=-k.wrap),k.status=k.wrap?42:113,h.adler=+(2!==k.wrap),k.last_flush=0,Dh(k),0):nd(h,-2))&&((n=h.state).window_size=2*n.w_size,od(n.head),n.max_lazy_match=ke[n.level].max_lazy,n.good_match=ke[n.level].good_length,n.nice_match=ke[n.level].nice_length,n.max_chain_length=ke[n.level].max_chain,n.strstart=0,n.block_start=
0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),r)}}else p=-2;if(0!==p)throw Error(zd[p]);if(a.header&&(c=this.strm,d=a.header,c&&c.state&&2===c.state.wrap&&(c.state.gzhead=d)),a.dictionary){if(b="string"==typeof a.dictionary?yf(a.dictionary):"[object ArrayBuffer]"===Cg.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary,0!==(p=Eh(this.strm,b)))throw Error(zd[p]);this._dict_set=!0}}function zf(a,c){c=new Bd(c);if(c.push(a,!0),c.err)throw c.msg||zd[c.err];
return c.result}function Dg(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function Fh(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new $a.Buf16(320);this.work=new $a.Buf16(288);
this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function Eg(a,c,d,b){var h;a=a.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new $a.Buf8(a.wsize)),b>=a.wsize?($a.arraySet(a.window,c,d-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((h=a.wsize-a.wnext)>b&&(h=b),$a.arraySet(a.window,c,d-b,h,a.wnext),(b-=h)?($a.arraySet(a.window,c,d-b,b,0),a.wnext=b,a.whave=a.wsize):(a.wnext+=h,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=h))),0}function Cd(a){if(!(this instanceof
Cd))return new Cd(a);this.options=$a.assign({chunkSize:16384,windowBits:0,to:""},a||{});var c,d,b,h,p,g,e,m,l,k=this.options;k.raw&&0<=k.windowBits&&16>k.windowBits&&(k.windowBits=-k.windowBits,0===k.windowBits&&(k.windowBits=-15));0<=k.windowBits&&16>k.windowBits&&(!a||!a.windowBits)&&(k.windowBits+=32);15<k.windowBits&&48>k.windowBits&&0==(15&k.windowBits)&&(k.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new xf;this.strm.avail_out=0;a=(c=this.strm,d=k.windowBits,
c?(c.state=h=new Fh,h.window=null,0!==(p=d,b=c&&c.state?(e=c.state,0>p?(g=0,p=-p):(g=(p>>4)+1,48>p&&(p&=15)),p&&(8>p||15<p))?-2:(null!==e.window&&e.wbits!==p&&(e.window=null),e.wrap=g,e.wbits=p,c&&c.state?((m=c.state).wsize=0,m.whave=0,m.wnext=0,c&&c.state?(l=c.state,c.total_in=c.total_out=l.total=0,c.msg="",l.wrap&&(c.adler=1&l.wrap),l.mode=1,l.last=0,l.havedict=0,l.dmax=32768,l.head=null,l.hold=0,l.bits=0,l.lencode=l.lendyn=new $a.Buf32(852),l.distcode=l.distdyn=new $a.Buf32(592),l.sane=1,l.back=
-1,0):-2):-2):-2)&&(c.state=null),b):-2);if(a!==Ub.Z_OK||(this.header=new Fg,Gh(this.strm,this.header),k.dictionary&&("string"==typeof k.dictionary?k.dictionary=yf(k.dictionary):"[object ArrayBuffer]"===Gg.call(k.dictionary)&&(k.dictionary=new Uint8Array(k.dictionary)),k.raw&&(a=Hg(this.strm,k.dictionary))!==Ub.Z_OK)))throw Error(zd[a]);}function Af(a,c){c=new Cd(c);if(c.push(a,!0),c.err)throw c.msg||zd[c.err];return c.result}function Bf(a){this.version=a.readU32BE();this.width=a.readU32BE();this.height=
a.readU32BE();this.layersNb=a.readU32BE()}function Ge(a){let c=[,,,,];for(let d=0;d<c.length;d++)c[d]=String.fromCharCode(a.readByte());if(this.chunkType=c.join(""),this.chunkSize=a.readU32BE(),a.eof)throw"Truncated chunk";}function Ig(a){return{major:a>>16&65535,minor:65535&a}}function Cf(a,c){let d=new vb(new Uint8Array(Ge.HEADER_LENGTH+c));return d.writeString(a),d.writeU32BE(c),d}function Rd(){}function He(a){function c(p,g){null===g?h.emitEvent("loadingProgress",[1,"Loading your "+p.friendly+
"..."]):h.emitEvent("loadingProgress",[g,"Loading your "+p.friendly+" ("+Math.round(100*g)+"%)..."])}var d=[],b={},h=this;a.loadChibiFileUrl&&0<(""+a.loadChibiFileUrl).length?d.push({url:a.loadChibiFileUrl,friendly:"drawing layers",name:"layers",required:!0}):a.loadImageUrl&&0<(""+a.loadImageUrl).length&&d.push({url:a.loadImageUrl,friendly:"drawing",name:"flat",required:!0});a.loadSwatchesUrl&&d.push({url:a.loadSwatchesUrl,friendly:"color swatches",name:"swatches",required:!1,noProgress:!0});this.load=
function(){function p(){g.required?h.emitEvent("loadingFailure",["Failed to load your "+g.friendly+", please try again later."]):h.load()}if(0==d.length)h.emitEvent("loadingComplete",[b]);else{var g=d.shift(),e=new XMLHttpRequest;e.addEventListener("progress",function(m){c(g,m.lengthComputable&&!g.noProgress?m.loaded/m.total:null)},!1);e.addEventListener("load",function(m){if(200==this.status){let l=this.response;h.emitEvent("loadingProgress",[1,"Starting ChickenPaint..."]);setTimeout(function(){(function(k,
n){switch(k.name){case "flat":return new Promise(function(r,u){let v=new Blob([n],{type:"image/png"}),x=window.URL.createObjectURL(v);if(x){let D=new Image;D.onload=function(){let H=new Dc(this.width,this.height),L=new Pa(0,0,"Layer 1");L.image=G.createFromImage(D);H.addLayerObject(H.getLayersRoot(),L);D=null;window.URL.revokeObjectURL(x);r(H)};D.src=x}else u(null)});case "swatches":return(k=(new Rd).read(n))?Promise.resolve(k):Promise.reject(null);case "layers":return function(r,u){function v(Y){let ka;
var va=W;if(null!==va&&0!==va.length)if(null===Y||0===Y.length)Y=va;else{var Ia=new Uint8Array(va.length+Y.length);Y=(Ia.set(va,0),Ia.set(Y,va.length),Ia)}for(W=Y;W;){if(O<W.length)W=W.subarray(O),O=0;else{O-=W.length;W=null;break}switch(D){case 0:if(W.length<Ge.HEADER_LENGTH)break;if(X=new Ge(ka=new vb(W)),W=W.subarray(ka.pos),K)if("ZEND"==X.chunkType)D=45;else{"LAYR"==X.chunkType?(D=2,J=new Hh(X,K.width,K.height)):"GRUP"==X.chunkType?(D=3,J=new Ih(X,K.width,K.height)):(console.log("Unknown chunk type '"+
X.chunkType+"', attempting to skip..."),O=X.chunkSize);continue}else if("HEAD"==X.chunkType){D=1;continue}else D=5;break;case 1:if(W.length<X.chunkSize)break;if(0<Ig((K=new Bf(ka=new vb(W))).version).major){D=5;break}L=(H=new Dc(K.width,K.height)).getLayersRoot();O=X.chunkSize;D=0;continue;case 2:if(W=J.decode(W),J.done){H.addLayerObject(L,J.layer);D=0;continue}break;case 3:if(W=J.decode(W),J.done){H.addLayerGroupObject(L,J.layer,J.childLayers);D=0;continue}}break}}u=u||{};let x=new (pa(Df).Inflate)({}),
D=0,H=null,L=null,J,O=0,K=null,X=null,W=null;return(new Promise(function(Y){if(r instanceof ArrayBuffer)Y(r);else{let ka=new FileReader;ka.onload=function(){Y(this.result)};ka.readAsArrayBuffer(r)}})).then(Y=>new Promise(function(ka,va){let Ia=new Uint8Array(Y);(function(S){for(let ya=0;8>ya;ya++)if(S[ya]!="CHIBIOEK".charCodeAt(ya))return!1;return!0})(Ia)?(Ia=Ia.subarray(8),x.onData=v,x.onEnd=function(S){0===S&&45==D?(!1!==u.upgradeMultiplyLayers&&10>K.version&&H.upgradeMultiplyLayers(u.upgradeMultiplyLayers),
H.selectTopmostVisibleLayer(),ka(H)):va("Fatal error decoding ChibiFile: "+S)},x.push(Ia,!0)):va("This doesn't appear to be a ChibiPaint layers file, is it damaged?")}))}(n);default:return Promise.reject("Unexpected resource type '"+k.name+"'")}})(g,l).then(function(k){b[g.name]=k;h.load()},function(){h.emitEvent("loadingFailure",["Failed to read your "+g.friendly])})},0)}else p()},!1);e.addEventListener("error",p);c(g,g.noProgress?null:0);e.open("GET",g.url,!0);e.responseType="arraybuffer";e.send()}}}
function Ef(a){(a=a.split(/[-_]/,1)[0].toLowerCase())in Ff?(Ie=Ff[a],Gf=a):(Ie=Je,Gf="en")}function ha(a){return a in Ie?Ie[a]:a}function le(a){function c(e){null===e?p.emitEvent("savingProgress",[1,ha("Saving drawing...")]):p.emitEvent("savingProgress",[e,ha("Saving drawing...")+" ("+Math.round(100*e)+"%)"])}function d(e){p.emitEvent("savingFailure",[e])}async function b(e){try{let m=await h(e),l=`${(m/1024/1024).toFixed(3)}MB`,k=`${a.post_max_size}MB`;if(console.log("Total size of FormData:",l),
console.log("post_max_size:",k),a&&a.post_max_size&&m&&!isNaN(m)&&m>1048576*a.post_max_size){d(`${ha("The file size exceeds the server limit.")}
${ha("Limit size")}:${k}
${ha("Current size")}:${l}`);return}console.log(ha("The total size of FormData is within the acceptable range."))}catch(m){console.error("Error details:",m);d("An error occurred in the getFormDataSize function.");return}c(.5);fetch(a.url,{method:"POST",mode:"same-origin",headers:{"X-Requested-With":"chickenpaint"},body:e}).then(m=>{if(!m.ok){let l;switch(m.status){case 400:l="Bad Request";break;case 401:l="Unauthorized";break;case 403:l="Forbidden";break;case 404:l="Not Found";break;case 500:l="Internal Server Error";
break;case 502:l="Bad Gateway";break;case 503:l="Service Unavailable";break;default:l="Unknown Error"}throw Error(`${ha("Network response was not OK")} ( ${ha("HTTP status code")} ${m.status} : ${l} )`);}return m.text()}).then(m=>{/^CHIBIOK/.test(m)?(c(1),p.emitEvent("savingComplete")):d(m)}).catch(m=>{d(m.message)})}async function h(e){if(a.post_max_size)return e=Array.from(e.entries()).map(([m,l])=>"string"==typeof l?new Blob([`${m}=${l}`]):l),(new Blob(e)).size}var p=this,g=!1;a.rotation=a.rotation||
0;this.save=function(){var e,m,l,k,n;(e=new Blob([function(r){for(var u=new Uint8Array(r.length),v=0;v<r.length;v++)u[v]=r.charCodeAt(v);return u}(a.artwork.getFlatPNG(a.rotation))],{type:"image/png"}),a.artwork.isSimpleDrawing())?l=Promise.resolve(null):(k=a.artwork,n=n||{},l=Promise.resolve().then(()=>{var r,u;let v,x=new (pa(Df).Deflate)({level:7}),D=[],H=new Uint8Array(8),L=k.getLayersRoot().getLinearizedLayerList(!1),J=n.forceOldVersion?0:function(K){for(let X of K.getLayersRoot().getLinearizedLayerList(!1))if(X instanceof
nb||X.mask||X.clip||X.blendMode>T.LM_LAST_CHIBIPAINT||X.blendMode===T.LM_MULTIPLY)return 10;return 0}(k),O=0===(u=Ig(J)).major&&0===u.minor?"ChibiPaint v0.0":"ChickenPaint v"+u.major+"."+u.minor;u=Promise.resolve();x.onData=function(K){D.push(K)};for(let K=0;8>K;K++)H[K]="CHIBIOEK".charCodeAt(K);for(let K of(D.push(H),x.push((r=L.length,(v=Cf("HEAD",Bf.FIXED_HEADER_LENGTH)).writeU32BE(J),v.writeU32BE(k.width),v.writeU32BE(k.height),v.writeU32BE(r),v.getAsDataArray()),!1),L))u=u.then(()=>new Promise(function(X){var W=
x.push,Y=K,ka=Y instanceof Pa,va=4*(ka?5:6),Ia=Y.name.length;var S=Cf(ka?"LAYR":"GRUP",va+Ia+((ka?Y.image.data.length:0)+(Y.mask?Y.mask.data.length:0)));var ya=0;let na;Y.visible&&(ya|=1);ka&&Y.clip&&(ya|=2);Y.mask&&(ya|=4);Y.maskLinked&&(ya|=8);Y.maskVisible&&(ya|=16);Y.lockAlpha&&(ya|=64);!ka&&Y.expanded&&(ya|=32);Y.blendMode===T.LM_MULTIPLY2?(na=T.LM_MULTIPLY,ya|=128):na=Y.blendMode;S.writeU32BE(va+Ia);S.writeU32BE(na);S.writeU32BE(Y.alpha);S.writeU32BE(ya);S.writeU32BE(Y.name.length);ka||S.writeU32BE(Y.layers.length);
S.writeString(Y.name);if(ka){ka=S.pos;va=S.data;Ia=Y.image.data;for(ya=0;ya<Ia.length;ya+=G.BYTES_PER_PIXEL)va[ka++]=Ia[ya+G.ALPHA_BYTE_OFFSET],va[ka++]=Ia[ya+G.RED_BYTE_OFFSET],va[ka++]=Ia[ya+G.GREEN_BYTE_OFFSET],va[ka++]=Ia[ya+G.BLUE_BYTE_OFFSET];S.pos=ka;!0}Y.mask&&(Y=Y.mask,S.data.set(Y.data,S.pos),S.pos+=Y.data.length);S=S.getAsDataArray();W.call(x,S,!1);setTimeout(X,10)}));return u.then(()=>new Promise((K,X)=>{x.onEnd=function(W){if(0===W)if("undefined"!=typeof Blob)K({bytes:new Blob(D,{type:"application/octet-stream"}),
version:O});else{W=new Uint8Array(D.map(ka=>ka.byteLength).reduce((ka,va)=>ka+va,0));let Y=0;for(let ka of D)W.set(ka,Y),Y+=ka.byteLength;K({bytes:W,version:O})}else X(W)};x.push(Cf("ZEND",0).getAsDataArray(),!0)}))}));l.then(function(r){if(g)p.emitEvent("savingFailure");else if(m=a.swatches?new Blob([(new Rd).write(a.swatches)],{type:"application/octet-stream"}):null,a.url){var u=new FormData;u.append("beginMarker","This marker ensures the upload wasn't truncated");u.append("painter","ChickenPaint v2.0");
u.append("picture",e);e=null;r?(u.append("chibifileFormat",r.version),u.append("chibifile",r.bytes),u.append("rotation",""+a.rotation)):u.append("rotation","0");m&&(u.append("swatches",m),m=null);u.append("endMarker","This marker ensures the upload wasn't truncated");b(u)}else u="oekaki_"+(new Date).toISOString().split(".")[0].replace(/[^0-9]/g,"_"),pa(me).saveAs(e,u+".png"),r&&pa(me).saveAs(r.bytes,u+".chi"),m&&pa(me).saveAs(m,u+".aco")}).catch(function(r){p.emitEvent("savingFailure")})};this.cancel=
function(){g=!0}}function Jh(a,c,d){function b(){var W=l.width/2,Y=l.height/2;if(k.fillStyle="white",k.fillRect(0,0,l.width,l.height),J==L.length){var ka=v.width,va=v.height,Ia=Math.round(W-ka/2),S=Math.round(Y-va/2);k.drawImage(v,Ia,S);var ya=O;p||((p=document.createElement("canvas")).width=ka,p.height=va,e=p.getContext("2d"));e.globalCompositeOperation="copy";e.drawImage(n,0,0);g||((g=document.createElement("canvas")).width=ka,g.height=va,m=g.getContext("2d"));m.globalCompositeOperation="copy";
m.drawImage(H,0,0);m.globalCompositeOperation="source-in";m.drawImage(H,0,Math.round(170*ya));e.globalCompositeOperation="source-over";e.drawImage(g,0,0);e.drawImage(r,0,0);e.globalCompositeOperation="screen";e.drawImage(D,0,0);e.globalCompositeOperation="multiply";e.drawImage(x,0,0);k.globalAlpha=.88;k.drawImage(p,Ia,S);k.globalAlpha=1;k.drawImage(u,Ia,S);Y=Math.round(Y+va/2+2)}if(""!=K)for(k.fillStyle="black",ya=K.split("\n"),ka=0;ka<ya.length;ka++)va=ya[ka],Ia=k.measureText(va).width,Y+=28,k.fillText(va,
W-Ia/2,Y)}function h(){l.width=l.clientWidth;l.height=l.clientHeight;k.font="14pt sans-serif";b()}var p,g,e,m,l=document.createElement("canvas"),k=l.getContext("2d"),n=new Image,r=new Image,u=new Image,v=new Image,x=new Image,D=new Image,H=new Image,L=[n,r,u,v,x,D,H],J=0,O=0,K="";d+="splash/";for(var X=0;X<L.length;X++)L[X].onload=function(){++J==L.length&&b()};n.src=d+"cup.png";D.src=d+"highlights.png";r.src=d+"lid.png";u.src=d+"lines.png";x.src=d+"shading.png";H.src=d+"smoothie.png";v.src=d+"text.png";
c.on("loadingProgress",function(W,Y){O=W;K=Y;b()});c.on("loadingFailure",function(W){O=0;K=W;b()});c.on("loadingComplete",function(){window.removeEventListener("resize",h);a.removeChild(l)});window.addEventListener("resize",h);l.className="chickenpaint-splash-screen";a.appendChild(l);h()}function Jg(a){for(var c={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27," ":32,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SHIFT:16,"[":219,"]":221,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"-":189,
"=":187,"+":187,";":187,META:91,LEFTMETA:91,RIGHTMETA:91,ALT:18,ALTGRAPH:18,OPTION:18,CONTROL:17},d=65;90>=d;d++)c[String.fromCharCode(d)]=d;if((a=a.toUpperCase())in c)return c[a]}function ed(){var a,c=null,d=this;this.isPen=function(){var b;return!!c&&(1==(b=c.pointerType)||3==b)};this.getPressure=function(){return c?c.pressure:1};this.pluginLoaded=function(){console.log("Wacom tablet support loaded!");c=a.penAPI};this.isTabletPresent=function(){return!!c};this.detectTablet=function(){if(/Chrome/i.test(navigator.userAgent)&&
!/OPR/.test(navigator.userAgent))console.log("Not attempting to load Wacom tablet plugin, since this is Chrome");else{if(console.log("Attempting to load Wacom tablet support..."),"classid"in(a=document.createElement("object")))a.classid="CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";else{var b=document.createElement("param");b.name="onload";b.value="onWacomPluginLoaded";a.appendChild(b);a.type="application/x-wacomtabletplugin"}a.style.position="absolute";a.style.visibility="hidden";a.onload="onWacomPluginLoaded";
document.body.appendChild(a);setTimeout(function(){d.isTabletPresent()||console.log("Looks like the Wacom plugin isn't installed, or failed to load.")},5E3)}}}function Kg(){let a,c,d,b,h,p,g,e;this.x0=this.y0=this.x1=this.y1=this.x2=this.y2=this.x3=this.y3=0;let m=l=>{let k=3*l,n=k*l;l*=l*l;let r=2*n,u=6*l,v=this.x0-2*this.x1+this.x2,x=this.y0-2*this.y1+this.y2,D=3*(this.x1-this.x2)-this.x0+this.x3,H=3*(this.y1-this.y2)-this.y0+this.y3;a=this.x0;h=this.y0;c=(this.x1-this.x0)*k+v*n+D*l;p=(this.y1-
this.y0)*k+x*n+H*l;d=v*r+D*u;g=x*r+H*u;b=D*u;e=H*u};this.compute=(l,k,n)=>{m(1/n);l[0]=a;k[0]=h;for(let r=1;r<n;r++)a+=c,h+=p,c+=d,p+=g,d+=b,g+=e,l[r]=a,k[r]=h}}function Lg(a,c,d,b){var h,p=0;return"boolean"!=typeof c&&(b=d,d=c,c=void 0),function(){function g(){p=+new Date;d.apply(e,l)}var e=this,m=+new Date-p,l=arguments;b&&!h&&g();h&&clearTimeout(h);void 0===b&&m>a?g():!0!==c&&(h=setTimeout(b?function(){h=void 0}:g,void 0===b?a-m:a))}}function Dd(a){this.points=a||[]}function Mb(a,c){this.x=a;this.y=
c}function Mg(a){for(var c=document.createElement("canvas"),d=c.getContext("2d"),b=d.createImageData(64,64),h=b.data,p=0,g=0;64>g;g++)for(var e=0;64>e;e++)0!=(8&e)^0!=(8&g)?(h[p++]=255,h[p++]=255,h[p++]=255):(h[p++]=204,h[p++]=204,h[p++]=204),h[p++]=255;return c.width=64,c.height=64,d.putImageData(b,0,0),a.createPattern(c,"repeat")}function Ke(a,c){c+="Style";a.globalCompositeOperation="exclusion";"exclusion"==a.globalCompositeOperation?a[c]="white":(a.globalCompositeOperation="difference",a[c]="#888",
"difference"!=a.globalCompositeOperation&&(a[c]="black"))}function ne(a){function c(){var x=a?d.clientHeight:d.clientWidth;n=m/(g-p)*x;x=(e-p)/(g-p)*(x-n);h.style[a?"height":"width"]=n+"px";b.style[a?"height":"width"]=n+"px";b.style[a?"top":"left"]=x+"px"}let d=document.createElement("div"),b=document.createElement("div"),h=document.createElement("div"),p=0,g=1,e=0,m=1,l=10,k=!1,n=1,r=!1,u,v=this;this.setValues=function(x,D,H,L){e=x;m=D;p=H;g=L;c()};this.setBlockIncrement=function(x){l=x};this.setUnitIncrement=
function(x){};this.getElement=function(){return d};this.getValueIsAdjusting=function(){return k};d.className="chickenpaint-scrollbar "+(a?"chickenpaint-scrollbar-vertical":"chickenpaint-scrollbar-horizontal");b.className="chickenpaint-scrollbar-handle";b.setAttribute("touch-action","none");h.className="chickenpaint-scrollbar-handle-inner";b.appendChild(h);d.appendChild(b);b.addEventListener("pointerdown",function(x){x.stopPropagation();u=a?x.pageY-d.offsetTop-window.scrollY:x.pageX-d.offsetLeft-window.scrollX;
b.setPointerCapture(x.pointerId);b.classList.add("dragging");r=!0});b.addEventListener("pointermove",function(x){r&&(k=!0,x=a?x.pageY-d.offsetTop-window.scrollY:x.pageX-d.offsetLeft-window.scrollX,e+=(x-u)*(g-p)/((a?d.clientHeight:d.clientWidth)-n),e=Math.min(Math.max(e,p),g),u=x,v.emitEvent("valueChanged",[e]),c(),k=!1)});b.addEventListener("pointerup",function(x){if(x.stopPropagation(),r){try{b.releasePointerCapture(x.pointerId)}catch(D){}b.classList.remove("dragging");r=!1}});b.addEventListener("click",
function(x){x.stopPropagation()});d.addEventListener("click",function(x){this==d&&((a?x.pageY-d.offsetTop-window.scrollY:x.pageX-d.offsetLeft-window.scrollX)<parseInt(b.style[a?"top":"left"],10)?e-=l:e+=l,v.emitEvent("valueChanged",[e]),c())})}function nc(){this.modes=[]}function Le(a){function c(){}function d(){}function b(){this.shouldPaintBrushPreview=!1;this.oldPreviewRect=null}function h(){b.call(this);this.smoothMouse={x:0,y:0}}function p(){var F,N;this.mouseDown=function(da,ia,wa){if(!this.capture&&
0==ia&&!da.altKey&&!pa(Sb).isPressed("space")&&H())return this.capture=!0,F=N={x:rb+.5,y:hb+.5},this.eraseBrushPreview(),!0};this.mouseDrag=function(da){if(this.capture){var ia=new Ha(Math.min(F.x,N.x)-1-1,Math.min(F.y,N.y)-1-1,Math.max(F.x,N.x)+1+1+1,Math.max(F.y,N.y)+1+1+1);if(N={x:rb+.5,y:hb+.5},da.shiftKey){var wa=Math.PI/4;da=Math.round(Math.atan2(N.y-F.y,N.x-F.x)/wa);switch(da){case 0:case 4:N.y=F.y;break;case 2:case 6:N.x=F.x;break;default:da*=wa,wa=Math.sqrt((N.y-F.y)*(N.y-F.y)+(N.x-F.x)*
(N.x-F.x)),N.x=F.x+wa*Math.cos(da),N.y=F.y+wa*Math.sin(da)}}return ia.union(new Ha(Math.min(F.x,N.x)-1-1,Math.min(F.y,N.y)-1-1,Math.max(F.x,N.x)+1+1+1,Math.max(F.y,N.y)+1+1+1)),Wa(ia),!0}this.mouseMove.call(this,da)};this.mouseUp=function(da,ia,wa){if(this.capture&&0==ia)return da=O(F),ia=O(N),this.capture=!1,this.drawLine(da,ia),Wa(new Ha(Math.min(F.x,N.x)-1-1,Math.min(F.y,N.y)-1-1,Math.max(F.x,N.x)+1+1+1,Math.max(F.y,N.y)+1+1+1)),!0};this.paint=function(){this.capture?(fa.lineWidth=1,fa.beginPath(),
fa.moveTo(F.x,F.y),fa.lineTo(N.x,N.y),fa.stroke()):b.prototype.paint.call(this)};b.call(this)}function g(){let F=0,N,da,ia,wa;this.mouseDown=function(za,cb,gb){if(!this.capture&&0==cb&&!za.altKey&&!pa(Sb).isPressed("space")&&H())return za=O({x:rb,y:hb}),F=0,N=da=ia=wa=za,this.capture=!0,this.eraseBrushPreview(),!0};this.mouseDrag=function(za){if(this.capture&&0===F)return ia=wa=O({x:rb,y:hb}),La.repaintAll(),!0;this.mouseMove.call(this,za)};this.mouseUp=function(za,cb,gb){if(this.capture&&0==cb){switch(F){case 0:F=
1;break;case 1:F=2;break;case 2:this.capture=!1;cb=N;gb=da;let Ca=ia,jb=wa;za=new Kg;za.x0=cb.x;za.y0=cb.y;za.x1=gb.x;za.y1=gb.y;za.x2=Ca.x;za.y2=Ca.y;za.x3=jb.x;za.y3=jb.y;cb=Array(500);gb=Array(500);za.compute(cb,gb,500);Ja.beginStroke(cb[0],gb[0],1);for(za=1;500>za;za++)Ja.continueStroke(cb[za],gb[za],1);Ja.endStroke();La.repaintAll()}return!0}};this.mouseMove=function(za,cb){if(this.capture)return za=O({x:rb,y:hb}),1==F?da=za:2==F&&(ia=za),La.repaintAll(),!0;b.prototype.mouseMove.call(this,za,
cb)};this.paint=function(){if(this.capture){var za=new Kg;let cb=X(N),gb=X(da),Ca=X(ia),jb=X(wa);za.x0=cb.x;za.y0=cb.y;za.x1=gb.x;za.y1=gb.y;za.x2=Ca.x;za.y2=Ca.y;za.x3=jb.x;za.y3=jb.y;let ac=Array(100),kc=Array(100);za.compute(ac,kc,100);fa.beginPath();fa.moveTo(ac[0],kc[0]);for(za=1;100>za;za++)fa.lineTo(ac[za],kc[za]);fa.moveTo(~~cb.x,~~cb.y);fa.lineTo(~~gb.x,~~gb.y);fa.moveTo(~~Ca.x,~~Ca.y);fa.lineTo(~~jb.x,~~jb.y);fa.stroke()}else b.prototype.paint.call(this)};b.call(this)}function e(){var F;
this.mouseDown=function(N,da,ia){return!!this.capture||(pa(Sb).isPressed("space")||(0!=da||this.transient&&!N.altKey)&&2!=da?void(this.transient&&ta.pop()):(F=da,this.capture=!0,x("crosshair"),this.mouseDrag(N),!0))};this.mouseDrag=function(N){if(this.capture)return N=O({x:rb,y:hb}),Ja.isPointWithin(N.x,N.y)&&a.setCurColor(new Bb(Ja.colorPicker(N.x,N.y))),!0};this.mouseUp=function(N,da,ia){if(this.capture&&da==F)return F=-1,this.capture=!1,x("default"),this.transient&&ta.pop(),!0};this.enter=function(){c.prototype.enter.call(this);
F=-1}}function m(){var F,N,da,ia;this.keyDown=function(wa){if(" "===wa.key)return this.capture||x("grab"),!0};this.keyUp=function(wa){if(this.transient&&1!=ia&&" "===wa.key)return x("default"),ta.pop(),!0};this.mouseDown=function(wa,za,cb){return!!this.capture||(1==za||pa(Sb).isPressed("space")&&0==za||!this.transient&&0==za?(this.capture=!0,ia=za,F=wa.pageX,N=wa.pageY,da=La.getOffset(),x("grabbing"),!0):void(this.transient&&ta.pop()))};this.mouseDrag=function(wa){if(this.capture)return La.setOffset(da.x+
wa.pageX-F,da.y+wa.pageY-N),!0};this.mouseUp=function(wa,za,cb){if(this.capture&&za==ia)return ia=-1,this.capture=!1,this.transient&&!pa(Sb).isPressed("space")&&(x("default"),ta.pop()),!0};this.enter=function(){x("grab")}}function l(){}function k(){var F,N=new Ha(0,0,0,0),da=-1;this.mouseDown=function(ia,wa,za){if(!this.capture&&0==wa&&!ia.altKey&&!pa(Sb).isPressed("space"))return ia=K({x:rb,y:hb}),da=wa,N.makeEmpty(),F=ia,La.repaintAll(),this.capture=!0,!0};this.mouseDrag=function(ia){if(!this.capture)return!1;
var wa=K({x:rb,y:hb});ia=ia.shiftKey;var za=~~Math.max(Math.abs(wa.x-F.x),Math.abs(wa.y-F.y));return wa.x>=F.x?(N.left=F.x,N.right=(ia?F.x+za:wa.x)+1):(N.left=ia?F.x-za:wa.x,N.right=F.x+1),wa.y>=F.y?(N.top=F.y,N.bottom=(ia?F.y+za:wa.y)+1):(N.top=ia?F.y-za:wa.y,N.bottom=F.y+1),La.repaintAll(),!0};this.mouseUp=function(ia,wa,za){if(this.capture&&wa==da)return Ja.rectangleSelection(N),N.makeEmpty(),La.repaintAll(),this.capture=!1,da=-1,!0};this.paint=function(){N.isEmpty()||(fa.lineWidth=1,ka(fa,N))}}
function n(){var F,N,da=!1;this.mouseDown=function(ia,wa,za){if(!this.capture&&0==wa&&!pa(Sb).isPressed("space")&&D())return F=O({x:rb,y:hb}),N=ia.altKey,da=!0,this.capture=!0,!0};this.mouseDrag=Lg(25,function(ia){if(this.capture){ia=O({x:rb,y:hb});var wa=ia.x-F.x,za=ia.y-F.y,cb=~~wa,gb=~~za;return(0!=cb||0!=gb)&&(Ja.move(cb,gb,N&&da),da=!1),F.x=ia.x-(wa-cb),F.y=ia.y-(za-gb),!0}});this.mouseUp=function(ia,wa,za){if(this.capture&&0==wa)return this.capture=!1,this.transient&&ta.pop(),!0}}function r(){function F(Da,
Ma){return{x:(Da.x+Ma.x)/2,y:(Da.y+Ma.y)/2}}function N(Da){return{x:Math.round(Da.x),y:Math.round(Da.y)}}function da(Da,Ma){for(var Sa=0;Sa<Da.points.length;Sa++)if(49>=(Ma.x-Da.points[Sa].x)*(Ma.x-Da.points[Sa].x)+(Ma.y-Da.points[Sa].y)*(Ma.y-Da.points[Sa].y))return 2*Sa;for(Sa=0;Sa<Da.points.length;Sa++){var mb=Da.points[Sa],pb=Da.points[(Sa+1)%Da.points.length];pb=new Mb(pb.x-mb.x,pb.y-mb.y);mb=new Mb(Ma.x-mb.x,Ma.y-mb.y);var wc=pb.getLength(),Ac=pb.getScaled(1/wc);wc=mb.getScaled(1/wc);Ac=Ac.getDotProduct(wc);
if(0<=Ac&&1>=Ac&&(pb.scale(Ac),49>=(pb.x-mb.x)*(pb.x-mb.x)+(pb.y-mb.y)*(pb.y-mb.y)))return 2*Sa+1}return Da.containsPoint(Ma)?-3:-2}function ia(){var Da=gb.getTransformed(Db),Ma=da(Da,{x:rb,y:hb});switch(Ma){case 0:case 2:case 4:case 6:Ma=~~(Ma/2);let Sa=Da.points[Ma],mb=Da.points[(Ma+1)%4];wa(Mb.subtractPoints(Da.points[(Ma+3)%4],Sa).normalize().add(Mb.subtractPoints(mb,Sa).normalize()));break;case 1:case 3:case 5:case 7:wa(Mb.subtractPoints(Da.points[(~~(Ma/2)+1)%4],Da.points[~~(Ma/2)]).getPerpendicular());
break;case -3:x("move");break;default:x("default")}}function wa(Da){Da=Math.floor(Math.atan2(-Da.y,Da.x)/(Math.PI/4)+.5);switch(0>Da&&(Da+=4),Da){default:Da="ew-resize";break;case 1:Da="nesw-resize";break;case 2:Da="ns-resize";break;case 3:Da="nwse-resize"}x(Da)}var za,cb,gb,Ca,jb,ac,kc=-1;this.mouseDown=function(Da,Ma,Sa){if(!this.capture&&0==Ma&&!Da.altKey&&!pa(Sb).isPressed("space"))return kc=da(gb.getTransformed(Db),{x:rb,y:hb}),jb=O(Ca={x:rb,y:hb}),this.capture=!0,ia(),!0};this.mouseDrag=Lg(40,
function(Da){if(this.capture){var Ma={x:rb,y:hb};switch(kc){case -3:Da=N(O(Ma));var Sa=Mb.subtractPoints(Da,jb);Ma=Sa.getTruncated();Sa=Sa.subtract(Ma);var mb=new Kb;mb.translate(Ma.x,Ma.y);za.preMultiply(mb);jb=Mb.subtractPoints(Da,Sa);break;case -2:mb=Math.PI/4;Sa=gb.getCenter();var pb=X(Sa),wc=Math.atan2(Ma.y-pb.y,Ma.x-pb.x)-Math.atan2(Ca.y-pb.y,Ca.x-pb.x);pb=new Kb;ac+=wc;Da=Da.shiftKey?-za.decompose().rotate+Math.round(ac/mb)*mb:wc;pb.rotateAroundPoint(Da,Sa.x,Sa.y);za.preMultiply(pb);Ca=Ma;
break;case 0:case 2:case 4:case 6:mb=~~(kc/2);Sa=cb.points[mb];pb=za.getInverted().getTransformedPoint(N(O(Ma)));Ma=cb.points[(mb+2)%4];mb=(pb.x-Ma.x)/(Sa.x-Ma.x);Sa=(pb.y-Ma.y)/(Sa.y-Ma.y);if(.001>Math.abs(mb)||.001>Math.abs(Sa)||isNaN(mb)||isNaN(Sa))return!0;Da.shiftKey&&(Sa=mb=Da=Math.max(mb,Sa));za.scaleAroundPoint(mb,Sa,Ma.x,Ma.y);break;case 1:case 5:case 3:case 7:Da=~~(kc/2);pb=F(cb.points[Da],cb.points[(Da+1)%4]);Ma=za.getInverted().getTransformedPoint(N(O(Ma)));Da=F(cb.points[(Da+2)%4],cb.points[(Da+
3)%4]);pb=Mb.subtractPoints(pb,Da);Ma=Mb.subtractPoints(Ma,Da);wc=pb.getLength();Ma=pb.getDotProduct(Ma)/wc/wc;if(.001>Math.abs(Ma)||isNaN(Ma))return!0;1==kc||5==kc?(Sa=1,mb=Ma):(Sa=Ma,mb=1);za.scaleAroundPoint(Sa,mb,Da.x,Da.y)}return gb=cb.getTransformed(za),Ja.transformAffineAmend(za),La.repaintAll(),!0}});this.mouseUp=function(Da,Ma,Sa){if(this.capture&&0==Ma)return this.capture=!1,kc=-1,!0};this.mouseMove=function(){this.capture||ia()};this.paint=function(){var Da=gb.getTransformed(Db).points,
Ma=Array(2*Da.length);for(var Sa=0;Sa<Da.length;Sa++)Ma[Sa]=Da[Sa];for(let pb=0;pb<Da.length;pb++){Sa=Da[pb];var mb=Da[(pb+1)%Da.length];Ma[pb+Da.length]={x:(Sa.x+mb.x)/2,y:(Sa.y+mb.y)/2}}Ke(fa,"fill");for(Sa=0;Sa<Ma.length;Sa++)fa.fillRect(Ma[Sa].x-3,Ma[Sa].y-3,7,7);Y(fa,Da)};this.keyDown=function(Da){return"Enter"===Da.key?(a.actionPerformed({action:"CPTransformAccept"}),!0):"Escape"===Da.key?(a.actionPerformed({action:"CPTransformReject"}),!0):void 0};this.enter=function(){c.prototype.enter.call(this);
var Da,Ma=Ja.transformAffineBegin();za=Ma.transform;Ma.rect;(Da=Ma.selection).isEmpty()&&(Da=Ma.rect.clone());gb=(cb=new Dd(Da.toPoints())).getTransformed(za);kc=-1;ac=0;La.repaintAll()};this.leave=function(){c.prototype.leave.call(this);La.repaintAll()}}function u(){var F,N,da=0,ia=!1,wa=-1;this.mouseDown=function(za,cb,gb){return!!this.capture||(!this.transient&&0==cb&&!za.altKey&&!pa(Sb).isPressed("space")||0==cb&&!za.altKey&&!pa(Sb).isPressed("space")&&pa(Sb).isPressed("r")?(F={x:rb,y:hb},da=
La.getRotation(),N=Db.clone(),ia=!1,this.capture=!0,wa=cb,!0):void(this.transient&&ta.pop()))};this.mouseDrag=function(za){if(this.capture){var cb=xa.clientWidth/2,gb=xa.clientHeight/2;za=xa.width/2;var Ca=xa.height/2;cb=Math.atan2(hb-gb,rb-cb)-Math.atan2(F.y-gb,F.x-cb);gb=new Kb;return gb.rotateAroundPoint(cb,za,Ca),gb.multiply(N),La.setRotation(da+cb),La.setOffset(~~gb.getTranslateX(),~~gb.getTranslateY()),ia=!0,!0}};this.mouseUp=function(za,cb,gb){if(this.capture&&cb==wa){if(ia){za=Math.round(Nb/
(Math.PI/2))*Math.PI/2;if(Math.abs(Nb-za)<5/180*Math.PI){gb=za-da;za=xa.width/2;cb=xa.height/2;let Ca=new Kb;Ca.rotateAroundPoint(gb,za,cb);Ca.multiply(N);La.setRotation(da+gb);La.setOffset(~~Ca.getTranslateX(),~~Ca.getTranslateY());La.repaintAll()}La.emitEvent("canvasRotated90",[La.getRotation90()])}else La.resetRotation();return this.capture=!1,this.transient&&!pa(Sb).isPressed("r")&&ta.pop(),!0}};this.keyUp=function(za){if(this.transient&&1!=wa&&" "===za.key)return x("default"),ta.pop(),!0};this.keyDown=
function(za){if("r"===za.key.toLowerCase())return!0}}function v(){p.call(this)}function x(F){xa.getAttribute("data-cursor")!=F&&xa.setAttribute("data-cursor",F)}function D(){var F=Ja.getActiveLayer();return F.visible&&F.ancestorsAreVisible()?0!=F.alpha||(a.showLayerNotification(F,ha("Whoops! This layer's opacity is currently 0%"),"opacity"),!1):(a.showLayerNotification(F,ha("Whoops! This layer is currently hidden"),"layer"),!1)}function H(){var F=Ja.getActiveLayer();return F instanceof nb&&!Ja.isEditingMask()?
(a.showLayerNotification(F,ha("Whoops! You can't draw on a group"),"layer"),!1):D()}function L(F,N,da,ia,wa){F.setValues(-wa,ia,N-ia-wa+da/4,N+da-wa-da/4);F.setBlockIncrement(Math.max(1,~~(.66*ia)));F.setUnitIncrement(Math.max(1,~~(.05*ia)))}function J(){if(Db.setToIdentity(),Db.translate(bc,jc),Db.scale(kb,kb),Db.rotate(Nb),null!=vc&&null!=C&&!vc.getValueIsAdjusting()&&!C.getValueIsAdjusting()){var F=va(new Ha(0,0,Qa.width,Qa.height));L(vc,F.left,F.getWidth(),xa.clientWidth,La.getOffset().x);L(C,
F.top,F.getHeight(),xa.clientHeight,La.getOffset().y)}La.repaintAll()}function O(F){return Db.getInverted().getTransformedPoint(F)}function K(F){F=O(F);return F.x=Math.floor(F.x),F.y=Math.floor(F.y),F}function X(F){return Db.getTransformedPoint(F)}function W(F){F=X(F);return F.x=Math.round(F.x),F.y=Math.round(F.y),F}function Y(F,N){F.beginPath();F.moveTo(N[0].x,N[0].y);for(var da=1;da<N.length;da++)F.lineTo(N[da].x,N[da].y);F.lineTo(N[0].x,N[0].y);F.stroke()}function ka(F,N){var da=X({x:(N.left+N.right)/
2,y:(N.top+N.bottom)/2});N=N.toPoints();for(var ia=0;ia<N.length;ia++)N[ia]=W(N[ia]),N[ia].x+=.5*Math.sign(da.x-N[ia].x),N[ia].y+=.5*Math.sign(da.y-N[ia].y);Y(F,N)}function va(F){var N=W({x:F.left-1,y:F.top-1}),da=W({x:F.left-1,y:F.bottom}),ia=W({x:F.right,y:F.top-1});F=W({x:F.right,y:F.bottom});N=new Ha(Math.min(Math.min(N.x,da.x),Math.min(ia.x,F.x)),Math.min(Math.min(N.y,da.y),Math.min(ia.y,F.y)),Math.max(Math.max(N.x,da.x),Math.max(ia.x,F.x))+1,Math.max(Math.max(N.y,da.y),Math.max(ia.y,F.y))+1);
return N.grow(2,2),N}function Ia(){var F=xa.width,N=xa.height,da=X({x:Ja.width/2,y:Ja.height/2});La.setOffset(Math.round(bc+F/2-da.x),Math.round(jc+N/2-da.y))}function S(F,N,da){if(F=Math.max(.1,Math.min(16,F)),La.getZoom()!=F){var ia=La.getOffset();La.setOffset(ia.x+~~((N-ia.x)*(1-F/La.getZoom())),ia.y+~~((da-ia.y)*(1-F/La.getZoom())));La.setZoom(F);La.repaintAll()}}function ya(F){let N=xa.clientWidth,da=xa.clientHeight,ia=parseFloat(F);.01>Math.abs(ia-1)?F=1:.2>Math.abs(ia-2)?F=2:.08>Math.abs(ia-
.5)&&(F=.5);S(F,N/2,da/2)}function na(F){return Rb?Q.getPressure():"mouse"===F.pointerType&&0!==F.buttons&&0===F.pressure?1:"touch"===F.pointerType?(0!==F.pressure&&(Jc=!0),Jc)?2*F.pressure:1:2*F.pressure}function wb(){eb||(eb=!0,window.requestAnimationFrame(function(){La.paint()}))}function Wa(F){Va.union(F);wb()}function Lb(){ec=Ja.getBounds();La.repaintAll()}let Fb,La=this,Na=document.createElement("div"),ja=document.createElement("div"),Aa=document.createElement("div"),xa=document.createElement("canvas"),
fa=xa.getContext("2d"),Qa=document.createElement("canvas"),ma=Qa.getContext("2d"),Ua=Mg(fa),Ja=a.getArtwork(),kb=1,bc=0,jc=0,Nb=0,Db=new Kb,sb=!1,Vb=!1,lb=32,rb=0,hb=0,Tb=!1,ub=[!1,!1,!1],Rb=!1,Ib=!1,Jc=!1,ec=Ja.getBounds(),Va=new Ha(0,0,0,0),eb=!1,Xb;let Xa,Rc,Sc,A,sa,uc,Nc,Wb,$c=[],ta=new nc,fc,vc=new ne(!1),C=new ne(!0),Q=ed.getRef();Math.sign=Math.sign||function(F){return 0==(F*=1)||isNaN(F)?F:0<F?1:-1};c.prototype.transient=!1;c.prototype.capture=!1;c.prototype.enter=function(){x("default")};
c.prototype.leave=function(){this.capture=!1};c.prototype.mouseMove=c.prototype.paint=c.prototype.mouseDown=c.prototype.mouseDrag=c.prototype.mouseUp=c.prototype.keyDown=c.prototype.suspend=c.prototype.resume=c.prototype.keyUp=function(){};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.mouseDown=function(F,N,da){var ia=pa(Sb).isPressed("space");!ia&&(2==N||0==N&&F.altKey)?(ta.push(Xa,!0),ta.peek().mouseDown(F,N,da)):ia||0!=N||F.altKey||!pa(Sb).isPressed("r")?(1==N||!F.altKey&&
ia&&0==N)&&(ta.push(Rc,!0),ta.peek().mouseDown(F,N,da)):(ta.push(Sc,!0),ta.peek().mouseDown(F,N,da))};d.prototype.keyDown=function(F){if("r"===F.key.toLowerCase()&&" "!==F.key)ta.push(Sc,!0),ta.peek().keyDown(F);else if("r"!==F.key.toLowerCase()&&" "===F.key&&!F.altKey)return ta.push(Rc,!0),ta.peek().keyDown(F),!0};b.prototype=Object.create(c.prototype);b.prototype.constructor=b;b.prototype.getBrushPreviewOval=function(){let F=a.getBrushSize()*kb/2;return new Ha(rb-F,hb-F,rb+F,hb+F)};b.prototype.queueBrushPreview=
function(){if(ta.peek()==this){this.shouldPaintBrushPreview=!0;var F=this.getBrushPreviewOval();F.grow(2,2);null!=this.oldPreviewRect&&(F.union(this.oldPreviewRect),this.oldPreviewRect=null);Wa(F)}};b.prototype.eraseBrushPreview=function(){this.shouldPaintBrushPreview=!1;null!=this.oldPreviewRect&&(Wa(this.oldPreviewRect),this.oldPreviewRect=null)};b.prototype.mouseMove=function(F,N){this.queueBrushPreview()};b.prototype.enter=function(){c.prototype.enter.call(this);Tb&&this.queueBrushPreview()};
b.prototype.leave=function(){c.prototype.leave.call(this);this.eraseBrushPreview()};b.prototype.suspend=b.prototype.leave;b.prototype.resume=b.prototype.enter;b.prototype.paint=function(){if(this.shouldPaintBrushPreview){this.shouldPaintBrushPreview=!1;var F=this.getBrushPreviewOval();fa.beginPath();fa.arc((F.left+F.right)/2,(F.top+F.bottom)/2,F.getWidth()/2,0,2*Math.PI);fa.stroke();F.grow(2,2);null==this.oldPreviewRect?this.oldPreviewRect=F:this.oldPreviewRect.union(F)}};h.prototype=Object.create(b.prototype);
h.prototype.constructor=h;h.prototype.mouseDown=function(F,N,da){if(!this.capture&&0==N&&!F.altKey&&!pa(Sb).isPressed("space")&&H()&&(F=O({x:rb,y:hb}),this.eraseBrushPreview(),Ja.beginStroke(F.x,F.y,da)))return this.capture=!0,this.smoothMouse=F,!0};h.prototype.mouseDrag=function(F,N){if(("number"!=typeof navigator.maxTouchPoints||3>navigator.maxTouchPoints)&&b.prototype.mouseMove.call(this,F,N),this.capture){F=O({x:rb,y:hb});var da=Math.min(.999,Math.pow(a.getBrushInfo().smoothing,.3));let ia=1-
da;return this.smoothMouse.x=ia*F.x+da*this.smoothMouse.x,this.smoothMouse.y=ia*F.y+da*this.smoothMouse.y,Ja.continueStroke(this.smoothMouse.x,this.smoothMouse.y,N),!0}this.mouseMove(F)};h.prototype.mouseUp=function(F,N,da){if(this.capture)return 0==N&&(this.capture=!1,Ja.endStroke()),!0};p.prototype=Object.create(b.prototype);p.prototype.constructor=p;p.prototype.drawLine=function(F,N){Ja.beginStroke(F.x,F.y,1);Ja.continueStroke(N.x,N.y,1);Ja.endStroke()};g.prototype=Object.create(b.prototype);g.prototype.constructor=
g;e.prototype=Object.create(c.prototype);e.prototype.constructor=e;m.prototype=Object.create(c.prototype);m.prototype.constructor=m;l.prototype=Object.create(c.prototype);l.prototype.constructor=l;l.prototype.mouseDown=function(F,N,da){if(0==N&&!F.altKey&&!pa(Sb).isPressed("space")&&H())return F=O({x:rb,y:hb}),Ja.isPointWithin(F.x,F.y)&&(Ja.floodFill(F.x,F.y),La.repaintAll()),!0};k.prototype=Object.create(c.prototype);k.prototype.constructor=k;n.prototype=Object.create(c.prototype);n.prototype.constructor=
n;n.prototype.mouseMove=function(F){if(!pa(Sb).isPressed("r"))return x("move"),!0};n.prototype.enter=function(){x("move")};r.prototype=Object.create(c.prototype);r.prototype.constructor=r;u.prototype=Object.create(c.prototype);u.prototype.constructor=u;v.prototype=Object.create(p.prototype);v.prototype.constructor=v;v.prototype.drawLine=function(F,N){Ja.gradientFill(Math.round(F.x),Math.round(F.y),Math.round(N.x),Math.round(N.y),a.getCurGradient())};v.prototype.queueBrushPreview=function(){};this.setZoom=
function(F){kb=F;J()};this.getZoom=function(){return kb};this.setGridSize=function(F){lb=Math.max(Math.round(F),1);this.repaintAll()};this.getGridSize=function(){return lb};this.setOffset=function(F,N){isNaN(F)||isNaN(N)?console.log("Bad offset"):(bc=F,jc=N,J())};this.getOffset=function(){return{x:bc,y:jc}};this.setInterpolation=function(F){sb=F;pf(fa,F);this.repaintAll()};this.setRotation=function(F){Nb=F%(2*Math.PI);J()};this.getRotation=function(){return Nb};this.getRotation90=function(){var F=
Math.round(this.getRotation()/Math.PI*2);return 0>(F%=4)&&(F+=4),F};this.zoomIn=function(){ya(1.41*this.getZoom())};this.zoomOut=function(){ya(.7092*this.getZoom())};this.zoom100=function(){ya(1);Ia()};this.resetRotation=function(){var F=xa.width/2,N=xa.height/2,da=new Kb;da.rotateAroundPoint(-this.getRotation(),F,N);da.multiply(Db);this.setOffset(~~da.getTranslateX(),~~da.getTranslateY());this.setRotation(0);La.emitEvent("canvasRotated90",[0])};let ca=!1;this.getElement=function(){return Na};this.repaintAll=
function(){Va.left=0;Va.top=0;Va.right=xa.width;Va.bottom=xa.height;wb()};this.paint=function(){var F=!1;if(eb=!1,Va.isEmpty()||(fa.save(),fa.clipTo&&(fa.beginPath(),Va.left|=0,Va.top|=0,fa.rect(Va.left,Va.top,Math.ceil(Va.getWidth()),Math.ceil(Va.getHeight())),fa.clip()),F=!0),!ec.isEmpty()){var N=Xb&&Xb.isOpen()?Xb.getImageData():Ja.fusionLayers().getImageData();ma.putImageData(N,0,0,ec.left,ec.top,ec.getWidth(),ec.getHeight());ec.makeEmpty()}if(fa.fillStyle="#606060",fa.fillRect(0,0,xa.width,xa.height),
fa.save(),fa.setTransform(Db.m[0],Db.m[1],Db.m[2],Db.m[3],Db.m[4],Db.m[5]),fa.fillStyle=Ua,fa.fillRect(0,0,Ja.width,Ja.height),fa.drawImage(Qa,0,0,Qa.width,Qa.height),fa.restore(),Ke(fa,"stroke"),fa.lineWidth=1,Ja.getSelection().isEmpty()||ta.peek()instanceof k&&ta.peek().capture||(fa.setLineDash([3,2]),ka(fa,Ja.getSelection()),fa.setLineDash([])),Vb)if(N=Ja.getBounds(),2<kb*lb){fa.beginPath();for(var da=lb-1;da<N.right;da+=lb){var ia=X({x:da,y:N.top}),wa=X({x:da,y:N.bottom});fa.moveTo(ia.x+.5,ia.y+
.5);fa.lineTo(wa.x+.5,wa.y+.5)}for(da=lb-1;da<N.bottom;da+=lb)ia=X({x:0,y:da}),wa=X({x:N.right,y:da}),fa.moveTo(ia.x+.5,ia.y+.5),fa.lineTo(wa.x+.5,wa.y+.5);fa.stroke()}ta.paint(fa);fa.globalCompositeOperation="source-over";F&&(Va.makeEmpty(),fa.restore())};this.showGrid=function(F){Vb=F;this.repaintAll()};this.resize=function(F,N){F-=Aa.offsetHeight;xa.style.height=F+"px";xa.width=xa.clientWidth;xa.height=F;Fb=null;N||Ia();this.setInterpolation(sb);this.repaintAll()};a.on("toolChange",function(F,
N){F=$c[N.strokeMode];for(N=0;N<ta.modes.length;N++)if(ta.modes[N]instanceof b){ta.modes[N].leave();ta.modes[N]=F;ta.modes[N].enter();break}fc=F});a.on("modeChange",function(F){switch(F){case la.M_DRAW:var N=fc;break;case la.M_FLOODFILL:N=A;break;case la.M_GRADIENTFILL:N=sa;break;case la.M_RECT_SELECTION:N=uc;break;case la.M_MOVE_TOOL:N=Nc;break;case la.M_ROTATE_CANVAS:N=Sc;break;case la.M_PAN_CANVAS:N=Rc;break;case la.M_COLOR_PICKER:N=Xa;break;case la.M_TRANSFORM:N=Wb}ta.setUserMode(N)});a.on("maskViewOpened",
function(F){Xb&&Xb.off("changeLayer",Lb);(Xb=F).on("changeLayer",Lb);Lb()});var ea=new d;Xa=new e;Rc=new m;Sc=new u;A=new l;sa=new v;uc=new k;Nc=new n;Wb=new r;fc=($c=[new h,new p,new g])[Ba.STROKE_MODE_FREEHAND];ta.setDefaultMode(ea);ta.setUserMode(fc);Qa.width=Ja.width;Qa.height=Ja.height;xa.width=800;xa.height=900;xa.className="chickenpaint-canvas";xa.setAttribute("touch-action","none");fa.setLineDash||(fa.setLineDash=function(){});xa.addEventListener("contextmenu",function(F){F.preventDefault()});
xa.addEventListener("mouseenter",function(){Tb=!0});xa.addEventListener("mouseleave",function(){Tb=!1;ub[0]||ub[2]||ub[1]||La.repaintAll()});xa.addEventListener("pointerdown",function(F){Ib&&"touch"===F.pointerType||(xa.setPointerCapture(F.pointerId),Fb=xa.getBoundingClientRect(),rb=F.clientX-Fb.left,hb=F.clientY-Fb.top,Rb=Q.isPen(),ub[0]=!1,ub[2]=!1,ub[1]=!1,ub[F.button]=!0,ta.mouseDown(F,F.button,na(F)))});xa.addEventListener("pointermove",function(F){if(Fb||=xa.getBoundingClientRect(),!Ib||"touch"!==
F.pointerType){rb=F.clientX-Fb.left;hb=F.clientY-Fb.top;var N=0!==F.buttons,da=N?na(F):0;if(0!=(1&F.buttons)!=ub[0]){if(.5===F.mozPressure)return;ub[0]=!ub[0];ub[0]?ta.mouseDown(F,0,da):ta.mouseUp(F,0,da)}0!=(2&F.buttons)!=ub[2]&&(ub[2]=!ub[2],ub[2]?ta.mouseDown(F,2,da):ta.mouseUp(F,2,da));0!=(4&F.buttons)!=ub[1]&&(ub[1]=!ub[1],ub[1]?ta.mouseDown(F,1,da):ta.mouseUp(F,1,da));N?ta.mouseDrag(F,da):ta.mouseMove(F,da);Ib||"pen"!==F.pointerType||(Ib=!0)}});xa.addEventListener("pointerup",function(F){ub[0]=
!1;ub[2]=!1;Rb=ub[1]=!1;ta.mouseUp(F,F.button,0);xa.releasePointerCapture(F.pointerId)});xa.addEventListener("wheel",function(F){if(0!=F.deltaY){if(!ca||20<Math.abs(F.deltaY)){var N,da;let ia;ia=0<F.deltaY?1/1.15:1.15;let wa=(N={x:F.pageX,y:F.pageY},da=xa.getBoundingClientRect(),{x:N.x-da.left-window.pageXOffset,y:N.y-da.top-window.pageYOffset});N=O(wa);Ja.isPointWithin(N.x,N.y)?S(La.getZoom()*ia,wa.x,wa.y):S(La.getZoom()*ia,bc+~~(Ja.width*kb/2),jc+~~(Ja.height*kb/2));ca=ca||setTimeout(function(){ca=
!1},50)}F.preventDefault()}},{passive:!1});document.addEventListener("keydown",function(F){ta.keyDown(F)});document.addEventListener("keyup",function(F){"alt"===F.key.toLowerCase()&&F.preventDefault();ta.keyUp(F)});document.addEventListener("visibilitychange",function(){let F=xa.height+Aa.offsetHeight;xa.width=1;xa.height=1;La.resize(F,!0)},!1);window.addEventListener("scroll",function(){Fb=null});xa.addEventListener("mousedown",function(F){1==F.button&&F.preventDefault()});Ja.on("changeSelection",
function(){La.repaintAll()});Ja.on("updateRegion",function(F){ec.union(F);Wa(va(ec))});vc.on("valueChanged",function(F){var N=La.getOffset();La.setOffset(-F,N.y)});C.on("valueChanged",function(F){var N=La.getOffset();La.setOffset(N.x,-F)});this.setInterpolation(!0);ea=document.createElement("div");ea.className="chickenpaint-canvas-container-wrapper";ea.appendChild(xa);ja.className="chickenpaint-canvas-container-top";ja.appendChild(ea);ja.appendChild(C.getElement());Aa.className="chickenpaint-canvas-container-bottom";
Aa.appendChild(vc.getElement());Na.appendChild(ja);Na.appendChild(Aa);a.setCanvas(this)}function lc(a,c,d,b){a.getSmallScreenMode()&&ha(d+" (shorter)")!==d+" (shorter)"?this.title=ha(d+" (shorter)"):this.title=ha(d);b=b||{};this.name=c;this.resizeVert=b.resizeVert||!1;this.resizeHorz=b.resizeHorz||!1;let h=document.createElement("div");d=document.createElement("div");let p=document.createElement("i"),g=document.createElement("button"),e=document.createElement("div"),m=null,l=null,k,n,r,u=this;this.getElement=
function(){return h};this.getBodyElement=function(){return e};this.getWidth=function(){return h.offsetWidth};this.getHeight=function(){return h.offsetHeight};this.getX=function(){return parseInt(h.style.left,10)||0};this.getY=function(){return parseInt(h.style.top,10)||0};this.setLocation=function(x,D){h.style.left=x+"px";h.style.top=D+"px"};this.setWidth=function(x){h.style.width=x+"px"};this.setHeight=function(x){h.style.height=x+"px"};this.setSize=function(x,D){this.setWidth(x);this.setHeight(D)};
this.setCollapseDownwards=function(x){b.collapseDownwards=x};this.toggleCollapse=function(x){var D;if(void 0===x)x=!h.classList.contains("collapsed");else if(h.classList.contains("collapsed")===x)return;var H=null===(D=h.closest(".chickenpaint"))||void 0===D?void 0:D.querySelector(".chickenpaint-canvas");D=H?H.clientHeight:window.innerHeight;H=this.getHeight();H=this.getY()+H;(h.classList.toggle("collapsed",x),p.classList.toggle("icon-angle-down",!x),p.classList.toggle("icon-angle-up",x),x)?b.collapseDownwards&&
this.setLocation(this.getX(),Math.min(H,D)-this.getHeight()):(x=this.getHeight(),b.collapseDownwards?this.setLocation(this.getX(),Math.max(H-x,0)):this.getY()+x>D&&this.setLocation(this.getX(),Math.max(D-x,0)))};this.userIsDoneWithUs=function(){a.getSmallScreenMode()&&this.toggleCollapse(!0)};p.className="collapse-icon fas icon-angle-down";g.type="button";g.className="btn btn-close";g.textContent="";g.tabIndex=-1;h.className="chickenpaint-palette chickenpaint-palette-"+c;d.className="chickenpaint-palette-head";
d.setAttribute("touch-action","none");c=document.createElement("div");let v=document.createElement("h5");c.className="modal-header";v.className="modal-title";v.appendChild(document.createTextNode(this.title));v.appendChild(p);c.appendChild(v);c.appendChild(g);d.appendChild(c);e.className="chickenpaint-palette-body";h.appendChild(d);h.appendChild(e);this.resizeVert&&((m=document.createElement("div")).className="chickenpaint-resize-handle-vert",m.addEventListener("pointerdown",function(x){n="vertResize";
m.setPointerCapture(x.pointerId)}),m.addEventListener("pointermove",function(x){"vertResize"==n&&u.setHeight(x.pageY-h.offsetTop)}),m.addEventListener("pointerup",function(x){m.releasePointerCapture(x.pointerId);n=!1}),h.appendChild(m));this.resizeHorz&&((l=document.createElement("div")).className="chickenpaint-resize-handle-horz",l.addEventListener("pointerdown",function(x){n="horzResize";l.setPointerCapture(x.pointerId)}),l.addEventListener("pointermove",function(x){"horzResize"==n&&u.setWidth(x.pageX-
h.offsetLeft)}),l.addEventListener("pointerup",function(x){l.releasePointerCapture(x.pointerId);n=!1}),h.appendChild(l));d.addEventListener("pointerdown",function(x){0==x.button&&(x.stopPropagation(),x.preventDefault(),"BUTTON"==x.target.nodeName?u.emitEvent("paletteVisChange",[u,!1]):(k={x:parseInt(h.style.left,10)||0,y:parseInt(h.style.top,10)||0},r={x:x.pageX-h.offsetLeft,y:x.pageY-h.offsetTop},n=a.getSmallScreenMode()?"dragStart":"dragging",x.target.setPointerCapture(x.pointerId)))});d.addEventListener("pointermove",
function(x){if(("dragStart"===n||"dragging"===n)&&0!==x.buttons){let L=x.pageX-r.x,J=x.pageY-r.y;if("dragStart"==n){x=L;var D=J;var H=k;25<(x-H.x)*(x-H.x)+(D-H.y)*(D-H.y)&&(n="dragging")}"dragging"==n&&u.setLocation(L,J)}});d.addEventListener("pointerup",function(x){if("dragging"===n||"dragStart"===n){"dragStart"===n&&(x.stopPropagation(),x.preventDefault(),setTimeout(()=>{u.setLocation(k.x,k.y);u.toggleCollapse()},100));n=!1;try{x.target.releasePointerCapture(x.pointerId)}catch(D){console.error(D)}}})}
function Me(a){function c(g){"LI"==this.nodeName&&(g=b[parseInt(this.getAttribute("data-buttonIndex"),10)],a.actionPerformed({action:g.command}))}lc.call(this,a,"tool","Tools");let d=this,b=[{className:"chickenpaint-tool-rect-selection",command:"CPRectSelection",toolTip:"Marquee",shortcut:"m",mode:la.M_RECT_SELECTION},{className:"chickenpaint-tool-move",command:"CPMoveTool",toolTip:"Move tool",shortcut:"v",mode:la.M_MOVE_TOOL},{className:"chickenpaint-tool-flood-fill",command:"CPFloodFill",toolTip:"Flood fill",
shortcut:"f",mode:la.M_FLOODFILL},{className:"chickenpaint-tool-gradient-fill",command:"CPGradientFill",toolTip:"Gradient fill",shortcut:"g",mode:la.M_GRADIENTFILL},{className:"chickenpaint-tool-color-picker",command:"CPColorPicker",toolTip:"Color picker",shortcut:"i",mode:la.M_COLOR_PICKER},{className:"chickenpaint-tool-blur",command:"CPBlur",toolTip:"Blur",shortcut:"u",mode:la.M_DRAW,tool:la.T_BLUR},{className:"chickenpaint-tool-pencil",command:"CPPencil",toolTip:"Pencil",shortcut:"n",mode:la.M_DRAW,
tool:la.T_PENCIL},{className:"chickenpaint-tool-pen",command:"CPPen",toolTip:"Pen",selected:!0,shortcut:"b",mode:la.M_DRAW,tool:la.T_PEN},{className:"chickenpaint-tool-airbrush",command:"CPAirbrush",toolTip:"Airbrush",shortcut:"a",mode:la.M_DRAW,tool:la.T_AIRBRUSH},{className:"chickenpaint-tool-water",command:"CPWater",toolTip:"Waterpaint",shortcut:"w",mode:la.M_DRAW,tool:la.T_WATER},{className:"chickenpaint-tool-eraser",command:"CPEraser",toolTip:"Eraser",shortcut:"e",mode:la.M_DRAW,tool:la.T_ERASER},
{className:"chickenpaint-tool-soft-eraser",command:"CPSoftEraser",toolTip:"Soft eraser",shortcut:"s",mode:la.M_DRAW,tool:la.T_SOFTERASER},{className:"chickenpaint-tool-smudge",command:"CPSmudge",toolTip:"Smudge",shortcut:"d",mode:la.M_DRAW,tool:la.T_SMUDGE},{className:"chickenpaint-tool-blender",command:"CPBlender",toolTip:"Blender",shortcut:"c",mode:la.M_DRAW,tool:la.T_BLENDER},{className:"chickenpaint-tool-dodge",command:"CPDodge",toolTip:"Dodge (tool)",shortcut:"o",mode:la.M_DRAW,tool:la.T_DODGE},
{className:"chickenpaint-tool-burn",command:"CPBurn",toolTip:"Burn (tool)",shortcut:"p",mode:la.M_DRAW,tool:la.T_BURN},{className:"chickenpaint-tool-rotate-canvas",command:"CPRotateCanvas",commandDoubleClick:"CPResetCanvasRotation",toolTip:"Rotate canvas",mode:la.M_ROTATE_CANVAS},{className:"chickenpaint-tool-pan-canvas",command:"CPPanCanvas",toolTip:"Grab canvas",mode:la.M_PAN_CANVAS}],h=document.createElement("ul");a.on("modeChange",function(g){let e=d.getBodyElement();(e.querySelectorAll("li").forEach(function(m){m.classList.remove("selected")}),
g==la.M_DRAW)?(g=e.querySelector(`li[data-tool="${a.getCurTool()}"]`))&&g.classList.add("selected"):(g=e.querySelector(`li[data-mode="${g}"]`))&&g.classList.add("selected")});a.on("toolChange",function(g){let e=d.getBodyElement();a.getCurMode()==la.M_DRAW&&(e.querySelectorAll("li").forEach(function(m){m.classList.remove("selected")}),(g=e.querySelector(`li[data-tool="${g}"]`))&&g.classList.add("selected"))});let p=d.getBodyElement();for(let g in h.className="chickenpaint-tools list-unstyled",b)!function(e){let m=
b[e],l=document.createElement("li"),k=document.createElement("div");l.className="chickenpaint-toolbar-button "+m.className;l.setAttribute("data-buttonIndex",e);l.setAttribute("data-mode",m.mode);void 0!==m.tool&&l.setAttribute("data-tool",m.tool);l.title=ha(m.toolTip);m.shortcut&&(l.title+=" ("+m.shortcut.toUpperCase()+")",pa(Sb)(m.shortcut,function(){return c.call(l),!1}));m.selected&&(l.className+=" selected");k.className="chickenpaint-toolbar-button-icon";l.appendChild(k);h.appendChild(l)}(g);
h.addEventListener("click",function(g){let e=g.target.closest("li");e&&c.call(e,g)});h.addEventListener("dblclick",function(g){if(g=g.target.closest("li"))g=b[parseInt(g.getAttribute("data-buttonIndex"),10)],g.commandDoubleClick&&a.actionPerformed({action:g.commandDoubleClick})});p.appendChild(h)}function Ne(a){lc.call(this,a,"misc","Misc");let c=this,d=[{className:"chickenpaint-tool-zoom-in",command:"CPZoomIn",toolTip:"Zoom in"},{className:"chickenpaint-tool-zoom-out",command:"CPZoomOut",toolTip:"Zoom out"},
{className:"chickenpaint-tool-zoom-100",command:"CPZoom100",toolTip:"Zoom 100%"},{className:"chickenpaint-tool-flip-horizontal",command:"CPHFlip",toolTip:"Flip horizontal"},{className:"chickenpaint-tool-undo",command:"CPUndo",toolTip:"Undo"},{className:"chickenpaint-tool-redo",command:"CPRedo",toolTip:"Redo"},{className:"chickenpaint-tool-send",command:"CPSend",toolTip:"Save Oekaki"}];!function(){let b=c.getBodyElement(),h=document.createElement("ul");for(let p in h.className="chickenpaint-misc-tools list-unstyled",
d){let g=d[p],e=document.createElement("li"),m=document.createElement("div");"CPSend"!=g.command||a.isActionSupported("CPContinue")||(g.toolTip="Post Oekaki",g.className="chickenpaint-tool-send-and-end");e.className="chickenpaint-toolbar-button "+g.className;e.setAttribute("data-buttonIndex",p);e.setAttribute("title",ha(g.toolTip));m.className="chickenpaint-toolbar-button-icon";e.appendChild(m);h.appendChild(e)}h.addEventListener("click",function(p){if(p=p.target.closest("li"))p=d[parseInt(p.getAttribute("data-buttonIndex"),
10)],a.actionPerformed({action:p.command})});b.appendChild(h)}()}function Oe(a){lc.call(this,a,"stroke","Stroke");let c=[{className:"chickenpaint-tool-freehand",command:"CPFreeHand",toolTip:ha("Free-hand"),selected:!0},{className:"chickenpaint-tool-line",command:"CPLine",toolTip:ha("Straight line")},{className:"chickenpaint-tool-bezier",command:"CPBezier",toolTip:ha("Bezier curve")}],d=this.getBodyElement(),b=document.createElement("ul");for(let h in b.className="chickenpaint-stroke-tools list-unstyled",
c){let p=c[h],g=document.createElement("li"),e=document.createElement("div");g.className="chickenpaint-toolbar-button "+p.className;g.setAttribute("data-buttonIndex",h);g.setAttribute("title",p.toolTip);p.selected&&(g.className+=" selected");e.className="chickenpaint-toolbar-button-icon";g.appendChild(e);b.appendChild(g)}b.addEventListener("click",function(h){if(h=h.target.closest("li"))h=c[parseInt(h.getAttribute("data-buttonIndex"),10)],a.actionPerformed({action:h.command})});d.appendChild(b);a.on("toolChange",
function(h,p){h=document.querySelector(".chickenpaint-tool-freehand");let g=document.querySelector(".chickenpaint-tool-line"),e=document.querySelector(".chickenpaint-tool-bezier");h&&h.classList.toggle("selected",p.strokeMode==Ba.STROKE_MODE_FREEHAND);g&&g.classList.toggle("selected",p.strokeMode==Ba.STROKE_MODE_LINE);e&&e.classList.toggle("selected",p.strokeMode==Ba.STROKE_MODE_BEZIER)})}function Bc(a,c,d){return c in a?Object.defineProperty(a,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):
a[c]=d,a}function Pe(a){lc.call(this,a,"color","Color (picker)");let c=new Ng(a),d=new Og(a,c);a=new Kh(a);let b=this.getBodyElement(),h=document.createElement("div");h.className="chickenpaint-colorpicker-top";h.appendChild(c.getElement());h.appendChild(d.getElement());b.appendChild(h);b.appendChild(a.getElement())}function Kh(a){function c(p,g,e){for(;p.length<e;)p=g+p;return p}function d(){h.style.backgroundColor="#"+c(Number(b).toString(16),"0",6)}let b=0,h=document.createElement("div");this.getElement=
function(){return h};a.on("colorChange",function(p){b=p.getRgb();d()});h.className="chickenpaint-colorpicker-show";h.addEventListener("click",function(p){p.preventDefault();p="#"+c(Number(b).toString(16),"0",6);if(null!=(p=window.prompt(ha("Please enter a color in hex format"),p)))try{(p.match(/^#/)||p.match(/^$/))&&(p=p.substring(1));let g=parseInt(p,16);a.setCurColor(new Bb(g))}catch(g){}});d()}function Sd(a,c){function d(){var g=b.width;h.clearRect(0,0,g,b.height);h.beginPath();h.arc(g/2+1,g/2+
1,Math.max(g/2,1)-2,0,2*Math.PI);p.state?h.fill():h.stroke()}var b=document.createElement("canvas"),h=b.getContext("2d"),p=this;this.state=a||!1;this.setValue=function(g){this.state!=g&&(this.state=g,this.emitEvent("valueChange",[g]),d())};this.getElement=function(){return b};b.addEventListener("mousedown",function(g){p.setValue(!p.state)});b.title=c||"";b.className="chickenpaint-checkbox";b.width=20;b.height=20;b.fillStyle="black";b.strokeStyle="black";d()}function Fc(a,c,d,b,h=150){function p(){let x=
m.width||h,D=m.height,H="string"==typeof v.title?ha(v.title):v.title(v.value),L=3*window.devicePixelRatio,J=.75*m.height;if(d)l.save(),l.fillStyle="white",l.fillRect(0,0,x,D),l.fillStyle="black",l.fillText(H,L,J),l.beginPath(),v.value>=k/2?l.rect(x/2,0,(v.value-k/2)*x/k,D):l.rect(v.value*x/k,0,(k/2-v.value)*x/k,D),l.fill(),l.clip(),l.fillStyle="white";else{var O=(v.value-a)/k;b&&(O=Math.pow(O,.6666666666666666));O*=x;l.save();l.save();l.fillStyle="black";l.beginPath();l.rect(0,0,O,D);l.fill();l.clip();
l.fillStyle="white";l.fillText(H,L,J);l.restore();l.fillStyle="white";l.beginPath();l.rect(O,0,x,D);l.fill();l.clip();l.fillStyle="black"}l.fillText(H,L,J);l.restore()}function g(x){let D=m.clientWidth,H=m.getBoundingClientRect().left+window.scrollX;x=(x.pageX-H)/D;b&&(x=Math.pow(Math.max(x,0),1.5));v.setValue(x*k+a)}function e(x){switch(n){case 1:return g(x);case 2:var D=v.title();if(!D.includes(ha("Brush size"))&&!D.includes(ha("Opacity")))return g(x);D=(x.pageX-r)/4;if(0!==D){D=v.value+D;let H=
Math.floor(D);v.setValue(H);r=x.pageX-4*(D-H)}}}let m=document.createElement("canvas"),l=m.getContext("2d"),k=c-a,n=0,r,u=!1,v=this;this.value=void 0;this.title="";d=d||!1;m.addEventListener("pointerup",x=>{if(0===n)return m.releasePointerCapture(x.pointerId),m.removeEventListener("pointermove",e);if(0!==n)switch(n){case 1:0!==x.button||x.shiftKey||(n=0);break;case 2:(2==x.button||0===x.button&&x.shiftKey)&&(n=0);break;default:return}return m.releasePointerCapture(x.pointerId),m.removeEventListener("pointermove",
e)});this.setValue=function(x){x=~~Math.max(a,Math.min(c,x));this.value!=x&&(this.value=x,this.emitEvent("valueChange",[this.value]),u?p():(u=!0,this.resize()))};this.getElement=function(){return m};this.resize=function(){m.width=m.clientWidth||h;m.height=m.clientHeight||20;1<window.devicePixelRatio&&(m.style.height=m.height+"px",m.width*=window.devicePixelRatio,m.height*=window.devicePixelRatio);l.font=.47*m.height+"pt sans-serif";p()};m.addEventListener("pointerdown",function(x){0===n&&(2===x.button||
0===x.button&&x.shiftKey?(n=2,r=x.pageX):(n=1,g(x)),m.setPointerCapture(x.pointerId),m.addEventListener("pointermove",e))});m.addEventListener("contextmenu",function(x){x.preventDefault()});m.setAttribute("touch-action","none");m.className="chickenpaint-slider";"devicePixelRatio"in window||(window.devicePixelRatio=1)}function oe(a,c,d){function b(){for(var k=e.style,n=Number(p.getRgb()).toString(16);6>n.length;)n="0"+n;k.backgroundColor="#"+n}let h=this,p=new Bb(0),g=255,e=document.createElement("div");
this.getElement=function(){return e};this.setColor=function(k){p.isEqual(k)||(p.copyFrom(k),b(),this.emitEvent("colorChange",[p]))};this.setAlpha=function(k){k!=g&&(g=k,b(),this.emitEvent("alphaChange",[g]))};this.getColorRgb=function(){return p.getRgb()};this.getAlpha=function(){return g};this.setCurColor=this.setColor;e.className="chickenpaint-color-pick-swatch";a&&p.copyFrom(a);c&&(g=c);let m=new oc.Popover(e,{html:!0,content:function(){return window.addEventListener("mousedown",l),function(){let k=
document.createElement("div"),n=document.createElement("div"),r=new Ng(h,p),u=new Og(h,r,p.getHue()),v=new Fc(0,255);return k.className="chickenpaint-color-pick-panel",n.className="chickenpaint-colorpicker-top",n.appendChild(r.getElement()),n.appendChild(u.getElement()),k.appendChild(n),v.value=g,v.title=function(x){return ha("Opacity: ")+x},v.on("valueChange",function(x){h.setAlpha(x)}),k.appendChild(v.getElement()),setTimeout(function(){v.resize()},0),k}()},trigger:"manual",placement:"bottom",container:d||
!1}),l=function(k){var n=k.target;n=n.closest(".popover-body")||n.classList.contains("chickenpaint-color-pick-panel")||n.classList.contains("chickenpaint-colorpicker-select")||n.classList.contains("chickenpaint-colorpicker-slider");k.preventDefault();n||m.hide()};e.addEventListener("click",function(k){k.preventDefault();m.toggle()});e.addEventListener("hidden.bs.popover",function(){window.removeEventListener("mousedown",l)});b()}function Hf(a,c){let d=document.createElement("div");return d.className=
"chickenpaint-checkbox-slider-group",d.appendChild(a.getElement()),d.appendChild(c.getElement()),d}function Pg(a,c){for(let d in c)if(c.hasOwnProperty(d)){let b=document.createElement("option");b.appendChild(document.createTextNode(ha(c[d])));b.value=d;a.appendChild(b)}}function Lh(a){function c(){p.gradient(p.getBounds(),0,0,p.width,0,m,!0);e.putImageData(p.imageData,0,0,0,0,150,32);b.fillRect(0,0,d.width,d.height);b.drawImage(g,0,0)}let d=document.createElement("canvas"),b=d.getContext("2d"),h=
Mg(b),p=new G(150,32),g=document.createElement("canvas"),e=g.getContext("2d"),m=a.getCurGradient();this.getElement=function(){return d};a.on("gradientChange",function(l){m=l;c()});d.width=g.width=150;d.height=g.height=32;d.className="chickenpaint-gradient-preview";b.fillStyle=h;c()}function Td(a){lc.call(this,a,"brush","Tool options");let c=new Mh(a),d=new Nh(a),b=new Oh(a),h=this.getBodyElement();h.addEventListener("touchmove",p=>{p.preventDefault()},{passive:!1});h.appendChild(c.getElement());h.appendChild(d.getElement());
h.appendChild(b.getElement());a.on("modeChange",function(p){switch(c.getElement().style.display="none",d.getElement().style.display="none",b.getElement().style.display="none",p){case la.M_GRADIENTFILL:d.getElement().style.display="block";break;case la.M_TRANSFORM:b.getElement().style.display="block";break;default:c.getElement().style.display="block"}})}function Mh(a){let c=[1,2,3,4,5,6,7,8,9,10,15,20,25,30,35,40,45,50,60,70,80,90,100,125,150,175,200],d=document.createElement("div"),b=document.createElement("select"),
h=new Sd(!1,ha("Control brush opacity with pen pressure")),p=new Fc(1,255),g=new Sd(!0,ha("Control brush size with pen pressure")),e=new Fc(1,200,!1,!0),m=new Sd(!1,ha("Control brush scattering with pen pressure")),l=new Fc(0,1E3,!1,!0),k=new Fc(0,100,!1,!0),n=new Fc(0,100,!1,!0),r=new Fc(0,100,!1,!0),u=new Fc(0,100,!1,!0),v=new Td.CPBrushPreview(a);this.getElement=function(){return d};p.title=function(x){return ha("Opacity")+": "+x};p.on("valueChange",function(x){a.setAlpha(x)});e.title=function(x){return ha("Brush size")+
": "+x};e.on("valueChange",function(x){a.setBrushSize(x)});k.title=function(x){return ha("Color")+": "+x+"%"};k.on("valueChange",function(x){a.getBrushInfo().resat=x/100;a.callToolListeners()});n.title=function(x){return ha("Blend")+": "+x+"%"};n.on("valueChange",function(x){a.getBrushInfo().bleed=x/100;a.callToolListeners()});r.title=function(x){return ha("Spacing")+": "+x+"%"};r.on("valueChange",function(x){a.getBrushInfo().spacing=x/100;a.callToolListeners()});l.title=function(x){return ha("Scattering")+
": "+x+"%"};l.on("valueChange",function(x){a.getBrushInfo().scattering=x/100;a.callToolListeners()});u.title=function(x){return ha("Smoothing")+": "+x+"%"};u.on("valueChange",function(x){a.getBrushInfo().smoothing=x/100;a.callToolListeners()});m.on("valueChange",function(x){a.getBrushInfo().pressureScattering=x;a.callToolListeners()});h.on("valueChange",function(x){a.getBrushInfo().pressureAlpha=x;a.callToolListeners()});g.on("valueChange",function(x){a.getBrushInfo().pressureSize=x;a.callToolListeners()});
b.addEventListener("change",function(x){a.getBrushInfo().tip=parseInt(b.value,10);b.blur()});b.className="form-control form-control-sm";b.tabIndex=-1;Pg(b,["Round Pixelated","Round Hard Edge","Round Soft","Square Pixelated","Square Hard Edge"]);d.appendChild(b);d.appendChild(v.getElement());d.appendChild(Hf(g,e));d.appendChild(Hf(h,p));d.appendChild(k.getElement());d.appendChild(n.getElement());d.appendChild(r.getElement());d.appendChild(Hf(m,l));d.appendChild(u.getElement());h.setValue(a.getBrushInfo().pressureAlpha);
p.setValue(a.getAlpha());g.setValue(a.getBrushInfo().pressureSize);e.setValue(a.getBrushSize());m.setValue(a.getBrushInfo().pressureScattering);l.setValue(~~(100*a.getBrushInfo().scattering));b.value=a.getBrushInfo().tip;k.setValue(~~(100*a.getBrushInfo().resat));n.setValue(~~(100*a.getBrushInfo().bleed));r.setValue(~~(100*a.getBrushInfo().spacing));u.setValue(~~(100*a.getBrushInfo().smoothing));a.on("toolChange",function(x,D){p.setValue(D.alpha);e.setValue(D.size);g.setValue(D.pressureSize);h.setValue(D.pressureAlpha);
b.value=D.tip;m.setValue(D.pressureScattering);~~(100*D.resat)!=k.value&&k.setValue(~~(100*D.resat));~~(100*D.bleed)!=n.value&&n.setValue(~~(100*D.bleed));~~(100*D.spacing)!=r.value&&r.setValue(~~(100*D.spacing));~~(100*D.scattering)!=l.value&&l.setValue(~~(100*D.scattering));~~(100*D.smoothing)!=u.value&&u.setValue(~~(100*D.smoothing))});pa(Sb)("1,2,3,4,5,6,7,8,9,0",function(x,D){x=parseInt(D.shortcut,10);0==x&&(x=10);a.setAlpha(Math.round(x/10*255))});pa(Sb)("{,[",function(){let x=a.getBrushSize();
for(let D=c.length-1;0<=D;D--)if(x>c[D]){a.setBrushSize(c[D]);break}});pa(Sb)("},]",function(){let x=a.getBrushSize();for(let D=0;D<c.length;D++)if(x<c[D]){a.setBrushSize(c[D]);break}})}function Nh(a){function c(){let e=[p.getAlpha()<<24|p.getColorRgb(),g.getAlpha()<<24|g.getColorRgb()];a.setCurGradient(e)}var d;let b=document.createElement("div");var h=new Lh(a);let p=new oe(new Bb(16777215&a.getCurGradient()[0]),a.getCurGradient()[0]>>>24,b),g=new oe(new Bb(16777215&a.getCurGradient()[1]),a.getCurGradient()[1]>>>
24,b);this.getElement=function(){return b};b.className="chickenpaint-gradient-panel";b.style.display="none";p.on("colorChange",c);p.on("alphaChange",c);g.on("colorChange",c);g.on("alphaChange",c);(d=document.createElement("p")).textContent=ha("Gradient");b.appendChild(d);b.appendChild(h.getElement());(d=document.createElement("div")).className="chickenpaint-gradient-colors";(h=document.createElement("div")).className="chickenpaint-gradient-start-color";h.appendChild(p.getElement());d.appendChild(h);
(h=document.createElement("div")).className="chickenpaint-gradient-end-color";h.appendChild(g.getElement());d.appendChild(h);b.appendChild(d)}function Oh(a){var c={smooth:ha("Smooth"),sharp:ha("Sharp")};let d=document.createElement("div"),b=document.createElement("button"),h=document.createElement("button");var p=document.createElement("select");if(this.getElement=function(){return d},d.className="chickenpaint-transform-panel",d.style.display="none",b.type="button",h.type="button",b.className="btn btn-primary btn-block",
h.className="btn btn-light btn-block",b.textContent=ha("Apply transform"),h.textContent=ha("Cancel"),p.addEventListener("change",function(g){a.setTransformInterpolation(this.value)}),p.className="form-control chickenpaint-transform-interpolation",Pg(p,c),of(Zc(0,0).getContext("2d"))){c=document.createElement("div");let g=document.createElement("label");g.textContent=ha("Transform style");c.className="form-group";c.appendChild(g);c.appendChild(p);d.appendChild(c)}p=document.createElement("div");p.appendChild(b);
p.appendChild(h);p.className="form-group";d.appendChild(p);b.addEventListener("click",function(g){a.actionPerformed({action:"CPTransformAccept"});g.preventDefault()});h.addEventListener("click",function(g){a.actionPerformed({action:"CPTransformReject"});g.preventDefault()})}function Ph(a){a.preventDefault();a.stopPropagation()}function Gc(a){let c=document.createElement("span");return c.className="fa "+a,c}function If(a){let c=document.createElement("span");return c.className="chickenpaint-icon chickenpaint-icon-"+
a,c}function Qg(a,c){let d=document.createElement("div"),b=document.createElement("label");return b.tabIndex=-1,a.tabIndex=-1,d.className="form-check",a.className="form-check-input",b.className="form-check-label",b.setAttribute("for",a.id),b.appendChild(a),b.appendChild(document.createTextNode(c)),d.appendChild(a),d.appendChild(b),d}function Qe(a){function c(){let J=h.getActiveLayer();J.getAlpha()!=l.value&&l.setValue(J.getAlpha());let O=h.getActiveLayer();for(;k.lastChild;)k.removeChild(k.lastChild);
for(let K=T.LM_FIRST;K<=T.LM_LAST;K++)if(K!=T.LM_MULTIPLY2&&(K==O.blendMode||K===T.LM_PASSTHROUGH&&O instanceof nb||K<=T.LM_LAST_CHIBIPAINT)){let X=document.createElement("option");X.appendChild(document.createTextNode(ha(T.BLEND_MODE_DISPLAY_NAMES[K])));K!==T.LM_MULTIPLY||O.blendMode===K||O.useLegacyMultiply?X.value=K:X.value=T.LM_MULTIPLY2;k.appendChild(X)}J.getBlendMode()!=parseInt(k.value,10)&&(k.value=J.getBlendMode());J.getLockAlpha()!=u.checked&&(u.checked=J.getLockAlpha());(function(){var K=
h.getActiveLayer();let X=h.isEditingMask();K={"image-layer":K instanceof Pa,"layer-group":K instanceof nb,"clipping-mask":K instanceof Pa&&K.clip,"no-clipping-mask":K instanceof Pa&&!K.clip,"no-clipping-mask-or-is-group":!(K instanceof Pa)||!K.clip,mask:K&&null!==K.mask,"no-mask":K&&null===K.mask,"mask-enabled":K&&null!==K.mask&&K.maskVisible,"mask-disabled":K&&null!==K.mask&&!K.maskVisible,isNotEditingMask:K&&!X,isEditingMask:K&&null!==K.mask&&X};for(let W of"mask no-mask isEditingMask isNotEditingMask clipping-mask no-clipping-mask-or-is-group image-layer layer-group".split(" "))for(let Y of x.getElementsByClassName("chickenpaint-action-require-"+
W))Y.style.display=K[W]?"inline-block":"none";x.querySelectorAll("[data-action]").forEach(function(W){let Y=W.getAttribute("data-action");W.classList.toggle("disabled",!a.isActionAllowed(Y))})})()}function d(){h=this;m.resize();c()}lc.call(this,a,"layers","Layers",{resizeHorz:!0,resizeVert:!0});let b=this,h=a.getArtwork(),p=null,g=this.getBodyElement(),e=this.getElement(),m=new function(){function J(Na){let ja=Wa.querySelectorAll(".chickenpaint-layer");return ja[ja.length-1-Na]}function O(Na){Na=
Na.closest(".chickenpaint-layer");if(!Na)return-1;let ja=Array.from(Wa.querySelectorAll(".chickenpaint-layer"));return ja.length-1-ja.indexOf(Na)}function K(){if(2===na.state){let xa=e.getBoundingClientRect();var Na=!0;let fa=!0;if(na.dropTarget=function(Qa,ma){var Ua=pa(Oa)(".chickenpaint-layer",Wa);Qa={layer:p[p.length-1],displayIndex:p.length-1,direction:"over"};for(var Ja=0;Ja<Ua.length;Ja++){let kb=Ua[Ua.length-1-Ja].getBoundingClientRect();if(0===Ja&&ma>kb.bottom){Qa=h.getLayersRoot().layers[0];
Qa={layer:Qa,displayIndex:p.indexOf(Qa),direction:"under"};break}if(ma>=kb.top){Ua=p[Ja];let bc=kb.bottom-kb.top;Qa={layer:Ua,displayIndex:Ja};Ua instanceof nb?ma>=kb.top+.75*bc?Ua.expanded&&0<Ua.layers.length?(Qa.layer=Ua.layers[Ua.layers.length-1],Qa.displayIndex--,Qa.direction="over"):Qa.direction="under":ma>=kb.top+.25*bc?Ua.expanded&&0<Ua.layers.length?(Qa.layer=Ua.layers[Ua.layers.length-1],Qa.displayIndex--,Qa.direction="over"):Qa.direction="inside":Qa.direction="over":ma>=kb.top+.5*bc?Qa.direction=
"under":Qa.direction="over";break}}return Qa.layer.parent==na.layer.parent&&("over"==Qa.direction||"under"==Qa.direction)&&(ma=Qa.layer.parent,Ja=ma.indexOf(Qa.layer),"over"==Qa.direction&&ma.layers[Ja+1]==na.layer||"under"==Qa.direction&&ma.layers[Ja-1]==na.layer||Qa.layer==na.layer)?null:na.layer instanceof nb&&(Qa.layer==na.layer&&"inside"==Qa.direction||Qa.layer.hasAncestor(na.layer))?null:Qa}(na.dragX,na.dragY),na.dropTarget){var ja=J(na.dropTarget.displayIndex);switch(na.dropTarget.direction){case "over":case "under":Wa.appendChild(na.dropBetweenMarkerElem);
Na=na.dropTarget.layer.getDepth()-1;var Aa;if(ja=ja.getBoundingClientRect(),"under"==na.dropTarget.direction&&na.dropTarget.layer instanceof nb&&na.dropTarget.layer.expanded){for(Aa=na.dropTarget.displayIndex-1;0<=Aa&&p[Aa].hasAncestor(na.dropTarget.layer);Aa--);Aa=J(Aa+1).getBoundingClientRect().bottom}else Aa=ja.bottom;Na=ja.left-xa.left+(0<Na?26+16*Na:0);na.dropBetweenMarkerElem.style.left=Na+"px";na.dropBetweenMarkerElem.style.width=ja.right-xa.left-Na+"px";na.dropBetweenMarkerElem.style.top=
("over"==na.dropTarget.direction?ja.top-1:Aa+1)-xa.top+"px";pa(Oa)(".chickenpaint-layer-drop-target",Wa).removeClass("chickenpaint-layer-drop-target");Na=!1;break;case "inside":let Qa=pa(Oa)(".chickenpaint-layer",Wa);Qa.each(function(ma){pa(Oa)(this).toggleClass("chickenpaint-layer-drop-target",Qa.length-1-ma==na.dropTarget.displayIndex)});fa=!1}}fa&&pa(Oa)(".chickenpaint-layer-drop-target",Wa).removeClass("chickenpaint-layer-drop-target");Na&&na.dropBetweenMarkerElem&&na.dropBetweenMarkerElem.remove();
na.frameElem.style.top=na.dragY-xa.top-parseInt(na.frameElem.style.height,10)/2+"px"}else na.dropBetweenMarkerElem&&na.dropBetweenMarkerElem.remove(),na.frameElem&&na.frameElem.remove()}function X(Na){let ja=Na.getImageThumbnail().getAsCanvas(Lb);return ja.title=ha("Image"),ja.className="chickenpaint-layer-thumbnail chickenpaint-layer-image-thumbnail",ja.style.maxWidth=ja.width/ja.height*25+"px",Na!=h.getActiveLayer()||h.isEditingMask()||(ja.className+=" active"),ja}function W(Na){let ja=Na.getMaskThumbnail().getAsCanvas(Lb);
(ja.title=ha("Layer mask"),ja.className="chickenpaint-layer-thumbnail chickenpaint-layer-mask-thumbnail",ja.style.maxWidth=ja.width/ja.height*25+"px",Na==h.getActiveLayer()&&h.isEditingMask()&&(ja.className+=" active"),Na.maskVisible)||(ja.className+=" disabled",Na=ja.getContext("2d"),Na.strokeStyle="red",Na.lineWidth=3,Na.moveTo(5,5),Na.lineTo(ja.width-5,ja.height-5),Na.moveTo(ja.width-5,5),Na.lineTo(5,ja.height-5),Na.stroke());return ja}function Y(Na,ja){let Aa=document.createElement("div");var xa=
document.createElement("div");let fa=document.createElement("div");var Qa=document.createElement("div");let ma=document.createElement("div"),Ua=document.createElement("div"),Ja=document.createElement("div");if(Aa.className="chickenpaint-layer list-group-item",ja==h.getActiveLayer()&&(Aa.className+=" active"),xa.className="chickenpaint-layer-eye",ja.ancestorsAreVisible()||(xa.className+=" chickenpaint-layer-eye-hidden-ancestors"),xa.style.marginRight=2+16*(ja.getDepth()-1)+"px",ja.visible?(Aa.className+=
" chickenpaint-layer-visible",xa.appendChild(Gc("icon-eye"))):(Aa.className+=" chickenpaint-layer-hidden",xa.appendChild(Gc("icon-eye-slash"))),Aa.appendChild(xa),fa.className="chickenpaint-layer-description",ja instanceof Pa){if(ja.clip&&(Aa.className+=" chickenpaint-layer-clipped",Qa.appendChild(Gc("icon-level-down-alt fa-flip-horizontal"))),ja.lockAlpha)xa=If("lock-alpha"),xa.title=ha("Transparency locked"),Ua.appendChild(xa)}else ja instanceof nb&&(Aa.className+=" chickenpaint-layer-group",ja.expanded?
(Aa.className+=" chickenpaint-layer-group-expanded",Qa.appendChild(Gc("icon-folder-open chickenpaint-layer-group-toggle"))):(Aa.className+=" chickenpaint-layer-group-collapsed",Qa.appendChild(Gc("icon-folder chickenpaint-layer-group-toggle"))));Qa.childNodes.length&&(Qa.className="chickenpaint-layer-icons",Aa.appendChild(Qa));try{ja instanceof Pa&&Aa.appendChild(X(ja)),ja.mask&&Aa.appendChild(W(ja))}catch(kb){console.log("Failed to create layer thumb")}Qa=ja.name&&0<ja.name.length?ja.name:"(unnamed "+
(ja instanceof nb?"group":"layer")+")";return ma.innerText=Qa,ma.setAttribute("title",Qa),ma.className="chickenpaint-layer-name",Ja.innerText=ha(T.BLEND_MODE_DISPLAY_NAMES[ja.blendMode])+": "+ja.alpha+"%",Ja.className="chickenpaint-layer-blend",fa.appendChild(ma),fa.appendChild(Ja),Aa.appendChild(fa),Ua.className="chickenpaint-layer-status",Aa.appendChild(Ua),Aa.setAttribute("data-display-index",""+Na),Aa}function ka(Na){if(-1<Na){let ja=p[Na];Na=J(Na);ja&&Na&&n.show(ja,Na)}}function va(Na){2===na.state?
(pa(Oa)(na.layerElem).removeClass("chickenpaint-layer-dragging"),na.dropTarget&&("inside"==na.dropTarget.direction?a.actionPerformed({action:"CPRelocateLayer",layer:na.layer,toGroup:na.dropTarget.layer,toIndex:na.dropTarget.layer.layers.length}):a.actionPerformed({action:"CPRelocateLayer",layer:na.layer,toGroup:na.dropTarget.layer.parent,toIndex:na.dropTarget.layer.parent.indexOf(na.dropTarget.layer)+ +("over"==na.dropTarget.direction)})),na.dropTarget=null,na.state=0,K()):na.state=0;La&&(clearTimeout(La),
La=null);Wa.releasePointerCapture(Na.pointerId);Wa.removeEventListener("pointermove",S);Wa.removeEventListener("pointerup",va)}function Ia(){na.state=2;na.frameElem=document.createElement("div");na.frameElem.className="chickenpaint-layer-drag-frame";na.frameElem.style.width=pa(Oa)(na.layerElem).outerWidth(!1)+"px";na.frameElem.style.height=pa(Oa)(na.layerElem).outerHeight(!1)+"px";na.dropBetweenMarkerElem=document.createElement("div");na.dropBetweenMarkerElem.className="chickenpaint-layer-drop-between-mark";
na.layerElem.className+=" chickenpaint-layer-dragging";Wa.appendChild(na.frameElem)}function S(Na){Na=Na.clientY;switch(na.state){case 3:if(5<Math.abs(Na-na.dragY))na.state=4;else break;case 4:Wa.scrollTop=na.initialScrollTop+na.dragY-Na;break;case 1:if(5<Math.abs(Na-na.dragY))Ia();else break;case 2:na.dragY=Na,K()}}function ya(Na,ja,Aa){try{Aa?pa(Oa)(".chickenpaint-layer-mask-thumbnail",Na).replaceWith(W(ja)):pa(Oa)(".chickenpaint-layer-image-thumbnail",Na).replaceWith(X(ja))}catch(xa){}}let na=
{state:0,layer:null,layerElem:null,dragX:0,dragY:0,initialScrollTop:0,dropTarget:null,dropBetweenMarkerElem:null,frameElem:null},wb=document.createElement("div"),Wa=document.createElement("div"),Lb=0,Fb=!1,La=null;for(let Na of(this.buildLayers=function(){let ja=(p=h.getLayersRoot().getLinearizedLayerList(!0)).map((xa,fa)=>Y(fa,xa)),Aa=document.createDocumentFragment();pa(Oa)(Wa).empty();for(let xa=ja.length-1;0<=xa;xa--)Aa.appendChild(ja[xa]);Wa.appendChild(Aa);K()},this.layerChanged=function(ja){let Aa=
p.indexOf(ja),xa=pa(Oa)(J(Aa));0===xa.length||ja instanceof nb&&(ja.expanded!=pa(Oa)(xa).hasClass("chickenpaint-layer-group-expanded")||ja.visible!=pa(Oa)(xa).hasClass("chickenpaint-layer-visible"))?this.buildLayers():xa.replaceWith(Y(Aa,ja))},this.setRotation90=function(ja){if(Lb!=ja)for(Lb=ja,ja=0;ja<p.length;ja++){let Aa=p[ja],xa=pa(Oa)(J(ja));0<xa.length&&(ya(xa,Aa,!1),Aa.mask&&ya(xa,Aa,!0))}},this.layerImageThumbChanged=function(ja){var Aa=p.indexOf(ja);Aa=pa(Oa)(J(Aa));0<Aa.length&&ya(Aa,ja,
!1)},this.layerMaskThumbChanged=function(ja){var Aa=p.indexOf(ja);Aa=pa(Oa)(J(Aa));0<Aa.length&&(ja.mask?ya(Aa,ja,!0):pa(Oa)(".chickenpaint-layer-mask-thumbnail",Aa).remove())},this.activeLayerChanged=function(ja,Aa){pa(Oa)(".active",Wa).removeClass("active");ja=pa(Oa)(J(p.indexOf(ja)));ja.addClass("active");pa(Oa)(".chickenpaint-layer-image-thumbnail",ja).toggleClass("active",!Aa);pa(Oa)(".chickenpaint-layer-mask-thumbnail",ja).toggleClass("active",Aa)},this.resize=function(){b.dismissNotification();
this.buildLayers()},this.getElement=function(){return wb},this.revealLayer=function(ja){ja=J(ja);let Aa=ja.getBoundingClientRect(),xa=Wa.getBoundingClientRect();return Wa.scrollTop=Math.max(Math.min(Math.max(Wa.scrollTop,Wa.scrollTop+Aa.bottom-xa.bottom),Wa.scrollTop+Aa.top-xa.top),0),ja},e.id="chickenpaint-layer-pop",wb.className="chickenpaint-layers-widget",wb.addEventListener("contextmenu",ja=>ja.preventDefault(),!0),Wa.className="list-group",Wa.addEventListener("dblclick",function(ja){0===ja.button&&
0<pa(Oa)(ja.target).closest(".chickenpaint-layer-description").length&&0===pa(Oa)(ja.target).closest("input").length&&(ka(O(ja.target)),ja.preventDefault())}),Wa.addEventListener("pointerdown",function(ja){let Aa=O(ja.target.closest(".chickenpaint-layer"));if(-1!=Aa){let xa=p[Aa];if(0==ja.button&&pa(Oa)(ja.target).closest(".chickenpaint-layer-eye").length)a.actionPerformed({action:"CPSetLayerVisibility",layer:xa,visible:!xa.visible});else if(0==ja.button&&xa instanceof nb&&pa(Oa)(ja.target).closest(".chickenpaint-layer-group-toggle").length)a.actionPerformed({action:"CPExpandLayerGroup",
group:xa,expand:!xa.expanded});else{let fa=h.getActiveLayer()!=xa;if(Fb=0<pa(Oa)(ja.target).closest(".chickenpaint-layer-mask-thumbnail").length||xa instanceof nb&&null!==xa.mask&&fa,0==ja.button&&ja.shiftKey&&!ja.ctrlKey&&!ja.metaKey&&Fb)a.actionPerformed({action:"CPSetMaskVisible",layer:xa,visible:!xa.maskVisible});else{let Qa,ma;(Qa=0==ja.button||fa?Fb:h.isEditingMask(),ma=h.isEditingMask()!=Qa,(fa||ma)&&a.actionPerformed({action:"CPSetActiveLayer",layer:xa,mask:Qa}),Qa&&ja.altKey)?a.actionPerformed({action:"CPToggleMaskView"}):
Qa&&!ja.shiftKey&&(ja.ctrlKey||ja.metaKey)?a.actionPerformed({action:"CPApplyLayerMask"}):Qa&&ja.shiftKey&&(ja.ctrlKey||ja.metaKey)?a.actionPerformed({action:"CPRemoveLayerMask"}):0==ja.button?("pen"===ja.pointerType||"touch"===ja.pointerType?(na.state=3,na.initialScrollTop=Wa.scrollTop,La&&clearTimeout(La),La=setTimeout(()=>{3===na.state&&(Ia(),na.dragY=ja.clientY,K())},800)):na.state=1,na.dropTarget=null,na.layer=xa,na.layerElem=J(Aa),na.dragX=ja.clientX,na.dragY=ja.clientY,Wa.setPointerCapture(ja.pointerId),
Wa.addEventListener("pointermove",S),Wa.addEventListener("pointerup",va)):2!=ja.button||fa||(ja.preventDefault(),-1!=O(ja.target)&&(ka(O(ja.target)),ja.preventDefault()))}}}}),Wa.setAttribute("touch-action","none"),["ontouchstart","ontouchmove","ontouchend","ontouchcancel"]))Wa.addEventListener(Na,Ph);wb.appendChild(Wa)},l=new Fc(0,100,!1,!1,208),k=document.createElement("select"),n=new function(){let J=null,O="",K=document.createElement("input"),X=this;this.hide=function(){J=null;let W=pa(Oa)(K).parent();
W&&(pa(Oa)(K).remove(),W.text(O))};this.renameAndHide=function(){J&&J.name!=K.value&&a.actionPerformed({action:"CPSetLayerName",layer:J,name:K.value});this.hide()};this.show=function(W,Y){K.value=O=(J=W).name;(W=Y.querySelector(".chickenpaint-layer-name"))&&W.parentNode&&(Y=W.firstChild)&&Y.nodeType===Node.TEXT_NODE&&(W.removeChild(Y),W.appendChild(K));K.select()};K.type="text";K.className="chickenpaint-layer-rename form-control input-sm";K.addEventListener("keydown",function(W){W.stopPropagation()});
K.addEventListener("keydown",function(W){"Enter"===W.key&&X.renameAndHide();W.stopPropagation()});K.addEventListener("keyup",function(W){"Escape"===W.key&&X.hide();W.stopPropagation()});K.addEventListener("blur",function(W){J&&X.renameAndHide()})},r=document.createElement("input"),u=document.createElement("input"),v=!1,x,D=this.setSize,H=this.setWidth,L=this.setHeight;this.setSize=function(J,O){D.call(this,J,O);this.dismissNotification();l.resize()};this.setWidth=function(J){H.call(this,J);l.resize();
m.resize()};this.setHeight=function(J){L.call(this,J);m.resize()};this.setRotation90=function(J){m.setRotation90(J)};this.dismissNotification=function(){pa(Oa)(".chickenpaint-layer[aria-describedby],.chickenpaint-slider[aria-describedby]",g).each((J,O)=>{O=pa(Oa)(O);(J=oc.Popover.getInstance(O[0]))&&J.dispose()});v&&(clearTimeout(v),v=!1)};this.showNotification=(J,O,K)=>{let X=p.indexOf(J);J=h.getActiveLayer()==J&&"opacity"==K?l.getElement():m.revealLayer(X);this.dismissNotification();(new oc.Popover(J,
{html:!1,content:O,placement:"left",trigger:"manual",fallbackPlacement:[],boundary:"window",container:b.getElement()})).show();v=setTimeout(()=>{v=!1;this.dismissNotification()},Math.max(Math.round(70*O.length),3E3))};k.className="form-control form-control-sm";k.tabIndex=-1;k.title=ha("Layer blending mode");k.addEventListener("change",function(J){a.actionPerformed({action:"CPSetLayerBlendMode",blendMode:parseInt(k.value,10)});k.blur()});g.appendChild(k);l.title=function(J){return ha("Opacity")+": "+
J+"%"};l.on("valueChange",function(J){a.actionPerformed({action:"CPSetLayerAlpha",alpha:J})});g.appendChild(l.getElement());r.id="chickenpaint-chk-sample-all-layers";r.type="checkbox";r.addEventListener("click",function(J){h.setSampleAllLayers(r.checked);document.activeElement.blur()});g.appendChild(Qg(r,ha("Sample all layers")));u.id="chickenpaint-chk-lock-alpha";u.type="checkbox";u.addEventListener("click",function(J){a.actionPerformed({action:"CPSetLayerLockAlpha",lock:u.checked});document.activeElement.blur()});
g.appendChild(Qg(u,ha("Lock transparency")));g.appendChild(m.getElement());x=function(){var J=[{title:"Add layer",icon:Gc("icon-file"),action:"CPAddLayer"},{title:"Add group",icon:Gc("icon-folder"),action:"CPAddGroup"},{title:"Merge down",icon:Gc("icon-download_FILL"),action:"CPLayerMergeDown",require:["image-layer"]},{title:"Merge group",icon:Gc("icon-collapse_all_FILL"),action:"CPGroupMerge",require:["layer-group"]},{title:"Clip to the layer below",icon:Gc("icon-level-down-alt fa-flip-horizontal"),
action:"CPCreateClippingMask",require:"no-clipping-mask-or-is-group"},{title:"Unclip from the layer below",icon:Gc("icon-level-down-alt fa-flip-horizontal"),action:"CPReleaseClippingMask",require:"clipping-mask"},{title:"Add layer mask",icon:If("mask"),action:"CPAddLayerMask",require:["no-mask"]},{title:"Apply mask",icon:If("mask"),action:"CPApplyLayerMask",require:["mask"]},{title:"Duplicate",icon:Gc("icon-clone"),action:"CPLayerDuplicate"},{title:"Delete layer mask",icon:Gc("icon-trash"),action:"CPRemoveLayerMask",
require:"isEditingMask"},{title:"Delete layer",icon:Gc("icon-trash"),action:"CPRemoveLayer",require:"isNotEditingMask"}];let O=document.createElement("ul");for(let K of(O.className="chickenpaint-layer-buttons list-unstyled",J))J=document.createElement("li"),J.setAttribute("data-action",K.action),J.className="chickenpaint-small-toolbar-button "+(K.require?"chickenpaint-action-require-"+K.require:""),J.title=ha(K.title),J.appendChild(K.icon),J.addEventListener("click",function(){a.actionPerformed({action:K.action})}),
O.appendChild(J);return O}();g.appendChild(x);h.on("changeActiveLayer",function(J,O,K){m.activeLayerChanged(O,K);c()});h.on("changeLayer",function(J){h=this;b.dismissNotification();m.layerChanged(J);c()});h.on("changeStructure",d);h.on("changeLayerMaskThumb",function(J){h=this;m.layerMaskThumbChanged(J)});h.on("changeLayerImageThumb",function(J){h=this;m.layerImageThumbChanged(J)});a.on("layerNotification",this.showNotification.bind(this));d.call(h)}function Qh(){this.table=new Uint8Array(256);this.loadIdentity=
function(){for(var a=0;256>a;a++)this.table[a]=a};this.loadBrightnessContrast=function(a,c){c=0<c?1/(1.0001-c):1+c;a=.5-.5*c+a;for(var d=0;256>d;d++)this.table[d]=Math.min(255,Math.max(~~(255*(d/255*c+a)),0))};this.invert=function(){for(var a=0;256>a;a++)this.table[a]=255-this.table[a]}}function Rg(a,c){let d=document.createElement("div"),b=document.createElement("label");return d.className="form-check",a.className="form-check-input",b.className="form-check-label",b.setAttribute("for",a.id),b.appendChild(a),
b.appendChild(document.createTextNode(c)),d.appendChild(a),d.appendChild(b),d}function Re(a){function c(X){for(let W=0;W<X.length;W++){let Y=new e(X[W],32,32);Y.on("click",function(){r=this.texture;g()});J.appendChild(Y.getElement())}}function d(X){let W=new Za(X,X,8);for(let Y=1;Y<X*X;Y++)W.data[Y]=255;return W}function b(X){let W=2*X,Y=new Za(W,W,8);for(let ka=0;ka<W;ka++)for(let va=0;va<W;va++)Y.data[ka+va*W]=255*(0!=(~~(ka/X)+~~(va/X))%2);return Y}function h(X,W){let Y=new Za(W,W,8);for(let ka=
0;ka<W*W;ka++)~~(ka%W)>=X&&(Y.data[ka]=255);return Y}function p(X,W){let Y=new Za(W,W,8);for(let ka=0;ka<W*W;ka++)ka/W>=X&&(Y.data[ka]=255);return Y}function g(){if(null!=r){u=r.clone();v&&u.mirrorHorizontally();let X=new Qh;X.loadBrightnessContrast(D,H);x&&X.invert();u.applyLUT(X)}else u=null;a.getArtwork().setBrushTexture(u);null!=L&&L.updateTexture()}function e(X,W,Y){let ka=document.createElement("canvas"),va=ka.getContext("2d"),Ia=this;this.setTexture=function(S){this.texture=S;this.paint()};
this.getElement=function(){return ka};this.paint=function(){null!=this.texture?va.fillStyle=va.createPattern(this.texture.getAsCanvas(),"repeat"):va.fillStyle="white";va.fillRect(0,0,ka.width,ka.height)};ka.addEventListener("click",function(){Ia.emit("click")});ka.width=W;ka.height=Y;this.setTexture(X)}var m;let l,k,n;lc.call(this,a,"textures","Textures");let r,u,v=!1,x=!1,D=0,H=0,L,J=document.createElement("div"),O=this.getBodyElement();e.prototype=Object.create(pa(Yb).prototype);e.prototype.constructor=
e;L=new function(){function X(){Ia.checked=x;S.checked=v;ya.setValue(100*D+100);na.setValue(100*H+100)}let W,Y,ka,va=document.createElement("div"),Ia=document.createElement("input"),S=document.createElement("input"),ya=new Fc(0,200,!0),na=new Fc(0,200,!0),wb=new e(null,64,64),Wa=document.createElement("button"),Lb,Fb=new oc.Popover(Wa,{html:!0,content:()=>Lb,trigger:"manual",placement:"right",container:O});this.updateTexture=function(){Wa.disabled=null==u;wb.setTexture(u)};this.getElement=function(){return va};
va.className="chickenpaint-texture-options";va.appendChild(wb.getElement());Wa.type="button";Wa.className="btn btn-light btn-sm";Wa.setAttribute("data-bs-toggle","popover");Wa.setAttribute("data-bs-placement","right");Wa.textContent=ha("Customize");(W=document.createElement("div")).className="chickenpaint-texture-controls";Ia.id="chickenpaint-chk-texture-invert";Ia.type="checkbox";Ia.addEventListener("click",function(La){x=this.checked;g()});W.appendChild(Rg(Ia,ha("Inverse")));S.id="chickenpaint-chk-texture-mirror";
S.type="checkbox";S.addEventListener("click",function(La){v=this.checked;g()});W.appendChild(Rg(S,ha("Mirror")));ya.title=function(La){return ha("Brightness")+": "+(La-100)+"%"};ya.on("valueChange",function(La){D=(La-100)/100;g()});W.appendChild(ya.getElement());na.title=function(La){return ha("Contrast")+": "+(La-100)+"%"};na.on("valueChange",function(La){H=(La-100)/100;g()});W.appendChild(na.getElement());Y=document.createElement("button");ka=document.createElement("button");Y.textContent="Ok";
Y.className="btn btn-primary btn-sm";Y.type="button";Y.addEventListener("click",function(La){Fb.hide()});W.appendChild(Y);W.appendChild(document.createTextNode(" "));ka.textContent="Reset";ka.className="btn btn-secondary btn-sm";ka.type="button";ka.addEventListener("click",function(La){H=D=0;x=v=!1;X();g()});W.appendChild(ka);X();Lb=W;Wa.addEventListener("click",function(){Fb.toggle()});va.appendChild(Wa);this.updateTexture()};O.appendChild(L.getElement());J.className="chickenpaint-texture-swatches";
O.appendChild(J);c((m=[null],(l=new Za(2,2,8)).data[0]=255,l.data[3]=255,m.push(l),m.push(d(2)),m.push(d(3)),m.push(d(4)),m.push(d(6)),m.push(d(8)),m.push(h(1,2)),m.push(h(2,4)),m.push(p(1,2)),m.push(p(2,4)),m.push(b(2)),m.push(b(4)),m.push(b(8)),m.push(b(16)),m.push(function(X){let W=new Za(256,X,8);for(let Y=0;Y<X*X;Y++)W.data[Y]=Math.max(0,Math.min(255,Math.floor(.65*(.65*Math.floor(256*Math.random())-128)+128)));return W}(256)),m));m=a.getResourcesRoot()+"gfx/textures32.png?20241024.1";var K=
function(X){c(X)};k=new Image;n=[];k.onload=function(){var X=document.createElement("canvas");let W=X.getContext("2d",{willReadFrequently:!0});X.width=k.width;X.height=k.height;for(X=0;2>X;X++){W.drawImage(k,0,32*X,32,32,0,0,32,32);try{let Y=W.getImageData(0,0,32,32),ka=new Za(32,32,8);for(let va=0;1024>va;va++)ka.data[va]=Y.data[4*va];n.push(ka)}catch(Y){console.log(Y)}}K(n)};k.src=m}function Se(a){function c(D){let H=document.createElement("div"),L=document.createElement("a"),J=document.createElement("ul"),
O=document.createElement("a"),K=document.createElement("a"),X=this;this.getElement=function(){return H};this.setColor=function(Y){L.setAttribute("data-color",Y);var ka=L.style;for(Y=""+Number(Y).toString(16);6>Y.length;)Y="0"+Y;ka.backgroundColor="#"+Y};this.setColor(D);L.href="#";L.className="chickenpaint-color-swatch dropdown-toggle";O.className="dropdown-item";O.href="#";O.textContent=ha("Remove");O.addEventListener("click",function(Y){Y.preventDefault();H.remove();k=!0});K.className="dropdown-item";
K.href="#";K.textContent=ha("Replace with current color");K.addEventListener("click",function(Y){Y.preventDefault();X.setColor(a.getCurColor().getRgb());k=!0});J.className="dropdown-menu";D=document.createElement("li");let W=document.createElement("li");D.appendChild(O);W.appendChild(K);J.appendChild(D);J.appendChild(W);H.className="chickenpaint-color-swatch-wrapper";H.appendChild(L);H.appendChild(J)}function d(D){D=new c(D);n.appendChild(D.getElement())}function b(D){let H=document.createElement("span");
return H.className="fa icon-"+D,H}var h;let p;let g,e,m;lc.call(this,a,"swatches","Color swatches");var l=[16777215,0,16711680,65280,255,16776960];let k=!1,n=document.createElement("ul"),r=document.createElement("div"),u,v=this;this.getSwatches=function(){let D=n.querySelectorAll(".chickenpaint-color-swatch"),H=Array(D.length);for(let L=0;L<D.length;L++)H[L]=parseInt(D[L].getAttribute("data-color"),10);return H};this.setSwatches=function(D){for(;n.lastChild;)n.removeChild(n.lastChild);for(let H=0;H<
D.length;H++)d(D[H]);k=!0};this.isModified=function(){return k};n.className="chickenpaint-color-swatches list-unstyled";for(h=0;h<l.length;h++)n.appendChild((new c(l[h])).getElement());n.addEventListener("click",function(D){let H=D.target;/^<a data-color=/i.test(H.outerHTML)&&/chickenpaint-color-swatch/.test(H.className)&&0==D.button&&void 0!==H.getAttribute("data-color")&&(a.setCurColor(new Bb(parseInt(H.getAttribute("data-color"),10))),D.stopPropagation(),D.preventDefault())});n.addEventListener("contextmenu",
function(D){let H=D.target;if(/^<a data-color=/i.test(H.outerHTML)&&/chickenpaint-color-swatch/.test(H.className)){D.preventDefault();var L=new oc.Dropdown(H);L.toggle();document.addEventListener("click",function K(O){L.hide();document.removeEventListener("click",K)})}});this.getBodyElement().appendChild(n);l=document.createElement("button");h=document.createElement("button");p=document.createElement("ul");var x=document.createElement("a");g=document.createElement("a");h.type="button";h.title=ha("Add the current brush color as a new swatch");
h.className="btn chickenpaint-small-toolbar-button chickenpaint-color-swatch-add";h.appendChild(b("plus"));l.type="button";l.className="btn dropdown-toggle chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings";l.setAttribute("data-bs-toggle","dropdown");l.appendChild(b("cog"));x.className="dropdown-item";x.href="#";x.textContent=ha("Save swatches to your computer...");x.addEventListener("click",function(D){D.preventDefault();D=new Blob([(new Rd).write(v.getSwatches())],{type:"application/octet-stream"});
pa(me).saveAs(D,"oekakiswatches.aco")});g.className="dropdown-item";g.href="#";g.textContent=ha("Load swatches from your computer...");g.addEventListener("click",function(D){D.preventDefault();u.onchange=function(){var H=this.files;if(!(1>H.length)){H=H[0];var L=new FileReader;L.onload=function(){let J=(new Rd).read(this.result);null!=J&&0<J.length?v.setSwatches(J):alert(ha("The swatches could not be read, did you select an .aco file?"))};L.readAsArrayBuffer(H)}};u.click()});p.className="dropdown-menu";
e=document.createElement("li");m=document.createElement("li");e.appendChild(x);m.appendChild(g);p.appendChild(e);p.appendChild(m);(x=document.createElement("div")).className="btn-group";x.appendChild(l);x.appendChild(p);h.addEventListener("click",function(D){d(a.getCurColor().getRgb());k=!0});r.className="chickenpaint-color-swatches-buttons";window.File&&window.FileReader&&window.FileList&&window.Blob&&((u=document.createElement("input")).type="file",u.multiple=!1,u.style.display="none",r.appendChild(x),
r.appendChild(u));r.appendChild(h);this.getBodyElement().appendChild(r)}function Te(a){function c(){let k=g.closest(".chickenpaint").querySelector(".chickenpaint-canvas");return{width:k.offsetWidth,height:k.offsetHeight}}function d(k,n){let r=k.getElement();n?g.contains(r)||g.appendChild(r):g.contains(r)&&g.removeChild(r);e.emitEvent("paletteVisChange",[k.name,n])}let b={tool:new Me(a),misc:new Ne(a),stroke:new Oe(a),color:new Pe(a),brush:new Td(a),layers:new Qe(a),textures:new Re(a),swatches:new Se(a)},
h={tool:!1,color:!1,misc:!1};var p={color:!0,textures:!0,layers:!0};let g=document.createElement("div"),e=this,m=[],l=[];for(let k in this.palettes=b,this.showPaletteByName=function(n,r){(n=b[n])&&d(n,r)},this.togglePalettes=function(){if(0===l.length)g.querySelectorAll(".chickenpaint-palette").forEach(function(n){e.showPaletteByName(n.getAttribute("data-paletteName"),!1);l.push(n)});else{for(let n=0;n<l.length;n++)e.showPaletteByName(l[n].getAttribute("data-paletteName"),!0);l=[]}},this.constrainPalettes=
function(){let n=c();for(var r in b){let u=b[r];u.getX()+u.getWidth()/2>n.width&&u.setLocation(n.width-u.getWidth(),u.getY());u.getY()+u.getHeight()/2>n.height&&u.setLocation(u.getX(),n.height-u.getHeight())}r=0<n.width-b.tool.getWidth()-b.misc.getWidth()-b.stroke.getWidth()-b.color.getWidth()-b.brush.getWidth()-15;b.swatches.getX()+b.swatches.getWidth()==b.brush.getX()+b.brush.getWidth()&&20>Math.abs(b.swatches.getY()-b.brush.getY())&&b.swatches.setLocation(b.brush.getX()-b.swatches.getWidth()-(r?
5:1),0);b.layers.getY()+b.layers.getHeight()>n.height&&b.layers.setHeight(Math.max(n.height-b.layers.getY(),200))},this.arrangePalettes=function(){let n=c();if(a.getSmallScreenMode()){b.tool.setLocation(0,0);b.misc.setLocation(b.tool.getX()+b.tool.getWidth()+1,0);var r=16>=n.width-(b.tool.getWidth()+b.misc.getWidth()+b.brush.getWidth())?b.misc.getY()+b.misc.getHeight()+1:0;b.brush.setLocation(n.width-b.brush.getWidth()-15,r);b.textures.setWidth(n.width-b.textures.getX());b.layers.setLocation(b.brush.getX()+
b.brush.getWidth()-b.layers.getWidth(),b.textures.getY()-b.layers.getHeight());r=Math.max(b.textures.getY()-330-1,370);b.layers.setHeight(r);b.layers.setWidth(218);b.stroke.setLocation(b.misc.getX(),b.misc.getY()+b.misc.getHeight()+1);b.swatches.setLocation(b.stroke.getX(),b.stroke.getY()+b.stroke.getHeight()+1)}else{r=0<n.width-b.tool.getWidth()-b.misc.getWidth()-b.stroke.getWidth()-b.color.getWidth()-b.brush.getWidth()-15;b.brush.setLocation(n.width-b.brush.getWidth()-15,0);var u=b.brush.getY()+
b.brush.getHeight();u=300<n.height-u?u+2:u;b.layers.setSize(b.brush.getWidth()+30*!!r,n.height-u);b.layers.setLocation(b.brush.getX()+b.brush.getWidth()-b.layers.getWidth(),u);b.tool.setLocation(0,0);b.misc.setLocation(b.tool.getX()+b.tool.getWidth()+(r?5:1),0);r?b.stroke.setLocation(b.misc.getX()+b.misc.getWidth()+(r?5:1),0):b.stroke.setLocation(b.misc.getX(),b.misc.getY()+b.misc.getHeight()+1);b.swatches.setLocation(Math.max(b.brush.getX()-b.swatches.getWidth()-(r?5:1),b.tool.getX()+b.tool.getWidth()),
0);b.textures.setWidth(Math.min(b.layers.getX()-b.textures.getX(),490))}b.textures.setLocation(b.color.getX()+b.color.getWidth()+4,n.height-b.textures.getHeight());b.color.setLocation(0,Math.max(b.tool.getY()+b.tool.getHeight(),n.height-b.color.getHeight()))},a.on("smallScreen",function(n){if(n)for(let r in b)b[r].toggleCollapse(n&&(!(r in h)||h[r]))}),this.getElement=function(){return g},g.className="chickenpaint-palettes",b){let n=b[k],r=n.getElement();n.on("paletteVisChange",function(){d(this,
!1)});k in p&&n.setCollapseDownwards(!0);r.setAttribute("data-paletteName",k);m.push(r)}for(let k in b)p=b[k].getElement(),g.appendChild(p)}function Rh(a,c){function d(g){let e=g.data("action"),m=g.data("checkbox"),l;a.isActionAllowed(e)&&(m?(g.toggleClass("selected"),l=g.hasClass("selected")):l=!1,a.actionPerformed({action:e,checkbox:m,selected:l}))}let b=pa(Oa)('<nav class="navbar navbar-expand-md bg-light"><div class="navbar-upper"><a class="navbar-brand" href="#">ChickenPaint Be</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#chickenpaint-main-menu-content" aria-controls="chickenpaint-main-menu-content" aria-expanded="false" aria-label="Toggle main menu"><span class="navbar-toggler-icon"></span></button></div><div class="collapse navbar-collapse" id="chickenpaint-main-menu-content"><div class="navbar-nav"></div></div><div class="widget-nav" id="chickenpaint-palette-toggler-content"></div></nav>'),
h=navigator.userAgent.toLowerCase().includes("mac os");b[0].addEventListener("touchmove",g=>{g.preventDefault()},{passive:!1});this.getElement=function(){return b[0]};(function(g,e){g.append(e.map(m=>{let l=pa(Oa)('<div class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+ha(m.name)+'</a><ul class="dropdown-menu"></ul></div>'),k=pa(Oa)(".dropdown-toggle",l),n=pa(Oa)(".dropdown-menu",l);return k[0].addEventListener("show.bs.dropdown",
r=>{pa(Oa)("[data-action]",l).each(function(){let v=pa(Oa)(this);var x=this.getAttribute("data-action");x=a.isActionAllowed(x);v.toggleClass("disabled",!x).toggleClass("hidden",!x&&!0===v.data("hideIfNotAvailable"))});pa(Oa)(".dropdown-divider",l).removeClass("hidden");r=pa(Oa)(".dropdown-item:not(.hidden),.dropdown-divider:not(.hidden)",l);let u=null;for(let v=0;v<r.length;v++){let x=pa(Oa)(r[v]);x.hasClass("dropdown-divider")?0===v||u?x.addClass("hidden"):u=x:u=null}u&&u.addClass("hidden")}),n.append(m.children.map(r=>
{let u;if(!r.action||a.isActionSupported(r.action)){if("CPSend"!=r.action||a.isActionSupported("CPContinue")||(r.name=ha("Post Oekaki"),r.shortcut="ctrl+p"),"-"==r.name?u=pa(Oa)('<hr class="dropdown-divider">'):(u=pa(Oa)('<a class="dropdown-item" href="#" data-action="'+r.action+'"><span>'+ha(r.name)+"</span></a>"),r.checkbox&&pa(Oa)(u).data("checkbox",!0).toggleClass("selected",!!r.checked),r.hideIfNotAvailable&&u.data("hideIfNotAvailable",!0)),r.title&&u.attr("title",ha(r.title)),r.shortcut){let x=
u,D=document.createElement("small");h&&(r.shortcut=r.shortcut.replace(/SHIFT/im,"\u21e7"),r.shortcut=r.shortcut.replace(/ALT/im,"\u2325"),r.shortcut=r.shortcut.replace(/CTRL/im,"\u2318"));D.className="chickenpaint-shortcut";var v=(v=(v=(v=r.shortcut).toUpperCase()).replace(/(,.+)$/,"")).replace("=","+");D.textContent=v=h?v.replace(/([^+])\+/g,"$1"):v.replace(/([^+])\+/g,"$1 ");x.append(D);pa(Sb)(r.shortcut,function(H){return d(x),H.preventDefault(),H.stopPropagation(),!1})}return pa(Oa)("<li>").append(u)}})),
l}))})(pa(Oa)(".navbar-nav",b),Sg);(function(g,e){g.append(e.filter(m=>!!m.mnemonic&&a.isActionSupported(m.action)).map(m=>{let l=pa(Oa)(`<button class="widget-toggler selected" type="button" data-action="${m.action}" data-checkbox="true" data-selected="${!m.checked}"><span>`+m.mnemonic+"</span></button>");return l.on("click",k=>{d(l);k.preventDefault()}),l}))})(pa(Oa)(".widget-nav",b),Sg[5].children);pa(Oa)(b).on("click","a:not(.dropdown-toggle)",function(g){d(pa(Oa)(this));g.preventDefault()});
c.getPaletteManager().on("paletteVisChange",function(g,e){pa(Oa)('[data-action="CPPal'+g.substring(0,1).toUpperCase()+g.substring(1)+'"]',b).toggleClass("selected",e)});let p=pa(Oa)(".dropdown-item[data-action=CPFullScreen]",b);a.on("fullScreen",g=>p.toggleClass("selected",g));p.toggleClass("selected",a.isFullScreen())}function Ue(a,c){let d=document.createElement("div"),b=new Le(a),h=new Te(a),p,g=!1,e=this;this.togglePalettes=function(){h.togglePalettes()};this.arrangePalettes=function(){setTimeout(h.arrangePalettes.bind(h),
0)};this.constrainPalettes=function(){h.constrainPalettes()};this.showPalette=function(l,k){h.showPaletteByName(l,k)};this.getSwatches=function(){return h.palettes.swatches.getSwatches()};this.setSwatches=function(l){h.palettes.swatches.setSwatches(l)};this.getPaletteManager=function(){return h};this.setRotation90=function(l){b.setRotation(l*Math.PI/2);h.palettes.layers.setRotation90(l)};this.setFullScreenMode=function(l){g!==l&&(g=l,e.resize(),e.arrangePalettes())};this.resize=function(){let l=window.innerHeight,
k=p.getElement().getBoundingClientRect().height;b.resize(g?l-k:Math.min(Math.max(l-k-65,500),850),!1);e.constrainPalettes()};p=new Rh(a,this);c.appendChild(p.getElement());d.className="chickenpaint-main-section";d.appendChild(b.getElement());d.appendChild(h.getElement());c.appendChild(d);b.on("canvasRotated90",function(l){h.palettes.layers.setRotation90(l)});screen.orientation&&screen.orientation.addEventListener("change",l=>{this.resize();a.actionPerformed({action:"CPArrangePalettes"});setTimeout(()=>
{this.resize();a.actionPerformed({action:"CPArrangePalettes"})},10);Promise.resolve().then(()=>{this.resize()}).then(()=>{a.actionPerformed({action:"CPArrangePalettes"})})});let m=document.getElementById("chickenpaint-main-menu-content");if(document.addEventListener("show.bs.modal",()=>{m&&m.classList.contains("show")&&(new oc.Collapse(m,{toggle:!1})).hide()}),m){let l=document.querySelector(".chickenpaint .widget-nav");l&&(m.addEventListener("show.bs.collapse",k=>{l.classList.add("hidden")}),m.addEventListener("hidden.bs.collapse",
k=>{l.classList.remove("hidden")}));window.addEventListener("resize",()=>{l.classList.remove("hidden")})}document.addEventListener("hidden.bs.collapse",this.resize.bind(this));window.addEventListener("resize",this.resize.bind(this));a.on("fullScreen",l=>this.setFullScreenMode(l));a.on("unsavedChanges",l=>{c.classList.toggle("chickenpaint-unsaved",l)});setTimeout(this.resize.bind(this),0)}function Sh(a){var c=pa(Oa)('<div class="modal fade chickenpaint-about-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">About ChickenPaint Be</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                        <a class="chickenpaint-on-github" target="_blank" href="https://github.com/satopian/ChickenPaint_Be" rel="noopener"><span class="icon-github"></span> ChickenPaint Be on GitHub</a>\n                        <p>\n                        ChickenPaint Be is a customized version of <a href="https://github.com/thenickdude/chickenpaint" target="_blank" rel="noopener">ChickenPaint</a> by satopian.\n                        </p>\n                        <p>\n                        Built on:2025-04-02T06:57:17<br>\n                        <a href="https://www.gnu.org/licenses/" target="_blank" rel="noopener">GNU General Public License</a><br>\n                        </p>\n                        <a class="chickenpaint-on-github" target="_blank" href="https://github.com/thenickdude/chickenpaint" rel="noopener"><span class="icon-github"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href="https://github.com/thenickdude/chibipaint" target="_blank" rel="noopener">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target="_blank" href="https://www.gnu.org/licenses/" rel="noopener">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class="pre-scrollable chickenpaint-third-party-licenses">Toolbar icons designed by <a target="_blank" href="https://github.com/Anteira" rel="noopener">Miglena Lapavicheva (Anteira)</a>\n    These icons are dual-licensed under <a target="_blank" href="https://spdx.org/licenses/GPL-3.0-or-later.html" rel="noopener">GPL-3.0-or-later</a> and <a target="_blank" href="https://creativecommons.org/licenses/by/3.0/" rel="noopener">CC-BY-3.0</a>\n\nIncludes these MIT-licensed libraries:\n\n    Includes the <a target="_blank" href="https://github.com/eligrey/FileSaver.js" rel="noopener">FileSaver.js library</a>\n    FileSaver.js Copyright \u00a9 2015 <a target="_blank" href="https://eligrey.com/" rel="noopener">Eli Grey</a>\n\n    Includes the <a target="_blank" href="https://github.com/nodeca/pako" rel="noopener">Pako zlib compression library</a>\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Includes the <a target="_blank" href="https://github.com/madrobby/keymaster" rel="noopener">keymaster.js</a> keyboard library\n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Includes the <a target="_blank" href="https://benalman.com/projects/jquery-throttle-debounce-plugin/" rel="noopener">jQuery throttle-debounce</a> library\n    Copyright (c) 2010 "Cowboy" Ben Alman\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://jquery.com/" target="_blank" rel="noopener">jQuery library</a> \nCopyright <a href="https://jquery.com/license/" target="_blank" rel="noopener">OpenJS Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://getbootstrap.com/" target="_blank" rel="noopener">Bootstrap</a> \nCopyright <a href="https://github.com/twbs/bootstrap/blob/main/LICENSE" target="_blank" rel="noopener">The Bootstrap Authors</a>\n    \n    Permission is hereby granted, free of charge, to any person obtaining a copy\n    of this software and associated documentation files (the "Software"), to deal\n    in the Software without restriction, including without limitation the rights\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the Software is\n    furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n    THE SOFTWARE.\n    \nIncludes Font Awesome by Fonticons, Inc. - <a href="https://fontawesome.com/" target="_blank" rel="noopener">https://fontawesome.com/</a>\nIncludes Material Design icons by Google - <a href="https://fonts.google.com/" target="_blank" rel="noopener">https://fonts.google.com/</a>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ');
c[0].addEventListener("hidden.bs.modal",b=>{c.remove()});var d=new oc.Modal(c[0]);a.appendChild(c[0]);this.show=function(){d.show()}}function Ve(a,c){var d=pa(Oa)(`<div class="modal fade" tabindex="-1" role="dialog">
	            <div class="modal-dialog">
	                <div class="modal-content">
	                    <div class="modal-header">
	                        <h5 class="modal-title">${ha("Complete transform")}</h5>
	                        <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
	                        </button>
	                    </div>
	                    <div class="modal-body">
	                        <p>
							${ha("You need to finish transforming this layer before you can do that. What would you like to do with the transform?")}
							</p>
	                    </div>
	                    <div class="modal-footer">
	                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">${ha("Cancel")}</button>
	                        <button type="button" class="btn btn-light chickenpaint-reject-transform" data-bs-dismiss="modal">${ha("Undo transform")}</button>
	                        <button type="button" class="btn btn-primary chickenpaint-accept-transform" data-bs-dismiss="modal">${ha("Apply transform")}</button>
	                    </div>
	                </div>
	            </div>
	        </div>
	    `),b=this,h=pa(Oa)(".chickenpaint-accept-transform",d),p=pa(Oa)(".chickenpaint-reject-transform",d);h.on("click",function(e){c.actionPerformed({action:"CPTransformAccept"});b.emitEvent("accept")});p.on("click",function(e){c.actionPerformed({action:"CPTransformReject"});b.emitEvent("reject")});var g=new oc.Modal(d[0]);this.show=function(){g.show()};d[0].addEventListener("hidden.bs.modal",e=>{d.remove()});a.addEventListener("keydown",function l(m){"Enter"===m.key&&(g.hide(),c.actionPerformed({action:"CPTransformAccept"}),
b.emitEvent("accept"),a.removeEventListener("keydown",l))});a.appendChild(d[0])}function Th(a){var c=pa(Oa)(`<div class="modal fade chickenpaint-shortcuts-dialog" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${ha("Shortcuts")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>
                                ${ha("Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover.")}
                            </p>
                            <p>
                                ${ha("Here are some other shortcuts which are not as obvious!")}
                            </p>
                            <div class="chickenpaint-shortcuts-sections">
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ha("Color swatches palette")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Use as the drawing color")}
                                                </dd>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ha("Right")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Remove or replace a color swatch")}
                                                </dd>
                                             </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ha("Line drawing mode")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                   ${ha("Snap line to nearest 45 degrees")}
                                                </dd>
                                             </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ha("Painting tools")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">1</span> - <span class="chickenpaint-shortcut-key">9</span> , <span class="chickenpaint-shortcut-key">0</span></span>
                                                </dt>
                                                <dd>
                                                    ${ha("Change brush opacity")}
                                                </dd>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">[</span> , <span class="chickenpaint-shortcut-key">]</span></span>
                                                </dt>
                                                <dd>
                                                    ${ha("Change brush size")}
                                                </dd>
                                            </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ha("Brush palette")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ha("Right")}</span>
													<span class="chickenpaint-shortcut-alternate">${ha("or")}</span>
													<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Adjust brush sliders more precisely")}
                                                </dd>
                                            </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ha("Drawing canvas")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ha("Middle")}</span> <span class="chickenpaint-shortcut-alternate">${ha("or")}</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Space</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Move the canvas around")}
                                                </dd>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">R</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Rotate the canvas")}
                                                </dd>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ha("Right")}</span> <span class="chickenpaint-shortcut-alternate">${ha("or")}</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Sample the color under the cursor")}
                                                </dd>
                                             </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ha("Layers palette")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ha("Double click")}</span> <span class="chickenpaint-shortcut-alternate">${ha("or")}</span> <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ha("Right")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Rename layer")}
                                                </dd>
                                                <dt>
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Toggle mask enable/disable")}
                                                </dd>
                                                <dt>
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Toggle mask View")}
                                                </dd>
												<dt>
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">${Tg}</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Apply layer mask")}
                                                </dd>
												<dt>
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span></span> +
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">${Tg}</span> + <span class="fa icon-mouse-pointer"></span> ${ha("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ha("Delete layer mask")}
                                                </dd>
                                             </dl>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `);c[0].addEventListener("hidden.bs.modal",b=>{c.remove()});var d=new oc.Modal(c[0]);a.appendChild(c[0]);this.show=function(){d.show()}}function Uh(a,c){let d=pa(Oa)(`<div class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${ha("Box blur")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label>${ha("Blur amount (pixels)")}</label>
                                    <input type="number" class="form-control chickenpaint-blur-amount" value="3" min="1">
                                </div>
                                <div class="form-group">
                                    <label>${ha("Iterations (1-8, larger gives smoother blur)")}</label>
                                    <input type="number" class="form-control chickenpaint-blur-iterations" value="1" min="1" max="8">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">${ha("Cancel")}</button>
                            <button type="button" class="btn btn-primary chickenpaint-apply-box-blur" data-bs-dismiss="modal">${ha("Ok")}</button>
                        </div>
                    </div>
                </div>
            </div>
        `),b=pa(Oa)(".chickenpaint-blur-amount",d),h=pa(Oa)(".chickenpaint-blur-iterations",d),p=pa(Oa)(".chickenpaint-apply-box-blur",d);var g=new oc.Modal(d[0]);this.show=function(){let e=document.getElementById("chickenpaint-main-menu-content");e&&e.classList.contains("show")&&(new oc.Collapse(e,{toggle:!1})).hide();g.show()};p[0].addEventListener("click",e=>{e=Math.max(parseInt(b.val(),10),1);let m=Math.min(Math.max(parseInt(h.val(),10),1),8);c.getArtwork().boxBlur(e,e,m);g.hide()});d[0].addEventListener("hidden.bs.modal",
e=>{document.activeElement.blur();d[0].remove()});d[0].addEventListener("shown.bs.modal",e=>{b[0].focus()});d[0].addEventListener("keydown",e=>{"Enter"===e.key&&d.hasClass("show")&&(p[0].click(),e.preventDefault())});a.appendChild(d[0])}function Vh(a){let c=pa(Oa)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing tablet support</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-tablet-there-are-two-options">\n                                There are two ways you could use your tablet\'s pen pressure support with ChickenPaint.\n                            </p>\n                            <div class="chickenpaint-tablet-support chickenpaint-wacom-support">\n                                <h5>\n                                    Plugin for Wacom tablets\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-safari"></span>\n                                        Safari\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="icon-opera"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-installed">\n                                    The plugin for Wacom tablets doesn\'t seem to be installed in your browser yet.\n                                </p>\n                                <p class="chickenpaint-not-installed">\n                                    Please make sure that you\'ve installed the latest drivers for your tablet from the \n                                    <a href="http://www.wacom.com/en-us/support/product-support/drivers" target="_blank">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class="chickenpaint-tablet-support chickenpaint-pointerevents-support">\n                                <h5>\n                                    Built-in support for most tablets.\n                                    <small>macOS, Windows 10 or newer</small>\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n\t\t\t\t\t\t\t\t\t<div class="chickenpaint-supported-browser">\n\t\t\t\t\t\t\t\t\t<span class="icon-chrome"></span>\n\t\t\t\t\t\t\t\t\t\tChrome\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="chickenpaint-supported-browser">\n                                        <span class="icon-edge"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (<a href="https://github.com/satopian/ChickenPaint_Be/blob/main/help/Firefox%20pressure%20support.md" target="_blank" rel="noopener">help <i class="fa icon-external-link-alt"></i></a>)\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       '),
d=pa(Oa)(".chickenpaint-wacom-support",c),b=pa(Oa)(".chickenpaint-pointerevents-support",c),h=pa(Oa)(".chickenpaint-tablet-there-are-two-options",c),p=ed.getRef().isTabletPresent(),g=!!window.hasNativePointerEvents;d.toggleClass("supported",p);p?(b.hide(),h.hide()):((/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent))&&d.addClass("not-supported"),g&&(d.hide(),h.hide()));b.toggleClass("supported",g);b.toggleClass("not-supported",
!g);c[0].addEventListener("hidden.bs.modal",m=>{c.remove()});var e=new oc.Modal(c[0]);a.appendChild(c[0]);this.show=function(){e.show()}}function Wh(a,c){var d=pa(Oa)(`<div class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${ha("Grid options")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label>${ha("Grid size")}</label>
                                    <input type="number" class="form-control chickenpaint-grid-size" value="" min="3">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">${ha("Cancel")}</button>
                            <button type="button" class="btn btn-primary chickenpaint-apply-grid-settings" data-bs-dismiss="modal">${ha("Ok")}</button>
                        </div>
                    </div>
                </div>
            </div>
        `),b=pa(Oa)(".chickenpaint-grid-size",d),h=pa(Oa)(".chickenpaint-apply-grid-settings",d),p=new oc.Modal(d[0]);this.show=function(){let g=document.getElementById("chickenpaint-main-menu-content");g&&g.classList.contains("show")&&(new oc.Collapse(g,{toggle:!1})).hide();p.show()};b.val(c.getGridSize());d[0].addEventListener("hidden.bs.modal",g=>{d[0].remove()});h[0].addEventListener("click",g=>{g=parseInt(b.val(),10);c.setGridSize(g);g=oc.Modal.getInstance(d[0]);document.activeElement.blur();
g.hide()});d[0].addEventListener("shown.bs.modal",g=>{b[0].focus()});d[0].addEventListener("keydown",g=>{"Enter"===g.key&&(g.preventDefault(),h[0].click())});a.appendChild(d[0])}function We(a,c,d){let b=pa(Oa)(`<div class="modal fade chickenpaint-send-dialog" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content" data-stage="saving">
                        <div class="modal-header">
                            <h5 class="modal-title">${ha("Saving drawing...")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p class="chickenpaint-saving-progress-message">${ha("Preparing your drawing to be saved, please wait...")}</p>
                            <pre class="chickenpaint-saving-error-message pre-scrollable"></pre>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-light chickenpaint-send-cancel" data-bs-dismiss="modal">${ha("Cancel")}</button>
                        </div>
                    </div>
                    <div class="modal-content" data-stage="success-not-previously-posted" style="display:none">
                        <div class="modal-header">
                            <h5 class="modal-title">${ha("Drawing saved!")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>${ha("Your drawing has been saved, would you like to post it to the forum now?")}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">${ha("Yes, post it now")}</button>
                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">${ha("No, keep drawing")}</button>
                            <button type="button" class="btn btn-light chickenpaint-exit" data-bs-dismiss="modal">${ha("No, quit and I'll finish it later")}</button>
                        </div>
                    </div>
                    <div class="modal-content" data-stage="success-already-posted" style="display:none">
                        <div class="modal-header">
                            <h5 class="modal-title">${ha("Drawing saved!")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>${ha("Your drawing has been saved, would you like to view it on the forum now?")}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">${ha("Yes, view the post")}</button>
                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">${ha("No, keep drawing")}</button>
                        </div>
                    </div>
                    <div class="modal-content" data-stage="success-redirect" style="display:none">
                        <div class="modal-header">
                            <h5 class="modal-title">${ha("Drawing saved!")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>${ha("Your drawing has been saved, redirecting you to view your new post now...")}</p>
                        </div>
                    </div>
                </div>
            </div>
        `),h=pa(Oa)(".chickenpaint-saving-progress-message",b),p=pa(Oa)(".chickenpaint-saving-error-message",b),g=pa(Oa)(".progress-bar",b),e=this;d.on("savingProgress",function(k,n){k*=100;h.text(n);pa(Oa)(g).attr("aria-valuenow",k).css("width",k+"%")});d.on("savingComplete",function(){let k=b[0];k.querySelector(".modal-content[data-stage='saving']").style.display="none";a.isActionSupported("CPContinue")?a.isActionSupported("CPExit")?k.querySelector(".modal-content[data-stage='success-not-previously-posted']").style.display=
"block":k.querySelector(".modal-content[data-stage='success-already-posted']").style.display="block":k.querySelector(".modal-content[data-stage='success-redirect']").style.display="block"});d.on("savingFailure",function(k){g.addClass("progress-bar-danger");let n=ha("Sorry, your drawing could not be saved, please try again later.");k&&(0<(k=k.replace(/^CHIBIERROR\s*/,"")).length&&(n+=`<br><br>${ha("The error returned from the server was")}:`,p.text(k).show()),h.html(n))});b[0].querySelector(".chickenpaint-post-drawing").addEventListener("click",
function(){a.actionPerformed({action:"CPPost"})});let m=b[0].querySelector(".chickenpaint-exit");m&&(m.style.display=a.isActionSupported("CPExit")?"":"none",m.addEventListener("click",function(){alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and you can choose to continue this drawing.");a.actionPerformed({action:"CPExit"})}));b[0].querySelector(".chickenpaint-send-cancel").addEventListener("click",function(){d.cancel()});b[0].addEventListener("hidden.bs.modal",
k=>{b.remove()});b.appendTo(c);let l=new oc.Modal(b[0]);this.show=function(){l.show();e.emitEvent("shown")}}function la(a){function c(S){this.palName=S}function d(S){this.toolNum=S}function b(S){this.modeNum=S}function h(S){let ya;switch(D=S==Dc.EDITING_MODE_IMAGE?la.COLOR_MODE_RGB:la.COLOR_MODE_GREYSCALE,n.emitEvent("colorModeChange",[S==Dc.EDITING_MODE_IMAGE?"rgb":"greyscale"]),D){case la.COLOR_MODE_RGB:ya=v.clone();break;case la.COLOR_MODE_GREYSCALE:ya=new Bb(Bb.greyToRGB(x))}n.artwork.setForegroundColor(ya.getRgb());
n.emitEvent("colorChange",[ya])}function p(){n.emitEvent("toolChange",[H,W[H]])}function g(S){L!=S&&(S==la.M_TRANSFORM&&(J=L),L=S,n.emitEvent("modeChange",[L]))}function e(S){g(la.M_DRAW);H=S;n.artwork.setBrush(W[S]);p()}function m(S,ya){k&&(k.addEventListener("dblclick",function(na){na.preventDefault();na.stopPropagation()}),n.artwork.on("editModeChanged",h),u=new Ue(n,k),n.emitEvent("fullScreen",[X]),n.emitEvent("smallScreen",[K]),Y.load(),e(la.T_PEN),u.arrangePalettes(),S&&u.setSwatches(S),ya&&
u.setRotation90(ya),ed.getRef().detectTablet(),window.addEventListener("beforeunload",function(na){n.artwork.getHasUnsavedChanges()&&na.preventDefault()}),n.artwork.on("unsavedChanges",na=>{a.allowMultipleSends&&n.emitEvent("unsavedChanges",[na])}))}var l;!function(){try{if("undefined"!=typeof navigator){let S=navigator.languages;for(let ya of(Array.isArray(S)||(S=[S]),S)){let na=/^(..)([-_].+)?$/.exec(ya);if(na){if(na[1]=na[1].toLowerCase(),na[1]in Ff){Ef(ya);break}if("en"===na[1]){Ef("en");break}}}}}catch(S){console.error(S)}}();
a.language&&Ef(a.language);let k=a.uiElem;document.addEventListener("keydown",S=>{((S.ctrlKey||S.metaKey)&&"+;=-shro".split("").includes(S.key.toLowerCase())||"Enter"===S.key)&&S.preventDefault()});k.addEventListener("contextmenu",S=>{S.preventDefault();S.stopPropagation()},{passive:!1});let n=this,r,u,v=new Bb(0),x=255,D=la.COLOR_MODE_RGB,H=la.T_PENCIL,L=la.M_DRAW,J=L,O=[4278190080,4294967295],K=!1,X=!1,W=((l=Array(la.T_MAX))[la.T_PENCIL]=new Ba({toolNb:la.T_PENCIL,size:16,alpha:255,isAA:!0,minSpacing:.5,
spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ba.TIP_ROUND_AA,brushMode:Ba.BRUSH_MODE_PAINT,paintMode:Ba.PAINT_MODE_OPACITY}),l[la.T_ERASER]=new Ba({toolNb:la.T_ERASER,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!1,texture:0,tip:Ba.TIP_ROUND_AA,brushMode:Ba.BRUSH_MODE_ERASE,paintMode:Ba.PAINT_MODE_OPACITY}),l[la.T_PEN]=new Ba({toolNb:la.T_PEN,size:2,alpha:128,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!0,pressureAlpha:!1,tip:Ba.TIP_ROUND_AA,brushMode:Ba.BRUSH_MODE_PAINT,
paintMode:Ba.PAINT_MODE_FLOW,alphaScale:.5}),l[la.T_SOFTERASER]=new Ba({toolNb:la.T_SOFTERASER,size:16,alpha:64,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,texture:1,tip:Ba.TIP_ROUND_AIRBRUSH,brushMode:Ba.BRUSH_MODE_ERASE,paintMode:Ba.PAINT_MODE_FLOW,alphaScale:.125}),l[la.T_AIRBRUSH]=new Ba({toolNb:la.T_AIRBRUSH,size:50,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ba.TIP_ROUND_AIRBRUSH,brushMode:Ba.BRUSH_MODE_PAINT,paintMode:Ba.PAINT_MODE_FLOW,
alphaScale:.125}),l[la.T_DODGE]=new Ba({toolNb:la.T_DODGE,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ba.TIP_ROUND_AIRBRUSH,brushMode:Ba.BRUSH_MODE_DODGE,paintMode:Ba.PAINT_MODE_FLOW,alphaScale:.125}),l[la.T_BURN]=new Ba({toolNb:la.T_BURN,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ba.TIP_ROUND_AIRBRUSH,brushMode:Ba.BRUSH_MODE_BURN,paintMode:Ba.PAINT_MODE_FLOW,alphaScale:.125}),l[la.T_WATER]=new Ba({toolNb:la.T_WATER,
size:30,alpha:70,isAA:!1,minSpacing:.5,spacing:.02,pressureSize:!1,pressureAlpha:!0,tip:Ba.TIP_ROUND_AA,brushMode:Ba.BRUSH_MODE_WATER,paintMode:Ba.PAINT_MODE_FLOW,alphaScale:.125,resat:.3,bleed:.6}),l[la.T_BLUR]=new Ba({toolNb:la.T_BLUR,size:20,alpha:255,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ba.TIP_ROUND_PIXEL,brushMode:Ba.BRUSH_MODE_BLUR,paintMode:Ba.PAINT_MODE_FLOW,alphaScale:.125}),l[la.T_SMUDGE]=new Ba({toolNb:la.T_SMUDGE,size:20,alpha:128,isAA:!1,minSpacing:.5,
spacing:.01,pressureSize:!1,pressureAlpha:!0,tip:Ba.TIP_ROUND_AIRBRUSH,brushMode:Ba.BRUSH_MODE_SMUDGE,paintMode:Ba.PAINT_MODE_FLOW,alphaScale:.125,resat:0,bleed:1}),l[la.T_BLENDER]=new Ba({toolNb:la.T_BLENDER,size:20,alpha:60,isAA:!1,minSpacing:.5,spacing:.1,pressureSize:!1,pressureAlpha:!0,tip:Ba.TIP_ROUND_AIRBRUSH,brushMode:Ba.BRUSH_MODE_OIL,paintMode:Ba.PAINT_MODE_FLOW,alphaScale:.125,resat:0,bleed:.07}),l),Y=new Xh,ka,va,Ia={CPFullScreen:{action:function(){n.setFullScreen(!X)},isSupported:function(){return"disable"!==
a.fullScreenMode&&"force"!==a.fullScreenMode&&!1!==a.allowFullScreen},modifies:{gui:!0}},CPZoomIn:{action:function(){r.zoomIn()},modifies:{gui:!0}},CPZoomOut:{action:function(){r.zoomOut()},modifies:{gui:!0}},CPZoom100:{action:function(){r.zoom100()},modifies:{gui:!0}},CPUndo:{action:function(){n.artwork.undo()},modifies:{document:!0},allowed:"isUndoAllowed"},CPRedo:{action:function(){n.artwork.redo()},modifies:{document:!0},allowed:"isRedoAllowed"},CPClearHistory:{action:function(){confirm(ha("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?"))&&
n.artwork.clearHistory()},modifies:{document:!0}},CPPencil:new d(la.T_PENCIL),CPPen:new d(la.T_PEN),CPEraser:new d(la.T_ERASER),CPSoftEraser:new d(la.T_SOFTERASER),CPAirbrush:new d(la.T_AIRBRUSH),CPDodge:new d(la.T_DODGE),CPBurn:new d(la.T_BURN),CPWater:new d(la.T_WATER),CPBlur:new d(la.T_BLUR),CPSmudge:new d(la.T_SMUDGE),CPBlender:new d(la.T_BLENDER),CPFloodFill:new b(la.M_FLOODFILL),CPGradientFill:new b(la.M_GRADIENTFILL),CPRectSelection:new b(la.M_RECT_SELECTION),CPMoveTool:new b(la.M_MOVE_TOOL),
CPRotateCanvas:new b(la.M_ROTATE_CANVAS),CPPanCanvas:new b(la.M_PAN_CANVAS),CPColorPicker:new b(la.M_COLOR_PICKER),CPTransform:{action:function(){let S=n.artwork.getActiveLayer();null==n.artwork.transformAffineBegin()?n.showLayerNotification(S,ha("Whoops! All of the selected pixels are transparent!"),"layer"):g(la.M_TRANSFORM)},modifies:{mode:!0},allowed:function(){let S=n.artwork.getActiveLayer();if(S.visible)if(0==S.alpha)n.showLayerNotification(S,ha("Whoops! This layer's opacity is currently 0%"),
"opacity");else{if(null!=n.artwork.transformAffineBegin())return 0!=S.getEffectiveAlpha();n.showLayerNotification(S,ha("Whoops! All of the selected pixels are transparent!"),"layer")}else n.showLayerNotification(S,ha("Whoops! This layer is currently hidden"),"layer")}},CPTransformAccept:{action:function(){L==la.M_TRANSFORM&&(n.artwork.transformAffineFinish(),g(J))},modifies:{mode:!0}},CPTransformReject:{action:function(){L==la.M_TRANSFORM&&(n.artwork.transformAffineAbort(),g(J))},modifies:{document:!0,
mode:!0}},CPFreeHand:{action:function(){W[H].strokeMode=Ba.STROKE_MODE_FREEHAND;p()},modifies:{tool:!0}},CPLine:{action:function(){W[H].strokeMode=Ba.STROKE_MODE_LINE;p()},modifies:{tool:!0}},CPBezier:{action:function(){W[H].strokeMode=Ba.STROKE_MODE_BEZIER;p()},modifies:{tool:!0}},CPAbout:{action:function(){(new Sh(k)).show()},modifies:{}},CPShortcuts:{action:function(){(new Th(k)).show()},modifies:{}},CPTabletSupport:{action:function(){(new Vh(k)).show()},modifies:{}},CPLayerDuplicate:{action:function(){n.artwork.duplicateLayer()},
modifies:{document:!0}},CPLayerMergeDown:{action:function(){n.artwork.mergeDown()},modifies:{document:!0},allowed:"isMergeDownAllowed"},CPGroupMerge:{action:function(){n.artwork.mergeGroup()},modifies:{document:!0},allowed:"isMergeGroupAllowed"},CPLayerMergeAll:{action:function(){n.artwork.mergeAllLayers()},modifies:{document:!0},allowed:"isMergeAllLayersAllowed"},CPExpandLayerGroup:{action:function(S){n.artwork.expandLayerGroup(S.group,S.expand)},modifies:{document:!0}},CPFill:{action:function(){n.artwork.fill(4278190080|
n.getCurColor().getRgb())},modifies:{document:!0},requiresDrawable:!0},CPClear:{action:function(){n.artwork.clear()},modifies:{document:!0},requiresDrawable:!0},CPSelectAll:{action:function(){n.artwork.rectangleSelection(n.artwork.getBounds());r.repaintAll()},modifies:{document:!0}},CPDeselectAll:{action:function(){n.artwork.rectangleSelection(new Ha(0,0,0,0));r.repaintAll()},modifies:{document:!0}},CPHFlip:{action:function(){n.artwork.hFlip()},modifies:{document:!0},requiresDrawable:!0},CPVFlip:{action:function(){n.artwork.vFlip()},
modifies:{document:!0},requiresDrawable:!0},CPMNoise:{action:function(){n.artwork.monochromaticNoise()},modifies:{document:!0},requiresDrawable:!0},CPCNoise:{action:function(){n.artwork.colorNoise()},modifies:{document:!0},allowed:"isColorNoiseAllowed"},CPFXBoxBlur:{action:function(){ka||=new Uh(k,n);ka.show()},modifies:{document:!0},requiresDrawable:!0},CPFXInvert:{action:function(){n.artwork.invert()},modifies:{document:!0},requiresDrawable:!0},CPBrightnessToOpacity:{action:function(){n.artwork.brightnessToOpacity()},
modifies:{document:!0},requiresDrawable:!0},CPCut:{action:function(){n.artwork.cutSelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCutSelectionAllowed"},CPCopy:{action:function(){n.artwork.copySelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCopySelectionAllowed"},CPCopyMerged:{action:function(){n.artwork.copySelectionMerged()},modifies:{document:!0},allowed:"isCopySelectionMergedAllowed"},CPPaste:{action:function(){n.artwork.pasteClipboard()},modifies:{document:!0},
allowed:"isPasteClipboardAllowed"},CPToggleGrid:{action:function(S){r.showGrid(S.selected)},modifies:{gui:!0}},CPGridOptions:{action:function(){va||=new Wh(k,r);va.show()},modifies:{gui:!0}},CPLinearInterpolation:{action:function(S){r.setInterpolation(S.selected)},modifies:{gui:!0},isSupported:function(){return!!of(Zc(0,0).getContext("2d"))}},CPResetCanvasRotation:{action:function(){r.resetRotation()},modifies:{gui:!0}},CPAddLayer:{action:function(){n.artwork.addLayer("layer")},modifies:{document:!0}},
CPAddGroup:{action:function(){n.artwork.addLayer("group")},modifies:{document:!0}},CPAddLayerMask:{action:function(){n.artwork.addLayerMask()},modifies:{document:!0},allowed:"isAddLayerMaskAllowed"},CPApplyLayerMask:{action:function(){n.artwork.applyLayerMask(!0)},modifies:{document:!0},allowed:"isApplyLayerMaskAllowed"},CPRemoveLayerMask:{action:function(){n.artwork.removeLayerMask()},modifies:{document:!0},allowed:"isRemoveLayerMaskAllowed"},CPRemoveLayer:{action:function(){n.artwork.removeLayer()||
alert(ha("Sorry, you can't remove the last remaining layer in the drawing."))},modifies:{document:!0},allowed:"isRemoveLayerAllowed"},CPCreateClippingMask:{action:function(){n.artwork.createClippingMask()},modifies:{document:!0},allowed:"isCreateClippingMaskAllowed"},CPReleaseClippingMask:{action:function(){n.artwork.releaseClippingMask()},modifies:{document:!0},allowed:"isReleaseClippingMaskAllowed"},CPRelocateLayer:{action:function(S){n.artwork.relocateLayer(S.layer,S.toGroup,S.toIndex)},modifies:{document:!0}},
CPSetActiveLayer:{action:function(S){S.mask&&S.layer.mask&&!S.layer.maskVisible&&n.artwork.setLayerMaskVisible(S.layer,!0);n.artwork.setActiveLayer(S.layer,S.mask);n.artwork.performIdleTasks()},modifies:{document:!0}},CPToggleMaskView:{action:function(){let S=n.artwork.toggleMaskView();S&&n.emitEvent("maskViewOpened",[S])},modifies:{gui:!0}},CPSetMaskVisible:{action:function(S){n.artwork.setLayerMaskVisible(S.layer,S.visible)},modifies:{layerProp:!0}},CPSetLayerVisibility:{action:function(S){n.artwork.setLayerVisibility(S.layer,
S.visible)},modifies:{layerProp:!0}},CPSetLayerName:{action:function(S){n.artwork.setLayerName(S.layer,S.name)},modifies:{layerProp:!0}},CPSetLayerBlendMode:{action:function(S){n.artwork.setLayerBlendMode(S.blendMode)},modifies:{layerProp:!0}},CPSetLayerAlpha:{action:function(S){n.artwork.setLayerAlpha(S.alpha)},modifies:{layerProp:!0}},CPSetLayerLockAlpha:{action:function(S){n.artwork.setLayerLockAlpha(S.lock)},modifies:{layerProp:!0}},CPPalColor:new c("color"),CPPalBrush:new c("brush"),CPPalLayers:new c("layers"),
CPPalStroke:new c("stroke"),CPPalSwatches:new c("swatches"),CPPalTool:new c("tool"),CPPalMisc:new c("misc"),CPPalTextures:new c("textures"),CPTogglePalettes:{action:function(){u.togglePalettes()},modifies:{gui:!0}},CPArrangePalettes:{action:function(){u.arrangePalettes()},modifies:{gui:!0}},CPSave:{action:function(){let S;(S=new le({artwork:n.getArtwork(),rotation:r.getRotation90(),swatches:u.getSwatches()})).on("savingComplete",function(){n.artwork.setHasUnsavedChanges(!1)});S.on("savingFailure",
function(){alert(ha("Sorry, your drawing could not be saved, Please see the error message."))});S.save()},isSupported:function(){return!1!==a.allowDownload},modifies:{document:!0}},CPSend:{action:function(){!function(){if(n.isActionSupported("CPContinue")||confirm(ha("Are you sure you want to send your drawing to the server and finish drawing now?"))){var S=new le({artwork:n.getArtwork(),rotation:r.getRotation90(),swatches:u.getSwatches(),url:a.saveUrl,post_max_size:a.post_max_size}),ya=new We(n,
k,S);S.on("savingComplete",function(){n.artwork.setHasUnsavedChanges(!1);!n.isActionSupported("CPContinue")&&n.isActionSupported("CPPost")&&n.actionPerformed({action:"CPPost"})});S.on("savingFailure",function(){alert(ha("Sorry, your drawing could not be saved, Please see the error message."))});ya.on("shown",function(){S.save()});ya.show()}}()},isSupported:function(){return!!a.saveUrl},modifies:{document:!0}},CPPost:{action:function(){if("function"==typeof handleExit)return handleExit();window.location=
a.postUrl},isSupported:function(){return!(!a.postUrl&&"function"!=typeof handleExit)},modifies:{document:!0}},CPContinue:{action:function(){},isSupported:function(){return!!a.allowMultipleSends}},CPExit:{action:function(){window.location=a.exitUrl},isSupported:function(){return!!a.exitUrl},modifies:{}}};switch(c.prototype.action=function(S){u.showPalette(this.palName,S.selected)},c.prototype.modifies={gui:!0},d.prototype.action=function(){e(this.toolNum)},d.prototype.modifies={mode:!0,tool:!0},d.prototype.requiresDrawable=
!0,b.prototype.action=function(){g(this.modeNum)},b.prototype.modifies={mode:!0},this.callToolListeners=function(){p()},this.getArtwork=function(){return this.artwork},this.setCanvas=function(S){r=S},this.setTransformInterpolation=function(S){this.artwork.setTransformInterpolation(S)},this.setCurColor=function(S){switch(D){case la.COLOR_MODE_RGB:v.isEqual(S)||(v.copyFrom(S),this.artwork.setForegroundColor(S.getRgb()),this.emitEvent("colorChange",[S]));break;case la.COLOR_MODE_GREYSCALE:if(S=S.getValue(),
x!=S){let ya=Bb.greyToRGB(S);this.artwork.setForegroundColor(ya);x=S;this.emitEvent("colorChange",[new Bb(ya)])}}},this.getCurColor=function(){switch(D){case la.COLOR_MODE_RGB:return v.clone();case la.COLOR_MODE_GREYSCALE:return new Bb(Bb.greyToRGB(x))}},this.setCurGradient=function(S){O=S.slice(0);this.emitEvent("gradientChange",[O])},this.getCurGradient=function(){return O.slice(0)},this.setBrushSize=function(S){W[H].size=Math.max(1,Math.min(200,S));p()},this.getBrushSize=function(){return W[H].size},
this.setAlpha=function(S){W[H].alpha=S;p()},this.getAlpha=function(){return W[H].alpha},this.getCurMode=function(){return L},this.getCurTool=function(){return H},this.getBrushInfo=function(){return W[H]},this.isActionSupported=function(S){if(Ia[S]){let ya=typeof Ia[S].isSupported;return"function"==ya?Ia[S].isSupported():"undefined"==ya||Ia[S].isSupported}return!1},this.isActionAllowed=function(S){S=Ia[S];return!!S&&("function"==typeof S.allowed?S.allowed():"string"==typeof S.allowed?this.artwork[S.allowed]():
!S.requiresDrawable||this.artwork.isActiveLayerDrawable())},this.showLayerNotification=function(S,ya,na){this.emitEvent("layerNotification",[S,ya,na])},this.actionPerformed=function(S){if(null!=this.artwork&&null!=r){var ya=Ia[S.action];ya&&(L==la.M_TRANSFORM&&(ya.modifies.document||ya.modifies.mode)&&-1==["CPTransformAccept","CPTransformReject"].indexOf(S.action)?"CPUndo"==S.action?Ia.CPTransformReject.action():"CPTransform"!=S.action&&(ya=new Ve(k,this),ya.on("accept",this.actionPerformed.bind(this,
S)),ya.on("reject",this.actionPerformed.bind(this,S)),ya.show()):ya.action(S))}},this.setSmallScreenMode=function(S){K!==S&&(K=S,k.classList.toggle("chickenpaint-small-screen",K),n.emitEvent("smallScreen",[K]))},this.getSmallScreenMode=function(){return K},this.setFullScreen=function(S){X!==S&&(X=S,document.body.classList.toggle("chickenpaint-full-screen",X),k.classList.toggle("chickenpaint-full-screen",X),S=document.querySelectorAll('head meta[name="viewport"]').length,X&&0===S?(S=document.createElement("meta"),
S.name="viewport",S.content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,,user-scalable=no",document.head.appendChild(S),setTimeout(()=>n.emitEvent("fullScreen",[X]),200)):n.emitEvent("fullScreen",[X]))},this.isFullScreen=function(){return X},this.setToolbarStyle=function(S){Y.set("toolbarStyle",S);Y.save()},this.getToolbarStyle=function(){return Y.get("toolbarStyle")},this.getResourcesRoot=function(){return a.resourcesRoot},!function(){var S;if(!((S=Zc(0,0)).getContext&&
S.getContext("2d")&&"Uint8Array"in window))throw new la.UnsupportedBrowserException;S=(-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPhone"))&&-1!=navigator.userAgent.indexOf(" OS 8_0 ");let ya=-1==navigator.userAgent.indexOf("CriOS")&&-1!=navigator.userAgent.indexOf("Safari");if(S&&ya)throw new la.UnsupportedBrowserException("You are using Safari 8.0.0, which is unable to upload drawings. That bug was fixed in the iOS 8.0.2 update, or in Chrome for iOS.");
}(),k&&(!(("string"==typeof document.body.style.flexBasis||"string"==typeof document.body.style.msFlexDirection)&&!/Presto/.test(navigator.userAgent))&&(k.className+=" no-flexbox"),k.className+=" chickenpaint chickenpaint-lang-"+Gf),a.resourcesRoot=a.resourcesRoot||"chickenpaint/",this.setSmallScreenMode(!!("number"==typeof navigator.maxTouchPoints&&2<navigator.maxTouchPoints&&(820>=window.screen.width||820>=window.screen.height))),a.fullScreenMode){case "force":this.setFullScreen(!0);break;case "auto":this.setFullScreen(K)}(Y.on("toolbarStyle",
S=>this.emitEvent("toolbarStyleChange",[S])),a.loadImageUrl||a.loadChibiFileUrl)?(l=new He(a),new Jh(k,l,a.resourcesRoot),l.on("loadingComplete",function(S){n.artwork=S.layers||S.flat;m(S.swatches,a.rotation);a.onLoaded&&a.onLoaded(this)}),l.load()):(a.artwork?this.artwork=a.artwork:(this.artwork=new Dc(a.canvasWidth||800,a.canvasHeight||600),this.artwork.addBackgroundLayer(),this.artwork.addDefaultLayer()),m(),a.onLoaded&&a.onLoaded(this))}var Ug,Vg,Wg,Jf,Kf,Xe="undefined"!=typeof globalThis?globalThis:
"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};Ba.STROKE_MODE_FREEHAND=0;Ba.STROKE_MODE_LINE=1;Ba.STROKE_MODE_BEZIER=2;Ba.TIP_ROUND_PIXEL=0;Ba.TIP_ROUND_AA=1;Ba.TIP_ROUND_AIRBRUSH=2;Ba.TIP_SQUARE_PIXEL=3;Ba.TIP_SQUARE_AA=4;Ba.BRUSH_MODE_PAINT=0;Ba.BRUSH_MODE_ERASE=1;Ba.BRUSH_MODE_DODGE=2;Ba.BRUSH_MODE_BURN=3;Ba.BRUSH_MODE_WATER=4;Ba.BRUSH_MODE_BLUR=5;Ba.BRUSH_MODE_SMUDGE=6;Ba.BRUSH_MODE_OIL=7;Ba.PAINT_MODE_OPACITY=0;Ba.PAINT_MODE_FLOW=1;Ba.DEFAULTS=
{isAA:!1,minSpacing:0,spacing:0,pressureSize:!0,pressureAlpha:!1,pressureScattering:!1,alphaScale:1,tip:Ba.TIP_ROUND_PIXEL,brushMode:Ba.BRUSH_MODE_PAINT,paintMode:Ba.PAINT_MODE_OPACITY,strokeMode:Ba.STROKE_MODE_FREEHAND,resat:1,bleed:0,texture:1,size:0,curSize:0,alpha:0,curAlpha:0,scattering:0,curScattering:0,squeeze:0,curSqueeze:0,angle:Math.PI,curAngle:0,smoothing:0};Ba.prototype.applyPressure=function(a){this.pressureSize&&this.brushMode!=Ba.BRUSH_MODE_SMUDGE&&this.brushMode!=Ba.BRUSH_MODE_OIL?
this.curSize=Math.max(.1,this.size*a):this.curSize=Math.max(.1,this.size);16<this.curSize&&(this.curSize=Math.floor(this.curSize));this.curSize=Math.min(this.curSize,400);this.curAlpha=this.pressureAlpha?Math.floor(this.alpha*Math.min(a,1)):this.alpha;this.curSqueeze=this.squeeze;this.curAngle=this.angle;this.curScattering=this.scattering*this.curSize*(this.pressureScattering?a:1)};Ba.prototype.clone=function(){return new Ba(this)};Ha.prototype.makeEmpty=function(){this.bottom=this.right=this.top=
this.left=0};Ha.prototype.union=function(a){this.isEmpty()?this.set(a):a.isEmpty()||(this.left=Math.min(this.left,a.left),this.top=Math.min(this.top,a.top),this.right=Math.max(this.right,a.right),this.bottom=Math.max(this.bottom,a.bottom))};Ha.prototype.getUnion=function(a){var c=this.clone();return c.union(a),c};Ha.prototype.getIntersection=function(a){return new Ha(Math.max(this.left,a.left),Math.max(this.top,a.top),Math.min(this.right,a.right),Math.min(this.bottom,a.bottom))};Ha.prototype.clipTo=
function(a){return this.isEmpty()||(a.isEmpty()?this.makeEmpty():(this.left=Math.min(Math.max(this.left,a.left),a.right),this.top=Math.min(Math.max(this.top,a.top),a.bottom),this.right=Math.max(Math.min(this.right,a.right),a.left),this.bottom=Math.max(Math.min(this.bottom,a.bottom),a.top))),this};Ha.prototype.containsPoint=function(a){return!(a.x<this.left||a.y<this.top||a.x>=this.right||a.y>=this.bottom)};Ha.prototype.isInside=function(a){return this.left>=a.left&&this.top>=a.top&&this.right<=a.right&&
this.bottom<=a.bottom};Ha.prototype.clipSourceDest=function(a,c){c.right=c.left+a.getWidth();c.bottom=c.top+a.getHeight();this.isEmpty()||c.left>=this.right||c.top>=this.bottom||c.right<=this.left||c.bottom<=this.top?(a.makeEmpty(),c.makeEmpty()):(c.right>this.right&&(a.right-=c.right-this.right,c.right=this.right),c.bottom>this.bottom&&(a.bottom-=c.bottom-this.bottom,c.bottom=this.bottom),c.left<this.left&&(a.left+=this.left-c.left,c.left=this.left),c.top<this.top&&(a.top+=this.top-c.top,c.top=this.top))};
Ha.prototype.getWidth=function(){return this.right-this.left};Ha.prototype.getHeight=function(){return this.bottom-this.top};Ha.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Ha.prototype.isEmpty=function(){return this.right<=this.left||this.bottom<=this.top};Ha.prototype.set=function(a){this.left=a.left;this.top=a.top;this.right=a.right;this.bottom=a.bottom};Ha.prototype.clone=function(){return new Ha(this.left,this.top,this.right,this.bottom)};Ha.prototype.translate=function(a,
c){return this.left+=a,this.right+=a,this.top+=c,this.bottom+=c,this};Ha.prototype.getTranslated=function(a,c){var d=this.clone();return d.translate(a,c),d};Ha.prototype.moveTo=function(a,c){this.translate(a-this.left,c-this.top)};Ha.prototype.equals=function(a){return this.left==a.left&&this.right==a.right&&this.top==a.top&&this.bottom==a.bottom};Ha.prototype.grow=function(a,c){this.left-=a;this.right+=a;this.top-=c;this.bottom+=c};Ha.prototype.toString=function(){return"("+this.left+","+this.top+
","+this.right+","+this.bottom+")"};Ha.prototype.toPoints=function(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.right,y:this.bottom},{x:this.left,y:this.bottom}]};Ha.prototype.roundNearest=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this};Ha.prototype.roundContain=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.right=Math.ceil(this.right),
this.bottom=Math.ceil(this.bottom),this};Ha.createBoundingBox=function(a){if(0===a.length)return new Ha(0,0,0,0);let c=new Ha(a[0].x,a[0].y,a[0].x,a[0].y);for(let d=1;d<a.length;d++)c.left=Math.min(c.left,a[d].x),c.top=Math.min(c.top,a[d].y),c.right=Math.max(c.right,a[d].x),c.bottom=Math.max(c.bottom,a[d].y);return c};Ha.prototype.subtract=function(a){return Ha.subtract(this,a)};Ha.subtract=function(a,c){a instanceof Ha&&(a=[a]);c instanceof Ha&&(c=[c]);a=a.slice(0);for(let b=0;b<c.length;b++){let h=
c[b],p=a.length;for(let g=0;g<p;g++){var d=a[g];if(!d)continue;let e=d.getIntersection(h);if(!e.isEmpty()){let m=[];if(d.top<h.top&&m.push(new Ha(d.left,d.top,d.right,e.top)),d.bottom>h.bottom&&m.push(new Ha(d.left,e.bottom,d.right,d.bottom)),d.left<h.left&&m.push(new Ha(d.left,e.top,e.left,e.bottom)),d.right>h.right&&m.push(new Ha(e.right,e.top,d.right,e.bottom)),0<(m=m.filter(l=>!l.isEmpty())).length)for(a[g]=m[0],d=1;d<m.length;d++)a.push(m[d]);else a[g]=null}}}return a.filter(b=>null!=b)};Ha.union=
function(a){if(a instanceof Ha)a=[a];else{a=a.slice(0);for(let d=0;d<a.length;d++){let b=a[d],h=a.length;if(b)for(let p=d+1;p<h;p++){var c=a[p];if(c&&!b.getIntersection(c).isEmpty()){c=Ha.subtract(c,b);a[p]=c[0];for(let g=1;g<c.length;g++)a.push(c[g])}}}}return a.filter(d=>d&&!d.isEmpty())};"object"==typeof window&&(window.cpRectGarbage=new Ha(1.5,2.5,3.5,4.5));yd.prototype.getBounds=function(){return new Ha(0,0,this.width,this.height)};yd.prototype.isInside=function(a,c){return 0<=a&&0<=c&&a<this.width&&
c<this.height};G.prototype=Object.create(yd.prototype);G.prototype.constructor=G;G.BYTES_PER_PIXEL=4;G.RED_BYTE_OFFSET=0;G.GREEN_BYTE_OFFSET=1;G.BLUE_BYTE_OFFSET=2;G.ALPHA_BYTE_OFFSET=3;G.prototype.clone=function(){return this.cloneRect(this.getBounds())};G.prototype.cloneRect=function(a){var c=new G(a.getWidth(),a.getHeight());return c.copyBitmapRect(this,0,0,a),c};G.prototype.getPixel=function(a,c){a=Math.max(0,Math.min(this.width-1,a));c=Math.max(0,Math.min(this.height-1,c));a=this.offsetOfPixel(a,
c);return this.data[a+G.ALPHA_BYTE_OFFSET]<<24|this.data[a+G.RED_BYTE_OFFSET]<<16|this.data[a+G.GREEN_BYTE_OFFSET]<<8|this.data[a+G.BLUE_BYTE_OFFSET]};G.prototype.copyRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=new Uint8Array(d*c.getHeight()*G.BYTES_PER_PIXEL),h=0,p=this.offsetOfPixel(c.left,c.top),g=a.offsetOfPixel(c.left,c.top),e=(this.width-d)*G.BYTES_PER_PIXEL,m=(a.width-d)*G.BYTES_PER_PIXEL;d*=G.BYTES_PER_PIXEL;for(var l=c.top;l<c.bottom;l++,p+=e,g+=m)for(var k=0;k<
d;k++,h++,p++,g++)b[h]=this.data[p]^a.data[g];return b};G.prototype.setRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=c.getHeight();c=this.offsetOfPixel(c.left,c.top);var h=0,p=(this.width-d)*G.BYTES_PER_PIXEL;d*=G.BYTES_PER_PIXEL;for(var g=0;g<b;g++){for(var e=0;e<d;e++)this.data[c++]^=a[h++];c+=p}};G.prototype.copyBitmapRect=function(a,c,d,b){var h=new Ha(c,d,0,0);b=b.clone();this.getBounds().clipSourceDest(b,h);c=0|h.getWidth();d=0|h.getHeight();if(0==h.left&&0==h.top&&
c==this.width&&d==this.height&&c==a.width&&d==a.height)this.copyPixelsFrom(a);else{h=this.offsetOfPixel(h.left,h.top);var p=(this.width-c)*G.BYTES_PER_PIXEL;b=a.offsetOfPixel(b.left,b.top);for(var g=(a.width-c)*G.BYTES_PER_PIXEL,e=0;e<d;e++,b+=g,h+=p)for(var m=0;m<c;m++,b+=G.BYTES_PER_PIXEL,h+=G.BYTES_PER_PIXEL)this.data[h]=a.data[b],this.data[h+1]=a.data[b+1],this.data[h+2]=a.data[b+2],this.data[h+3]=a.data[b+3]}};G.prototype.copyAlphaFrom=function(a,c){var d=0|(c=this.getBounds().clipTo(c)).getWidth(),
b=0|c.getHeight();c=this.offsetOfPixel(c.left,c.top)+G.ALPHA_BYTE_OFFSET|0;for(var h=(this.width-d)*G.BYTES_PER_PIXEL|0,p=0;p<b;p++,c+=h)for(var g=0;g<d;g++,c+=G.BYTES_PER_PIXEL)this.data[c]=a.data[c]};G.prototype.setToSize=function(a){(a.width!=this.width||a.height!=this.height)&&(this.width=a.width,this.height=a.height,this.imageData=lf(this.width,this.height),this.data=this.imageData.data)};G.prototype.copyPixelsFrom=function(a){if(this.setToSize(a),"set"in this.data)this.data.set(a.data);else for(var c=
0;c<this.data.length;c++)this.data[c]=a.data[c]};G.prototype.copyPixelsFromGreyscale=function(a){var c,d=0,b=a.width*a.height;this.setToSize(a);for(c=0;c<b;c++,d+=G.BYTES_PER_PIXEL)this.data[d+G.RED_BYTE_OFFSET]=a.data[c],this.data[d+G.GREEN_BYTE_OFFSET]=a.data[c],this.data[d+G.BLUE_BYTE_OFFSET]=a.data[c],this.data[d+G.ALPHA_BYTE_OFFSET]=255};G.prototype.copyScaledNearestNeighbor=function(a){for(var c,d=0,b=a.width/this.width,h=a.height/this.height,p=0,g=0;p<this.height;p++,g+=h){c=a.offsetOfPixel(0,
Math.round(g));for(var e=0,m=0;e<this.width;e++,d+=G.BYTES_PER_PIXEL,m+=b){var l=c+Math.round(m)*G.BYTES_PER_PIXEL;this.data[d]=a.data[l];this.data[d+1]=a.data[l+1];this.data[d+2]=a.data[l+2];this.data[d+G.ALPHA_BYTE_OFFSET]=a.data[l+G.ALPHA_BYTE_OFFSET]}}};G.prototype.createThumbnailFrom=function(a){let c=Math.min(Math.floor(a.width/this.width),3);if(2>c)this.copyScaledNearestNeighbor(a);else{var d=new Uint16Array(5*this.width),b=a.width*G.BYTES_PER_PIXEL,h=Math.floor(a.width/this.width)*G.BYTES_PER_PIXEL,
p=Math.floor(a.width/this.width/c)*G.BYTES_PER_PIXEL,g=h-p*c,e=Math.floor(a.height/this.height/c);h=e*b-h*this.width;b*=Math.floor(a.height/this.height)-e*c;var m=e=0;for(let r=0;r<this.height;r++,e+=b){let u;d.fill(0);for(var l=0;l<c;l++,e+=h){u=0;for(var k=0;k<this.width;k++,u+=5,e+=g)for(var n=0;n<c;n++,e+=p){let v=a.data[e+G.ALPHA_BYTE_OFFSET],x=v/255;d[u]+=a.data[e]*x;d[u+1]+=a.data[e+1]*x;d[u+2]+=a.data[e+2]*x;d[u+G.ALPHA_BYTE_OFFSET]+=v;d[u+4]=Math.max(d[u+4],v)}}u=0;for(l=0;l<this.width;l++,
u+=5,m+=G.BYTES_PER_PIXEL)k=d[u+4],0==k?this.data[m+G.ALPHA_BYTE_OFFSET]=0:(n=k/d[u+G.ALPHA_BYTE_OFFSET],this.data[m]=d[u]*n,this.data[m+1]=d[u+1]*n,this.data[m+2]=d[u+2]*n,this.data[m+G.ALPHA_BYTE_OFFSET]=k)}}};G.prototype.floodFill=function(a,c,d){if(this.isInside(a,c)){var b=this.getPixel(a,c),h=b>>24&255,p=b>>16&255,g=b>>8&255,e=255&b,m=d>>24&255,l=d>>16&255,k=d>>8&255,n=255&d,r=[],u=this.getBounds(),v=this.data;if(u.left*=G.BYTES_PER_PIXEL,u.right*=G.BYTES_PER_PIXEL,r.push({x1:a*G.BYTES_PER_PIXEL,
x2:a*G.BYTES_PER_PIXEL,y:c,dy:-1}),r.push({x1:a*G.BYTES_PER_PIXEL,x2:a*G.BYTES_PER_PIXEL,y:c+1,dy:1}),0==h){if(0!=m)for(;0<r.length;)if(p=r.pop(),!(p.y<u.top||p.y>=u.bottom)){g=this.offsetOfPixel(0,p.y);for(e=p.x1;e>=u.left&&0==v[e+g+G.ALPHA_BYTE_OFFSET];)v[e+g+G.RED_BYTE_OFFSET]=l,v[e+g+G.GREEN_BYTE_OFFSET]=k,v[e+g+G.BLUE_BYTE_OFFSET]=n,v[e+g+G.ALPHA_BYTE_OFFSET]=m,e-=G.BYTES_PER_PIXEL;if(e>=p.x1){for(;e<=p.x2&&v[e+g+G.ALPHA_BYTE_OFFSET]!=h;)e+=G.BYTES_PER_PIXEL;if(a=e+G.BYTES_PER_PIXEL,e>p.x2)continue}else(e+=
G.BYTES_PER_PIXEL)<p.x1&&r.push({x1:e,x2:p.x1-G.BYTES_PER_PIXEL,y:p.y-p.dy,dy:-p.dy}),a=p.x1+G.BYTES_PER_PIXEL;do{v[e+g+G.RED_BYTE_OFFSET]=l;v[e+g+G.GREEN_BYTE_OFFSET]=k;v[e+g+G.BLUE_BYTE_OFFSET]=n;for(v[e+g+G.ALPHA_BYTE_OFFSET]=m;a<u.right&&v[a+g+G.ALPHA_BYTE_OFFSET]==h;)v[a+g+G.RED_BYTE_OFFSET]=l,v[a+g+G.GREEN_BYTE_OFFSET]=k,v[a+g+G.BLUE_BYTE_OFFSET]=n,v[a+g+G.ALPHA_BYTE_OFFSET]=m,a+=G.BYTES_PER_PIXEL;r.push({x1:e,x2:a-G.BYTES_PER_PIXEL,y:p.y+p.dy,dy:p.dy});a-G.BYTES_PER_PIXEL>p.x2&&r.push({x1:p.x2+
G.BYTES_PER_PIXEL,x2:a-G.BYTES_PER_PIXEL,y:p.y-p.dy,dy:-p.dy});for(e=a+G.BYTES_PER_PIXEL;e<=p.x2&&v[e+g+G.ALPHA_BYTE_OFFSET]!=h;)e+=G.BYTES_PER_PIXEL;a=e+G.BYTES_PER_PIXEL}while(e<=p.x2)}}else if(d!=b)for(;0<r.length;)if(a=r.pop(),!(a.y<u.top||a.y>=u.bottom)){c=this.offsetOfPixel(0,a.y);for(d=a.x1;d>=u.left&&v[d+c+G.RED_BYTE_OFFSET]==p&&v[d+c+G.GREEN_BYTE_OFFSET]==g&&v[d+c+G.BLUE_BYTE_OFFSET]==e&&v[d+c+G.ALPHA_BYTE_OFFSET]==h;)v[d+c+G.RED_BYTE_OFFSET]=l,v[d+c+G.GREEN_BYTE_OFFSET]=k,v[d+c+G.BLUE_BYTE_OFFSET]=
n,v[d+c+G.ALPHA_BYTE_OFFSET]=m,d-=G.BYTES_PER_PIXEL;if(d>=a.x1){for(;d<=a.x2&&(v[d+c+G.RED_BYTE_OFFSET]!=p||v[d+c+G.GREEN_BYTE_OFFSET]!=g||v[d+c+G.BLUE_BYTE_OFFSET]!=e||v[d+c+G.ALPHA_BYTE_OFFSET]!=h);)d+=G.BYTES_PER_PIXEL;if(b=d+G.BYTES_PER_PIXEL,d>a.x2)continue}else(d+=G.BYTES_PER_PIXEL)<a.x1&&r.push({x1:d,x2:a.x1-G.BYTES_PER_PIXEL,y:a.y-a.dy,dy:-a.dy}),b=a.x1+G.BYTES_PER_PIXEL;do{v[d+c+G.RED_BYTE_OFFSET]=l;v[d+c+G.GREEN_BYTE_OFFSET]=k;v[d+c+G.BLUE_BYTE_OFFSET]=n;for(v[d+c+G.ALPHA_BYTE_OFFSET]=m;b<
u.right&&v[b+c+G.RED_BYTE_OFFSET]==p&&v[b+c+G.GREEN_BYTE_OFFSET]==g&&v[b+c+G.BLUE_BYTE_OFFSET]==e&&v[b+c+G.ALPHA_BYTE_OFFSET]==h;)v[b+c+G.RED_BYTE_OFFSET]=l,v[b+c+G.GREEN_BYTE_OFFSET]=k,v[b+c+G.BLUE_BYTE_OFFSET]=n,v[b+c+G.ALPHA_BYTE_OFFSET]=m,b+=G.BYTES_PER_PIXEL;r.push({x1:d,x2:b-G.BYTES_PER_PIXEL,y:a.y+a.dy,dy:a.dy});b-G.BYTES_PER_PIXEL>a.x2&&r.push({x1:a.x2+G.BYTES_PER_PIXEL,x2:b-G.BYTES_PER_PIXEL,y:a.y-a.dy,dy:-a.dy});for(d=b+G.BYTES_PER_PIXEL;d<=a.x2&&(v[d+c+G.RED_BYTE_OFFSET]!=p||v[d+c+G.GREEN_BYTE_OFFSET]!=
g||v[d+c+G.BLUE_BYTE_OFFSET]!=e||v[d+c+G.ALPHA_BYTE_OFFSET]!=h);)d+=G.BYTES_PER_PIXEL;b=d+G.BYTES_PER_PIXEL}while(d<=a.x2)}}};G.prototype.copyPixelColumnToArray=function(a,c,d,b){var h=(this.width-1)*G.BYTES_PER_PIXEL,p=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++){for(var g=0;g<G.BYTES_PER_PIXEL;g++)b[p++]=this.data[a++];a+=h}};G.prototype.copyArrayToPixelColumn=function(a,c,d,b){var h=(this.width-1)*G.BYTES_PER_PIXEL,p=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++){for(var g=0;g<G.BYTES_PER_PIXEL;g++)this.data[a++]=
b[p++];a+=h}};G.prototype.boxBlur=function(a,c,d){let b=(a=this.getBounds().clipTo(a)).getWidth(),h=b*G.BYTES_PER_PIXEL,p=a.getHeight();var g=Math.max(b,p);let e=new Uint8Array(g*G.BYTES_PER_PIXEL);g=new Uint8Array(g*G.BYTES_PER_PIXEL);for(let k=a.top;k<a.bottom;k++){var m=this.offsetOfPixel(a.left,k);for(var l=0;l<h;l++)e[l]=this.data[m++];!function(n,r){for(var u=0,v=0;v<r;v++){for(var x=n[u+G.ALPHA_BYTE_OFFSET],D=0;3>D;D++,u++)n[u]=Math.round(n[u]*x/255);u++}}(e,b);hg(e,g,b,c);m=this.offsetOfPixel(a.left,
k);for(l=0;l<h;l++)this.data[m++]=g[l]}for(c=a.left;c<a.right;c++)this.copyPixelColumnToArray(c,a.top,p,e),hg(e,g,p,d),function(k,n){for(var r=0,u=0;u<n;u++){var v=k[r+G.ALPHA_BYTE_OFFSET];if(0!=v){v=255/v;for(var x=0;3>x;x++,r++)k[r]=Math.min(Math.round(k[r]*v),255);r++}else r+=G.BYTES_PER_PIXEL}}(g,p),this.copyArrayToPixelColumn(c,a.top,p,g)};G.prototype.offsetOfPixel=function(a,c){return 4*(c*this.width+a)|0};G.prototype.getMemorySize=function(){return this.data.length};G.prototype.getImageData=
function(){return this.imageData};G.prototype.setImageData=function(a){this.width=a.width;this.height=a.height;this.imageData=a;this.data=a.data};G.prototype.clearAll=function(a){if(0==a&&"fill"in this.data)this.data.fill(0);else{var c=a>>24&255,d=a>>16&255,b=a>>8&255;a&=255;for(var h=0;h<this.width*this.height*G.BYTES_PER_PIXEL;)this.data[h++]=d,this.data[h++]=b,this.data[h++]=a,this.data[h++]=c}};G.prototype.clearRect=function(a,c){a=this.getBounds().clipTo(a);var d=c>>24&255,b=c>>16&255,h=c>>8&
255;c&=255;for(var p=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,g=this.offsetOfPixel(a.left,a.top),e=a.top;e<a.bottom;e++,g+=p)for(var m=a.left;m<a.right;m++)this.data[g++]=b,this.data[g++]=h,this.data[g++]=c,this.data[g++]=d};G.prototype.copyRegionHFlip=function(a,c){a=this.getBounds().clipTo(a);for(var d=a.top;d<a.bottom;d++)for(var b=this.offsetOfPixel(a.left,d),h=c.offsetOfPixel(a.right-1,d),p=a.left;p<a.right;p++,h-=2*G.BYTES_PER_PIXEL)for(var g=0;g<G.BYTES_PER_PIXEL;g++)this.data[b++]=c.data[h++]};
G.prototype.copyRegionVFlip=function(a,c){for(var d=(a=this.getBounds().clipTo(a)).getWidth()*G.BYTES_PER_PIXEL,b=a.top;b<a.bottom;b++)for(var h=this.offsetOfPixel(a.left,b),p=c.offsetOfPixel(a.left,a.bottom-1-(b-a.top)),g=0;g<d;g++)this.data[h++]=c.data[p++]};G.prototype.fillWithNoise=function(a){a=this.getBounds().clipTo(a);for(var c,d=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,b=this.offsetOfPixel(a.left,a.top),h=a.top;h<a.bottom;h++,b+=d)for(var p=a.left;p<a.right;p++,b+=G.BYTES_PER_PIXEL)c=
256*Math.random()|0,this.data[b+G.RED_BYTE_OFFSET]=c,this.data[b+G.GREEN_BYTE_OFFSET]=c,this.data[b+G.BLUE_BYTE_OFFSET]=c,this.data[b+G.ALPHA_BYTE_OFFSET]=255};G.prototype.gradientHorzReplace=function(a,c,d,b){var h={r:b[0]>>16&255,g:b[0]>>8&255,b:255&b[0],a:b[0]>>24&255};b={r:b[1]>>16&255,g:b[1]>>8&255,b:255&b[1],a:b[1]>>24&255};var p=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,g=0|this.offsetOfPixel(a.left,a.top),e=a.bottom-a.top|0;if(d<c){var m=d;d=c;c=m;m=h;h=b;b=m}var l=d-c|0;m=(b.r-h.r)/l;var k=
(b.g-h.g)/l,n=(b.b-h.b)/l;l=(b.a-h.a)/l;for(var r=Math.max(a.left-c,0),u=0;u<e;u++,g+=p){for(var v=a.left,x=0|Math.min(c,a.right);v<x;v++,g+=G.BYTES_PER_PIXEL)this.data[g+G.RED_BYTE_OFFSET]=h.r,this.data[g+G.GREEN_BYTE_OFFSET]=h.g,this.data[g+G.BLUE_BYTE_OFFSET]=h.b,this.data[g+G.ALPHA_BYTE_OFFSET]=h.a;var D=h.r+m*r,H=h.g+k*r,L=h.b+n*r,J=h.a+l*r;for(x=0|Math.min(d,a.right);v<x;v++,g+=G.BYTES_PER_PIXEL)this.data[g+G.RED_BYTE_OFFSET]=D,this.data[g+G.GREEN_BYTE_OFFSET]=H,this.data[g+G.BLUE_BYTE_OFFSET]=
L,this.data[g+G.ALPHA_BYTE_OFFSET]=J,D+=m,H+=k,L+=n,J+=l;for(;v<a.right;v++,g+=G.BYTES_PER_PIXEL)this.data[g+G.RED_BYTE_OFFSET]=b.r,this.data[g+G.GREEN_BYTE_OFFSET]=b.g,this.data[g+G.BLUE_BYTE_OFFSET]=b.b,this.data[g+G.ALPHA_BYTE_OFFSET]=b.a}};G.prototype.gradientVertReplace=function(a,c,d,b){var h={r:b[0]>>16&255,g:b[0]>>8&255,b:255&b[0],a:b[0]>>24&255};b={r:b[1]>>16&255,g:b[1]>>8&255,b:255&b[1],a:b[1]>>24&255};let p=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,g=0|this.offsetOfPixel(a.left,a.top),
e=a.right-a.left|0;if(d<c){var m=d;d=c;c=m;m=h;h=b;b=m}m=a.top;for(var l=0|Math.min(a.bottom,c);m<l;m++,g+=p)for(var k=0;k<e;k++,g+=G.BYTES_PER_PIXEL)this.data[g+G.RED_BYTE_OFFSET]=h.r,this.data[g+G.GREEN_BYTE_OFFSET]=h.g,this.data[g+G.BLUE_BYTE_OFFSET]=h.b,this.data[g+G.ALPHA_BYTE_OFFSET]=h.a;var n=d-c|0;l=(b.r-h.r)/n;k=(b.g-h.g)/n;var r=(b.b-h.b)/n;n=(b.a-h.a)/n;var u=Math.max(m-c,0);c=h.r+l*u;var v=h.g+k*u,x=h.b+r*u;h=h.a+n*u;for(d=0|Math.min(a.bottom,d);m<d;m++,g+=p){for(u=0;u<e;u++,g+=G.BYTES_PER_PIXEL)this.data[g+
G.RED_BYTE_OFFSET]=c,this.data[g+G.GREEN_BYTE_OFFSET]=v,this.data[g+G.BLUE_BYTE_OFFSET]=x,this.data[g+G.ALPHA_BYTE_OFFSET]=h;c+=l;v+=k;x+=r;h+=n}for(;m<a.bottom;m++,g+=p)for(d=0;d<e;d++,g+=G.BYTES_PER_PIXEL)this.data[g+G.RED_BYTE_OFFSET]=b.r,this.data[g+G.GREEN_BYTE_OFFSET]=b.g,this.data[g+G.BLUE_BYTE_OFFSET]=b.b,this.data[g+G.ALPHA_BYTE_OFFSET]=b.a};G.prototype.gradientReplace=function(a,c,d,b,h,p){var g=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,e=0|this.offsetOfPixel(a.left,a.top),m=a.right-a.left|
0,l=p[0]>>16&255,k=p[0]>>8&255,n=255&p[0],r=p[0]>>24&255,u=p[1]>>16&255,v=p[1]>>8&255,x=255&p[1];p=p[1]>>24&255;var D=h-d+(b-c)*(b-c)/(h-d);b=b-c+(h-d)*(h-d)/(b-c);h=1/b;for(var H=a.top;H<a.bottom;H++,e+=g)for(var L=(a.left-c)/b+(H-d)/D,J=0;J<m;J++,e+=G.BYTES_PER_PIXEL){var O=Math.min(Math.max(L,0),1),K=1-O;this.data[e+G.RED_BYTE_OFFSET]=l*K+u*O;this.data[e+G.GREEN_BYTE_OFFSET]=k*K+v*O;this.data[e+G.BLUE_BYTE_OFFSET]=n*K+x*O;this.data[e+G.ALPHA_BYTE_OFFSET]=r*K+p*O;L+=h}};G.prototype.gradientAlpha=
function(a,c,d,b,h,p){var g=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,e=0|this.offsetOfPixel(a.left,a.top),m=a.right-a.left|0,l=p[0]>>16&255,k=p[0]>>8&255,n=255&p[0],r=p[0]>>24&255,u=p[1]>>16&255,v=p[1]>>8&255,x=255&p[1];p=p[1]>>24&255;var D=h-d+(b-c)*(b-c)/(h-d);b=b-c+(h-d)*(h-d)/(b-c);h=1/b;for(var H=a.top;H<a.bottom;H++,e+=g)for(var L=(a.left-c)/b+(H-d)/D,J=0;J<m;J++,e+=G.BYTES_PER_PIXEL){var O=Math.min(Math.max(L,0),1),K=1-O,X=l*K+u*O,W=k*K+v*O,Y=n*K+x*O;K=r*K+p*O;O=this.data[e+G.ALPHA_BYTE_OFFSET];
O=K+O-K*O/255|0;if(0<O){K=255*K/O|0;var ka=255-K;this.data[e+G.RED_BYTE_OFFSET]=(X*K+this.data[e+G.RED_BYTE_OFFSET]*ka)/255|0;this.data[e+G.GREEN_BYTE_OFFSET]=(W*K+this.data[e+G.GREEN_BYTE_OFFSET]*ka)/255|0;this.data[e+G.BLUE_BYTE_OFFSET]=(Y*K+this.data[e+G.BLUE_BYTE_OFFSET]*ka)/255|0;this.data[e+G.ALPHA_BYTE_OFFSET]=O}L+=h}};G.prototype.gradient=function(a,c,d,b,h,p,g){a=this.getBounds().clipTo(a);(c!=b||d!=h)&&(g||255==p[0]>>>24&&255==p[1]>>>24?c==b?this.gradientVertReplace(a,d,h,p):d==h?this.gradientHorzReplace(a,
c,b,p):this.gradientReplace(a,c,d,b,h,p):this.gradientAlpha(a,c,d,b,h,p))};G.prototype.fillWithColorNoise=function(a){a=this.getBounds().clipTo(a);for(var c,d=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,b=this.offsetOfPixel(a.left,a.top),h=a.top;h<a.bottom;h++,b+=d)for(var p=a.left;p<a.right;p++,b+=G.BYTES_PER_PIXEL)c=16777216*Math.random()|0,this.data[b+G.RED_BYTE_OFFSET]=c>>16&255,this.data[b+G.GREEN_BYTE_OFFSET]=c>>8&255,this.data[b+G.BLUE_BYTE_OFFSET]=255&c,this.data[b+G.ALPHA_BYTE_OFFSET]=255};
G.prototype.invert=function(a){a=this.getBounds().clipTo(a);for(var c=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var h=a.left;h<a.right;h++,d+=G.BYTES_PER_PIXEL)this.data[d+G.RED_BYTE_OFFSET]^=255,this.data[d+G.GREEN_BYTE_OFFSET]^=255,this.data[d+G.BLUE_BYTE_OFFSET]^=255};G.prototype.brightnessToOpacity=function(a){a=this.getBounds().clipTo(a);let c=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top);for(let h=
a.top;h<a.bottom;h++,d+=c)for(let p=a.left;p<a.right;p++,d+=G.BYTES_PER_PIXEL){var b=void 0;b=(this.data[d+G.RED_BYTE_OFFSET]+this.data[d+G.GREEN_BYTE_OFFSET]+this.data[d+G.BLUE_BYTE_OFFSET])/3;let g=this.data[d+G.ALPHA_BYTE_OFFSET]/255;b=250<b?0:Math.round(255*(1-b/250));this.data[d+G.ALPHA_BYTE_OFFSET]=Math.round(b*g);0<b&&(this.data[d+G.RED_BYTE_OFFSET]=0,this.data[d+G.GREEN_BYTE_OFFSET]=0,this.data[d+G.BLUE_BYTE_OFFSET]=0)}};G.prototype.getNonTransparentBounds=function(a){var c,d,b=a.clone();
var h=(this.width-b.getWidth())*G.BYTES_PER_PIXEL;a=this.offsetOfPixel(b.left,b.top)+G.ALPHA_BYTE_OFFSET;for(d=b.top;d<b.bottom;d++,a+=h){var p=0;for(c=b.left;c<b.right;c++,a+=G.BYTES_PER_PIXEL)p|=this.data[a];if(0!=p)break}if(b.top=d,b.top==b.bottom)return b;a=this.offsetOfPixel(b.right-1,b.bottom-1)+G.ALPHA_BYTE_OFFSET;for(d=b.bottom-1;d>=b.top;d--,a-=h){p=0;for(c=b.right-1;c>=b.left;c--,a-=G.BYTES_PER_PIXEL)p|=this.data[a];if(0!=p)break}b.bottom=d+1;h=G.BYTES_PER_PIXEL*this.width;for(c=b.left;c<
b.right;c++){a=this.offsetOfPixel(c,b.top)+G.ALPHA_BYTE_OFFSET;p=0;for(d=b.top;d<b.bottom;d++,a+=h)p|=this.data[a];if(0!=p)break}b.left=c;for(c=b.right-1;c>=b.left;c--){a=this.offsetOfPixel(c,b.top)+G.ALPHA_BYTE_OFFSET;p=0;for(d=b.top;d<b.bottom;d++,a+=h)p|=this.data[a];if(0!=p)break}return b.right=c+1,b};G.prototype.getAsCanvas=function(a){var c=Zc(this.imageData.width,this.imageData.height);return c.getContext("2d").putImageData(this.imageData,0,0),ig(c,a||0)};G.prototype.getAsPNG=function(a){var c;
return"string"==typeof(c=this.getAsCanvas(a).toDataURL("image/png"))&&!!c.match(/^data:image\/png;base64,/i)&&window.atob(c.substring(22))};G.prototype.getAsPNGBuffer=function(a){return this.getAsCanvas(a).toBuffer("image/png")};G.prototype.hasAlphaInRect=function(a){a=this.getBounds().clipTo(a);for(var c=(this.width-a.getWidth())*G.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top)+G.ALPHA_BYTE_OFFSET,b=a.top;b<a.bottom;b++,d+=c){for(var h=255,p=a.left;p<a.right;p++,d+=G.BYTES_PER_PIXEL)h&=this.data[d];
if(255!=h)return!0}return!1};G.prototype.hasAlpha=function(){return this.hasAlphaInRect(this.getBounds())};G.createFromImage=function(a){var c=Zc(a.width,a.height).getContext("2d");return c.globalCompositeOperation="copy",c.drawImage(a,0,0),new G(c.getImageData(0,0,a.width,a.height))};G.prototype.equals=function(a){if(this.width!=a.width||this.height!=a.height)return!1;for(let c=0;c<this.data.length;c+=G.BYTES_PER_PIXEL)if(!(0==this.data[c+G.ALPHA_BYTE_OFFSET]&&0==a.data[c+G.ALPHA_BYTE_OFFSET]||this.data[c]==
a.data[c]&&this.data[c+1]==a.data[c+1]&&this.data[c+2]==a.data[c+2]&&this.data[c+3]==a.data[c+3]))return!1;return!0};nb.prototype=Object.create(qb.prototype);nb.prototype.constructor=nb;nb.prototype.getLinearizedLayerList=function(a,c){for(let d of(c=c||[],this.layers))d instanceof nb&&(d.expanded||!a)&&d.getLinearizedLayerList(a,c),c.push(d);return c};nb.prototype.clearLayers=function(){this.layers=[]};nb.prototype.addLayer=function(a){a.parent=this;this.layers.push(a)};nb.prototype.insertLayer=
function(a,c){c.parent=this;this.layers.splice(a,0,c)};nb.prototype.removeLayer=function(a){a=this.layers.indexOf(a);-1<a&&this.layers.splice(a,1)};nb.prototype.removeLayerAtIndex=function(a){var c=this.layers[a];return c&&this.layers.splice(a,1),c};nb.prototype.setLayerAtIndex=function(a,c){var d=this.layers[a];return c.parent=this,this.layers[a]=c,d};nb.prototype.setExpanded=function(a){this.expanded=a};nb.prototype.getExpanded=function(){return this.expanded};nb.prototype.indexOf=function(a){return this.layers.indexOf(a)};
nb.prototype.getMemoryUsed=function(){return this.layers.map(a=>a.getMemoryUsed()).reduce(rh,0)};nb.prototype.clone=function(){var a=new nb(this.name,this.blendMode);return qb.prototype.copyFrom.call(a,this),a.expanded=this.expanded,a.layers=this.layers.map(c=>c.clone()),a.layers.forEach(c=>c.parent=a),a};nb.prototype.getNonTransparentBounds=function(a){var c=new Ha(0,0,0,0);return this.layers.forEach(d=>c.union(d.getNonTransparentBounds(a))),c};Za.prototype=Object.create(yd.prototype);Za.prototype.constructor=
Za;Za.prototype.createBitmap=function(a,c,d){switch(this.bitDepth=d,d){case 32:this.data=new Uint32Array(a*c);break;case 16:this.data=new Uint16Array(a*c);break;default:this.data=new Uint8Array(a*c)}};Za.prototype.clone=function(){var a=new Za(this.width,this.height,this.bitDepth);return a.copyPixelsFrom(this),a};Za.prototype.cloneRect=function(a){var c=new Za(a.getWidth(),a.getHeight(),this.bitDepth);return c.copyBitmapRect(this,0,0,a),c};Za.prototype.getPixel=function(a,c){return a=Math.max(0,Math.min(this.width-
1,a)),c=Math.max(0,Math.min(this.height-1,c)),this.data[this.offsetOfPixel(a,c)]};Za.prototype.clearAll=function(a){this.data.fill(a)};Za.prototype.clearRect=function(a,c){if((a=this.getBounds().clipTo(a)).equals(this.getBounds()))this.clearAll(c);else{let d=this.width,b=a.right-a.left,h=this.offsetOfPixel(a.left,a.top);for(let p=a.top;p<a.bottom;p++,h+=d)this.data.fill(c,h,h+b)}};Za.prototype.copyScaledNearestNeighbor=function(a){for(var c,d=0,b=a.width/this.width,h=a.height/this.height,p=0,g=0;p<
this.height;p++,g+=h){c=a.offsetOfPixel(0,Math.round(g));for(var e=0,m=0;e<this.width;e++,d++,m+=b)this.data[d]=a.data[c+Math.round(m)]}};Za.prototype.floodFill=function(a,c,d){if(this.isInside(a,c)){d&=255;var b=this.getPixel(a,c),h=[],p=this.getBounds(),g=this.data;if(h.push({x1:a,x2:a,y:c,dy:-1}),h.push({x1:a,x2:a,y:c+1,dy:1}),d!=b)for(;0<h.length;){a=h.pop();if(a.y<p.top||a.y>=p.bottom)continue;c=this.offsetOfPixel(0,a.y);let e=a.x1,m;for(;e>=p.left&&g[e+c]==b;)g[e+c]=d,e--;if(e>=a.x1){for(;e<=
a.x2&&g[e+c]!=b;)e++;if(m=e+1,e>a.x2)continue}else++e<a.x1&&h.push({x1:e,x2:a.x1-1,y:a.y-a.dy,dy:-a.dy}),m=a.x1+1;do{for(g[e+c]=d;m<p.right&&g[m+c]==b;)g[m+c]=d,m++;h.push({x1:e,x2:m-1,y:a.y+a.dy,dy:a.dy});m-1>a.x2&&h.push({x1:a.x2+1,x2:m-1,y:a.y-a.dy,dy:-a.dy});for(e=m+1;e<=a.x2&&g[e+c]!=b;)e++;m=e+1}while(e<=a.x2)}}};Za.prototype.createThumbnailFrom=function(a){let c=Math.min(Math.floor(a.width/this.width),3);if(2>c)this.copyScaledNearestNeighbor(a);else{var d=new Uint16Array(this.width),b=a.width,
h=Math.floor(a.width/this.width),p=Math.floor(a.width/this.width/c),g=h-p*c,e=Math.floor(a.height/this.height/c);h=e*b-h*this.width;b*=Math.floor(a.height/this.height)-e*c;var m=e=0;for(let k=0;k<this.height;k++,e+=b){let n;d.fill(0);for(var l=0;l<c;l++,e+=h){n=0;for(let r=0;r<this.width;r++,n++,e+=g)for(let u=0;u<c;u++,e+=p)d[n]+=a.data[e]}n=0;for(l=0;l<this.width;l++,n++,m++)this.data[m]=d[n]/(c*c)}}};Za.prototype.mirrorHorizontally=function(){let a=this.width,c=this.height,d=new Uint8Array(a*c),
b=0,h=a;for(let p=0;p<c;p++,h+=a+a)for(let g=0;g<a;g++)d[b++]=this.data[--h];this.data=d};Za.prototype.applyLUT=function(a){for(var c=0;c<this.data.length;c++)this.data[c]=a.table[this.data[c]]};Za.prototype.getAsCanvas=function(a){var c=this.getImageData(0,0,this.width,this.height),d=Zc(this.width,this.height);return d.getContext("2d").putImageData(c,0,0),ig(d,a||0)};Za.prototype.getImageData=function(a,c,d,b){let h=lf(d,b);a=this.offsetOfPixel(a,c);c=0;let p=this.width-d;for(let g=0;g<b;g++,a+=
p)for(let e=0;e<d;e++,a++)h.data[c++]=this.data[a],h.data[c++]=this.data[a],h.data[c++]=this.data[a],h.data[c++]=255;return h};Za.prototype.pasteImageData=function(a,c,d){let b=0;c=this.offsetOfPixel(c,d);d=this.width-a.width;for(let h=0;h<a.height;h++,c+=d)for(let p=0;p<a.width;p++,b+=4,c++)this.data[c]=a.data[b];return a};Za.prototype.copyPixelsFrom=function(a){a.width!=this.width||a.height!=this.height||a.bitDepth!=this.bitDepth?(this.data=a.data.slice(0),this.width=a.width,this.height=a.height,
this.bitDepth=a.bitDepth):this.data.set(a.data)};Za.prototype.copyRectXOR=function(a,c){for(var d=(c=this.getBounds().clipTo(c)).getWidth(),b=new Uint8Array(d*c.getHeight()),h=0,p=this.offsetOfPixel(c.left,c.top),g=a.offsetOfPixel(c.left,c.top),e=this.width-d,m=a.width-d,l=c.top;l<c.bottom;l++,p+=e,g+=m)for(var k=0;k<d;k++,h++,p++,g++)b[h]=this.data[p]^a.data[g];return b};Za.prototype.setRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=c.getHeight();c=this.offsetOfPixel(c.left,
c.top);for(var h=0,p=this.width-d,g=0;g<b;g++){for(var e=0;e<d;e++)this.data[c++]^=a[h++];c+=p}};Za.prototype.copyBitmapRect=function(a,c,d,b){var h=new Ha(c,d,0,0);b=b.clone();this.getBounds().clipSourceDest(b,h);c=0|h.getWidth();d=0|h.getHeight();if(0==h.left&&0==h.top&&c==this.width&&d==this.height&&c==a.width&&d==a.height)this.copyPixelsFrom(a);else{h=this.offsetOfPixel(h.left,h.top);var p=this.width-c;b=a.offsetOfPixel(b.left,b.top);for(var g=a.width-c,e=0;e<d;e++,b+=g,h+=p)for(var m=0;m<c;m++,
b++,h++)this.data[h]=a.data[b]}};Za.prototype.copyRegionHFlip=function(a,c){a=this.getBounds().clipTo(a);for(var d=a.top;d<a.bottom;d++)for(var b=this.offsetOfPixel(a.left,d),h=c.offsetOfPixel(a.right-1,d),p=a.left;p<a.right;p++,h-=2)this.data[b++]=c.data[h++]};Za.prototype.copyRegionVFlip=function(a,c){for(var d=(a=this.getBounds().clipTo(a)).getWidth(),b=a.top;b<a.bottom;b++)for(var h=this.offsetOfPixel(a.left,b),p=c.offsetOfPixel(a.left,a.bottom-1-(b-a.top)),g=0;g<d;g++)this.data[h++]=c.data[p++]};
Za.prototype.copyPixelColumnToArray=function(a,c,d,b){var h=this.width,p=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++)b[p]=this.data[a],a+=h,p++};Za.prototype.copyArrayToPixelColumn=function(a,c,d,b){var h=this.width,p=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++)this.data[a]=b[p],a+=h,p++};Za.prototype.boxBlur=function(a,c,d){let b=(a=this.getBounds().clipTo(a)).getWidth(),h=a.getHeight();var p=Math.max(b,h);let g=new this.data.constructor(p);p=new this.data.constructor(p);for(let l=a.top;l<a.bottom;l++){var e=
this.offsetOfPixel(a.left,l);for(var m=0;m<b;m++)g[m]=this.data[e++];jg(g,p,b,c);e=this.offsetOfPixel(a.left,l);for(m=0;m<b;m++)this.data[e++]=p[m]}for(c=a.left;c<a.right;c++)this.copyPixelColumnToArray(c,a.top,h,g),jg(g,p,h,d),this.copyArrayToPixelColumn(c,a.top,h,p)};Za.prototype.offsetOfPixel=function(a,c){return c*this.width+a};Za.prototype.fillWithNoise=function(a){a=this.getBounds().clipTo(a);for(var c=this.width-a.getWidth(),d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var h=
a.left;h<a.right;h++,d++)this.data[d]=256*Math.random()|0};Za.prototype.invert=function(a){a=this.getBounds().clipTo(a);for(var c=this.width-a.getWidth(),d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var h=a.left;h<a.right;h++,d++)this.data[d]=~this.data[d]};Za.prototype.brightnessToOpacity=function(a){a=this.getBounds().clipTo(a);let c=(this.width-a.getWidth())*Za.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top);for(let h=a.top;h<a.bottom;h++,d+=c)for(let p=a.left;p<a.right;p++,
d++){var b=void 0;b=this.data[d];let g=this.data[d+Za.ALPHA_BYTE_OFFSET]/255;b=250<b?0:Math.round(255*(1-b/250));this.data[d+Za.ALPHA_BYTE_OFFSET]=Math.round(b*g);0<b&&(this.data[d]=0)}};Za.prototype.getValueBounds=function(a,c){var d,b,h=a.clone();var p=this.width-h.getWidth();a=this.offsetOfPixel(h.left,h.top);for(b=h.top;b<h.bottom;b++,a+=p){var g=!1;for(d=h.left;d<h.right;d++,a++)if(this.data[a]!=c){g=!0;break}if(g)break}if(h.top=b,h.top==h.bottom)return h;a=this.offsetOfPixel(h.right-1,h.bottom-
1);for(b=h.bottom-1;b>=h.top;b--,a-=p){g=!1;for(d=h.right-1;d>=h.left;d--,a--)if(this.data[a]!=c){g=!0;break}if(g)break}h.bottom=b+1;p=this.width;for(d=h.left;d<h.right;d++){a=this.offsetOfPixel(d,h.top);g=!1;for(b=h.top;b<h.bottom;b++,a+=p)if(this.data[a]!=c){g=!0;break}if(g)break}h.left=d;for(d=h.right-1;d>=h.left;d--){a=this.offsetOfPixel(d,h.top);g=!1;for(b=h.top;b<h.bottom;b++,a+=p)if(this.data[a]!=c){g=!0;break}if(g)break}return h.right=d+1,h};Za.prototype.gradientHorzReplace=function(a,c,d,
b){var h=255&b[0];b=255&b[1];var p=this.width-a.getWidth(),g=0|this.offsetOfPixel(a.left,a.top),e=a.bottom-a.top|0;if(d<c){var m=d;d=c;c=m;m=h;h=b;b=m}m=(b-h)/(d-c|0);for(var l=Math.max(a.left-c,0),k=0;k<e;k++,g+=p){for(var n=a.left,r=0|Math.min(c,a.right);n<r;n++,g++)this.data[g]=h;var u=h+m*l;for(r=0|Math.min(d,a.right);n<r;n++,g++)this.data[g]=u,u+=m;for(;n<a.right;n++,g++)this.data[g]=b}};Za.prototype.gradientVertReplace=function(a,c,d,b){var h=255&b[0];b=255&b[1];let p=this.width-a.getWidth(),
g=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|0;if(d<c){var m=d;d=c;c=m;m=h;h=b;b=m}m=a.top;for(var l=0|Math.min(a.bottom,c);m<l;m++,g+=p)for(let k=0;k<e;k++,g++)this.data[g]=h;l=(b-h)/(d-c|0);c=h+l*Math.max(m-c,0);for(d=0|Math.min(a.bottom,d);m<d;m++,g+=p){for(h=0;h<e;h++,g++)this.data[g]=c;c+=l}for(;m<a.bottom;m++,g+=p)for(d=0;d<e;d++,g++)this.data[g]=b};Za.prototype.gradientReplace=function(a,c,d,b,h,p){var g=this.width-a.getWidth(),e=0|this.offsetOfPixel(a.left,a.top),m=a.right-a.left|
0,l=255&p[0];p=255&p[1];var k=h-d+(b-c)*(b-c)/(h-d);b=b-c+(h-d)*(h-d)/(b-c);h=1/b;for(var n=a.top;n<a.bottom;n++,e+=g)for(var r=(a.left-c)/b+(n-d)/k,u=0;u<m;u++,e++){var v=Math.min(Math.max(r,0),1);this.data[e]=l*(1-v)+p*v;r+=h}};Za.prototype.gradientAlpha=function(a,c,d,b,h,p){var g=this.width-a.getWidth(),e=0|this.offsetOfPixel(a.left,a.top),m=a.right-a.left|0,l=255&p[0],k=p[0]>>24&255,n=255&p[1];p=p[1]>>24&255;var r=h-d+(b-c)*(b-c)/(h-d);b=b-c+(h-d)*(h-d)/(b-c);h=1/b;for(var u=a.top;u<a.bottom;u++,
e+=g)for(var v=(a.left-c)/b+(u-d)/r,x=0;x<m;x++,e++){var D=Math.min(Math.max(v,0),1),H=1-D,L=k*H+p*D;this.data[e]=((l*H+n*D)*L+this.data[e]*(255-L))/255|0;v+=h}};Za.prototype.gradient=function(a,c,d,b,h,p,g){a=this.getBounds().clipTo(a);(c!=b||d!=h)&&(g||255==p[0]>>>24&&255==p[1]>>>24?c==b?this.gradientVertReplace(a,d,h,p):d==h?this.gradientHorzReplace(a,c,b,p):this.gradientReplace(a,c,d,b,h,p):this.gradientAlpha(a,c,d,b,h,p))};Za.prototype.equals=function(a){if(this.width!=a.width||this.height!=
a.height)return!1;for(let c=0;c<this.data.length;c++)if(this.data[c]!=a.data[c])return!1;return!0};let Pb=Array(256),Qb=Array(256);T.multiplyOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l;m&&(l=a.data[b],a.data[b]=l-((255^c.data[b])*l*m/65025|0),l=a.data[b+1],a.data[b+1]=l-((255^c.data[b+1])*l*m/65025|0),l=a.data[b+2],a.data[b+2]=l-((255^
c.data[b+2])*l*m/65025|0))}};T.multiplyOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k;l&&(k=a.data[b],a.data[b]=k-((255^c.data[b])*k*l/65025|0),k=a.data[b+1],a.data[b+1]=k-((255^c.data[b+1])*k*l/65025|0),k=a.data[b+2],a.data[b+2]=k-((255^c.data[b+2])*k*l/65025|0))}};T.multiplyOntoTransparentFusionWithOpaqueLayer=function(a,
c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(g*u+k*v+(g*k*r/255|0))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(g*u+k*v+(g*k*r/255|0))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(g*u+k*v+(g*k*r/255|0))/n|0;a.data[b+3]=n}}};T.multiplyOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(e*v+n*x+(e*n*u/255|0))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(e*v+n*x+(e*n*u/255|0))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(e*v+n*x+(e*n*u/255|0))/r|0;a.data[b+3]=r}}};
T.multiplyOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r;n&&(r=a.data[e],a.data[e]=r-((255^c.data[e])*r*n/65025|0),r=a.data[e+1],a.data[e+1]=r-((255^c.data[e+1])*r*n/65025|0),r=a.data[e+2],a.data[e+2]=r-((255^c.data[e+2])*r*n/65025|0))}};T.multiplyOntoOpaqueFusionWithTransparentLayerMasked=
function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u;r&&(u=a.data[m],a.data[m]=u-((255^c.data[m])*u*r/65025|0),u=a.data[m+1],a.data[m+1]=u-((255^c.data[m+1])*u*r/65025|0),u=a.data[m+2],a.data[m+2]=u-((255^c.data[m+2])*u*r/65025|0))}};T.multiplyOntoTransparentFusionWithOpaqueLayerMasked=function(a,
c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(l*D+u*H+(l*u*x/255|0))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(l*D+u*H+(l*u*x/255|0))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+
2]=(l*D+u*H+(l*u*x/255|0))/v|0;a.data[e+3]=v}}};T.multiplyOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(k*H+
v*L+(k*v*D/255|0))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(k*H+v*L+(k*v*D/255|0))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(k*H+v*L+(k*v*D/255|0))/x|0;a.data[m+3]=x}}};T.multiply2OntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l;m&&(l=a.data[b],a.data[b]=l-Math.ceil((255^c.data[b])*l*m/65025),l=a.data[b+1],a.data[b+1]=l-Math.ceil((255^
c.data[b+1])*l*m/65025),l=a.data[b+2],a.data[b+2]=l-Math.ceil((255^c.data[b+2])*l*m/65025))}};T.multiply2OntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k;l&&(k=a.data[b],a.data[b]=k-Math.ceil((255^c.data[b])*k*l/65025),k=a.data[b+1],a.data[b+1]=k-Math.ceil((255^c.data[b+1])*k*l/65025),k=a.data[b+2],a.data[b+2]=k-Math.ceil((255^
c.data[b+2])*k*l/65025))}};T.multiply2OntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(g*u+k*v+(g*k*r/255|0))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(g*u+k*v+(g*k*r/255|0))/n|0;g=c.data[b+2];k=a.data[b+
2];a.data[b+2]=(g*u+k*v+(g*k*r/255|0))/n|0;a.data[b+3]=n}}};T.multiply2OntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(e*v+n*x+(e*n*u/255|0))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=
(e*v+n*x+(e*n*u/255|0))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(e*v+n*x+(e*n*u/255|0))/r|0;a.data[b+3]=r}}};T.multiply2OntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r;n&&(r=a.data[e],a.data[e]=r-Math.ceil((255^c.data[e])*r*n/65025),r=a.data[e+1],a.data[e+
1]=r-Math.ceil((255^c.data[e+1])*r*n/65025),r=a.data[e+2],a.data[e+2]=r-Math.ceil((255^c.data[e+2])*r*n/65025))}};T.multiply2OntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u;r&&(u=a.data[m],a.data[m]=u-Math.ceil((255^c.data[m])*u*r/65025),u=a.data[m+
1],a.data[m+1]=u-Math.ceil((255^c.data[m+1])*u*r/65025),u=a.data[m+2],a.data[m+2]=u-Math.ceil((255^c.data[m+2])*u*r/65025))}};T.multiply2OntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*
(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(l*D+u*H+(l*u*x/255|0))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(l*D+u*H+(l*u*x/255|0))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(l*D+u*H+(l*u*x/255|0))/v|0;a.data[e+3]=v}}};T.multiply2OntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=
0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(k*H+v*L+(k*v*D/255|0))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(k*H+v*L+(k*v*D/255|0))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(k*H+v*L+(k*v*D/255|0))/x|0;a.data[m+3]=x}}};T.normalOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l;if(m)if(255==m)a.data[b]=c.data[b],a.data[b+1]=c.data[b+1],a.data[b+2]=c.data[b+2];else{let k=255-m;l=c.data[b];a.data[b]=(l*m+a.data[b]*k)/255|0;l=c.data[b+1];a.data[b+1]=(l*m+a.data[b+1]*k)/255|0;l=c.data[b+2];a.data[b+2]=(l*m+a.data[b+2]*k)/255|0}}};T.normalOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,
b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k;if(l){let n=255-l;k=c.data[b];a.data[b]=(k*l+a.data[b]*n)/255|0;k=c.data[b+1];a.data[b+1]=(k*l+a.data[b+1]*n)/255|0;k=c.data[b+2];a.data[b+2]=(k*l+a.data[b+2]*n)/255|0}}};T.normalOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l;if(g){let k=g+(l=a.data[b+3])-(g*l/255|0)|
0;g=255*g/k|0;let n=255-g;a.data[b]=(c.data[b]*g+a.data[b]*n)/255|0;a.data[b+1]=(c.data[b+1]*g+a.data[b+1]*n)/255|0;a.data[b+2]=(c.data[b+2]*g+a.data[b+2]*n)/255|0;a.data[b+3]=k}}};T.normalOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k;if(e){let n=e+(k=a.data[b+3])-(e*k/255|0)|0;e=255*e/n|0;let r=255-e;a.data[b]=
(c.data[b]*e+a.data[b]*r)/255|0;a.data[b+1]=(c.data[b+1]*e+a.data[b+1]*r)/255|0;a.data[b+2]=(c.data[b+2]*e+a.data[b+2]*r)/255|0;a.data[b+3]=n}}};T.normalOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r;if(n)if(255==n)a.data[e]=c.data[e],a.data[e+1]=c.data[e+
1],a.data[e+2]=c.data[e+2];else{let u=255-n;r=c.data[e];a.data[e]=(r*n+a.data[e]*u)/255|0;r=c.data[e+1];a.data[e+1]=(r*n+a.data[e+1]*u)/255|0;r=c.data[e+2];a.data[e+2]=(r*n+a.data[e+2]*u)/255|0}}};T.normalOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|
0,u;if(r){let v=255-r;u=c.data[m];a.data[m]=(u*r+a.data[m]*v)/255|0;u=c.data[m+1];a.data[m+1]=(u*r+a.data[m+1]*v)/255|0;u=c.data[m+2];a.data[m+2]=(u*r+a.data[m+2]*v)/255|0}}};T.normalOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r;if(l){let u=l+(r=
a.data[e+3])-(l*r/255|0)|0;l=255*l/u|0;let v=255-l;a.data[e]=(c.data[e]*l+a.data[e]*v)/255|0;a.data[e+1]=(c.data[e+1]*l+a.data[e+1]*v)/255|0;a.data[e+2]=(c.data[e+2]*l+a.data[e+2]*v)/255|0;a.data[e+3]=u}}};T.normalOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*
d/25500|0;let u;if(k){let v=k+(u=a.data[m+3])-(k*u/255|0)|0;k=255*k/v|0;let x=255-k;a.data[m]=(c.data[m]*k+a.data[m]*x)/255|0;a.data[m+1]=(c.data[m+1]*k+a.data[m+1]*x)/255|0;a.data[m+2]=(c.data[m+2]*k+a.data[m+2]*x)/255|0;a.data[m+3]=v}}};T.addOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3];m&&(a.data[b]=a.data[b]+m*c.data[b]/255|0,a.data[b+
1]=a.data[b+1]+m*c.data[b+1]/255|0,a.data[b+2]=a.data[b+2]+m*c.data[b+2]/255|0)}};T.addOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0;l&&(a.data[b]=a.data[b]+l*c.data[b]/255|0,a.data[b+1]=a.data[b+1]+l*c.data[b+1]/255|0,a.data[b+2]=a.data[b+2]+l*c.data[b+2]/255|0)}};T.addOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=
0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l;if(m){let k=m+(l=a.data[b+3])-(m*l/255|0)|0;a.data[b]=(l*a.data[b]+m*c.data[b])/k|0;a.data[b+1]=(l*a.data[b+1]+m*c.data[b+1])/k|0;a.data[b+2]=(l*a.data[b+2]+m*c.data[b+2])/k|0;a.data[b+3]=k}}};T.addOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k;if(l){let n=l+(k=a.data[b+3])-(l*k/255|0)|0;a.data[b]=(k*a.data[b]+l*c.data[b])/n|0;a.data[b+1]=(k*a.data[b+1]+l*c.data[b+1])/n|0;a.data[b+2]=(k*a.data[b+2]+l*c.data[b+2])/n|0;a.data[b+3]=n}}};T.addOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,
e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0;n&&(a.data[e]=a.data[e]+n*c.data[e]/255|0,a.data[e+1]=a.data[e+1]+n*c.data[e+1]/255|0,a.data[e+2]=a.data[e+2]+n*c.data[e+2]/255|0)}};T.addOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*
d/25500|0;r&&(a.data[m]=a.data[m]+r*c.data[m]/255|0,a.data[m+1]=a.data[m+1]+r*c.data[m+1]/255|0,a.data[m+2]=a.data[m+2]+r*c.data[m+2]/255|0)}};T.addOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r;if(n){let u=n+(r=a.data[e+3])-(n*r/255|0)|0;a.data[e]=(r*
a.data[e]+n*c.data[e])/u|0;a.data[e+1]=(r*a.data[e+1]+n*c.data[e+1])/u|0;a.data[e+2]=(r*a.data[e+2]+n*c.data[e+2])/u|0;a.data[e+3]=u}}};T.addOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u;if(r){let v=r+(u=a.data[m+3])-(r*u/255|0)|0;a.data[m]=
(u*a.data[m]+r*c.data[m])/v|0;a.data[m+1]=(u*a.data[m+1]+r*c.data[m+1])/v|0;a.data[m+2]=(u*a.data[m+2]+r*c.data[m+2])/v|0;a.data[m+3]=v}}};T.subtractOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3];m&&(a.data[b]=a.data[b]+m*c.data[b]/255-m|0,a.data[b+1]=a.data[b+1]+m*c.data[b+1]/255-m|0,a.data[b+2]=a.data[b+2]+m*c.data[b+2]/255-m|0)}};T.subtractOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0;l&&(a.data[b]=a.data[b]+l*c.data[b]/255-l|0,a.data[b+1]=a.data[b+1]+l*c.data[b+1]/255-l|0,a.data[b+2]=a.data[b+2]+l*c.data[b+2]/255-l|0)}};T.subtractOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,
b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l;if(m){let k=m+(l=a.data[b+3])-(m*l/255|0)|0,n=m*l;a.data[b]=(l*a.data[b]+m*c.data[b]-n)/k|0;a.data[b+1]=(l*a.data[b+1]+m*c.data[b+1]-n)/k|0;a.data[b+2]=(l*a.data[b+2]+m*c.data[b+2]-n)/k|0;a.data[b+3]=k}}};T.subtractOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k;if(l){let n=
l+(k=a.data[b+3])-(l*k/255|0)|0,r=l*k;a.data[b]=(k*a.data[b]+l*c.data[b]-r)/n|0;a.data[b+1]=(k*a.data[b+1]+l*c.data[b+1]-r)/n|0;a.data[b+2]=(k*a.data[b+2]+l*c.data[b+2]-r)/n|0;a.data[b+3]=n}}};T.subtractOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0;n&&(a.data[e]=
a.data[e]+n*c.data[e]/255-n|0,a.data[e+1]=a.data[e+1]+n*c.data[e+1]/255-n|0,a.data[e+2]=a.data[e+2]+n*c.data[e+2]/255-n|0)}};T.subtractOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0;r&&(a.data[m]=a.data[m]+r*c.data[m]/255-r|0,a.data[m+1]=a.data[m+1]+
r*c.data[m+1]/255-r|0,a.data[m+2]=a.data[m+2]+r*c.data[m+2]/255-r|0)}};T.subtractOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r;if(n){let u=n+(r=a.data[e+3])-(n*r/255|0)|0,v=n*r;a.data[e]=(r*a.data[e]+n*c.data[e]-v)/u|0;a.data[e+1]=(r*a.data[e+1]+n*c.data[e+
1]-v)/u|0;a.data[e+2]=(r*a.data[e+2]+n*c.data[e+2]-v)/u|0;a.data[e+3]=u}}};T.subtractOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u;if(r){let v=r+(u=a.data[m+3])-(r*u/255|0)|0,x=r*u;a.data[m]=(u*a.data[m]+r*c.data[m]-x)/v|0;a.data[m+1]=(u*a.data[m+
1]+r*c.data[m+1]-x)/v|0;a.data[m+2]=(u*a.data[m+2]+r*c.data[m+2]-x)/v|0;a.data[m+3]=v}}};T.screenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l;if(m){let k=255^m;l=a.data[b];a.data[b]=255^((255^l)*k+(255^c.data[b])*(255^l)*m/255)/255;l=a.data[b+1];a.data[b+1]=255^((255^l)*k+(255^c.data[b+1])*(255^l)*m/255)/255;l=a.data[b+2];a.data[b+2]=
255^((255^l)*k+(255^c.data[b+2])*(255^l)*m/255)/255}}};T.screenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k;if(l){let n=255^l;k=a.data[b];a.data[b]=255^((255^k)*n+(255^c.data[b])*(255^k)*l/255)/255;k=a.data[b+1];a.data[b+1]=255^((255^k)*n+(255^c.data[b+1])*(255^k)*l/255)/255;k=a.data[b+2];a.data[b+2]=255^((255^k)*n+(255^
c.data[b+2])*(255^k)*l/255)/255}}};T.screenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=255^((255^g)*u+(255^k)*v+(255^g)*(255^k)*r/255)/n;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=255^((255^g)*u+(255^
k)*v+(255^g)*(255^k)*r/255)/n;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=255^((255^g)*u+(255^k)*v+(255^g)*(255^k)*r/255)/n;a.data[b+3]=n}}};T.screenOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=
255^((255^e)*v+(255^n)*x+(255^e)*(255^n)*u/255)/r;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=255^((255^e)*v+(255^n)*x+(255^e)*(255^n)*u/255)/r;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=255^((255^e)*v+(255^n)*x+(255^e)*(255^n)*u/255)/r;a.data[b+3]=r}}};T.screenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,
e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r;if(n){let u=255^n;r=a.data[e];a.data[e]=255^((255^r)*u+(255^c.data[e])*(255^r)*n/255)/255;r=a.data[e+1];a.data[e+1]=255^((255^r)*u+(255^c.data[e+1])*(255^r)*n/255)/255;r=a.data[e+2];a.data[e+2]=255^((255^r)*u+(255^c.data[e+2])*(255^r)*n/255)/255}}};T.screenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);
for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u;if(r){let v=255^r;u=a.data[m];a.data[m]=255^((255^u)*v+(255^c.data[m])*(255^u)*r/255)/255;u=a.data[m+1];a.data[m+1]=255^((255^u)*v+(255^c.data[m+1])*(255^u)*r/255)/255;u=a.data[m+2];a.data[m+2]=255^((255^u)*v+(255^c.data[m+2])*(255^u)*r/255)/255}}};T.screenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,
b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=255^((255^l)*D+(255^u)*H+(255^l)*(255^u)*x/255)/v;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=255^((255^l)*D+(255^u)*H+(255^l)*(255^u)*x/255)/v;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=255^((255^l)*D+(255^u)*H+(255^l)*(255^
u)*x/255)/v;a.data[e+3]=v}}};T.screenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=255^((255^k)*H+(255^v)*L+
(255^k)*(255^v)*D/255)/x;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=255^((255^k)*H+(255^v)*L+(255^k)*(255^v)*D/255)/x;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=255^((255^k)*H+(255^v)*L+(255^k)*(255^v)*D/255)/x;a.data[m+3]=x}}};T.lightenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=k>=l?
k:(k*n+l*m)/255|0;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=k>=l?k:(k*n+l*m)/255|0;l=c.data[b+2];k=a.data[b+2];a.data[b+2]=k>=l?k:(k*n+l*m)/255|0}}};T.lightenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];a.data[b]=n>=k?n:(n*r+k*l)/255|0;k=c.data[b+1];n=a.data[b+1];a.data[b+1]=n>=
k?n:(n*r+k*l)/255|0;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=n>=k?n:(n*r+k*l)/255|0}}};T.lightenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=l*(255^g)/n|0,u=255^r,v=g*(255^l)/n|0,x=255^v;g=c.data[b];k=a.data[b];a.data[b]=(k>=g?g*v+k*x:k*r+g*u)/255|0;g=c.data[b+1];k=a.data[b+1];
a.data[b+1]=(k>=g?g*v+k*x:k*r+g*u)/255|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(k>=g?g*v+k*x:k*r+g*u)/255|0;a.data[b+3]=n}}};T.lightenOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=k*(255^e)/r|0,v=255^u,x=e*(255^k)/r|0,D=255^x;e=c.data[b];n=a.data[b];a.data[b]=(n>=
e?e*x+n*D:n*u+e*v)/255|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n>=e?e*x+n*D:n*u+e*v)/255|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n>=e?e*x+n*D:n*u+e*v)/255|0;a.data[b+3]=r}}};T.lightenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r,u;if(n){let v=255^n;
r=c.data[e];u=a.data[e];a.data[e]=u>=r?u:(u*v+r*n)/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=u>=r?u:(u*v+r*n)/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=u>=r?u:(u*v+r*n)/255|0}}};T.lightenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=
255^r;u=c.data[m];v=a.data[m];a.data[m]=v>=u?v:(v*x+u*r)/255|0;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=v>=u?v:(v*x+u*r)/255|0;u=c.data[m+2];v=a.data[m+2];a.data[m+2]=v>=u?v:(v*x+u*r)/255|0}}};T.lightenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,
u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=r*(255^l)/v|0,D=255^x,H=l*(255^r)/v|0,L=255^H;l=c.data[e];u=a.data[e];a.data[e]=(u>=l?l*H+u*L:u*x+l*D)/255|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(u>=l?l*H+u*L:u*x+l*D)/255|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(u>=l?l*H+u*L:u*x+l*D)/255|0;a.data[e+3]=v}}};T.lightenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,
b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=u*(255^k)/x|0,H=255^D,L=k*(255^u)/x|0,J=255^L;k=c.data[m];v=a.data[m];a.data[m]=(v>=k?k*L+v*J:v*D+k*H)/255|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(v>=k?k*L+v*J:v*D+k*H)/255|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(v>=k?k*L+v*J:v*D+k*H)/255|0;a.data[m+3]=x}}};T.darkenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=
0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=k>=l?(k*n+l*m)/255|0:k;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=k>=l?(k*n+l*m)/255|0:k;l=c.data[b+2];k=a.data[b+2];a.data[b+2]=k>=l?(k*n+l*m)/255|0:k}}};T.darkenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=
0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];a.data[b]=n>=k?(n*r+k*l)/255|0:n;k=c.data[b+1];n=a.data[b+1];a.data[b+1]=n>=k?(n*r+k*l)/255|0:n;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=n>=k?(n*r+k*l)/255|0:n}}};T.darkenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,
k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*(255^l)/n|0,u=255^r,v=l*(255^g)/n|0,x=255^v;g=c.data[b];k=a.data[b];a.data[b]=(k>=g?k*v+g*x:g*r+k*u)/255|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(k>=g?k*v+g*x:g*r+k*u)/255|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(k>=g?k*v+g*x:g*r+k*u)/255|0;a.data[b+3]=n}}};T.darkenOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=
0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*(255^k)/r|0,v=255^u,x=k*(255^e)/r|0,D=255^x;e=c.data[b];n=a.data[b];a.data[b]=(n>=e?n*x+e*D:e*u+n*v)/255|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n>=e?n*x+e*D:e*u+n*v)/255|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n>=e?n*x+e*D:e*u+n*v)/255|0;a.data[b+3]=r}}};T.darkenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,
b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=u>=r?(u*v+r*n)/255|0:u;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=u>=r?(u*v+r*n)/255|0:u;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=u>=r?(u*v+r*n)/255|0:u}}};T.darkenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,
b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[m];v=a.data[m];a.data[m]=v>=u?(v*x+u*r)/255|0:v;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=v>=u?(v*x+u*r)/255|0:v;u=c.data[m+2];v=a.data[m+2];a.data[m+2]=v>=u?(v*x+u*r)/255|0:v}}};T.darkenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,
b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*(255^r)/v|0,D=255^x,H=r*(255^l)/v|0,L=255^H;l=c.data[e];u=a.data[e];a.data[e]=(u>=l?u*H+l*L:l*x+u*D)/255|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(u>=l?u*H+l*L:l*x+u*D)/255|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(u>=l?u*H+l*L:l*x+u*D)/255|0;a.data[e+3]=v}}};T.darkenOntoTransparentFusionWithTransparentLayerMasked=
function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*(255^u)/x|0,H=255^D,L=u*(255^k)/x|0,J=255^L;k=c.data[m];v=a.data[m];a.data[m]=(v>=k?v*L+k*J:k*D+v*H)/255|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(v>=k?v*L+k*J:k*D+v*H)/255|0;k=c.data[m+2];
v=a.data[m+2];a.data[m+2]=(v>=k?v*L+k*J:k*D+v*H)/255|0;a.data[m+3]=x}}};T.dodgeOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=(k*n+m*(255==l?255:Math.min(255,255*k/(255^l)|0)))/255|0;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=(k*n+m*(255==l?255:Math.min(255,255*k/(255^l)|0)))/255|0;l=
c.data[b+2];k=a.data[b+2];a.data[b+2]=(k*n+m*(255==l?255:Math.min(255,255*k/(255^l)|0)))/255|0}}};T.dodgeOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];a.data[b]=(n*r+l*(255==k?255:Math.min(255,255*n/(255^k)|0)))/255|0;k=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n*r+l*(255==k?255:Math.min(255,
255*n/(255^k)|0)))/255|0;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n*r+l*(255==k?255:Math.min(255,255*n/(255^k)|0)))/255|0}}};T.dodgeOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(g*u+k*v+r*(255==g?255:
Math.min(255,255*k/(255^g)|0)))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(g*u+k*v+r*(255==g?255:Math.min(255,255*k/(255^g)|0)))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(g*u+k*v+r*(255==g?255:Math.min(255,255*k/(255^g)|0)))/n|0;a.data[b+3]=n}}};T.dodgeOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=
e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(e*v+n*x+u*(255==e?255:Math.min(255,255*n/(255^e)|0)))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(e*v+n*x+u*(255==e?255:Math.min(255,255*n/(255^e)|0)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(e*v+n*x+u*(255==e?255:Math.min(255,255*n/(255^e)|0)))/r|0;a.data[b+3]=r}}};T.dodgeOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-
p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(u*v+n*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(u*v+n*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(u*v+n*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0}}};T.dodgeOntoOpaqueFusionWithTransparentLayerMasked=
function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[m];v=a.data[m];a.data[m]=(v*x+r*(255==u?255:Math.min(255,255*v/(255^u)|0)))/255|0;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=(v*x+r*(255==u?255:Math.min(255,255*v/(255^u)|0)))/255|0;u=c.data[m+2];v=a.data[m+2];a.data[m+
2]=(v*x+r*(255==u?255:Math.min(255,255*v/(255^u)|0)))/255|0}}};T.dodgeOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(l*
D+u*H+x*(255==l?255:Math.min(255,255*u/(255^l)|0)))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(l*D+u*H+x*(255==l?255:Math.min(255,255*u/(255^l)|0)))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(l*D+u*H+x*(255==l?255:Math.min(255,255*u/(255^l)|0)))/v|0;a.data[e+3]=v}}};T.dodgeOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,
m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(k*H+v*L+D*(255==k?255:Math.min(255,255*v/(255^k)|0)))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(k*H+v*L+D*(255==k?255:Math.min(255,255*v/(255^k)|0)))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(k*H+v*L+D*(255==k?255:Math.min(255,255*v/(255^k)|0)))/x|0;a.data[m+3]=x}}};T.burnOntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=(k*n+m*(0==l?0:255^Math.min(255,255*(255^k)/l)))/255|0;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=(k*n+m*(0==l?0:255^Math.min(255,255*(255^k)/l)))/255|0;l=c.data[b+2];k=a.data[b+2];a.data[b+2]=(k*n+m*(0==l?0:255^Math.min(255,255*(255^k)/l)))/255|0}}};T.burnOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];a.data[b]=(n*r+l*(0==k?0:255^Math.min(255,255*(255^n)/k)))/255|0;k=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n*r+l*(0==k?0:255^Math.min(255,255*(255^n)/k)))/255|0;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n*r+l*(0==k?0:255^Math.min(255,255*(255^n)/k)))/255|0}}};T.burnOntoTransparentFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(g*u+k*v+r*(0==g?0:255^Math.min(255,255*(255^k)/g)))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(g*u+k*v+r*(0==g?0:255^Math.min(255,255*(255^k)/g)))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+
2]=(g*u+k*v+r*(0==g?0:255^Math.min(255,255*(255^k)/g)))/n|0;a.data[b+3]=n}}};T.burnOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(e*v+n*x+u*(0==e?0:255^Math.min(255,255*(255^n)/e)))/r|0;
e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(e*v+n*x+u*(0==e?0:255^Math.min(255,255*(255^n)/e)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(e*v+n*x+u*(0==e?0:255^Math.min(255,255*(255^n)/e)))/r|0;a.data[b+3]=r}}};T.burnOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/
255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(u*v+n*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(u*v+n*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(u*v+n*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0}}};T.burnOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,
b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[m];v=a.data[m];a.data[m]=(v*x+r*(0==u?0:255^Math.min(255,255*(255^v)/u)))/255|0;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=(v*x+r*(0==u?0:255^Math.min(255,255*(255^v)/u)))/255|0;u=c.data[m+2];v=a.data[m+2];a.data[m+2]=(v*x+r*(0==u?0:255^Math.min(255,255*(255^v)/u)))/255|0}}};T.burnOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=
0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(l*D+u*H+x*(0==l?0:255^Math.min(255,255*(255^u)/l)))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(l*D+u*H+x*(0==l?0:255^Math.min(255,255*(255^u)/l)))/v|0;l=c.data[e+
2];u=a.data[e+2];a.data[e+2]=(l*D+u*H+x*(0==l?0:255^Math.min(255,255*(255^u)/l)))/v|0;a.data[e+3]=v}}};T.burnOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^
k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(k*H+v*L+D*(0==k?0:255^Math.min(255,255*(255^v)/k)))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(k*H+v*L+D*(0==k?0:255^Math.min(255,255*(255^v)/k)))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(k*H+v*L+D*(0==k?0:255^Math.min(255,255*(255^v)/k)))/x|0;a.data[m+3]=x}}};T.overlayOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<
h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=(n*k+(127>=k?2*m*l*k/255:m*(2*(255^l)*(255^k)/255^255)))/255|0;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=(n*k+(127>=k?2*m*l*k/255:m*(2*(255^l)*(255^k)/255^255)))/255|0;l=c.data[b+2];k=a.data[b+2];a.data[b+2]=(n*k+(127>=k?2*m*l*k/255:m*(2*(255^l)*(255^k)/255^255)))/255|0}}};T.overlayOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];a.data[b]=(r*n+(127>=n?2*l*k*n/255:l*(2*(255^k)*(255^n)/255^255)))/255|0;k=c.data[b+1];n=a.data[b+1];a.data[b+1]=(r*n+(127>=n?2*l*k*n/255:l*(2*(255^k)*(255^n)/255^255)))/255|0;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+(127>=n?2*l*k*n/255:l*(2*(255^k)*(255^n)/255^255)))/255|0}}};T.overlayOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|
b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(u*g+v*k+(127>=k?2*r*g*k/255:r*(2*(255^g)*(255^k)/255^255)))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(u*g+v*k+(127>=k?2*r*g*k/255:r*(2*(255^g)*(255^k)/255^255)))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(u*g+v*k+(127>=k?2*r*g*
k/255:r*(2*(255^g)*(255^k)/255^255)))/n|0;a.data[b+3]=n}}};T.overlayOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+(127>=n?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;e=c.data[b+
1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+(127>=n?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+(127>=n?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;a.data[b+3]=r}}};T.overlayOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/
255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+(127>=u?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+(127>=u?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+(127>=u?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0}}};T.overlayOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-
g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[m];v=a.data[m];a.data[m]=(x*v+(127>=v?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=(x*v+(127>=v?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0;u=c.data[m+2];v=a.data[m+2];a.data[m+2]=(x*v+(127>=v?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0}}};T.overlayOntoTransparentFusionWithOpaqueLayerMasked=
function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(D*l+H*u+(127>=u?2*x*l*u/255:x*(2*(255^l)*(255^u)/255^255)))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(D*l+H*u+
(127>=u?2*x*l*u/255:x*(2*(255^l)*(255^u)/255^255)))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(D*l+H*u+(127>=u?2*x*l*u/255:x*(2*(255^l)*(255^u)/255^255)))/v|0;a.data[e+3]=v}}};T.overlayOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=
k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(H*k+L*v+(127>=v?2*D*k*v/255:D*(2*(255^k)*(255^v)/255^255)))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(H*k+L*v+(127>=v?2*D*k*v/255:D*(2*(255^k)*(255^v)/255^255)))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(H*k+L*v+(127>=v?2*D*k*v/255:D*(2*(255^k)*(255^v)/255^255)))/x|0;a.data[m+3]=x}}};T.hardLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),
p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=(n*k+(127>=l?2*m*l*k/255:m*(2*(255^l)*(255^k)/255^255)))/255|0;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=(n*k+(127>=l?2*m*l*k/255:m*(2*(255^l)*(255^k)/255^255)))/255|0;l=c.data[b+2];k=a.data[b+2];a.data[b+2]=(n*k+(127>=l?2*m*l*k/255:m*(2*(255^l)*(255^k)/255^255)))/255|0}}};T.hardLightOntoOpaqueFusionWithTransparentLayer=function(a,
c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];a.data[b]=(r*n+(127>=k?2*l*k*n/255:l*(2*(255^k)*(255^n)/255^255)))/255|0;k=c.data[b+1];n=a.data[b+1];a.data[b+1]=(r*n+(127>=k?2*l*k*n/255:l*(2*(255^k)*(255^n)/255^255)))/255|0;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+(127>=k?2*l*k*n/255:l*(2*(255^k)*(255^n)/255^255)))/255|0}}};
T.hardLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(u*g+v*k+(127>=g?2*r*g*k/255:r*(2*(255^g)*(255^k)/255^255)))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(u*g+v*k+(127>=g?2*r*g*k/255:r*(2*(255^
g)*(255^k)/255^255)))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(u*g+v*k+(127>=g?2*r*g*k/255:r*(2*(255^g)*(255^k)/255^255)))/n|0;a.data[b+3]=n}}};T.hardLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=
a.data[b];a.data[b]=(v*e+x*n+(127>=e?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+(127>=e?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+(127>=e?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;a.data[b+3]=r}}};T.hardLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,
b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+(127>=r?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+(127>=r?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+(127>=r?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0}}};T.hardLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=
0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[m];v=a.data[m];a.data[m]=(x*v+(127>=u?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=(x*v+(127>=u?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0;u=c.data[m+2];v=a.data[m+2];a.data[m+2]=(x*v+(127>=
u?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0}}};T.hardLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(D*l+
H*u+(127>=l?2*x*l*u/255:x*(2*(255^l)*(255^u)/255^255)))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(D*l+H*u+(127>=l?2*x*l*u/255:x*(2*(255^l)*(255^u)/255^255)))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(D*l+H*u+(127>=l?2*x*l*u/255:x*(2*(255^l)*(255^u)/255^255)))/v|0;a.data[e+3]=v}}};T.hardLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);
for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(H*k+L*v+(127>=k?2*D*k*v/255:D*(2*(255^k)*(255^v)/255^255)))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(H*k+L*v+(127>=k?2*D*k*v/255:D*(2*(255^k)*(255^v)/255^255)))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(H*k+L*v+(127>=k?2*D*k*v/255:D*(2*(255^k)*(255^v)/255^255)))/
x|0;a.data[m+3]=x}}};T.softLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=(n*k+m*(127>=l?((2*l-255)*Pb[k]/255|0)+k:((2*l-255)*Qb[k]/255|0)+k))/255|0;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=(n*k+m*(127>=l?((2*l-255)*Pb[k]/255|0)+k:((2*l-255)*Qb[k]/255|0)+k))/255|0;l=c.data[b+2];
k=a.data[b+2];a.data[b+2]=(n*k+m*(127>=l?((2*l-255)*Pb[k]/255|0)+k:((2*l-255)*Qb[k]/255|0)+k))/255|0}}};T.softLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];a.data[b]=(r*n+l*(127>=k?((2*k-255)*Pb[n]/255|0)+n:((2*k-255)*Qb[n]/255|0)+n))/255|0;k=c.data[b+1];n=a.data[b+1];a.data[b+
1]=(r*n+l*(127>=k?((2*k-255)*Pb[n]/255|0)+n:((2*k-255)*Qb[n]/255|0)+n))/255|0;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+l*(127>=k?((2*k-255)*Pb[n]/255|0)+n:((2*k-255)*Qb[n]/255|0)+n))/255|0}}};T.softLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|
0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(u*g+v*k+(127>=g?r*(((2*g-255)*Pb[k]/255|0)+k):r*(((2*g-255)*Qb[k]/255|0)+k)))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(u*g+v*k+(127>=g?r*(((2*g-255)*Pb[k]/255|0)+k):r*(((2*g-255)*Qb[k]/255|0)+k)))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(u*g+v*k+(127>=g?r*(((2*g-255)*Pb[k]/255|0)+k):r*(((2*g-255)*Qb[k]/255|0)+k)))/n|0;a.data[b+3]=n}}};T.softLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),
g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+(127>=e?u*(((2*e-255)*Pb[n]/255|0)+n):u*(((2*e-255)*Qb[n]/255|0)+n)))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+(127>=e?u*(((2*e-255)*Pb[n]/255|0)+n):u*(((2*e-255)*Qb[n]/255|0)+n)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+
2]=(v*e+x*n+(127>=e?u*(((2*e-255)*Pb[n]/255|0)+n):u*(((2*e-255)*Qb[n]/255|0)+n)))/r|0;a.data[b+3]=r}}};T.softLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+n*(127>=r?((2*r-255)*Pb[u]/255|0)+u:
((2*r-255)*Qb[u]/255|0)+u))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+n*(127>=r?((2*r-255)*Pb[u]/255|0)+u:((2*r-255)*Qb[u]/255|0)+u))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+n*(127>=r?((2*r-255)*Pb[u]/255|0)+u:((2*r-255)*Qb[u]/255|0)+u))/255|0}}};T.softLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=
e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[m];v=a.data[m];a.data[m]=(x*v+r*(127>=u?((2*u-255)*Pb[v]/255|0)+v:((2*u-255)*Qb[v]/255|0)+v))/255|0;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=(x*v+r*(127>=u?((2*u-255)*Pb[v]/255|0)+v:((2*u-255)*Qb[v]/255|0)+v))/255|0;u=c.data[m+2];v=a.data[m+2];a.data[m+2]=(x*v+r*(127>=u?((2*u-255)*Pb[v]/255|0)+v:((2*u-255)*Qb[v]/255|0)+v))/255|0}}};T.softLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,
c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(D*l+H*u+(127>=l?x*(((2*l-255)*Pb[u]/255|0)+u):x*(((2*l-255)*Qb[u]/255|0)+u)))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(D*
l+H*u+(127>=l?x*(((2*l-255)*Pb[u]/255|0)+u):x*(((2*l-255)*Qb[u]/255|0)+u)))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(D*l+H*u+(127>=l?x*(((2*l-255)*Pb[u]/255|0)+u):x*(((2*l-255)*Qb[u]/255|0)+u)))/v|0;a.data[e+3]=v}}};T.softLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=
c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(H*k+L*v+(127>=k?D*(((2*k-255)*Pb[v]/255|0)+v):D*(((2*k-255)*Qb[v]/255|0)+v)))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(H*k+L*v+(127>=k?D*(((2*k-255)*Pb[v]/255|0)+v):D*(((2*k-255)*Qb[v]/255|0)+v)))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(H*k+L*v+(127>=k?D*(((2*k-255)*Pb[v]/255|0)+v):D*(((2*k-255)*Qb[v]/255|0)+v)))/x|0;a.data[m+
3]=x}}};T.vividLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=(n*k+(127>=l?m*(0==l?0:255-Math.min(255,255*(255-k)/(2*l)|0)):m*(255==l?255:Math.min(255,255*k/(2*(255-l))|0))))/255|0;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=(n*k+(127>=l?m*(0==l?0:255-Math.min(255,255*(255-k)/(2*l)|
0)):m*(255==l?255:Math.min(255,255*k/(2*(255-l))|0))))/255|0;l=c.data[b+2];k=a.data[b+2];a.data[b+2]=(n*k+(127>=l?m*(0==l?0:255-Math.min(255,255*(255-k)/(2*l)|0)):m*(255==l?255:Math.min(255,255*k/(2*(255-l))|0))))/255|0}}};T.vividLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];
a.data[b]=(r*n+(127>=k?l*(0==k?0:255-Math.min(255,255*(255-n)/(2*k)|0)):l*(255==k?255:Math.min(255,255*n/(2*(255-k))|0))))/255|0;k=c.data[b+1];n=a.data[b+1];a.data[b+1]=(r*n+(127>=k?l*(0==k?0:255-Math.min(255,255*(255-n)/(2*k)|0)):l*(255==k?255:Math.min(255,255*n/(2*(255-k))|0))))/255|0;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+(127>=k?l*(0==k?0:255-Math.min(255,255*(255-n)/(2*k)|0)):l*(255==k?255:Math.min(255,255*n/(2*(255-k))|0))))/255|0}}};T.vividLightOntoTransparentFusionWithOpaqueLayer=function(a,
c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(u*g+v*k+(127>=g?r*(0==g?0:255-Math.min(255,255*(255-k)/(2*g)|0)):r*(255==g?255:Math.min(255,255*k/(2*(255-g))|0))))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(u*g+v*k+(127>=g?r*(0==g?0:255-Math.min(255,
255*(255-k)/(2*g)|0)):r*(255==g?255:Math.min(255,255*k/(2*(255-g))|0))))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(u*g+v*k+(127>=g?r*(0==g?0:255-Math.min(255,255*(255-k)/(2*g)|0)):r*(255==g?255:Math.min(255,255*k/(2*(255-g))|0))))/n|0;a.data[b+3]=n}}};T.vividLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,
n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+(127>=e?u*(0==e?0:255-Math.min(255,255*(255-n)/(2*e)|0)):u*(255==e?255:Math.min(255,255*n/(2*(255-e))|0))))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+(127>=e?u*(0==e?0:255-Math.min(255,255*(255-n)/(2*e)|0)):u*(255==e?255:Math.min(255,255*n/(2*(255-e))|0))))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+(127>=e?u*(0==e?0:255-Math.min(255,255*(255-
n)/(2*e)|0)):u*(255==e?255:Math.min(255,255*n/(2*(255-e))|0))))/r|0;a.data[b+3]=r}}};T.vividLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+(127>=r?n*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|
0)):n*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+(127>=r?n*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|0)):n*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+(127>=r?n*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|0)):n*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0}}};T.vividLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-
g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[m];v=a.data[m];a.data[m]=(x*v+(127>=u?r*(0==u?0:255-Math.min(255,255*(255-v)/(2*u)|0)):r*(255==u?255:Math.min(255,255*v/(2*(255-u))|0))))/255|0;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=(x*v+(127>=u?r*(0==u?0:255-Math.min(255,255*(255-v)/(2*u)|0)):r*(255==u?255:Math.min(255,255*v/(2*(255-
u))|0))))/255|0;u=c.data[m+2];v=a.data[m+2];a.data[m+2]=(x*v+(127>=u?r*(0==u?0:255-Math.min(255,255*(255-v)/(2*u)|0)):r*(255==u?255:Math.min(255,255*v/(2*(255-u))|0))))/255|0}}};T.vividLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=
l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(D*l+H*u+(127>=l?x*(0==l?0:255-Math.min(255,255*(255-u)/(2*l)|0)):x*(255==l?255:Math.min(255,255*u/(2*(255-l))|0))))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(D*l+H*u+(127>=l?x*(0==l?0:255-Math.min(255,255*(255-u)/(2*l)|0)):x*(255==l?255:Math.min(255,255*u/(2*(255-l))|0))))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(D*l+H*u+(127>=l?x*(0==l?0:255-Math.min(255,255*(255-u)/(2*l)|0)):
x*(255==l?255:Math.min(255,255*u/(2*(255-l))|0))))/v|0;a.data[e+3]=v}}};T.vividLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];
v=a.data[m];a.data[m]=(H*k+L*v+(127>=k?D*(0==k?0:255-Math.min(255,255*(255-v)/(2*k)|0)):D*(255==k?255:Math.min(255,255*v/(2*(255-k))|0))))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(H*k+L*v+(127>=k?D*(0==k?0:255-Math.min(255,255*(255-v)/(2*k)|0)):D*(255==k?255:Math.min(255,255*v/(2*(255-k))|0))))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(H*k+L*v+(127>=k?D*(0==k?0:255-Math.min(255,255*(255-v)/(2*k)|0)):D*(255==k?255:Math.min(255,255*v/(2*(255-k))|0))))/x|0;a.data[m+3]=x}}};T.linearLightOntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l;if(m){let k=255^m;l=a.data[b];a.data[b]=(k*l+m*Math.min(255,Math.max(0,l+2*c.data[b]-255)))/255|0;l=a.data[b+1];a.data[b+1]=(k*l+m*Math.min(255,Math.max(0,l+2*c.data[b+1]-255)))/255|0;l=a.data[b+2];a.data[b+2]=(k*l+m*Math.min(255,Math.max(0,l+2*c.data[b+2]-255)))/255|0}}};T.linearLightOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k;if(l){let n=255^l;k=a.data[b];a.data[b]=(n*k+l*Math.min(255,Math.max(0,k+2*c.data[b]-255)))/255|0;k=a.data[b+1];a.data[b+1]=(n*k+l*Math.min(255,Math.max(0,k+2*c.data[b+1]-255)))/255|0;k=a.data[b+2];a.data[b+2]=(n*k+l*Math.min(255,Math.max(0,k+2*c.data[b+2]-255)))/255|0}}};T.linearLightOntoTransparentFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(u*g+v*k+r*Math.min(255,Math.max(0,k+2*g-255)))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(u*g+v*k+r*Math.min(255,Math.max(0,k+2*g-255)))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(u*g+
v*k+r*Math.min(255,Math.max(0,k+2*g-255)))/n|0;a.data[b+3]=n}}};T.linearLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+u*Math.min(255,Math.max(0,n+2*e-255)))/r|0;e=c.data[b+
1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+u*Math.min(255,Math.max(0,n+2*e-255)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+u*Math.min(255,Math.max(0,n+2*e-255)))/r|0;a.data[b+3]=r}}};T.linearLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r;if(n){let u=
255^n;r=a.data[e];a.data[e]=(u*r+n*Math.min(255,Math.max(0,r+2*c.data[e]-255)))/255|0;r=a.data[e+1];a.data[e+1]=(u*r+n*Math.min(255,Math.max(0,r+2*c.data[e+1]-255)))/255|0;r=a.data[e+2];a.data[e+2]=(u*r+n*Math.min(255,Math.max(0,r+2*c.data[e+2]-255)))/255|0}}};T.linearLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,
b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u;if(r){let v=255^r;u=a.data[m];a.data[m]=(v*u+r*Math.min(255,Math.max(0,u+2*c.data[m]-255)))/255|0;u=a.data[m+1];a.data[m+1]=(v*u+r*Math.min(255,Math.max(0,u+2*c.data[m+1]-255)))/255|0;u=a.data[m+2];a.data[m+2]=(v*u+r*Math.min(255,Math.max(0,u+2*c.data[m+2]-255)))/255|0}}};T.linearLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,
b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(D*l+H*u+x*Math.min(255,Math.max(0,u+2*l-255)))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(D*l+H*u+x*Math.min(255,Math.max(0,u+2*l-255)))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(D*l+H*u+x*Math.min(255,Math.max(0,
u+2*l-255)))/v|0;a.data[e+3]=v}}};T.linearLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(H*k+L*v+D*Math.min(255,
Math.max(0,v+2*k-255)))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(H*k+L*v+D*Math.min(255,Math.max(0,v+2*k-255)))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(H*k+L*v+D*Math.min(255,Math.max(0,v+2*k-255)))/x|0;a.data[m+3]=x}}};T.pinLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;if(m){let n=255^m;l=c.data[b];k=a.data[b];a.data[b]=
(n*k+m*(k>=2*l?2*l:k<=2*l-255?2*l-255:k))/255|0;l=c.data[b+1];k=a.data[b+1];a.data[b+1]=(n*k+m*(k>=2*l?2*l:k<=2*l-255?2*l-255:k))/255|0;l=c.data[b+2];k=a.data[b+2];a.data[b+2]=(n*k+m*(k>=2*l?2*l:k<=2*l-255?2*l-255:k))/255|0}}};T.pinLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;if(l){let r=255^l;k=c.data[b];n=a.data[b];
a.data[b]=(r*n+l*(n>=2*k?2*k:n<=2*k-255?2*k-255:n))/255|0;k=c.data[b+1];n=a.data[b+1];a.data[b+1]=(r*n+l*(n>=2*k?2*k:n<=2*k-255?2*k-255:n))/255|0;k=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+l*(n>=2*k?2*k:n<=2*k-255?2*k-255:n))/255|0}}};T.pinLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let m=0;m<h;m++,b+=4){var g=c.data[b+3];let l,k;if(g){let n=g+(l=a.data[b+3])-(g*
l/255|0)|0,r=g*l/255|0,u=g*(255^l)/255|0,v=(255^g)*l/255|0;g=c.data[b];k=a.data[b];a.data[b]=(u*g+v*k+r*(k>=2*g?2*g:k<=2*g-255?2*g-255:k))/n|0;g=c.data[b+1];k=a.data[b+1];a.data[b+1]=(u*g+v*k+r*(k>=2*g?2*g:k<=2*g-255?2*g-255:k))/n|0;g=c.data[b+2];k=a.data[b+2];a.data[b+2]=(u*g+v*k+r*(k>=2*g?2*g:k<=2*g-255?2*g-255:k))/n|0;a.data[b+3]=n}}};T.pinLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);
for(let m=0;m<h;m++,b+=g)for(let l=0;l<p;l++,b+=4){var e=c.data[b+3]*d/100|0;let k,n;if(e){let r=e+(k=a.data[b+3])-(e*k/255|0)|0,u=e*k/255|0,v=e*(255^k)/255|0,x=(255^e)*k/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+u*(n>=2*e?2*e:n<=2*e-255?2*e-255:n))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+u*(n>=2*e?2*e:n<=2*e-255?2*e-255:n))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+u*(n>=2*e?2*e:n<=2*e-255?2*e-255:n))/r|0;a.data[b+3]=r}}};T.pinLightOntoOpaqueFusionWithOpaqueLayerMasked=
function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+n*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+n*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+n*(u>=2*r?2*
r:u<=2*r-255?2*r-255:u))/255|0}}};T.pinLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3]*h.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[m];v=a.data[m];a.data[m]=(x*v+r*(v>=2*u?2*u:v<=2*u-255?2*u-255:v))/255|0;u=c.data[m+1];v=a.data[m+1];a.data[m+1]=(x*v+r*(v>=2*
u?2*u:v<=2*u-255?2*u-255:v))/255|0;u=c.data[m+2];v=a.data[m+2];a.data[m+2]=(x*v+r*(v>=2*u?2*u:v<=2*u-255?2*u-255:v))/255|0}}};T.pinLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,e+=g,b+=m)for(let n=0;n<p;n++,e+=4,b++){var l=c.data[e+3]*h.data[b]/255|0;let r,u;if(l){let v=l+(r=a.data[e+3])-(l*r/255|0)|0,x=l*r/255|0,D=l*(255^
r)/255|0,H=(255^l)*r/255|0;l=c.data[e];u=a.data[e];a.data[e]=(D*l+H*u+x*(u>=2*l?2*l:u<=2*l-255?2*l-255:u))/v|0;l=c.data[e+1];u=a.data[e+1];a.data[e+1]=(D*l+H*u+x*(u>=2*l?2*l:u<=2*l-255?2*l-255:u))/v|0;l=c.data[e+2];u=a.data[e+2];a.data[e+2]=(D*l+H*u+x*(u>=2*l?2*l:u<=2*l-255?2*l-255:u))/v|0;a.data[e+3]=v}}};T.pinLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,
b.top);for(let n=0;n<p;n++,m+=e,b+=l)for(let r=0;r<g;r++,m+=4,b++){var k=c.data[m+3]*h.data[b]*d/25500|0;let u,v;if(k){let x=k+(u=a.data[m+3])-(k*u/255|0)|0,D=k*u/255|0,H=k*(255^u)/255|0,L=(255^k)*u/255|0;k=c.data[m];v=a.data[m];a.data[m]=(H*k+L*v+D*(v>=2*k?2*k:v<=2*k-255?2*k-255:v))/x|0;k=c.data[m+1];v=a.data[m+1];a.data[m+1]=(H*k+L*v+D*(v>=2*k?2*k:v<=2*k-255?2*k-255:v))/x|0;k=c.data[m+2];v=a.data[m+2];a.data[m+2]=(H*k+L*v+D*(v>=2*k?2*k:v<=2*k-255?2*k-255:v))/x|0;a.data[m+3]=x}}};T.passthroughOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3],k=d/100,n=1-k,r=l*k+255*n;a.data[b]=(c.data[b]*l*k+255*a.data[b]*n)/r|0;a.data[b+1]=(c.data[b+1]*l*k+255*a.data[b+1]*n)/r|0;a.data[b+2]=(c.data[b+2]*l*k+255*a.data[b+2]*n)/r|0;a.data[b+3]=r}};T.passthroughOntoOpaqueFusionWithOpaqueLayer=T.passthroughOntoOpaqueFusionWithTransparentLayer;T.passthroughOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3],k=a.data[b+3],n=d/100,r=1-n,u=l*n+k*r;a.data[b]=(c.data[b]*l*n+a.data[b]*k*r)/u|0;a.data[b+1]=(c.data[b+1]*l*n+a.data[b+1]*k*r)/u|0;a.data[b+2]=(c.data[b+2]*l*n+a.data[b+2]*k*r)/u|0;a.data[b+3]=u}};T.passthroughOntoTransparentFusionWithOpaqueLayer=T.passthroughOntoTransparentFusionWithTransparentLayer;T.passthroughOntoOpaqueFusionWithTransparentLayerMasked=
function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3],u=h.data[b]*d/25500,v=1-u,x=r*u+255*v;a.data[m]=(c.data[m]*r*u+255*a.data[m]*v)/x|0;a.data[m+1]=(c.data[m+1]*r*u+255*a.data[m+1]*v)/x|0;a.data[m+2]=(c.data[m+2]*r*u+255*a.data[m+2]*v)/x|0;a.data[m+3]=x}};T.passthroughOntoOpaqueFusionWithOpaqueLayerMasked=T.passthroughOntoOpaqueFusionWithTransparentLayerMasked;
T.passthroughOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+3],u=a.data[m+3],v=h.data[b]*d/25500,x=1-v,D=r*v+u*x;a.data[m]=(c.data[m]*r*v+a.data[m]*u*x)/D|0;a.data[m+1]=(c.data[m+1]*r*v+a.data[m+1]*u*x)/D|0;a.data[m+2]=(c.data[m+2]*r*v+a.data[m+2]*u*x)/D|0;a.data[m+
3]=D}};T.passthroughOntoTransparentFusionWithOpaqueLayerMasked=T.passthroughOntoTransparentFusionWithTransparentLayerMasked;T.replaceOntoFusionWithTransparentLayer=function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0;a.data[b]=c.data[b];a.data[b+1]=c.data[b+1];a.data[b+2]=c.data[b+2];a.data[b+3]=l}};T.replaceOntoFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();
let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3];a.data[b]=c.data[b];a.data[b+1]=c.data[b+1];a.data[b+2]=c.data[b+2];a.data[b+3]=m}};T.replaceOntoFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++){let r=c.data[m+
3]*h.data[b]*d/25500|0;a.data[m]=c.data[m];a.data[m+1]=c.data[m+1];a.data[m+2]=c.data[m+2];a.data[m+3]=r}};T.replaceOntoFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++){let n=c.data[e+3]*h.data[b]/255|0;a.data[e]=c.data[e];a.data[e+1]=c.data[e+1];a.data[e+2]=c.data[e+2];a.data[e+3]=n}};T.replaceAlphaOntoFusionWithTransparentLayer=
function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4)a.data[b+3]=c.data[b+3]*d/100|0};T.replaceAlphaOntoFusionWithTransparentLayerMasked=function(a,c,d,b,h){let p=0|b.getHeight(),g=0|b.getWidth(),e=4*(c.width-g)|0,m=0|c.offsetOfPixel(b.left,b.top),l=h.width-g|0;b=0|h.offsetOfPixel(b.left,b.top);for(let k=0;k<p;k++,m+=e,b+=l)for(let n=0;n<g;n++,m+=4,b++)a.data[m+3]=c.data[m+3]*h.data[b]*d/25500|
0};T.replaceAlphaOntoFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4)a.data[b+3]=c.data[b+3]};T.replaceAlphaOntoFusionWithOpaqueLayerMasked=function(a,c,d,b,h){d=0|b.getHeight();let p=0|b.getWidth(),g=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),m=h.width-p|0;b=0|h.offsetOfPixel(b.left,b.top);for(let l=0;l<d;l++,e+=g,b+=m)for(let k=0;k<p;k++,e+=4,b++)a.data[e+3]=
c.data[e+3]*h.data[b]/255|0};T.upgradeMultiplyOfOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let h=0|b.getWidth(),p=4*(c.width-h)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let g=0;g<d;g++,b+=p)for(let e=0;e<h;e++,b+=4){let m=c.data[b+3],l,k;m&&(l=c.data[b],k=a.data[b],c.data[b]=l+Math.ceil((255-l)*k*m%65025/(k*m)),l=c.data[b+1],k=a.data[b+1],c.data[b+1]=l+Math.ceil((255-l)*k*m%65025/(k*m)),l=c.data[b+2],k=a.data[b+2],c.data[b+2]=l+Math.ceil((255-l)*k*m%65025/(k*m)))}};T.upgradeMultiplyOfTransparentLayer=
function(a,c,d,b){let h=0|b.getHeight(),p=0|b.getWidth(),g=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<h;e++,b+=g)for(let m=0;m<p;m++,b+=4){let l=c.data[b+3]*d/100|0,k,n;l&&(k=c.data[b],n=a.data[b],c.data[b]=k+Math.ceil((255-k)*n*l%65025/(n*l)),k=c.data[b+1],n=a.data[b+1],c.data[b+1]=k+Math.ceil((255-k)*n*l%65025/(n*l)),k=c.data[b+2],n=a.data[b+2],c.data[b+2]=k+Math.ceil((255-k)*n*l%65025/(n*l)))}};T._normalFuseImageOntoImageAtPosition=function(a,c,d,b,h,p){d=0|b.getHeight();let g=
0|b.getWidth(),e=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);let m=4*(a.width-g)|0;h=0|a.offsetOfPixel(h,p);for(p=0;p<d;p++,b+=e,h+=m)for(let k=0;k<g;k++,b+=4,h+=4){var l=c.data[b+3];let n;if(l){let r=l+(n=a.data[h+3])-(l*n/255|0)|0;l=255*l/r|0;let u=255-l;a.data[h]=(c.data[b]*l+a.data[h]*u)/255|0;a.data[h+1]=(c.data[b+1]*l+a.data[h+1]*u)/255|0;a.data[h+2]=(c.data[b+2]*l+a.data[h+2]*u)/255|0;a.data[h+3]=r}}};T.LM_NORMAL=0;T.LM_MULTIPLY=1;T.LM_ADD=2;T.LM_SCREEN=3;T.LM_LIGHTEN=4;T.LM_DARKEN=5;
T.LM_SUBTRACT=6;T.LM_DODGE=7;T.LM_BURN=8;T.LM_OVERLAY=9;T.LM_HARDLIGHT=10;T.LM_SOFTLIGHT=11;T.LM_VIVIDLIGHT=12;T.LM_LINEARLIGHT=13;T.LM_PINLIGHT=14;T.LM_PASSTHROUGH=15;T.LM_MULTIPLY2=16;T.LM_FIRST=0;T.LM_LAST=16;T.LM_LAST_CHIBIPAINT=T.LM_PINLIGHT;T.BLEND_MODE_CODENAMES="normal multiply add screen lighten darken subtract dodge burn overlay hardLight softLight vividLight linearLight pinLight passthrough multiply2".split(" ");T.BLEND_MODE_DISPLAY_NAMES="Normal;Multiply;Add;Screen;Lighten;Darken;Subtract;Dodge;Burn;Overlay;Hard Light;Soft Light;Vivid Light;Linear Light;Pin Light;Passthrough;Multiply".split(";");
for(let a=0;256>a;a++){let c=a/255;Pb[a]=255*(c-c*c)|0}for(let a=0;256>a;a++){let c=a/255;Qb[a]=255*(Math.sqrt(c)-c)|0}qb.prototype.copyFrom=function(a){this.name=a.name;this.blendMode=a.blendMode;this.useLegacyMultiply=a.useLegacyMultiply;this.alpha=a.alpha;this.visible=a.visible;this.parent=a.parent;this.lockAlpha=a.lockAlpha;a.mask?this.mask?this.mask.copyPixelsFrom(a.mask):this.mask=a.mask.clone():this.mask=null;this.maskLinked=a.maskLinked;this.maskVisible=a.maskVisible;a.maskThumbnail?this.maskThumbnail?
this.maskThumbnail.copyPixelsFrom(a.maskThumbnail):this.maskThumbnail=a.maskThumbnail.clone():this.maskThumbnail=null};qb.prototype.setMask=function(a){(this.mask=a)||(this.maskThumbnail=null)};qb.prototype.setAlpha=function(a){this.alpha=a};qb.prototype.getAlpha=function(){return this.alpha};qb.prototype.getEffectiveAlpha=function(){return this.visible?this.alpha:0};qb.prototype.getEffectiveMask=function(){return this.maskVisible?this.mask:null};qb.prototype.setName=function(a){this.name=a};qb.prototype.getName=
function(){return this.name};qb.prototype.setBlendMode=function(a){this.blendMode=a;a===T.LM_MULTIPLY?this.useLegacyMultiply=!0:a===T.LM_MULTIPLY2&&(this.useLegacyMultiply=!1)};qb.prototype.getBlendMode=function(){return this.blendMode};qb.prototype.getLockAlpha=function(){return this.lockAlpha};qb.prototype.setLockAlpha=function(a){this.lockAlpha=a};qb.prototype.setVisible=function(a){this.visible=a};qb.prototype.getVisible=function(){return this.visible};qb.prototype.isVisible=qb.prototype.getVisible;
qb.prototype.setMaskLinked=function(a){this.maskLinked=a};qb.prototype.getMaskLinked=function(){return this.maskLinked};qb.prototype.setMaskVisible=function(a){this.maskVisible=a};qb.prototype.getMaskVisible=function(){return this.maskVisible};qb.prototype.getMemoryUsed=function(){return 0};qb.prototype.getDepth=function(){return null==this.parent?0:this.parent.getDepth()+1};qb.prototype.ancestorsAreVisible=function(){return null==this.parent||this.parent.visible&&this.parent.ancestorsAreVisible()};
qb.prototype.hasAncestor=function(a){return this.parent==a||this.parent&&this.parent.hasAncestor(a)};qb.prototype.clone=function(){throw"Pure virtual CPLayer.clone() call";};qb.prototype.getNonTransparentBounds=function(a){return new Ha(0,0,0,0)};qb.prototype.rebuildMaskThumbnail=function(){if(this.mask){if(!this.maskThumbnail){var a=Math.ceil(Math.max(this.mask.width/qb.LAYER_THUMBNAIL_WIDTH,this.mask.height/qb.LAYER_THUMBNAIL_HEIGHT));this.maskThumbnail=new Za(Math.floor(this.mask.width/a),Math.floor(this.mask.height/
a),8)}this.maskThumbnail.createThumbnailFrom(this.mask)}else this.maskThumbnail=null};qb.prototype.getMaskThumbnail=function(){return!this.maskThumbnail&&this.mask&&this.rebuildMaskThumbnail(),this.maskThumbnail};qb.LAYER_THUMBNAIL_WIDTH=80;qb.LAYER_THUMBNAIL_HEIGHT=50;Pa.prototype=Object.create(qb.prototype);Pa.prototype.constructor=Pa;Pa.createFromImage=function(a,c){c=new Pa(0,0,c);return c.image=a,c};Pa.prototype.clone=function(){var a=new Pa(0,0,this.name);return a.copyFrom(this),a};Pa.prototype.copyFrom=
function(a){qb.prototype.copyFrom.call(this,a);this.clip=a.clip;this.image?this.image.copyPixelsFrom(a.image):this.image=a.image.clone()};Pa.prototype.hasAlpha=function(){return 100!=this.alpha||this.image.hasAlpha()};Pa.prototype.hasAlphaInRect=function(a){return 100!=this.alpha||this.image.hasAlphaInRect(a)};Pa.prototype.copyImageFrom=function(a){this.image.copyPixelsFrom(a)};Pa.prototype.getClippingBase=function(){if(this.clip&&this.parent)for(var a=this.parent.indexOf(this)-1;0<=a;a--)if(this.parent.layers[a]instanceof
Pa){if(!this.parent.layers[a].clip)return this.parent.layers[a]}else break;return null};Pa.prototype.getClip=function(){return this.clip};Pa.prototype.setClip=function(a){this.clip=a};Pa.prototype.getNonTransparentBounds=function(a){return this.image.getNonTransparentBounds(a)};Pa.prototype.getBounds=function(){return new Ha(0,0,this.image.width,this.image.height)};Pa.prototype.getMemoryUsed=function(){return this.image?this.image.getMemorySize():0};Pa.prototype.rebuildImageThumbnail=function(){if(!this.imageThumbnail){var a=
Math.ceil(Math.max(this.image.width/qb.LAYER_THUMBNAIL_WIDTH,this.image.height/qb.LAYER_THUMBNAIL_HEIGHT));this.imageThumbnail=new G(Math.floor(this.image.width/a),Math.floor(this.image.height/a))}this.imageThumbnail.createThumbnailFrom(this.image)};Pa.prototype.getImageThumbnail=function(){return this.imageThumbnail||this.rebuildImageThumbnail(),this.imageThumbnail};T.blendFunctionNameForParameters=function(a,c,d,b){d=T.BLEND_MODE_CODENAMES[d]+"Onto";return a?d+="TransparentFusion":d+="OpaqueFusion",
100==c?d+="WithOpaqueLayer":d+="WithTransparentLayer",b&&(d+="Masked"),d};T.fuseImageOntoImage=function(a,c,d,b,h,p,g){0>=b||(c=T.blendFunctionNameForParameters(c,b,h,null!=g),p=a.getBounds().clipTo(p),this[c](a,d,b,p,g))};T.normalFuseImageOntoImageAtPosition=function(a,c,d,b,h){h=h.clone();d=new Ha(d,b,0,0);a.getBounds().clipSourceDest(h,d);this._normalFuseImageOntoImageAtPosition(a,c,100,h,d.left,d.top)};T.multiplyAlphaBy=function(a,c){if(100>c)if(0==c)a.clearAll(0);else{a=a.data;for(var d=3;d<
a.length;d+=4)a[d]=Math.round(a[d]*c/100)}};T.multiplyAlphaByMask=function(a,c,d){c/=25500;for(var b=G.ALPHA_BYTE_OFFSET,h=0;b<a.data.length;b+=G.BYTES_PER_PIXEL,h++)a.data[b]=Math.round(a.data[b]*d.data[h]*c)};T.copyAndMultiplyAlphaBy=function(a,c,d,b){if(100==d)a.copyBitmapRect(c,b.left,b.top,b);else if(0==d)a.clearRect(b,0);else for(a=c.data,c=0;c<a.length;c+=4)a[c]=a[c],a[c+1]=a[c+1],a[c+2]=a[c+2],a[c+3]=Math.round(a[c+3]*d/100)};ee.prototype.addChildren=function(a){null!=a&&(Array.isArray(a)?
(a.forEach(c=>c.parent=this),this.layers=this.layers.concat(a)):(a.parent=this,this.layers.push(a)))};var Yb={};!function(a){function c(){}function d(g,e){for(var m=g.length;m--;)if(g[m].listener===e)return m;return-1}function b(g){return function(){return this[g].apply(this,arguments)}}var h=c.prototype,p=a.EventEmitter;h.getListeners=function(g){var e,m,l=this._getEvents();if(g instanceof RegExp)for(m in e={},l)l.hasOwnProperty(m)&&g.test(m)&&(e[m]=l[m]);else e=l[g]||(l[g]=[]);return e};h.flattenListeners=
function(g){var e,m=[];for(e=0;e<g.length;e+=1)m.push(g[e].listener);return m};h.getListenersAsObject=function(g){var e,m=this.getListeners(g);return m instanceof Array&&((e={})[g]=m),e||m};h.addListener=function(g,e){if(!function r(n){return"function"==typeof n||n instanceof RegExp||!!n&&"object"==typeof n&&r(n.listener)}(e))throw TypeError("listener must be a function");var m;g=this.getListenersAsObject(g);var l="object"==typeof e;for(m in g)g.hasOwnProperty(m)&&-1===d(g[m],e)&&g[m].push(l?e:{listener:e,
once:!1});return this};h.on=b("addListener");h.addOnceListener=function(g,e){return this.addListener(g,{listener:e,once:!0})};h.once=b("addOnceListener");h.defineEvent=function(g){return this.getListeners(g),this};h.defineEvents=function(g){for(var e=0;e<g.length;e+=1)this.defineEvent(g[e]);return this};h.removeListener=function(g,e){var m,l;g=this.getListenersAsObject(g);for(l in g)g.hasOwnProperty(l)&&-1!==(m=d(g[l],e))&&g[l].splice(m,1);return this};h.off=b("removeListener");h.addListeners=function(g,
e){return this.manipulateListeners(!1,g,e)};h.removeListeners=function(g,e){return this.manipulateListeners(!0,g,e)};h.manipulateListeners=function(g,e,m){var l,k,n=g?this.removeListener:this.addListener;g=g?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(l=m.length;l--;)n.call(this,e,m[l]);else for(l in e)e.hasOwnProperty(l)&&(k=e[l])&&("function"==typeof k?n.call(this,l,k):g.call(this,l,k));return this};h.removeEvent=function(g){var e,m=typeof g,l=this._getEvents();
if("string"===m)delete l[g];else if(g instanceof RegExp)for(e in l)l.hasOwnProperty(e)&&g.test(e)&&delete l[e];else delete this._events;return this};h.removeAllListeners=b("removeEvent");h.emitEvent=function(g,e){var m,l,k,n=this.getListenersAsObject(g);for(k in n)if(n.hasOwnProperty(k)){var r=0;for(m=n[k].slice(0);r<m.length;r++)!0===(l=m[r]).once&&this.removeListener(g,l.listener),l.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(g,l.listener)}return this};h.trigger=
b("emitEvent");h.emit=function(g){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(g,e)};h.setOnceReturnValue=function(g){return this._onceReturnValue=g,this};h._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue};h._getEvents=function(){return this._events||(this._events={})};c.noConflict=function(){return a.EventEmitter=p,c};"function"==typeof define&&define.amd?define(function(){return c}):Yb?Yb=c:a.EventEmitter=c}("undefined"!=
typeof window?window:Yb||{});class uh extends pa(Yb){close(){this.layer=this.buffer=null;this.emitEvent("changeLayer")}setLayer(a){this.layer=a;this.invalidRect=a.getBounds();this.emitEvent("changeLayer")}isOpen(){return null!=this.layer}invalidateRect(a){this.invalidRect.union(a)}getImageData(){this.prepareMask();if(!this.invalidRect.isEmpty()&&this.layer&&this.layer.mask){var a=this.buffer,c=this.layer.mask,d=this.invalidRect,b=d.top*c.width+d.left,h=b*G.BYTES_PER_PIXEL,p=d.getWidth();d=d.getHeight();
var g=c.width-p,e=g*G.BYTES_PER_PIXEL;for(let m=0;m<d;m++,b+=g,h+=e)for(let l=0;l<p;l++,b++,h+=G.BYTES_PER_PIXEL)a.data[h+G.RED_BYTE_OFFSET]=c.data[b],a.data[h+G.GREEN_BYTE_OFFSET]=c.data[b],a.data[h+G.BLUE_BYTE_OFFSET]=c.data[b],a.data[h+G.ALPHA_BYTE_OFFSET]=255;!0;this.invalidRect.makeEmpty()}return this.buffer}constructor(a,c){super();this.layer=a;this.buffer=a.mask.getImageData(0,0,a.mask.width,a.mask.height);this.invalidRect=new Ha(0,0,0,0);this.prepareMask=c}}class zc{merge(a){return!1}noChange(){return!1}getMemoryUsed(a,
c){return 0}compact(){}}Bb.prototype.getRgb=function(){return this.rgb};Bb.prototype.getSaturation=function(){return this.saturation};Bb.prototype.getHue=function(){return this.hue};Bb.prototype.getValue=function(){return this.value};Bb.prototype.setRgbComponents=function(a,c,d){this.setRgb(a<<16|c<<8|d)};Bb.prototype.setRgb=function(a){this.rgb=a;var c=a>>16&255,d=a>>8&255;a&=255;this.value=Math.max(c,Math.max(d,a));var b=Math.min(c,Math.min(d,a));if(0==this.value?this.saturation=0:this.saturation=
~~((this.value-b)/this.value*255),0==this.saturation)this.hue=0;else{var h=(this.value-c)/(this.value-b),p=(this.value-d)/(this.value-b);b=(this.value-a)/(this.value-b);var g=0;this.value==c&&(g=b-p);this.value==d&&(g=2+h-b);this.value==a&&(g=4+p-h);0>(g*=60)&&(g+=360);this.hue=~~g}};Bb.prototype.setHsv=function(a,c,d){this.hue=a;this.saturation=c;this.value=d;this.rgb=Ce(this)};Bb.prototype.setHue=function(a){this.hue=a;this.rgb=Ce(this)};Bb.prototype.setSaturation=function(a){this.saturation=a;
this.rgb=Ce(this)};Bb.prototype.setValue=function(a){this.value=a;this.rgb=Ce(this)};Bb.prototype.setGreyscale=function(a){this.rgb=Bb.greyToRGB(a);this.saturation=this.hue=0;this.value=a};Bb.prototype.clone=function(){var a=new Bb(0);return a.copyFrom(this),a};Bb.prototype.copyFrom=function(a){this.rgb=a.rgb;this.hue=a.hue;this.saturation=a.saturation;this.value=a.value};Bb.prototype.isEqual=function(a){return this.rgb==a.rgb&&this.hue==a.hue&&this.saturation==a.saturation&&this.value==a.value};
Bb.greyToRGB=function(a){return a|a<<8|a<<16};Kb.prototype.setToIdentity=function(){this.m=[1,0,0,1,0,0]};Kb.prototype.multiply=function(a){var c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],b=this.m[1]*a.m[2]+this.m[3]*a.m[3],h=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],p=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];this.m[0]=this.m[0]*a.m[0]+this.m[2]*a.m[1];this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=h;this.m[5]=p};Kb.prototype.preMultiply=function(a){var c=a.m[1]*this.m[0]+
a.m[3]*this.m[1],d=a.m[0]*this.m[2]+a.m[2]*this.m[3],b=a.m[1]*this.m[2]+a.m[3]*this.m[3],h=a.m[0]*this.m[4]+a.m[2]*this.m[5]+a.m[4],p=a.m[1]*this.m[4]+a.m[3]*this.m[5]+a.m[5];this.m[0]=a.m[0]*this.m[0]+a.m[2]*this.m[1];this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=h;this.m[5]=p};Kb.prototype.invert=function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),c=-this.m[1]*a,d=-this.m[2]*a,b=this.m[0]*a,h=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),p=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=
this.m[3]*a;this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=h;this.m[5]=p};Kb.prototype.getInverted=function(){var a=new Kb;return a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=this.m[4],a.m[5]=this.m[5],a.invert(),a};Kb.prototype.rotate=function(a){var c=Math.cos(a);a=Math.sin(a);var d=this.m[1]*c+this.m[3]*a,b=-(this.m[0]*a)+this.m[2]*c,h=-(this.m[1]*a)+this.m[3]*c;this.m[0]=this.m[0]*c+this.m[2]*a;this.m[1]=d;this.m[2]=b;this.m[3]=h};Kb.prototype.rotateAroundPoint=function(a,
c,d){this.translate(c,d);this.rotate(a);this.translate(-c,-d)};Kb.prototype.translate=function(a,c){this.m[4]+=this.m[0]*a+this.m[2]*c;this.m[5]+=this.m[1]*a+this.m[3]*c};Kb.prototype.scale=function(a,c){this.m[0]*=a;this.m[1]*=a;this.m[2]*=c;this.m[3]*=c};Kb.prototype.scaleAroundPoint=function(a,c,d,b){this.translate(d,b);this.scale(a,c);this.translate(-d,-b)};Kb.prototype.shear=function(a,c){var d=this.m[1]+this.m[3]*c,b=this.m[2]+this.m[0]*a;a=this.m[3]+this.m[1]*a;this.m[0]+=this.m[2]*c;this.m[1]=
d;this.m[2]=b;this.m[3]=a};Kb.prototype.getTransformedPoint=function(a){return{x:a.x*this.m[0]+a.y*this.m[2]+this.m[4],y:a.x*this.m[1]+a.y*this.m[3]+this.m[5]}};Kb.prototype.transformPoints=function(a){for(var c=0;c<a.length;c++)a[c]=this.getTransformedPoint(a[c])};Kb.prototype.getTranslateX=function(){return this.m[4]};Kb.prototype.getTranslateY=function(){return this.m[5]};Kb.prototype.clone=function(){var a=new Kb;return a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=
this.m[4],a.m[5]=this.m[5],a};Kb.prototype.getDeterminant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]};Kb.prototype.decompose=function(){var a=this.getDeterminant(),c=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return{translate:{x:this.m[4],y:this.m[5]},rotate:Math.sign(this.m[1])*Math.acos(this.m[0]/c),scale:{x:c,y:a/c},shear:{x:Math.atan((this.m[0]*this.m[2]+this.m[1]*this.m[3])/(c*c)),y:0}}};Kb.prototype.toString=function(){return"["+this.m[0].toFixed(2)+" "+this.m[2].toFixed(2)+
" "+this.m[4].toFixed(2)+"]\n["+this.m[1].toFixed(2)+" "+this.m[3].toFixed(2)+" "+this.m[5].toFixed(2)+"]\n[0.00 0.00 1.00]"};Math.sign=Math.sign||function(a){return 0==(a*=1)||isNaN(a)?a:0<a?1:-1};dd.prototype.toInt=function(){return Math.max(0,Math.min(255,Math.round(255*this.r)))<<16|Math.max(0,Math.min(255,Math.round(255*this.g)))<<8|Math.max(0,Math.min(255,Math.round(255*this.b)))};dd.prototype.mixWith=function(a,c){this.r=this.r*(1-c)+a.r*c;this.g=this.g*(1-c)+a.g*c;this.b=this.b*(1-c)+a.b*
c};dd.prototype.clone=function(){return new dd(this.r,this.g,this.b)};dd.createFromInt=function(a){return new dd((a>>>16&255)/255,(a>>>8&255)/255,(255&a)/255)};class Nd{paintDab(a,c,d,b,h,p,g){a=Math.max(1,Math.ceil(p.alpha*b.alphaScale));switch(b.paintMode){case Ba.PAINT_MODE_FLOW:this._paintFlow(h,c,p.brush,p.width,a);break;case Ba.PAINT_MODE_OPACITY:this._paintOpacity(h,c,p.brush,p.width,a)}}mergeOntoImage(a,c,d){let b=this._strokeBuffer.data;var h=this._strokedRegion;c=c.data;let p=a.data,g=d>>
16&255,e=d>>8&255;d&=255;let m=0|h.getWidth(),l=0|h.getHeight(),k=this._strokeBuffer.offsetOfPixel(h.left,h.top);h=a.offsetOfPixel(h.left,h.top);let n=this._strokeBuffer.width-m|0;a=(a.width-m)*G.BYTES_PER_PIXEL|0;for(let u=0;u<l;u++,k+=n,h+=a)for(let v=0;v<m;v++,k++,h+=G.BYTES_PER_PIXEL){var r=b[k]/255+.5|0;if(0<r){let x=r+c[h+G.ALPHA_BYTE_OFFSET]*(255-r)/255|0;r=255*r/x|0;let D=255-r;p[h]=(g*r+c[h]*D)/255&255;p[h+1]=(e*r+c[h+1]*D)/255&255;p[h+2]=(d*r+c[h+2]*D)/255&255;p[h+3]=x}}}mergeOntoMask(a,
c,d){let b=this._strokeBuffer.data;var h=this._strokedRegion;c=c.data;let p=a.data,g=0|h.getWidth(),e=0|h.getHeight(),m=a.offsetOfPixel(h.left,h.top);h=this._strokeBuffer.offsetOfPixel(h.left,h.top);let l=this._strokeBuffer.width-g|0;a=a.width-g|0;for(let k=0;k<e;k++,h+=l,m+=a)for(let n=0;n<g;n++,h++,m++){let r=b[h]/255|0;0<r&&(p[m]=(d*r+c[m]*(255-r))/255)}}_paintFlow(a,c,d,b,h){let p=this._strokeBuffer.data;a=a.left+a.top*b;let g=this._strokeBuffer.offsetOfPixel(c.left,c.top),e=c.getHeight(),m=c.getWidth();
b-=m;let l=this._strokeBuffer.width-m;this._strokedRegion.union(c);for(c=0;c<e;c++,a+=b,g+=l)for(let k=0;k<m;k++,a++,g++){let n=d[a]*h;0!=n&&(p[g]=Math.min(65025,p[g]+(255-p[g]/255)*n/255))}}_paintOpacity(a,c,d,b,h){let p=this._strokeBuffer.data;a=a.left+a.top*b;let g=this._strokeBuffer.offsetOfPixel(c.left,c.top),e=c.getWidth();b-=e;let m=this._strokeBuffer.width-e;h=Math.min(255,h);this._strokedRegion.union(c);for(let l=c.top;l<c.bottom;l++,a+=b,g+=m)for(let k=0;k<e;k++,a++,g++)p[g]=Math.max(d[a]*
h,p[g])}beginStroke(){}endStroke(){}constructor(a,c){this._strokeBuffer=a;this._strokedRegion=c;this.wantsOutputAsInput=!0}}class vh extends Nd{mergeOntoImage(a,c,d){d=this._strokeBuffer.data;let b=this._strokedRegion;c=c.data;let h=a.data;for(let p=b.top;p<b.bottom;p++){let g=a.offsetOfPixel(b.left,p)+G.ALPHA_BYTE_OFFSET,e=this._strokeBuffer.offsetOfPixel(b.left,p);for(let m=b.left;m<b.right;m++,g+=G.BYTES_PER_PIXEL){let l=d[e++]/255|0;0<l&&(h[g]=c[g]*(255-l)/255)}}}}class wh extends Nd{mergeOntoImage(a,
c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;let h=b.getWidth(),p=b.getHeight(),g=a.offsetOfPixel(b.left,b.top);b=this._strokeBuffer.offsetOfPixel(b.left,b.top);let e=(a.width-h)*G.BYTES_PER_PIXEL,m=this._strokeBuffer.width-h;c=c.data;a=a.data;for(let k=0;k<p;k++,b+=m,g+=e)for(let n=0;n<h;n++,b++,g+=G.BYTES_PER_PIXEL){var l=d[b]/255|0;0<l&&0!=c[g+G.ALPHA_BYTE_OFFSET]&&(l=(l+255)/255,a[g+G.RED_BYTE_OFFSET]=c[g+G.RED_BYTE_OFFSET]*l,a[g+G.GREEN_BYTE_OFFSET]=c[g+G.GREEN_BYTE_OFFSET]*l,a[g+
G.BLUE_BYTE_OFFSET]=c[g+G.BLUE_BYTE_OFFSET]*l)}}mergeOntoMask(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;let h=b.getWidth(),p=b.getHeight(),g=a.offsetOfPixel(b.left,b.top);b=this._strokeBuffer.offsetOfPixel(b.left,b.top);let e=a.width-h,m=this._strokeBuffer.width-h;c=c.data;a=a.data;for(let l=0;l<p;l++,b+=m,g+=e)for(let k=0;k<h;k++,b++,g++){let n=d[b]/255|0;0<n&&(a[g]=Math.min((n+255)/255*c[g],255))}}}class xh extends Nd{mergeOntoImage(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;
let h=b.getWidth(),p=b.getHeight(),g=a.offsetOfPixel(b.left,b.top);b=this._strokeBuffer.offsetOfPixel(b.left,b.top);let e=(a.width-h)*G.BYTES_PER_PIXEL,m=this._strokeBuffer.width-h;c=c.data;a=a.data;for(let l=0;l<p;l++,b+=m,g+=e)for(let k=0;k<h;k++,b++,g+=G.BYTES_PER_PIXEL){let n=d[b]/255|0;0<n&&0!=c[g+G.ALPHA_BYTE_OFFSET]&&(a[g+G.RED_BYTE_OFFSET]=c[g+G.RED_BYTE_OFFSET]-(260-c[g+G.RED_BYTE_OFFSET])*n/255|0,a[g+G.GREEN_BYTE_OFFSET]=c[g+G.GREEN_BYTE_OFFSET]-(260-c[g+G.GREEN_BYTE_OFFSET])*n/255|0,a[g+
G.BLUE_BYTE_OFFSET]=c[g+G.BLUE_BYTE_OFFSET]-(260-c[g+G.BLUE_BYTE_OFFSET])*n/255|0)}}mergeOntoMask(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;let h=b.getWidth(),p=b.getHeight(),g=a.offsetOfPixel(b.left,b.top);b=this._strokeBuffer.offsetOfPixel(b.left,b.top);let e=a.width-h,m=this._strokeBuffer.width-h;c=c.data;a=a.data;for(let l=0;l<p;l++,b+=m,g+=e)for(let k=0;k<h;k++,b++,g++){let n=d[b]/255|0;0<n&&(a[g]=Math.max(c[g]-(260-c[g])*n/255,0))}}}class yh extends Nd{mergeOntoImage(a,c,d){d=
this._strokeBuffer.data;let b=this._strokedRegion,h=c.data;a=a.data;var p=b.getWidth();let g=c.width*G.BYTES_PER_PIXEL,e=c.offsetOfPixel(b.left,b.top),m=this._strokeBuffer.offsetOfPixel(b.left,b.top),l=(c.width-p)*G.BYTES_PER_PIXEL;p=this._strokeBuffer.width-p;let k,n,r,u,v=function(D){k+=h[D+G.RED_BYTE_OFFSET];n+=h[D+G.GREEN_BYTE_OFFSET];r+=h[D+G.BLUE_BYTE_OFFSET];u+=h[D+G.ALPHA_BYTE_OFFSET]};for(let D=b.top;D<b.bottom;D++,e+=l,m+=p)for(let H=b.left;H<b.right;H++,e+=G.BYTES_PER_PIXEL,m++){var x=
d[m]/255|0;if(0<x){x=64+-63*x/255|0;let L=x+4;k=x*h[e+G.RED_BYTE_OFFSET];n=x*h[e+G.GREEN_BYTE_OFFSET];r=x*h[e+G.BLUE_BYTE_OFFSET];u=x*h[e+G.ALPHA_BYTE_OFFSET];v(0<D?e-g:e);v(D<c.height-1?e+g:e);v(0<H?e-G.BYTES_PER_PIXEL:e);v(H<c.width-1?e+G.BYTES_PER_PIXEL:e);u/=L;k/=L;n/=L;r/=L;a[e+G.RED_BYTE_OFFSET]=0|k;a[e+G.GREEN_BYTE_OFFSET]=0|n;a[e+G.BLUE_BYTE_OFFSET]=0|r;a[e+G.ALPHA_BYTE_OFFSET]=0|u}}}mergeOntoMask(a,c,d){d=this._strokeBuffer.data;let b=this._strokedRegion,h=c.data;a=a.data;var p=b.getWidth();
let g=c.width,e=c.offsetOfPixel(b.left,b.top),m=this._strokeBuffer.offsetOfPixel(b.left,b.top),l=c.width-p;p=this._strokeBuffer.width-p;for(let r=b.top;r<b.bottom;r++,e+=l,m+=p)for(let u=b.left;u<b.right;u++,e++,m++){var k=d[m]/255|0;if(0<k){var n=64+-63*k/255|0;k=n+4;n=n*h[e]+h[0<r?e-g:e]+h[r<c.height-1?e+g:e]+h[0<u?e-1:e]+h[u<c.width-1?e+1:e];a[e]=n/k|0}}}}class Lf extends Nd{mergeOntoImage(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;c=c.data;let h=a.data,p=this._strokeBuffer.offsetOfPixel(b.left,
b.top),g=a.offsetOfPixel(b.left,b.top),e=0|b.getWidth();b=0|b.getHeight();let m=this._strokeBuffer.width-e|0;a=(a.width-e)*G.BYTES_PER_PIXEL|0;for(let n=0;n<b;n++,p+=m,g+=a)for(let r=0;r<e;r++,p++,g+=G.BYTES_PER_PIXEL){let u=d[p];var l=u>>>24;if(0<l){var k=c[g+G.ALPHA_BYTE_OFFSET];k=l+k-l*k/255|0;l=255*l/k|0;let v=255-l;h[g]=((u>>16&255)*l+c[g]*v)/255|0;h[g+1]=((u>>8&255)*l+c[g+1]*v)/255|0;h[g+2]=((255&u)*l+c[g+2]*v)/255|0;h[g+3]=k}}}mergeOntoMask(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;
c=c.data;let h=a.data,p=this._strokeBuffer.offsetOfPixel(b.left,b.top),g=a.offsetOfPixel(b.left,b.top),e=0|b.getWidth();b=0|b.getHeight();let m=this._strokeBuffer.width-e|0;a=a.width-e|0;for(let l=0;l<b;l++,p+=m,g+=a)for(let k=0;k<e;k++,p++,g++){let n=d[p],r=n>>8;0<r&&(h[g]=((255&n)*r+c[g]*(255-r))/255|0)}}}let Xg=2/6;class fe extends Lf{static _sampleGrey(a,c,d,b,h){c|=0;d|=0;let p=[{x:c,y:d}];for(let g=.25;1.001>g;g+=.25)Array.prototype.push.apply(p,[{x:~~(c+g*b),y:d},{x:~~(c-g*b),y:d},{x:c,y:~~(d+
g*h)},{x:c,y:~~(d-g*h)},{x:~~(c+.7*g*b),y:~~(d+.7*g*h)},{x:~~(c+.7*g*b),y:~~(d-.7*g*h)},{x:~~(c-.7*g*b),y:~~(d+.7*g*h)},{x:~~(c-.7*g*b),y:~~(d-.7*g*h)}]);return kg(p.map(g=>a.getPixel(g.x,g.y)))}static _sampleRGB(a,c,d,b,h){c|=0;d|=0;let p=[{x:c,y:d}];for(let g=.25;1.001>g;g+=.25)Array.prototype.push.apply(p,[{x:~~(c+g*b),y:d},{x:~~(c-g*b),y:d},{x:c,y:~~(d+g*h)},{x:c,y:~~(d-g*h)},{x:~~(c+.7*g*b),y:~~(d+.7*g*h)},{x:~~(c+.7*g*b),y:~~(d-.7*g*h)},{x:~~(c-.7*g*b),y:~~(d+.7*g*h)},{x:~~(c-.7*g*b),y:~~(d-
.7*g*h)}]);return lg(p.map(g=>dd.createFromInt(a.getPixel(g.x,g.y))))}_paintToColorStrokeBuffer(a,c,d,b,h,p){let g=this._strokeBuffer.data,e=c.getWidth(),m=c.getHeight(),l=this._strokeBuffer.width-e,k=b-e;a=a.left+a.top*b;b=this._strokeBuffer.offsetOfPixel(c.left,c.top);this._strokedRegion.union(c);for(c=0;c<m;c++,a+=k,b+=l)for(let u=0;u<e;u++,a++,b++){var n=d[a]*h/255|0;if(0<n){let v=g[b];var r=v>>>24;r=n+r-n*r/255|0;n=255-(255*n/r|0);g[b]=r<<24|(p>>16&255)+((v>>16&255)*n-(p>>16&255)*n)/255<<16|
(p>>8&255)+((v>>8&255)*n-(p>>8&255)*n)/255<<8|(255&p)+((255&v)*n-(255&p)*n)/255}}}_paintToGreyscaleStrokeBuffer(a,c,d,b,h,p){let g=this._strokeBuffer.data;this._strokedRegion.union(c);for(let l=c.top,k=a.top;l<c.bottom;l++,k++){let n=a.left+k*b,r=this._strokeBuffer.offsetOfPixel(c.left,l);for(let u=c.left;u<c.right;u++,n++,r++){var e=d[n]*h/255|0;if(0>=e)continue;let v=g[r];var m=v>>8;m=e+m-e*m/255|0;0<m&&(e=255-(255*e/m|0),g[r]=m<<8|p+((255&v)*e-p*e)/255)}}}beginStroke(){this._previousSamples=null}paintDab(a,
c,d,b,h,p,g){var e,m;a=Math.max(1,p.alpha/4);var l=(c.left+c.right)/2,k=(c.top+c.bottom)/2,n=Math.max(1,Math.min(64,c.getWidth()*Xg)),r=Math.max(1,Math.min(64,c.getHeight()*Xg));if(d instanceof Za){null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(fe._sampleGrey(d,l,k,n,r)));let v=kg(this._previousSamples);var u=v;g=u=v=u*(1-(e=b.resat*b.resat))+(255&g)*e;d=fe._sampleGrey(d,l,k,n,r);v=g*(1-(m=b.bleed))+d*m;this._previousSamples.push(v);this._previousSamples.shift();
this._paintToGreyscaleStrokeBuffer(h,c,p.brush,p.width,a,Math.round(u))}else null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(fe._sampleRGB(d,l,k,n,r))),m=lg(this._previousSamples),m.mixWith(dd.createFromInt(g),b.resat*b.resat),g=m.toInt(),m.mixWith(fe._sampleRGB(d,l,k,n,r),b.bleed),this._previousSamples.push(m),this._previousSamples.shift(),this._paintToColorStrokeBuffer(h,c,p.brush,p.width,a,g)}constructor(a,c){super(a,c);this.wantsOutputAsInput=!0}}class Ah extends Lf{_accumulatePaintFromMask(a,
c,d,b){let h=this._brushBuffer.data,p=a.data,g=d.getWidth(),e=d.getHeight();c=c.left+c.top*this._brushBuffer.width;d=a.offsetOfPixel(d.left,d.top);let m=this._brushBuffer.width-g;a=a.width-g;if(!(0>=b))for(let k=0;k<e;k++,c+=m,d+=a)for(let n=0;n<g;n++,c++,d++){let r=p[d],u=h[c];var l=u>>8;l=b+l-b*l/255|0;let v=255-(255*b/l|0);h[c]=l<<8|r+((255&u)*v-r*v)/255}}_resaturateBrushWithGrey(a,c,d){if(!(0>=c)){var b=this._brushBuffer.data,h=a.getWidth(),p=a.getHeight();a=a.left+a.top*this._brushBuffer.width;
var g=this._brushBuffer.width-h;for(let m=0;m<p;m++,a+=g)for(let l=0;l<h;l++,a++){let k=b[a];var e=k>>8;e=c+e-c*e/255|0;let n=255-(255*c/e|0);b[a]=e<<8|d+((255&k)*n-d*n)/255}}}_paintToGreyscaleStrokeBuffer(a,c,d,b,h){let p=this._strokeBuffer.data,g=this._brushBuffer.data,e=a.data;this._strokedRegion.union(d);for(let l=d.top,k=c.top;l<d.bottom;l++,k++){let n=this._brushBuffer.offsetOfPixel(c.left,k),r=this._strokeBuffer.offsetOfPixel(d.left,l),u=a.offsetOfPixel(d.left,l);for(let v=d.left;v<d.right;v++,
n++,u++,r++){let x=g[n];var m=(x>>8)*b[n]*h/65025|0;0<m&&(m=255-m,p[r]=65280|(255&x)+(e[u]*m-(255&x)*m)/255)}}}_accumulatePaintFromImage(a,c,d,b){let h=this._brushBuffer.data,p=a.data,g=d.getWidth(),e=d.getHeight();c=c.left+c.top*this._brushBuffer.width;d=a.offsetOfPixel(d.left,d.top);let m=this._brushBuffer.width-g;a=(a.width-g)*G.BYTES_PER_PIXEL;for(let n=0;n<e;n++,c+=m,d+=a)for(let r=0;r<g;r++,c++,d+=G.BYTES_PER_PIXEL){var l=p[d+G.ALPHA_BYTE_OFFSET]*b/255|0;if(0<l){let u=h[c];var k=u>>>24;k=l+
k-l*k/255|0;l=255-(255*l/k|0);let v=p[d+G.RED_BYTE_OFFSET],x=p[d+G.GREEN_BYTE_OFFSET],D=p[d+G.BLUE_BYTE_OFFSET];h[c]=k<<24|v+((u>>16&255)*l-v*l)/255<<16|x+((u>>8&255)*l-x*l)/255<<8|D+((255&u)*l-D*l)/255}}}_resaturateBrushWithColor(a,c,d){if(!(0>=c)){var b=this._brushBuffer.data,h=a.getWidth(),p=a.getHeight();a=a.left+a.top*this._brushBuffer.width;var g=this._brushBuffer.width-h;for(let m=0;m<p;m++,a+=g)for(let l=0;l<h;l++,a++){let k=b[a];var e=k>>>24;e=c+e-c*e/255|0;let n=255-(255*c/e|0);b[a]=e<<
24|(d>>>16&255)+((k>>>16&255)*n-(d>>>16&255)*n)/255<<16|(d>>>8&255)+((k>>>8&255)*n-(d>>>8&255)*n)/255<<8|(255&d)+((255&k)*n-(255&d)*n)/255}}}_paintToColorStrokeBuffer(a,c,d,b,h){let p=this._strokeBuffer.data,g=this._brushBuffer.data,e=a.data;this._strokedRegion.union(d);for(let k=d.top,n=c.top;k<d.bottom;k++,n++){let r=this._brushBuffer.offsetOfPixel(c.left,n),u=this._strokeBuffer.offsetOfPixel(d.left,k),v=a.offsetOfPixel(d.left,k);for(let x=d.left;x<d.right;x++,r++,v+=G.BYTES_PER_PIXEL,u++){let D=
g[r];var m=(D>>>24)*b[r]*h/65025|0;if(0<m){var l=e[v+G.ALPHA_BYTE_OFFSET];l=m+l-m*l/255|0;m=255-(255*m/l|0);p[u]=l<<24|(D>>16&255)+(e[v+G.RED_BYTE_OFFSET]*m-(D>>16&255)*m)/255<<16|(D>>8&255)+(e[v+G.GREEN_BYTE_OFFSET]*m-(D>>8&255)*m)/255<<8|(255&D)+(e[v+G.BLUE_BYTE_OFFSET]*m-(255&D)*m)/255}}}}paintDab(a,c,d,b,h,p,g){a instanceof G?null==this._brushBuffer?(this._brushBuffer=new Za(p.width,p.height,32),this._accumulatePaintFromImage(d,h,c,255)):(this._resaturateBrushWithColor(h,~~(0>=b.resat?0:Math.max(1,
b.resat*b.resat*255)),16777215&g),this._paintToColorStrokeBuffer(a,h,c,p.brush,p.alpha),this._accumulatePaintFromImage(d,h,c,~~(255*b.bleed))):null==this._brushBuffer?(this._brushBuffer=new Za(p.width,p.height,16),this._accumulatePaintFromMask(d,h,c,255)):(this._resaturateBrushWithGrey(h,~~(0>=b.resat?0:Math.max(1,b.resat*b.resat*255)),255&g),this._paintToGreyscaleStrokeBuffer(a,h,c,p.brush,p.alpha),this._accumulatePaintFromMask(d,h,c,~~(255*b.bleed)))}endStroke(){this._brushBuffer=null}constructor(a,
c){super(a,c);this.wantsOutputAsInput=!0}}class zh extends Lf{_sampleFromMask(a,c,d,b){let h=this._brushBuffer.data,p=c.getWidth(),g=c.getHeight(),e=this._brushBuffer.offsetOfPixel(c.left,c.top);d=a.offsetOfPixel(d.left,d.top);let m=this._brushBuffer.width-p,l=a.width-p,k=255-b;if(255!=b){for(let n=0;n<g;n++,e+=m,d+=l)for(let r=0;r<p;r++,e++,d++){let u=a.data[d],v=h[e],x=(u*k+(255&v)*b)/255,D=(255*k+(v>>8)*b)/255<<8|x;D==v&&(u>x?D++:u<x&&D--);h[e]=D}mg(this._brushBuffer,c)}}_paintToMask(a,c,d,b){let h=
c.getWidth(),p=c.getHeight();c=this._brushBuffer.offsetOfPixel(c.left,c.top);d=a.offsetOfPixel(d.left,d.top);let g=this._brushBuffer.width-h,e=a.width-h;a=a.data;let m=this._brushBuffer.data;for(let l=0;l<p;l++,d+=e,c+=g)for(let k=0;k<h;k++,c++,d++){let n=m[c],r=255&n;0<((n>>8)*b[c]/255|0)&&(a[d]=r)}}_sampleFromImage(a,c,d,b){let h=this._brushBuffer.data,p=c.getWidth(),g=c.getHeight(),e=this._brushBuffer.offsetOfPixel(c.left,c.top);d=a.offsetOfPixel(d.left,d.top);let m=this._brushBuffer.width-p,l=
(a.width-p)*G.BYTES_PER_PIXEL,k=255-b;if(255!=b){for(let r=0;r<g;r++,e+=m,d+=l)for(let u=0;u<p;u++,e++,d+=G.BYTES_PER_PIXEL){let v=a.data[d+G.RED_BYTE_OFFSET],x=a.data[d+G.GREEN_BYTE_OFFSET],D=a.data[d+G.BLUE_BYTE_OFFSET];var n=h[e];let H=(a.data[d+G.ALPHA_BYTE_OFFSET]*k+(n>>24&255)*b)/255<<24&4278190080|(v*k+(n>>16&255)*b)/255<<16&16711680|(x*k+(n>>8&255)*b)/255<<8&65280|(D*k+(255&n)*b)/255&255;if(H==n){n=(16711680&H)>>16;let L=(65280&H)>>8,J=255&H;v>n?H+=65536:v<n&&(H-=65536);x>L?H+=256:x<L&&(H-=
256);D>J?H+=1:D<J&&--H}h[e]=H}mg(this._brushBuffer,c)}}_paintToImage(a,c,d,b){let h=c.getWidth(),p=c.getHeight();c=this._brushBuffer.offsetOfPixel(c.left,c.top);d=a.offsetOfPixel(d.left,d.top);let g=this._brushBuffer.width-h,e=(a.width-h)*G.BYTES_PER_PIXEL;a=a.data;let m=this._brushBuffer.data;for(let l=0;l<p;l++,d+=e,c+=g)for(let k=0;k<h;k++,c++,d+=G.BYTES_PER_PIXEL){let n=m[c];0<((n>>>24)*b[c]/255|0)&&(a[d+G.RED_BYTE_OFFSET]=n>>16&255,a[d+G.GREEN_BYTE_OFFSET]=n>>8&255,a[d+G.BLUE_BYTE_OFFSET]=255&
n,a[d+G.ALPHA_BYTE_OFFSET]=n>>24&255)}}paintDab(a,c,d,b,h,p,g){a instanceof G?null==this._brushBuffer?(this._brushBuffer=new Za(p.width,p.height,32),this._sampleFromImage(d,h,c,0)):(this._sampleFromImage(d,h,c,p.alpha),this._paintToImage(a,h,c,p.brush)):null==this._brushBuffer?(this._brushBuffer=new Za(p.width,p.height,16),this._sampleFromMask(d,h,c,0)):(this._sampleFromMask(d,h,c,p.alpha),this._paintToMask(a,h,c,p.brush))}mergeOntoImage(a,c,d){}mergeOntoMask(a,c,d){}beginStroke(){this._brushBuffer=
null}endStroke(){this._brushBuffer=null}constructor(a,c){super(a,c);this._brushBuffer=null;this.noMergePhase=this.wantsOutputAsInput=!0}}"use strict";"use strict";Dc.prototype=Object.create(pa(Yb).prototype);Dc.prototype.constructor=Dc;Dc.prototype.getBounds=function(){return new Ha(0,0,this.width,this.height)};Dc.prototype.isPointWithin=function(a,c){return 0<=a&&0<=c&&a<this.width&&c<this.height};Dc.EDITING_MODE_IMAGE=0;Dc.EDITING_MODE_MASK=1;vb.prototype.readChar=function(){return this.pos<this.end?
String.fromCharCode(this.data[this.pos++]):(this.eof=!0,-1)};vb.prototype.readByte=function(){return this.pos<this.end?this.data[this.pos++]:(this.eof=!0,-1)};vb.prototype.readU8=vb.prototype.readByte;vb.prototype.readS8=function(){var a;return 128&(a=this.readByte())?4294967040|a:a};vb.prototype.unreadChar=function(a){this.pos--};vb.prototype.peekChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos]):(this.eof=!0,-1)};vb.prototype.readString=function(a){var c,d=Array(a);
for(c=0;c<a;c++)d[c]=this.readChar();return d.join("")};vb.prototype.readS16=function(){var a;return 32768&(a=this.readByte()<<8|this.readByte())?4294901760|a:a};vb.prototype.readU16BE=function(){return this.readByte()<<8|this.readByte()};vb.prototype.readU16LE=function(){var a=this.readByte();return this.readByte()<<8|a};vb.prototype.readU32BE=function(){return(this.readByte()<<24|this.readByte()<<16|this.readByte()<<8|this.readByte())>>>0};vb.prototype.readU32LE=function(){var a=this.readByte(),
c=this.readByte(),d=this.readByte();return(this.readByte()<<24|d<<16|c<<8|a)>>>0};vb.prototype.readBytes=function(a){var c=this.data.subarray(this.pos,this.pos+a);return this.pos+=a,this.pos>this.end&&(this.eof=!0),c};vb.prototype.skip=function(a){this.pos+=a;this.pos>this.end&&(this.eof=!0)};vb.prototype.seek=function(a){this.pos=a};vb.prototype.writeBytes=function(a){for(var c=0;c<a.length;c++)this.data[this.pos++]=a[c]};vb.prototype.writeByte=function(a){this.data[this.pos++]=a};vb.prototype.writeU8=
vb.prototype.writeByte;vb.prototype.writeU16LE=function(a){this.data[this.pos++]=a;this.data[this.pos++]=a>>8};vb.prototype.writeU16BE=function(a){this.data[this.pos++]=a>>8;this.data[this.pos++]=a};vb.prototype.writeU32BE=function(a){this.data[this.pos++]=a>>24;this.data[this.pos++]=a>>16;this.data[this.pos++]=a>>8;this.data[this.pos++]=a};vb.prototype.writeU32LE=function(a){this.data[this.pos++]=a;this.data[this.pos++]=a>>8;this.data[this.pos++]=a>>16;this.data[this.pos++]=a>>24};vb.prototype.writeDoubleBE=
function(a){a=new Uint8Array((new Float64Array([a])).buffer);for(var c=a.length-1;0<=c;c--)this.writeByte(a[c])};vb.prototype.writeFloatBE=function(a){a=new Uint8Array((new Float32Array([a])).buffer);for(var c=a.length-1;0<=c;c--)this.writeByte(a[c])};vb.prototype.writeString=function(a){for(var c=0;c<a.length;c++)this.data[this.pos++]=a.charCodeAt(c)};vb.prototype.writeUnsignedIntBE=function(a,c){switch(void 0===c&&(c=this.measureUnsignedInt(a)),c){case 5:this.writeU8(Math.floor(a/4294967296));case 4:this.writeU8(a>>
24);case 3:this.writeU8(a>>16);case 2:this.writeU8(a>>8);case 1:this.writeU8(a);break;default:throw"Bad UINT size "+c;}};vb.prototype.measureUnsignedInt=function(a){return 256>a?1:65536>a?2:16777216>a?3:4294967296>a?4:5};vb.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayDataStream's pos lies beyond end of buffer";};vb.prototype.EOF=-1;var Df={},$a={},Yh="undefined"!=typeof Uint8Array&&
"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;$a.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!=typeof d)throw TypeError(d+"must be non-object");for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])}}return a};$a.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};"use strict";"use strict";"use strict";var Zh={arraySet:function(a,c,d,b,h){if(c.subarray&&a.subarray)a.set(c.subarray(d,
d+b),h);else for(var p=0;p<b;p++)a[h+p]=c[d+p]},flattenChunks:function(a){var c,d;var b=c=0;for(d=a.length;c<d;c++)b+=a[c].length;c=0;var h=new Uint8Array(b);b=0;for(d=a.length;c<d;c++){var p=a[c];h.set(p,b);b+=p.length}return h}},$h={arraySet:function(a,c,d,b,h){for(var p=0;p<b;p++)a[h+p]=c[d+p]},flattenChunks:function(a){return[].concat.apply([],a)}};$a.setTyped=function(a){a?($a.Buf8=Uint8Array,$a.Buf16=Uint16Array,$a.Buf32=Int32Array,$a.assign($a,Zh)):($a.Buf8=Array,$a.Buf16=Array,$a.Buf32=Array,
$a.assign($a,$h))};$a.setTyped(Yh);var ai=$a.assign,pe={};md(pe,"Deflate",function(){return Yg},function(a){return Yg=a});md(pe,"deflate",function(){return Zg},function(a){return Zg=a});md(pe,"deflateRaw",function(){return $g},function(a){return $g=a});md(pe,"gzip",function(){return ah},function(a){return ah=a});var tf=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],bi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bh=[16,
17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fd=Array(576);Od(fd);var qe=Array(60);Od(qe);var ge=Array(512);Od(ge);var ie=Array(256);Od(ie);var uf=Array(29);Od(uf);var Fe=Array(30);Od(Fe);var ch=!1;"use strict";var Dh=function(a){if(!ch){var c,d,b=Array(16);for(c=d=0;28>d;d++){var h=0;for(uf[d]=c;h<1<<tf[d];h++)ie[c++]=d}ie[c-1]=d;for(d=c=0;16>d;d++)for(h=0,Fe[d]=c;h<1<<Ee[d];h++)ge[c++]=d;for(c>>=7;30>d;d++)for(h=0,Fe[d]=c<<7;h<1<<Ee[d]-7;h++)ge[256+c++]=d;for(h=0;15>=h;h++)b[h]=0;for(h=0;143>=h;)fd[2*
h+1]=8,h++,b[8]++;for(;255>=h;)fd[2*h+1]=9,h++,b[9]++;for(;279>=h;)fd[2*h+1]=7,h++,b[7]++;for(;287>=h;)fd[2*h+1]=8,h++,b[8]++;qg(fd,287,b);for(h=0;30>h;h++)qe[2*h+1]=5,qe[2*h]=pg(h,5);Ug=new qf(fd,tf,257,286,15);Vg=new qf(qe,Ee,0,30,15);Wg=new qf([],bi,0,19,7);!0;ch=!0}a.l_desc=new rf(a.dyn_ltree,Ug);a.d_desc=new rf(a.dyn_dtree,Vg);a.bl_desc=new rf(a.bl_tree,Wg);a.bi_buf=0;a.bi_valid=0;rg(a)};var Bh=function(a,c,d,b){var h,p,g=0;0<a.level?(2===a.strm.data_type&&(a.strm.data_type=function(e){var m,
l=4093624447;for(m=0;31>=m;m++,l>>>=1)if(1&l&&0!==e.dyn_ltree[2*m])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(m=32;256>m;m++)if(0!==e.dyn_ltree[2*m])return 1;return 0}(a)),vf(a,a.l_desc),vf(a,a.d_desc),g=function(e){var m;vg(e,e.dyn_ltree,e.l_desc.max_code);vg(e,e.dyn_dtree,e.d_desc.max_code);vf(e,e.bl_desc);for(m=18;3<=m&&0===e.bl_tree[2*bh[m]+1];m--);return e.opt_len+=3*(m+1)+14,m}(a),h=a.opt_len+3+7>>>3,(p=a.static_len+3+7>>>3)<=h&&(h=p)):h=p=d+5;d+4<=
h&&-1!==c?xg(a,c,d,b):4===a.strategy||p===h?(Ec(a,2+ +!!b,3),ug(a,fd,qe)):(Ec(a,4+ +!!b,3),function(e,m,l,k){var n;Ec(e,m-257,5);Ec(e,l-1,5);Ec(e,k-4,4);for(n=0;n<k;n++)Ec(e,e.bl_tree[2*bh[n]+1],3);wg(e,e.dyn_ltree,m-1);wg(e,e.dyn_dtree,l-1)}(a,a.l_desc.max_code+1,a.d_desc.max_code+1,g+1),ug(a,a.dyn_ltree,a.dyn_dtree));rg(a);b&&sg(a)};var qd=function(a,c,d){return a.pending_buf[a.d_buf+2*a.last_lit]=c>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&c,a.pending_buf[a.l_buf+a.last_lit]=255&d,a.last_lit++,
0===c?a.dyn_ltree[2*d]++:(a.matches++,c--,a.dyn_ltree[2*(ie[d]+256+1)]++,a.dyn_dtree[2*og(c)]++),a.last_lit===a.lit_bufsize-1};var ci=function(a){Ec(a,2,3);ad(a,256,fd);16===a.bi_valid?(he(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)};"use strict";var Pd={};Pd=function(a,c,d,b){var h=65535&a|0;a=a>>>16&65535|0;for(var p;0!==d;){p=2E3<d?2E3:d;d-=p;do a=a+(h=h+c[b++]|0)|0;while(--p);h%=65521;a%=65521}return h|a<<16|0};"use strict";
var gc={},di=function(){for(var a,c=[],d=0;256>d;d++){a=d;for(var b=0;8>b;b++)a=1&a?3988292384^a>>>1:a>>>1;c[d]=a}return c}();gc=function(a,c,d,b){d=b+d;for(a^=-1;b<d;b++)a=a>>>8^di[(a^c[b])&255];return-1^a};var zd={};zd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var ke=[new bd(0,0,0,0,function(a,c){var d=65535;for(65535>a.pending_buf_size-5&&(d=a.pending_buf_size-5);;){if(1>=
a.lookahead){if(Ad(a),0===a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var b=a.block_start+d;if((0===a.strstart||a.strstart>=b)&&(a.lookahead=a.strstart-b,a.strstart=b,mc(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-262&&(mc(a,!1),0===a.strm.avail_out))return 1}return(a.insert=0,4===c)?(mc(a,!0),0===a.strm.avail_out)?3:4:(a.strstart>a.block_start&&(mc(a,!1),a.strm.avail_out),1)}),new bd(4,4,8,4,wf),new bd(4,5,16,8,wf),new bd(4,6,32,
32,wf),new bd(4,4,16,16,Qd),new bd(8,16,32,32,Qd),new bd(8,16,128,128,Qd),new bd(8,32,128,256,Qd),new bd(32,128,258,1024,Qd),new bd(32,258,258,4096,Qd)];"use strict";var ei=function(a,c){if(!a||!a.state||5<c||0>c)return a?nd(a,-2):-2;if(b=a.state,!a.output||!a.input&&0!==a.avail_in||666===b.status&&4!==c)return nd(a,0===a.avail_out?-5:-2);if(b.strm=a,d=b.last_flush,b.last_flush=c,42===b.status)if(2===b.wrap)a.adler=0,Eb(b,31),Eb(b,139),Eb(b,8),b.gzhead?(Eb(b,+!!b.gzhead.text+2*!!b.gzhead.hcrc+4*!!b.gzhead.extra+
8*!!b.gzhead.name+16*!!b.gzhead.comment),Eb(b,255&b.gzhead.time),Eb(b,b.gzhead.time>>8&255),Eb(b,b.gzhead.time>>16&255),Eb(b,b.gzhead.time>>24&255),Eb(b,9===b.level?2:4*(2<=b.strategy||2>b.level)),Eb(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(Eb(b,255&b.gzhead.extra.length),Eb(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(a.adler=gc(a.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(Eb(b,0),Eb(b,0),Eb(b,0),Eb(b,0),Eb(b,0),Eb(b,9===b.level?2:4*(2<=b.strategy||2>b.level)),
Eb(b,3),b.status=113);else{var d,b;var h=8+(b.w_bits-8<<4)<<8;h|=(2<=b.strategy||2>b.level?0:6>b.level?1:6===b.level?2:3)<<6;0!==b.strstart&&(h|=32);b.status=113;je(b,h+(31-h%31));0!==b.strstart&&(je(b,a.adler>>>16),je(b,65535&a.adler));a.adler=1}if(69===b.status)if(b.gzhead.extra){for(h=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>h&&(a.adler=gc(a.adler,b.pending_buf,b.pending-h,h)),pd(a),h=b.pending,b.pending!==b.pending_buf_size));)Eb(b,
255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>h&&(a.adler=gc(a.adler,b.pending_buf,b.pending-h,h));b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(73===b.status)if(b.gzhead.name){h=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>h&&(a.adler=gc(a.adler,b.pending_buf,b.pending-h,h)),pd(a),h=b.pending,b.pending===b.pending_buf_size)){var p=1;break}p=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):
0;Eb(b,p)}while(0!==p);b.gzhead.hcrc&&b.pending>h&&(a.adler=gc(a.adler,b.pending_buf,b.pending-h,h));0===p&&(b.gzindex=0,b.status=91)}else b.status=91;if(91===b.status)if(b.gzhead.comment){h=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>h&&(a.adler=gc(a.adler,b.pending_buf,b.pending-h,h)),pd(a),h=b.pending,b.pending===b.pending_buf_size)){p=1;break}p=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0;Eb(b,p)}while(0!==p);b.gzhead.hcrc&&b.pending>
h&&(a.adler=gc(a.adler,b.pending_buf,b.pending-h,h));0===p&&(b.status=103)}else b.status=103;if(103===b.status&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&pd(a),b.pending+2<=b.pending_buf_size&&(Eb(b,255&a.adler),Eb(b,a.adler>>8&255),a.adler=0,b.status=113)):b.status=113),0!==b.pending){if(pd(a),0===a.avail_out)return b.last_flush=-1,0}else if(0===a.avail_in&&(c<<1)-9*(4<c)<=(d<<1)-9*(4<d)&&4!==c)return nd(a,-5);if(666===b.status&&0!==a.avail_in)return nd(a,-5);if(0!==a.avail_in||0!==b.lookahead||
0!==c&&666!==b.status){d=2===b.strategy?function(g,e){for(var m;;){if(0===g.lookahead&&(Ad(g),0===g.lookahead)){if(0===e)return 1;break}if(g.match_length=0,m=qd(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++,m&&(mc(g,!1),0===g.strm.avail_out))return 1}return(g.insert=0,4===e)?(mc(g,!0),0===g.strm.avail_out)?3:4:g.last_lit&&(mc(g,!1),0===g.strm.avail_out)?1:2}(b,c):3===b.strategy?function(g,e){for(var m,l,k,n,r=g.window;;){if(258>=g.lookahead){if(Ad(g),258>=g.lookahead&&0===e)return 1;if(0===
g.lookahead)break}if(g.match_length=0,3<=g.lookahead&&0<g.strstart&&(l=r[k=g.strstart-1])===r[++k]&&l===r[++k]&&l===r[++k]){for(n=g.strstart+258;l===r[++k]&&l===r[++k]&&l===r[++k]&&l===r[++k]&&l===r[++k]&&l===r[++k]&&l===r[++k]&&l===r[++k]&&k<n;);g.match_length=258-(n-k);g.match_length>g.lookahead&&(g.match_length=g.lookahead)}if(3<=g.match_length?(m=qd(g,1,g.match_length-3),g.lookahead-=g.match_length,g.strstart+=g.match_length,g.match_length=0):(m=qd(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++),
m&&(mc(g,!1),0===g.strm.avail_out))return 1}return(g.insert=0,4===e)?(mc(g,!0),0===g.strm.avail_out)?3:4:g.last_lit&&(mc(g,!1),0===g.strm.avail_out)?1:2}(b,c):ke[b.level].func(b,c);if((3===d||4===d)&&(b.status=666),1===d||3===d)return 0===a.avail_out&&(b.last_flush=-1),0;if(2===d&&(1===c?ci(b):5!==c&&(xg(b,0,0,!1),3===c&&(od(b.head),0===b.lookahead&&(b.strstart=0,b.block_start=0,b.insert=0))),pd(a),0===a.avail_out))return b.last_flush=-1,0}return 4!==c?0:0>=b.wrap?1:(2===b.wrap?(Eb(b,255&a.adler),
Eb(b,a.adler>>8&255),Eb(b,a.adler>>16&255),Eb(b,a.adler>>24&255),Eb(b,255&a.total_in),Eb(b,a.total_in>>8&255),Eb(b,a.total_in>>16&255),Eb(b,a.total_in>>24&255)):(je(b,a.adler>>>16),je(b,65535&a.adler)),pd(a),0<b.wrap&&(b.wrap=-b.wrap),+(0===b.pending))};var fi=function(a){var c;return a&&a.state?42!==(c=a.state.status)&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c?nd(a,-2):(a.state=null,113===c?nd(a,-3):0):-2};var Eh=function(a,c){var d,b,h;var p=c.length;if(!a||!a.state||2===(b=(d=a.state).wrap)||
1===b&&42!==d.status||d.lookahead)return-2;1===b&&(a.adler=Pd(a.adler,c,p,0));d.wrap=0;p>=d.w_size&&(0===b&&(od(d.head),d.strstart=0,d.block_start=0,d.insert=0),h=new $a.Buf8(d.w_size),$a.arraySet(h,c,p-d.w_size,d.w_size,0),c=h,p=d.w_size);h=a.avail_in;var g=a.next_in;var e=a.input;a.avail_in=p;a.next_in=0;a.input=c;for(Ad(d);3<=d.lookahead;){c=d.strstart;p=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[c+3-1])&d.hash_mask,d.prev[c&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=c,c++;while(--p);
d.strstart=c;d.lookahead=2;Ad(d)}return d.strstart+=d.lookahead,d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=2,d.match_available=0,a.next_in=g,a.input=e,a.avail_in=h,d.wrap=b,0};var Bg=!0,Ag=!0;try{String.fromCharCode.apply(null,[0])}catch(a){Bg=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){Ag=!1}for(var re=new $a.Buf8(256),rd=0;256>rd;rd++)re[rd]=252<=rd?6:248<=rd?5:240<=rd?4:224<=rd?3:192<=rd?2:1;"use strict";re[254]=re[254]=1;var yf=
function(a){var c,d,b,h=a.length,p=0;for(b=0;b<h;b++)55296==(64512&(c=a.charCodeAt(b)))&&b+1<h&&56320==(64512&(d=a.charCodeAt(b+1)))&&(c=65536+(c-55296<<10)+(d-56320),b++),p+=128>c?1:2048>c?2:65536>c?3:4;var g=0;var e=new $a.Buf8(p);for(b=0;g<p;b++)55296==(64512&(c=a.charCodeAt(b)))&&b+1<h&&56320==(64512&(d=a.charCodeAt(b+1)))&&(c=65536+(c-55296<<10)+(d-56320),b++),128>c?e[g++]=c:(2048>c?e[g++]=192|c>>>6:(65536>c?e[g++]=224|c>>>12:(e[g++]=240|c>>>18,e[g++]=128|c>>>12&63),e[g++]=128|c>>>6&63),e[g++]=
128|63&c);return e};var gi=function(a){for(var c=new $a.Buf8(a.length),d=0,b=c.length;d<b;d++)c[d]=a.charCodeAt(d);return c};var hi=function(a,c){var d,b,h,p=c||a.length,g=Array(2*p);for(c=d=0;c<p;)if(128>(b=a[c++]))g[d++]=b;else if(4<(h=re[b]))g[d++]=65533,c+=h-1;else{for(b&=2===h?31:3===h?15:7;1<h&&c<p;)b=b<<6|63&a[c++],h--;1<h?g[d++]=65533:65536>b?g[d++]=b:(b-=65536,g[d++]=55296|b>>10&1023,g[d++]=56320|1023&b)}return zg(g,d)};var ii=function(a,c){var d;(c=c||a.length)>a.length&&(c=a.length);for(d=
c-1;0<=d&&128==(192&a[d]);)d--;return 0>d||0===d?c:d+re[a[d]]>c?d:c};var xf={};xf=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0};var Cg=Object.prototype.toString;"use strict";"use strict";Bd.prototype.push=function(a,c){var d,b,h=this.strm,p=this.options.chunkSize;if(this.ended)return!1;c=c===~~c?c:4*(!0===c);"string"==typeof a?h.input=yf(a):"[object ArrayBuffer]"===
Cg.call(a)?h.input=new Uint8Array(a):h.input=a;h.next_in=0;h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new $a.Buf8(p),h.next_out=0,h.avail_out=p),1!==(b=ei(h,c))&&0!==b)return this.onEnd(b),this.ended=!0,!1;(0===h.avail_out||0===h.avail_in&&(4===c||2===c))&&("string"===this.options.to?this.onData(zg(d=$a.shrinkBuf(h.output,h.next_out),d.length)):this.onData($a.shrinkBuf(h.output,h.next_out)))}while((0<h.avail_in||0===h.avail_out)&&1!==b);return 4===c?(b=fi(this.strm),this.onEnd(b),
this.ended=!0,0===b):(2===c&&(this.onEnd(0),h.avail_out=0),!0)};Bd.prototype.onData=function(a){this.chunks.push(a)};Bd.prototype.onEnd=function(a){0===a&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=$a.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var Yg=Bd;var Zg=zf;var $g=function(a,c){return(c=c||{}).raw=!0,zf(a,c)};var ah=function(a,c){return(c=c||{}).gzip=!0,zf(a,c)};"use strict";var se={};md(se,"Inflate",function(){return dh},function(a){return dh=
a});md(se,"inflate",function(){return eh},function(a){return eh=a});md(se,"inflateRaw",function(){return fh},function(a){return fh=a});md(se,"ungzip",function(){return gh},function(a){return gh=a});"use strict";var hh={};hh=function(a,c){var d,b,h,p;var g=a.state;var e=a.next_in;var m=a.input;var l=e+(a.avail_in-5);var k=a.next_out;var n=a.output;c=k-(c-a.avail_out);var r=k+(a.avail_out-257);var u=g.dmax;var v=g.wsize;var x=g.whave;var D=g.wnext;var H=g.window;var L=g.hold;var J=g.bits;var O=g.lencode;
var K=g.distcode;var X=(1<<g.lenbits)-1;var W=(1<<g.distbits)-1;a:do for(15>J&&(L+=m[e++]<<J,J+=8,L+=m[e++]<<J,J+=8),d=O[L&X];;){if(L>>>=b=d>>>24,J-=b,0==(b=d>>>16&255))n[k++]=65535&d;else if(16&b){var Y=65535&d;(b&=15)&&(J<b&&(L+=m[e++]<<J,J+=8),Y+=L&(1<<b)-1,L>>>=b,J-=b);15>J&&(L+=m[e++]<<J,J+=8,L+=m[e++]<<J,J+=8);for(d=K[L&W];;){if(L>>>=b=d>>>24,J-=b,16&(b=d>>>16&255)){if(h=65535&d,J<(b&=15)&&(L+=m[e++]<<J,(J+=8)<b&&(L+=m[e++]<<J,J+=8)),(h+=L&(1<<b)-1)>u){a.msg="invalid distance too far back";
g.mode=30;break a}if(L>>>=b,J-=b,h>(b=k-c)){if((b=h-b)>x&&g.sane){a.msg="invalid distance too far back";g.mode=30;break a}if(d=0,p=H,0===D){if(d+=v-b,b<Y){Y-=b;do n[k++]=H[d++];while(--b);d=k-h;p=n}}else if(D<b){if(d+=v+D-b,(b-=D)<Y){Y-=b;do n[k++]=H[d++];while(--b);if(d=0,D<Y){Y-=b=D;do n[k++]=H[d++];while(--b);d=k-h;p=n}}}else if(d+=D-b,b<Y){Y-=b;do n[k++]=H[d++];while(--b);d=k-h;p=n}for(;2<Y;)n[k++]=p[d++],n[k++]=p[d++],n[k++]=p[d++],Y-=3;Y&&(n[k++]=p[d++],1<Y&&(n[k++]=p[d++]))}else{d=k-h;do n[k++]=
n[d++],n[k++]=n[d++],n[k++]=n[d++],Y-=3;while(2<Y);Y&&(n[k++]=n[d++],1<Y&&(n[k++]=n[d++]))}}else if(0==(64&b)){d=K[(65535&d)+(L&(1<<b)-1)];continue}else{a.msg="invalid distance code";g.mode=30;break a}break}}else if(0==(64&b)){d=O[(65535&d)+(L&(1<<b)-1)];continue}else{32&b?g.mode=12:(a.msg="invalid literal/length code",g.mode=30);break a}break}while(e<l&&k<r);e-=Y=J>>3;J-=Y<<3;a.next_in=e;a.next_out=k;a.avail_in=e<l?5+(l-e):5-(e-l);a.avail_out=k<r?257+(r-k):257-(k-r);g.hold=L&(1<<J)-1;g.bits=J};var Ud=
{},ji=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ki=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],li=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],mi=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Ud=function(a,c,d,b,h,p,g,e){var m,l,k,n,r,u,v=e.bits,x,D,H,L,J,O=0,K,X=null,W=0,Y=
new $a.Buf16(16);var ka=new $a.Buf16(16);var va=null,Ia=0;for(x=0;15>=x;x++)Y[x]=0;for(D=0;D<b;D++)Y[c[d+D]]++;var S=15;for(H=v;1<=S&&0===Y[S];S--);if(H>S&&(H=S),0===S)return h[p++]=20971520,h[p++]=20971520,e.bits=1,0;for(v=1;v<S&&0===Y[v];v++);H<v&&(H=v);for(x=m=1;15>=x;x++)if(m<<=1,0>(m-=Y[x]))return-1;if(0<m&&(0===a||1!==S))return-1;x=1;for(ka[1]=0;15>x;x++)ka[x+1]=ka[x]+Y[x];for(D=0;D<b;D++)0!==c[d+D]&&(g[ka[c[d+D]]++]=D);if(0===a?(X=va=g,n=19):1===a?(X=ji,W-=257,va=ki,Ia-=257,n=256):(X=li,va=
mi,n=-1),K=0,D=0,x=v,ka=p,L=H,J=0,k=-1,b=(O=1<<H)-1,1===a&&852<O||2===a&&592<O)return 1;for(;;){var ya=x-J;g[D]<n?(r=0,u=g[D]):g[D]>n?(r=va[Ia+g[D]],u=X[W+g[D]]):(r=96,u=0);m=1<<x-J;v=l=1<<L;do h[ka+(K>>J)+(l-=m)]=ya<<24|r<<16|u|0;while(0!==l);for(m=1<<x-1;K&m;)m>>=1;if(0!==m?(K&=m-1,K+=m):K=0,D++,0==--Y[x]){if(x===S)break;x=c[d+g[D]]}if(x>H&&(K&b)!==k){0===J&&(J=H);ka+=v;for(m=1<<(L=x-J);L+J<S&&!(0>=(m-=Y[L+J]));)L++,m<<=1;if(O+=1<<L,1===a&&852<O||2===a&&592<O)return 1;h[k=K&b]=H<<24|L<<16|ka-p|
0}}return 0!==K&&(h[ka+K]=x-J<<24|4194304),e.bits=H,0};var ih=!0;"use strict";var ni=function(a,c){var d,b,h,p,g,e,m,l,k,n=0,r=new $a.Buf8(4),u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;12===(b=a.state).mode&&(b.mode=13);var v=a.next_out;var x=a.output;var D=a.avail_out;var H=a.next_in;var L=a.input;var J=a.avail_in;var O=b.hold;var K=b.bits;var X=J;var W=D;var Y=0;a:for(;;)switch(b.mode){case 1:if(0===b.wrap){b.mode=13;break}for(;16>
K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(2&b.wrap&&35615===O){b.check=0;r[0]=255&O;r[1]=O>>>8&255;b.check=gc(b.check,r,2,0);K=O=0;b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&O)<<8)+(O>>8))%31){a.msg="incorrect header check";b.mode=30;break}if(8!=(15&O)){a.msg="unknown compression method";b.mode=30;break}if(O>>>=4,K-=4,l=(15&O)+8,0===b.wbits)b.wbits=l;else if(l>b.wbits){a.msg="invalid window size";b.mode=30;break}b.dmax=1<<l;a.adler=b.check=1;b.mode=512&O?10:12;K=
O=0;break;case 2:for(;16>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(b.flags=O,8!=(255&b.flags)){a.msg="unknown compression method";b.mode=30;break}if(57344&b.flags){a.msg="unknown header flags set";b.mode=30;break}b.head&&(b.head.text=O>>8&1);512&b.flags&&(r[0]=255&O,r[1]=O>>>8&255,b.check=gc(b.check,r,2,0));K=O=0;b.mode=3;case 3:for(;32>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}b.head&&(b.head.time=O);512&b.flags&&(r[0]=255&O,r[1]=O>>>8&255,r[2]=O>>>16&255,r[3]=O>>>24&255,b.check=gc(b.check,
r,4,0));K=O=0;b.mode=4;case 4:for(;16>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}b.head&&(b.head.xflags=255&O,b.head.os=O>>8);512&b.flags&&(r[0]=255&O,r[1]=O>>>8&255,b.check=gc(b.check,r,2,0));K=O=0;b.mode=5;case 5:if(1024&b.flags){for(;16>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}b.length=O;b.head&&(b.head.extra_len=O);512&b.flags&&(r[0]=255&O,r[1]=O>>>8&255,b.check=gc(b.check,r,2,0));K=O=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&((h=b.length)>J&&(h=J),h&&(b.head&&(l=b.head.extra_len-
b.length,b.head.extra||(b.head.extra=Array(b.head.extra_len)),$a.arraySet(b.head.extra,L,H,h,l)),512&b.flags&&(b.check=gc(b.check,L,h,H)),J-=h,H+=h,b.length-=h),b.length))break a;b.length=0;b.mode=7;case 7:if(2048&b.flags){if(0===J)break a;h=0;do l=L[H+h++],b.head&&l&&65536>b.length&&(b.head.name+=String.fromCharCode(l));while(l&&h<J);if(512&b.flags&&(b.check=gc(b.check,L,h,H)),J-=h,H+=h,l)break a}else b.head&&(b.head.name=null);b.length=0;b.mode=8;case 8:if(4096&b.flags){if(0===J)break a;h=0;do l=
L[H+h++],b.head&&l&&65536>b.length&&(b.head.comment+=String.fromCharCode(l));while(l&&h<J);if(512&b.flags&&(b.check=gc(b.check,L,h,H)),J-=h,H+=h,l)break a}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;16>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(O!==(65535&b.check)){a.msg="header crc mismatch";b.mode=30;break}K=O=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0);a.adler=b.check=0;b.mode=12;break;case 10:for(;32>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}a.adler=b.check=
Dg(O);K=O=0;b.mode=11;case 11:if(0===b.havedict)return a.next_out=v,a.avail_out=D,a.next_in=H,a.avail_in=J,b.hold=O,b.bits=K,2;a.adler=b.check=1;b.mode=12;case 12:if(5===c||6===c)break a;case 13:if(b.last){O>>>=7&K;K-=7&K;b.mode=27;break}for(;3>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}switch(b.last=1&O,--K,3&(O>>>=1)){case 0:b.mode=14;break;case 1:if(ih){Jf=new $a.Buf32(512);Kf=new $a.Buf32(32);for(d=0;144>d;)b.lens[d++]=8;for(;256>d;)b.lens[d++]=9;for(;280>d;)b.lens[d++]=7;for(;288>d;)b.lens[d++]=
8;Ud(1,b.lens,0,288,Jf,0,b.work,{bits:9});for(d=0;32>d;)b.lens[d++]=5;Ud(2,b.lens,0,32,Kf,0,b.work,{bits:5});ih=!1}if(b.lencode=Jf,b.lenbits=9,b.distcode=Kf,b.distbits=5,b.mode=20,6===c){O>>>=2;K-=2;break a}break;case 2:b.mode=17;break;case 3:a.msg="invalid block type",b.mode=30}O>>>=2;K-=2;break;case 14:O>>>=7&K;for(K-=7&K;32>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if((65535&O)!=(O>>>16^65535)){a.msg="invalid stored block lengths";b.mode=30;break}if(b.length=65535&O,O=0,K=0,b.mode=15,6===c)break a;
case 15:b.mode=16;case 16:if(h=b.length){if(h>J&&(h=J),h>D&&(h=D),0===h)break a;$a.arraySet(x,L,H,h,v);J-=h;H+=h;D-=h;v+=h;b.length-=h;break}b.mode=12;break;case 17:for(;14>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(b.nlen=(31&O)+257,K-=5,b.ndist=(31&(O>>>=5))+1,K-=5,b.ncode=(15&(O>>>=5))+4,O>>>=4,K-=4,286<b.nlen||30<b.ndist){a.msg="too many length or distance symbols";b.mode=30;break}b.have=0;b.mode=18;case 18:for(;b.have<b.ncode;){for(;3>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}b.lens[u[b.have++]]=
7&O;O>>>=3;K-=3}for(;19>b.have;)b.lens[u[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,k={bits:b.lenbits},Y=Ud(0,b.lens,0,19,b.lencode,0,b.work,k),b.lenbits=k.bits,Y){a.msg="invalid code lengths set";b.mode=30;break}b.have=0;b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;g=(n=b.lencode[O&(1<<b.lenbits)-1])>>>24,e=65535&n,!(g<=K);){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(16>e)O>>>=g,K-=g,b.lens[b.have++]=e;else{if(16===e){for(d=g+2;K<d;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(O>>>=g,K-=
g,0===b.have){a.msg="invalid bit length repeat";b.mode=30;break}l=b.lens[b.have-1];h=3+(3&O);O>>>=2;K-=2}else if(17===e){for(d=g+3;K<d;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}O>>>=g;K-=g;l=0;h=3+(7&O);O>>>=3;K-=3}else{for(d=g+7;K<d;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}O>>>=g;K-=g;l=0;h=11+(127&O);O>>>=7;K-=7}if(b.have+h>b.nlen+b.ndist){a.msg="invalid bit length repeat";b.mode=30;break}for(;h--;)b.lens[b.have++]=l}}if(30===b.mode)break;if(0===b.lens[256]){a.msg="invalid code -- missing end-of-block";
b.mode=30;break}if(b.lenbits=9,k={bits:b.lenbits},Y=Ud(1,b.lens,0,b.nlen,b.lencode,0,b.work,k),b.lenbits=k.bits,Y){a.msg="invalid literal/lengths set";b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,k={bits:b.distbits},Y=Ud(2,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,k),b.distbits=k.bits,Y){a.msg="invalid distances set";b.mode=30;break}if(b.mode=20,6===c)break a;case 20:b.mode=21;case 21:if(6<=J&&258<=D){a.next_out=v;a.avail_out=D;a.next_in=H;a.avail_in=J;b.hold=O;b.bits=K;hh(a,W);v=a.next_out;
x=a.output;D=a.avail_out;H=a.next_in;L=a.input;J=a.avail_in;O=b.hold;K=b.bits;12===b.mode&&(b.back=-1);break}for(b.back=0;g=(n=b.lencode[O&(1<<b.lenbits)-1])>>>24,d=n>>>16&255,e=65535&n,!(g<=K);){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(d&&0==(240&d)){var ka=g;var va=d;for(m=e;g=(n=b.lencode[m+((O&(1<<ka+va)-1)>>ka)])>>>24,d=n>>>16&255,e=65535&n,!(ka+g<=K);){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}O>>>=ka;K-=ka;b.back+=ka}if(O>>>=g,K-=g,b.back+=g,b.length=e,0===d){b.mode=26;break}if(32&d){b.back=
-1;b.mode=12;break}if(64&d){a.msg="invalid literal/length code";b.mode=30;break}b.extra=15&d;b.mode=22;case 22:if(b.extra){for(d=b.extra;K<d;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}b.length+=O&(1<<b.extra)-1;O>>>=b.extra;K-=b.extra;b.back+=b.extra}b.was=b.length;b.mode=23;case 23:for(;g=(n=b.distcode[O&(1<<b.distbits)-1])>>>24,d=n>>>16&255,e=65535&n,!(g<=K);){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(0==(240&d)){ka=g;va=d;for(m=e;g=(n=b.distcode[m+((O&(1<<ka+va)-1)>>ka)])>>>24,d=n>>>16&255,e=65535&
n,!(ka+g<=K);){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}O>>>=ka;K-=ka;b.back+=ka}if(O>>>=g,K-=g,b.back+=g,64&d){a.msg="invalid distance code";b.mode=30;break}b.offset=e;b.extra=15&d;b.mode=24;case 24:if(b.extra){for(d=b.extra;K<d;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}b.offset+=O&(1<<b.extra)-1;O>>>=b.extra;K-=b.extra;b.back+=b.extra}if(b.offset>b.dmax){a.msg="invalid distance too far back";b.mode=30;break}b.mode=25;case 25:if(0===D)break a;if(h=W-D,b.offset>h){if((h=b.offset-h)>b.whave&&b.sane){a.msg=
"invalid distance too far back";b.mode=30;break}h>b.wnext?(h-=b.wnext,p=b.wsize-h):p=b.wnext-h;h>b.length&&(h=b.length);d=b.window}else d=x,p=v-b.offset,h=b.length;h>D&&(h=D);D-=h;b.length-=h;do x[v++]=d[p++];while(--h);0===b.length&&(b.mode=21);break;case 26:if(0===D)break a;x[v++]=b.length;D--;b.mode=21;break;case 27:if(b.wrap){for(;32>K;){if(0===J)break a;J--;O|=L[H++]<<K;K+=8}if(W-=D,a.total_out+=W,b.total+=W,W&&(a.adler=b.check=b.flags?gc(b.check,x,W,v-W):Pd(b.check,x,W,v-W)),W=D,(b.flags?O:
Dg(O))!==b.check){a.msg="incorrect data check";b.mode=30;break}K=O=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;32>K;){if(0===J)break a;J--;O+=L[H++]<<K;K+=8}if(O!==(4294967295&b.total)){a.msg="incorrect length check";b.mode=30;break}K=O=0}b.mode=29;case 29:Y=1;break a;case 30:Y=-3;break a;case 31:return-4;default:return-2}return(a.next_out=v,a.avail_out=D,a.next_in=H,a.avail_in=J,b.hold=O,b.bits=K,(b.wsize||W!==a.avail_out&&30>b.mode&&(27>b.mode||4!==c))&&Eg(a,a.output,a.next_out,W-a.avail_out))?
(b.mode=31,-4):(X-=a.avail_in,W-=a.avail_out,a.total_in+=X,a.total_out+=W,b.total+=W,b.wrap&&W&&(a.adler=b.check=b.flags?gc(b.check,x,W,a.next_out-W):Pd(b.check,x,W,a.next_out-W)),a.data_type=b.bits+64*!!b.last+128*(12===b.mode)+256*(20===b.mode||15===b.mode),(0===X&&0===W||4===c)&&0===Y&&(Y=-5),Y)};var oi=function(a){if(!a||!a.state)return-2;var c=a.state;return c.window&&(c.window=null),a.state=null,0};var Gh=function(a,c){var d;return a&&a.state&&0!=(2&(d=a.state).wrap)?(d.head=c,c.done=!1,0):
-2};var Hg=function(a,c){var d,b=c.length;return a&&a.state&&(0===(d=a.state).wrap||11===d.mode)?11===d.mode&&Pd(1,c,b,0)!==d.check?-3:Eg(a,c,b,b)?(d.mode=31,-4):(d.havedict=1,0):-2};"use strict";var Ub={};Ub={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,
Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Fg={};Fg=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1};var Gg=Object.prototype.toString;Cd.prototype.push=function(a,c){var d,b,h,p,g=this.strm,e=this.options.chunkSize,m=this.options.dictionary,l=!1;if(this.ended)return!1;c=c===~~c?c:!0===c?Ub.Z_FINISH:Ub.Z_NO_FLUSH;"string"==typeof a?g.input=gi(a):"[object ArrayBuffer]"===
Gg.call(a)?g.input=new Uint8Array(a):g.input=a;g.next_in=0;g.avail_in=g.input.length;do{if(0===g.avail_out&&(g.output=new $a.Buf8(e),g.next_out=0,g.avail_out=e),(d=ni(g,Ub.Z_NO_FLUSH))===Ub.Z_NEED_DICT&&m&&(d=Hg(this.strm,m)),d===Ub.Z_BUF_ERROR&&!0===l&&(d=Ub.Z_OK,l=!1),d!==Ub.Z_STREAM_END&&d!==Ub.Z_OK)return this.onEnd(d),this.ended=!0,!1;g.next_out&&(0===g.avail_out||d===Ub.Z_STREAM_END||0===g.avail_in&&(c===Ub.Z_FINISH||c===Ub.Z_SYNC_FLUSH))&&("string"===this.options.to?(b=ii(g.output,g.next_out),
h=g.next_out-b,p=hi(g.output,b),g.next_out=h,g.avail_out=e-h,h&&$a.arraySet(g.output,g.output,b,h,0),this.onData(p)):this.onData($a.shrinkBuf(g.output,g.next_out)));0===g.avail_in&&0===g.avail_out&&(l=!0)}while((0<g.avail_in||0===g.avail_out)&&d!==Ub.Z_STREAM_END);return(d===Ub.Z_STREAM_END&&(c=Ub.Z_FINISH),c===Ub.Z_FINISH)?(d=oi(this.strm),this.onEnd(d),this.ended=!0,d===Ub.Z_OK):(c===Ub.Z_SYNC_FLUSH&&(this.onEnd(Ub.Z_OK),g.avail_out=0),!0)};Cd.prototype.onData=function(a){this.chunks.push(a)};Cd.prototype.onEnd=
function(a){a===Ub.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=$a.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var dh=Cd;var eh=Af;var fh=function(a,c){return(c=c||{}).raw=!0,Af(a,c)};var gh=Af;var jh={};ai(jh,pe,se,Ub);Df=jh;Bf.FIXED_HEADER_LENGTH=16;Ge.HEADER_LENGTH=8;class kh{readFixedHeader(a){this.payloadOffset=a.readU32BE();this.blendMode=a.readU32BE();this.alpha=a.readU32BE();let c=a.readU32BE();this.visible=0!=(1&c);this.clip=
0!=(2&c);this.hasMask=0!=(4&c);this.maskLinked=0!=(8&c);this.maskVisible=0!=(16&c);this.expanded=0!=(32&c);this.lockAlpha=0!=(64&c);this.blendMode===T.LM_MULTIPLY&&0!=(128&c)&&(this.blendMode=T.LM_MULTIPLY2);this.nameLength=a.readU32BE()}getFixedHeaderLen(){return 20}getVariableHeaderLen(){return this.nameLength}readVariableSizeHeader(a){this.name=a.readString(this.nameLength)}decode(a){for(var c;;){if(0<this.skipBytes){if(this.skipBytes>=a.length)return this.skipBytes-=a.length,null;a=a.subarray(this.skipBytes);
this.skipBytes=0}switch(this.state){case 0:if(a.length<this.getFixedHeaderLen())break;c=new vb(a);this.readFixedHeader(c);a=a.subarray(c.pos);this.state=1;continue;case 1:if(a.length<this.getVariableHeaderLen())break;c=new vb(a);this.readVariableSizeHeader(c);this.layer=this.createLayer();this.hasMask&&(this.layer.setMask(new Za(this.width,this.height,8)),this.maskDecoder=new pi(this.layer.mask));this.layer instanceof Pa&&(this.colorDecoder=new qi(this.layer.image));this.skipBytes=this.payloadOffset-
this.getFixedHeaderLen();this.colorDecoder?this.state=3:this.maskDecoder?this.state=4:this.state=5;continue;case 3:if(a=this.colorDecoder.decode(a),this.colorDecoder.done){this.maskDecoder?this.state=4:this.state=5;continue}break;case 4:if(a=this.maskDecoder.decode(a),this.maskDecoder.done){this.state=5;continue}break;case 5:c=this.payloadOffset;this.colorDecoder&&(c+=this.colorDecoder.bytesTotal);this.maskDecoder&&(c+=this.maskDecoder.bytesTotal);this.state=6;this.skipBytes=this.chunkHeader.chunkSize-
c;continue;case 6:this.done=!0}break}return a}constructor(a,c,d){this.chunkHeader=a;this.width=c;this.height=d;this.nameLength=this.skipBytes=this.payloadOffset=this.state=0;this.done=!1;this.maskDecoder=this.colorDecoder=null}}class Hh extends kh{createLayer(){let a=new Pa(this.width,this.height,this.name);return a.setBlendMode(this.blendMode),a.setAlpha(this.alpha),a.setVisible(this.visible),a.setClip(this.clip),a.setMaskLinked(this.maskLinked),a.setMaskVisible(this.maskVisible),a.setLockAlpha(this.lockAlpha),
a}}class Ih extends kh{readFixedHeader(a){super.readFixedHeader.call(this,a);this.childLayers=a.readU32BE()}getFixedHeaderLen(){return super.getFixedHeaderLen.call(this)+4}createLayer(){let a=new nb(this.name,this.blendMode);return a.setAlpha(this.alpha),a.setVisible(this.visible),a.setExpanded(this.expanded),a.setMaskLinked(this.maskLinked),a.setMaskVisible(this.maskVisible),a}constructor(a,c,d){super(a,c,d);this.childLayers=0}}class qi{decode(a){if(null==a)return null;var c=this.bytesRead%G.BYTES_PER_PIXEL,
d=this.bytesRead-c;let b=0,h=[G.ALPHA_BYTE_OFFSET,G.RED_BYTE_OFFSET,G.GREEN_BYTE_OFFSET,G.BLUE_BYTE_OFFSET];for(;c<G.BYTES_PER_PIXEL&&b<a.length;c++)this.output[d+h[c]]=a[b],b++;this.bytesRead+=b;var p=0|Math.min(a.length-b,this.bytesTotal-this.bytesRead);c=p/G.BYTES_PER_PIXEL|0;p%=G.BYTES_PER_PIXEL;for(d=0;d<c;d++)this.output[this.bytesRead+G.ALPHA_BYTE_OFFSET]=a[b],this.output[this.bytesRead+G.RED_BYTE_OFFSET]=a[b+1],this.output[this.bytesRead+G.GREEN_BYTE_OFFSET]=a[b+2],this.output[this.bytesRead+
G.BLUE_BYTE_OFFSET]=a[b+3],this.bytesRead+=G.BYTES_PER_PIXEL,b+=G.BYTES_PER_PIXEL;c=0;for(d=this.bytesRead;c<p;c++)this.output[d+h[c]]=a[b],b++;return(this.bytesRead+=p,this.bytesRead>=this.bytesTotal&&(this.done=!0),b<a.length)?a.subarray(b):null}constructor(a){this.bytesRead=0;this.bytesTotal=a.width*a.height*G.BYTES_PER_PIXEL;this.output=a.data;this.done=!1}}class pi{decode(a){if(null==a)return null;let c=0|Math.min(a.length,this.bytesTotal-this.bytesRead),d=this.bytesRead,b;for(b=0;b<c;b++,d++)this.output[d]=
a[b];return(this.bytesRead=d,this.bytesRead>=this.bytesTotal&&(this.done=!0),b<a.length)?a.subarray(b):null}constructor(a){this.bytesRead=0;this.bytesTotal=a.width*a.height;this.output=a.data;this.done=!1}}Rd.prototype.read=function(a){if(null==a)return null;var c=new vb(new Uint8Array(a)),d=[];if(1!=c.readU16BE())return null;a=c.readU16BE();for(var b=0;b<a;b++)if(0==c.readU16BE()){var h=255*c.readU16BE()/65535,p=255*c.readU16BE()/65535,g=255*c.readU16BE()/65535;c.readU16BE();d.push(h<<16|p<<8|g)}return d};
Rd.prototype.write=function(a){var c=new vb(new Uint8Array(4+10*a.length));c.writeU16BE(1);c.writeU16BE(a.length);for(var d=0;d<a.length;d++){var b=a[d];c.writeU16BE(0);c.writeU16BE(257*(b>>16&255));c.writeU16BE(257*(b>>8&255));c.writeU16BE(257*(255&b));c.writeU16BE(0)}return c.getAsDataArray()};He.prototype=Object.create(pa(Yb).prototype);He.prototype.constructor=He;var me={};var lh=function(){function a(g,e,m){var l=new XMLHttpRequest;l.open("GET",g);l.responseType="blob";l.onload=function(){p(l.response,
e,m)};l.onerror=function(){console.error("could not download file")};l.send()}function c(g){var e=new XMLHttpRequest;e.open("HEAD",g,!1);try{e.send()}catch(m){}return 200<=e.status&&299>=e.status}function d(g){try{g.dispatchEvent(new MouseEvent("click"))}catch(m){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null);g.dispatchEvent(e)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:
"object"==typeof Xe&&Xe.global===Xe?Xe:void 0,h=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(g,e,m){var l=b.URL||b.webkitURL,k=document.createElement("a");k.download=e=e||g.name||"download";k.rel="noopener";"string"==typeof g?(k.href=g,k.origin===location.origin?d(k):c(k.href)?a(g,e,m):d(k,k.target="_blank")):
(k.href=l.createObjectURL(g),setTimeout(function(){l.revokeObjectURL(k.href)},4E4),setTimeout(function(){d(k)},0))}:"msSaveOrOpenBlob"in navigator?function(g,e,m){if(e=e||g.name||"download","string"!=typeof g){var l;navigator.msSaveOrOpenBlob((void 0===(l=m)?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\ufeff",g],
{type:g.type}):g),e)}else if(c(g))a(g,e,m);else{var k=document.createElement("a");k.href=g;k.target="_blank";setTimeout(function(){d(k)})}}:function(g,e,m,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),"string"==typeof g)return a(g,e,m);e="application/octet-stream"===g.type;m=/constructor/i.test(b.HTMLElement)||b.safari;var k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||e&&m||h)&&"undefined"!=typeof FileReader){var n=new FileReader;n.onloadend=function(){var v=
n.result;v=k?v:v.replace(/^data:[^;]*;/,"data:attachment/file;");l?l.location.href=v:location=v;l=null};n.readAsDataURL(g)}else{var r=b.URL||b.webkitURL,u=r.createObjectURL(g);l?l.location=u:location.href=u;l=null;setTimeout(function(){r.revokeObjectURL(u)},4E4)}});me=b.saveAs=p.saveAs=p};"function"==typeof define&&define.amd?define([],lh):lh();var Je={};Je=JSON.parse('{"Dodge (tool)":"Dodge","Burn (tool)":"Burn","Color (picker)":"Color","Color swatches (shorter)":"Swatches"}');let Ff={ja:JSON.parse('{"File":"\u30d5\u30a1\u30a4\u30eb","Save to my computer":"PC\u306b\u4fdd\u5b58","Post Oekaki":"\u753b\u50cf\u3092\u6295\u7a3f","Edit":"\u7de8\u96c6","Undo":"\u53d6\u308a\u6d88\u3057","Redo":"\u3084\u308a\u76f4\u3057","Cut":"\u5207\u308a\u53d6\u308a","Copy":"\u30b3\u30d4\u30fc","Clear history":"\u5c65\u6b74\u6d88\u53bb","Copy merged":"\u7d50\u5408\u30b3\u30d4\u30fc","Paste":"\u8cbc\u308a\u4ed8\u3051","Select all":"\u3059\u3079\u3066\u9078\u629e","Deselect":"\u9078\u629e\u89e3\u9664","Transform":"\u5909\u5f62","Layers":"\u30ec\u30a4\u30e4\u30fc","Duplicate":"\u8907\u88fd","Merge down":"\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u3068\u7d50\u5408","Merge group":"\u30b0\u30eb\u30fc\u30d7\u7d50\u5408","Merge all layers":"\u5168\u30ec\u30a4\u30e4\u30fc\u7d50\u5408","Add layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u8ffd\u52a0","Delete mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u524a\u9664","Delete layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u524a\u9664","Apply mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u9069\u7528","Apply layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u9069\u7528","Disable mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u7121\u52b9\u5316","Enable mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u6709\u52b9\u5316","Clip to the layer below":"\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u30af\u30ea\u30c3\u30d4\u30f3\u30b0","Unclip from the layer below":"\u30af\u30ea\u30c3\u30d4\u30f3\u30b0\u89e3\u9664","Effects":"\u52b9\u679c","Clear":"\u6d88\u53bb","Fill":"\u5857\u308a\u6f70\u3057","Flip horizontal":"\u5de6\u53f3\u53cd\u8ee2","Flip vertical":"\u4e0a\u4e0b\u53cd\u8ee2","Invert":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Convert brightness to opacity":"\u8f1d\u5ea6\u3092\u900f\u660e\u5ea6\u306b\u5909\u63db","Box blur...":"\u307c\u304b\u3057","Box blur":"\u307c\u304b\u3057","Blur amount (pixels)":"\u307c\u304b\u3057\u91cf(\u30d4\u30af\u30bb\u30eb\u5358\u4f4d)","Iterations (1-8, larger gives smoother blur)":"\u53cd\u5fa9(1-8,\u5927\u304d\u3044\u307b\u3069\u307c\u304b\u3057\u304c\u6ed1\u3089\u304b)","Monochromatic noise":"\u5358\u8272\u30ce\u30a4\u30ba","Color noise":"\u30ab\u30e9\u30fc\u30ce\u30a4\u30ba","View":"\u8868\u793a","Full-screen mode":"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3\u30e2\u30fc\u30c9","Zoom in":"\u62e1\u5927","Zoom out":"\u7e2e\u5c0f","Zoom 100%":"100%","Smooth-out zoomed canvas":"\u30ba\u30fc\u30e0\u3092\u306a\u3081\u3089\u304b\u306b\u8868\u793a\u3059\u308b","Show grid":"\u30b0\u30ea\u30c3\u30c9\u3092\u8868\u793a","Grid options...":"\u30b0\u30ea\u30c3\u30c9\u306e\u8a2d\u5b9a","Palettes":"\u30d1\u30ec\u30c3\u30c8","Rearrange":"\u521d\u671f\u5316","Toggle palettes":"\u8868\u793a\u975e\u8868\u793a\u5207\u308a\u66ff\u3048","Use old icons":"\u53e4\u3044\u30a2\u30a4\u30b3\u30f3","Show tool options":"\u30c4\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3","Show color":"\u30ab\u30e9\u30fc","Show layers":"\u30ec\u30a4\u30e4\u30fc","Show misc":"\u64cd\u4f5c","Show stroke":"\u30b9\u30c8\u30ed\u30fc\u30af","Show swatches":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Show textures":"\u30c6\u30af\u30b9\u30c1\u30e3","Show tools":"\u30c4\u30fc\u30eb","Help":"\u30d8\u30eb\u30d7","Tablet support":"\u30bf\u30d6\u30ec\u30c3\u30c8\u30b5\u30dd\u30fc\u30c8","Shortcuts":"\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8","About":"ChickenPaint Be\u306b\u3064\u3044\u3066","Removes all undo/redo information to regain memory":"\u5c65\u6b74\u3092\u30af\u30ea\u30a2\u3057\u3066\u30e1\u30e2\u30ea\u3092\u958b\u653e\u3057\u307e\u3059","Clears the selected area":"\u6d88\u53bb","Invert the image colors":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Blur effect":"\u307c\u304b\u3057\u30d5\u30a3\u30eb\u30bf","Fills the selection with noise":"\u5358\u8272\u30ce\u30a4\u30ba\u3067\u5857\u308a\u6f70\u3057","Fills the selection with colored noise":"\u30ab\u30e9\u30fc\u30ce\u30a4\u30ba\u3067\u5857\u308a\u6f70\u3057","Linear interpolation is used to give a smoothed looked to the picture when zoomed in":"\u753b\u50cf\u306e\u62e1\u5927\u6642\u306b\u88dc\u5b8c\u3057\u3066\u6ed1\u3089\u304b\u306b\u8868\u793a\u3057\u307e\u3059","Rearrange the palette windows":"\u30d1\u30ec\u30c3\u30c8\u3092\u518d\u914d\u7f6e","Hides or shows all palettes":"\u30d1\u30ec\u30c3\u30c8\u306e\u8868\u793a/\u975e\u8868\u793a","You\'re about to clear the current Undo/Redo history.\\nThis operation cannot be undone, are you sure you want to do that?":"\u30a2\u30f3\u30c9\u30a5\u30fb\u30ea\u30c9\u30a5\u306e\u5c65\u6b74\u3092\u6d88\u53bb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3053\u306e\u64cd\u4f5c\u306f\u5143\u306b\u623b\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u672c\u5f53\u306b\u5b9f\u884c\u3057\u307e\u3059\u304b?","Misc":"\u64cd\u4f5c","Round Pixelated":"\u5186\u30d4\u30af\u30bb\u30eb","Round Hard Edge":"\u5186\u30cf\u30fc\u30c9\u30a8\u30c3\u30b8","Round Soft":"\u5186\u30bd\u30d5\u30c8","Square Pixelated":"\u89d2\u30d4\u30af\u30bb\u30eb","Square Hard Edge":"\u89d2\u30cf\u30fc\u30c9\u30a8\u30c3\u30b8","Color (picker)":"\u30ab\u30e9\u30fc","Tool options":"\u30c4\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3","Brush size":"\u30d6\u30e9\u30b7\u30b5\u30a4\u30ba","Opacity":"\u4e0d\u900f\u660e\u5ea6","Color":"\u8272\u88dc\u5145","Blend":"\u6df7\u8272","Spacing":"\u9593\u9694","Scattering":"\u6563\u4e71","Smoothing":"\u624b\u3076\u308c\u88dc\u6b63","Color swatches":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Color swatches (shorter)":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Remove":"\u524a\u9664","Replace with current color":"\u9078\u629e\u4e2d\u306e\u8272\u306b\u7f6e\u304d\u63db\u3048","Save swatches to your computer...":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8\u3092PC\u306b\u4fdd\u5b58","Load swatches from your computer...":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8\u3092PC\u304b\u3089\u8aad\u307f\u8fbc\u307f","Add the current brush color as a new swatch":"\u9078\u629e\u4e2d\u306e\u8272\u3092\u8ffd\u52a0","Sample all layers":"\u5168\u30ec\u30a4\u30e4\u30fc\u6df7\u5408","Lock transparency":"\u900f\u660e\u90e8\u5206\u3092\u4fdd\u8b77","Textures":"\u30c6\u30af\u30b9\u30c1\u30e3","Customize":"\u30ab\u30b9\u30bf\u30de\u30a4\u30ba","Inverse":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Mirror":"\u5de6\u53f3\u53cd\u8ee2","Brightness":"\u8f1d\u5ea6","Contrast":"\u30b3\u30f3\u30c8\u30e9\u30b9\u30c8","Reset":"\u30ea\u30bb\u30c3\u30c8","Layer blending mode":"\u5408\u6210\u30e2\u30fc\u30c9","Normal":"\u901a\u5e38","Multiply":"\u4e57\u7b97","Add":"\u52a0\u7b97","Screen":"\u30b9\u30af\u30ea\u30fc\u30f3","Lighten":"\u6bd4\u8f03(\u660e)","Darken":"\u6bd4\u8f03(\u6697)","Subtract":"\u6e1b\u7b97","Dodge":"\u8986\u3044\u713c\u304d","Burn":"\u713c\u304d\u8fbc\u307f","Overlay":"\u30aa\u30fc\u30d0\u30fc\u30ec\u30a4","Hard Light":"\u30cf\u30fc\u30c9\u30e9\u30a4\u30c8","Soft Light":"\u30bd\u30d5\u30c8\u30e9\u30a4\u30c8","Vivid Light":"\u30d3\u30d3\u30c3\u30c9\u30e9\u30a4\u30c8","Linear Light":"\u30ea\u30cb\u30a2\u30e9\u30a4\u30c8","Pin Light":"\u30d4\u30f3\u30e9\u30a4\u30c8","Passthrough":"\u901a\u904e","Stroke":"\u30b9\u30c8\u30ed\u30fc\u30af","Free-hand":"\u30d5\u30ea\u30fc\u30cf\u30f3\u30c9","Straight line":"\u76f4\u7dda","Bezier curve":"Bz\uff08\u30d9\u30b8\u30a7\uff09\u66f2\u7dda","Tools":"\u30c4\u30fc\u30eb","Marquee":"\u9078\u629e\u7bc4\u56f2","Move tool":"\u79fb\u52d5","Flood fill":"\u5857\u308a\u6f70\u3057","Gradient fill":"\u30b0\u30e9\u30c7\u30fc\u30b7\u30e7\u30f3","Color picker":"\u30b9\u30dd\u30a4\u30c8","Rotate canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u56de\u8ee2","Grab canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u4f4d\u7f6e","Pencil":"\u925b\u7b46","Pen":"\u30da\u30f3","Airbrush":"\u30a8\u30a2\u30d6\u30e9\u30b7","Waterpaint":"\u6c34\u5f69","Eraser":"\u6d88\u3057\u30b4\u30e0","Soft eraser":"\u8584\u6d88\u3057","Smudge":"\u6307\u5148","Blender":"\u6df7\u8272","Dodge (tool)":"\u8986\u3044\u713c\u304d","Burn (tool)":"\u713c\u304d\u8fbc\u307f","Blur":"\u307c\u304b\u3057","Grid options":"\u30b0\u30ea\u30c3\u30c9\u306e\u8a2d\u5b9a","Grid size":"\u30b0\u30ea\u30c3\u30c9\u30b5\u30a4\u30ba","Rename...":"\u540d\u524d\u3092\u5909\u66f4","Add layer":"\u65b0\u898f\u30ec\u30a4\u30e4\u30fc","Delete layer":"\u30ec\u30a4\u30e4\u30fc\u524a\u9664","Add group":"\u65b0\u898f\u30b0\u30eb\u30fc\u30d7","Delete group":"\u30b0\u30eb\u30fc\u30d7\u524a\u9664","Add mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u8ffd\u52a0","Gradient":"\u30b0\u30e9\u30c7\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210","Transform style":"\u5909\u5f62\u30b9\u30bf\u30a4\u30eb","Apply transform":"\u5909\u5f62\u78ba\u5b9a","Complete transform":"\u5909\u5f62\u3092\u5b8c\u4e86","Undo transform":"\u53d6\u308a\u6d88\u3057","You need to finish transforming this layer before you can do that. What would you like to do with the transform?":"\u7d9a\u884c\u3059\u308b\u305f\u3081\u306b\u5909\u5f62\u3092\u5b8c\u4e86\u3057\u307e\u3059\u3002","Smooth":"\u30b9\u30e0\u30fc\u30ba","Sharp":"\u30b7\u30e3\u30fc\u30d7","Opacity: ":"\u4e0d\u900f\u660e\u5ea6:","Please enter a color in hex format":"16\u9032\u5f62\u5f0f\u3067\u8272\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff08#xxxxxx\u306e\u5f62\uff09","Cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","Ok":"OK","Okay":"OK","OK":"OK","Whoops! This layer is currently hidden":"\u975e\u8868\u793a\u30ec\u30a4\u30e4\u30fc\u3067\u3059\u3002","Whoops! This layer\'s opacity is currently 0%":"\u30ec\u30a4\u30e4\u30fc\u306e\u4e0d\u900f\u660e\u5ea6\u304c0%\u3067\u3059","Whoops! You can\'t draw on a group":"\u30b0\u30eb\u30fc\u30d7\u30d5\u30a9\u30eb\u30c0\u306b\u306f\u63cf\u3051\u307e\u305b\u3093","Whoops! All of the selected pixels are transparent!":"\u30ec\u30a4\u30e4\u30fc\u304c\u7a7a\u3067\u3059","Image":"\u753b\u50cf","Layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af","Sorry, you can\'t remove the last remaining layer in the drawing.":"\u6700\u5f8c\u306e1\u3064\u306a\u306e\u3067\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002","Are you sure you want to send your drawing to the server and finish drawing now?":"\u753b\u50cf\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\u7d42\u4e86\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","Your drawing has unsaved changes! Are you sure to want to navigate away?":"\u753b\u50cf\u306b\u672a\u4fdd\u5b58\u306e\u5909\u66f4\u304c\u3042\u308a\u307e\u3059\u3002\u7d42\u4e86\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover.":"\u5229\u7528\u53ef\u80fd\u306a\u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u306e\u3044\u304f\u3064\u304b\u306f\u30e1\u30cb\u30e5\u30fc\u306e\u6a2a\u3084\u30c4\u30fc\u30eb\u30c1\u30c3\u30d7\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002","Here are some other shortcuts which are not as obvious!":"\u3053\u306e\u4e00\u89a7\u306f\u305d\u308c\u4ee5\u5916\u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002","Right":"\u53f3","Left":"\u5de6","Middle":"\u4e2d","or":"\u307e\u305f\u306f","Double click":"\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af","Color swatches palette":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Use as the drawing color":"\u30d1\u30ec\u30c3\u30c8\u306e\u8272\u3092\u53d6\u5f97","Remove or replace a color swatch":"\u30d1\u30ec\u30c3\u30c8\u306e\u5909\u66f4\uff65\u524a\u9664","Line drawing mode":"\u76f4\u7dda\u30e2\u30fc\u30c9","Snap line to nearest 45 degrees":"45\u00b0\u5358\u4f4d\u3067\u30b9\u30ca\u30c3\u30d7","Painting tools":"\u30c4\u30fc\u30eb","Change brush opacity":"\u30d6\u30e9\u30b7\u306e\u4e0d\u900f\u660e\u5ea6","Change brush size":"\u30d6\u30e9\u30b7\u30b5\u30a4\u30ba","Brush palette":"\u30d6\u30e9\u30b7\u30d1\u30ec\u30c3\u30c8","Adjust brush sliders more precisely":"\u30d6\u30e9\u30b7\u30b9\u30e9\u30a4\u30c0\u30fc\u3092\u3088\u308a\u7d30\u304b\u304f\u8abf\u6574","Drawing canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9","Move the canvas around":"\u30ad\u30e3\u30f3\u30d0\u30b9\u3092\u79fb\u52d5","Rotate the canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u56de\u8ee2","Sample the color under the cursor":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u8272\u3092\u30b9\u30dd\u30a4\u30c8","Layers palette":"\u30ec\u30a4\u30e4\u30fc\u30d1\u30ec\u30c3\u30c8","Rename layer":"\u30ec\u30a4\u30e4\u30fc\u540d\u5909\u66f4","Toggle mask enable/disable":"\u30de\u30b9\u30af\u306e\u6709\u52b9/\u7121\u52b9\u5207\u308a\u66ff\u3048","Toggle mask View":"\u30de\u30b9\u30af\u306e\u8868\u793a/\u975e\u8868\u793a\u5207\u308a\u66ff\u3048","Save Oekaki":"\u4fdd\u5b58","Saving drawing...":"\u753b\u50cf\u3092\u4fdd\u5b58\u4e2d\u2026","Preparing your drawing to be saved, please wait...":"\u753b\u50cf\u3092\u4fdd\u5b58\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u2026","Drawing saved!":"\u753b\u50cf\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f\uff01","Your drawing has been saved, would you like to post it to the forum now?":"\u753b\u50cf\u306e\u4fdd\u5b58\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\u30d5\u30a9\u30fc\u30e9\u30e0\u3078\u6295\u7a3f\u3057\u307e\u3059\u304b\uff1f","Yes, post it now":"\u306f\u3044\u3001\u6295\u7a3f\u3057\u307e\u3059","No, keep drawing":"\u307e\u3060\u63cf\u304d\u307e\u3059","No, quit and I\'ll finish it later":"\u30a2\u30d7\u30ea\u3092\u7d42\u4e86\u3057\u3066\u7d9a\u304d\u3092\u5f8c\u3067\u63cf\u304f","Your drawing has been saved, would you like to view it on the forum now?":"\u753b\u50cf\u306e\u4fdd\u5b58\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\u30d5\u30a9\u30fc\u30e9\u30e0\u3078\u6295\u7a3f\u3057\u307e\u3059\u304b\uff1f","Yes, view the post":"\u306f\u3044\u3001\u6295\u7a3f\u3057\u307e\u3059\u3002","Your drawing has been saved, redirecting you to view your new post now...":"\u753b\u50cf\u306e\u4fdd\u5b58\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\u6295\u7a3f\u5148\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002","Sorry, your drawing could not be saved, Please see the error message.":"\u753b\u50cf\u3092\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002","Sorry, your drawing could not be saved, please try again later.":"\u753b\u50cf\u3092\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u6642\u9593\u3092\u7f6e\u3044\u3066\u518d\u5ea6\u6295\u7a3f\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002","The error returned from the server was":"\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u8fd4\u3063\u3066\u6765\u305f\u30a8\u30e9\u30fc","The file size exceeds the server limit.":"\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u304c\u30b5\u30fc\u30d0\u30fc\u306e\u4e0a\u9650\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002","The total size of FormData is within the acceptable range.":"FormData\u306e\u5408\u8a08\u30b5\u30a4\u30ba\u306f\u5236\u9650\u7bc4\u56f2\u5185\u3067\u3059\u3002","Limit size":"\u4e0a\u9650\u30b5\u30a4\u30ba","Current size":"\u73fe\u5728\u306e\u30b5\u30a4\u30ba","Network response was not OK":"\u901a\u4fe1\u30a8\u30e9\u30fc","HTTP status code":"HTTP\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9"}'),
en:Je},Ie=Je,Gf="en";le.prototype=Object.create(pa(Yb).prototype);le.prototype.constructor=le;var oc={};oc=function(){function a(q,z){return z&&`${z}::${Rc++}`||q.uidEvent||Rc++}function c(q){let z=a(q);return q.uidEvent=z,Xa[z]=Xa[z]||{},Xa[z]}function d(q,z,f=null){return Object.values(q).find(t=>t.callable===z&&t.delegationSelector===f)}function b(q,z,f){let t="string"==typeof z,w=g(q);return A.has(w)||(w=q),[t,t?f:z||f,w]}function h(q,z,f,t,w){var y,B;if("string"==typeof z&&q){var [E,I,P]=b(z,
f,t);if(z in Sc){let V;V=I;I=function(Z){if(!Z.relatedTarget||Z.relatedTarget!==Z.delegateTarget&&!Z.delegateTarget.contains(Z.relatedTarget))return V.call(this,Z)}}t=c(q);t=t[P]||(t[P]={});var M=d(t,I,E?f:null);if(M)return void(M.oneOff=M.oneOff&&w);z=a(I,z.replace(Va,""));M=E?(y=I,function U(Z){let oa=q.querySelectorAll(f);for(let {target:qa}=Z;qa&&qa!==this;qa=qa.parentNode)for(let ua of oa)if(ua===qa)return e(Z,{delegateTarget:qa}),U.oneOff&&sa.off(q,Z.type,f,y),y.apply(qa,[Z])}):(B=I,function oa(U){return e(U,
{delegateTarget:q}),oa.oneOff&&sa.off(q,U.type,B),B.apply(q,[U])});M.delegationSelector=E?f:null;M.callable=I;M.oneOff=w;M.uidEvent=z;t[z]=M;q.addEventListener(P,M,E)}}function p(q,z,f,t,w){(t=d(z[f],t,w))&&(q.removeEventListener(f,t,!!w),delete z[f][t.uidEvent])}function g(q){return Sc[q=q.replace(eb,"")]||q}function e(q,z={}){for(let [f,t]of Object.entries(z))try{q[f]=t}catch(w){Object.defineProperty(q,f,{configurable:!0,get:()=>t})}return q}function m(q){if("true"===q)return!0;if("false"===q)return!1;
if(q===Number(q).toString())return Number(q);if(""===q||"null"===q)return null;if("string"!=typeof q)return q;try{return JSON.parse(decodeURIComponent(q))}catch(z){return q}}function l(q){return q.replace(/[A-Z]/g,z=>`-${z.toLowerCase()}`)}function k(q){return q?(q.nodeName||"").toLowerCase():null}function n(q){return null==q?window:"[object Window]"!==q.toString()?(q=q.ownerDocument)&&q.defaultView||window:q}function r(q){return q instanceof n(q).Element||q instanceof Element}function u(q){return q instanceof
n(q).HTMLElement||q instanceof HTMLElement}function v(q){return"undefined"!=typeof ShadowRoot&&(q instanceof n(q).ShadowRoot||q instanceof ShadowRoot)}function x(q){return q.split("-")[0]}function D(){var q=navigator.userAgentData;return null!=q&&q.brands&&Array.isArray(q.brands)?q.brands.map(function(z){return z.brand+"/"+z.version}).join(" "):navigator.userAgent}function H(){return!/^((?!chrome|android).)*safari/i.test(D())}function L(q,z,f){void 0===z&&(z=!1);void 0===f&&(f=!1);var t=q.getBoundingClientRect(),
w=1,y=1;z&&u(q)&&(w=0<q.offsetWidth&&Sa(t.width)/q.offsetWidth||1,y=0<q.offsetHeight&&Sa(t.height)/q.offsetHeight||1);q=(r(q)?n(q):window).visualViewport;z=!H()&&f;f=(t.left+(z&&q?q.offsetLeft:0))/w;q=(t.top+(z&&q?q.offsetTop:0))/y;w=t.width/w;t=t.height/y;return{width:w,height:t,top:q,right:f+w,bottom:q+t,left:f,x:f,y:q}}function J(q){var z=L(q),f=q.offsetWidth,t=q.offsetHeight;return 1>=Math.abs(z.width-f)&&(f=z.width),1>=Math.abs(z.height-t)&&(t=z.height),{x:q.offsetLeft,y:q.offsetTop,width:f,
height:t}}function O(q,z){var f=z.getRootNode&&z.getRootNode();if(q.contains(z))return!0;if(f&&v(f)){do{if(z&&q.isSameNode(z))return!0;z=z.parentNode||z.host}while(z)}return!1}function K(q){return n(q).getComputedStyle(q)}function X(q){return((r(q)?q.ownerDocument:q.document)||window.document).documentElement}function W(q){return"html"===k(q)?q:q.assignedSlot||q.parentNode||(v(q)?q.host:null)||X(q)}function Y(q){return u(q)&&"fixed"!==K(q).position?q.offsetParent:null}function ka(q){for(var z=n(q),
f=Y(q);f&&0<=["table","td","th"].indexOf(k(f))&&"static"===K(f).position;)f=Y(f);if(!f||"html"!==k(f)&&("body"!==k(f)||"static"!==K(f).position)){if(!f)a:{f=/firefox/i.test(D());if(!/Trident/i.test(D())||!u(q)||"fixed"!==K(q).position)for(q=W(q),v(q)&&(q=q.host);u(q)&&0>["html","body"].indexOf(k(q));){var t=K(q);if("none"!==t.transform||"none"!==t.perspective||"paint"===t.contain||-1!==["transform","perspective"].indexOf(t.willChange)||f&&"filter"===t.willChange||f&&t.filter&&"none"!==t.filter){f=
q;break a}q=q.parentNode}f=null}z=f||z}return z}function va(q){return 0<=["top","bottom"].indexOf(q)?"x":"y"}function Ia(q){return Object.assign({},{top:0,right:0,bottom:0,left:0},q)}function S(q,z){return z.reduce(function(f,t){return f[t]=q,f},{})}function ya(q){return q.split("-")[1]}function na(q){var z,f=q.popper,t=q.popperRect,w=q.placement,y=q.variation,B=q.offsets,E=q.position,I=q.gpuAcceleration,P=q.adaptive,M=q.roundOffsets,V=q.isFixed;q=B.x;q=void 0===q?0:q;var Z=B.y;Z=void 0===Z?0:Z;Z=
"function"==typeof M?M({x:q,y:Z}):{x:q,y:Z};q=Z.x;Z=Z.y;var U=B.hasOwnProperty("x");B=B.hasOwnProperty("y");var oa="left",qa="top",ua=window;if(P){var Ea=ka(f),fb="clientHeight",Fa="clientWidth";Ea===n(f)&&"static"!==K(Ea=X(f)).position&&"absolute"===E&&(fb="scrollHeight",Fa="scrollWidth");("top"===w||("left"===w||"right"===w)&&"end"===y)&&(qa="bottom",Z-=(V&&Ea===ua&&ua.visualViewport?ua.visualViewport.height:Ea[fb])-t.height,Z*=I?1:-1);"left"!==w&&("top"!==w&&"bottom"!==w||"end"!==y)||(oa="right",
q-=(V&&Ea===ua&&ua.visualViewport?ua.visualViewport.width:Ea[Fa])-t.width,q*=I?1:-1)}var Ga,ob,Ta,Ya,Ra,ab;t=Object.assign({position:E},P&&pb);M=!0===M?(Ga={x:q,y:Z},ob=n(f),Ta=Ga.x,Ya=Ga.y,{x:Sa(Ta*(Ra=ob.devicePixelRatio||1))/Ra||0,y:Sa(Ya*Ra)/Ra||0}):{x:q,y:Z};return q=M.x,Z=M.y,I?Object.assign({},t,((ab={})[qa]=B?"0":"",ab[oa]=U?"0":"",ab.transform=1>=(ua.devicePixelRatio||1)?"translate("+q+"px, "+Z+"px)":"translate3d("+q+"px, "+Z+"px, 0)",ab)):Object.assign({},t,((z={})[qa]=B?Z+"px":"",z[oa]=
U?q+"px":"",z.transform="",z))}function wb(q){return q.replace(/left|right|bottom|top/g,function(z){return Ed[z]})}function Wa(q){return q.replace(/start|end/g,function(z){return Ye[z]})}function Lb(q){q=n(q);return{scrollLeft:q.pageXOffset,scrollTop:q.pageYOffset}}function Fb(q){return L(X(q)).left+Lb(q).scrollLeft}function La(q){q=K(q);return/auto|scroll|overlay|hidden/.test(q.overflow+q.overflowY+q.overflowX)}function Na(q,z){void 0===z&&(z=[]);var f,t=function B(y){return 0<=["html","body","#document"].indexOf(k(y))?
y.ownerDocument.body:u(y)&&La(y)?y:B(W(y))}(q);q=t===(null==(f=q.ownerDocument)?void 0:f.body);f=n(t);t=q?[f].concat(f.visualViewport||[],La(t)?t:[]):t;z=z.concat(t);return q?z:z.concat(Na(W(t)))}function ja(q){return Object.assign({},q,{left:q.x,top:q.y,right:q.x+q.width,bottom:q.y+q.height})}function Aa(q,z,f){var t,w,y,B,E,I,P;if("viewport"===z){z=n(q);var M=X(q);z=z.visualViewport;var V=M.clientWidth;M=M.clientHeight;var Z=t=0;z&&(V=z.width,M=z.height,((w=H())||!w&&"fixed"===f)&&(t=z.offsetLeft,
Z=z.offsetTop));q={width:V,height:M,x:t+Fb(q),y:Z};f=ja(q)}else f=r(z)?((V=L(z,!1,"fixed"===f)).top=V.top+z.clientTop,V.left+=z.clientLeft,V.bottom=V.top+z.clientHeight,V.right=V.left+z.clientWidth,V.width=z.clientWidth,V.height=z.clientHeight,V.x=V.left,V.y=V.top,V):ja((M=X(q),Z=X(M),w=Lb(M),y=null==(t=M.ownerDocument)?void 0:t.body,B=Da(Z.scrollWidth,Z.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),E=Da(Z.scrollHeight,Z.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),I=-w.scrollLeft+Fb(M),
P=-w.scrollTop,"rtl"===K(y||Z).direction&&(I+=Da(Z.clientWidth,y?y.clientWidth:0)-B),{width:B,height:E,x:I,y:P}));return f}function xa(q){var z=q.reference,f=q.element,t=(q=q.placement)?x(q):null;q=q?ya(q):null;var w=z.x+z.width/2-f.width/2;var y=z.y+z.height/2-f.height/2;switch(t){case "top":w={x:w,y:z.y-f.height};break;case "bottom":w={x:w,y:z.y+z.height};break;case "right":w={x:z.x+z.width,y};break;case "left":w={x:z.x-f.width,y};break;default:w={x:z.x,y:z.y}}t=t?va(t):null;if(null!=t)switch(y=
"y"===t?"height":"width",q){case "start":w[t]-=z[y]/2-f[y]/2;break;case "end":w[t]+=z[y]/2-f[y]/2}return w}function fa(q,z){void 0===z&&(z={});var f,t,w,y,B,E,I,P,M=z;z=M.placement;z=void 0===z?q.placement:z;var V=M.strategy,Z=void 0===V?q.strategy:V,U=M.boundary,oa=M.rootBoundary;V=M.elementContext;V=void 0===V?"popper":V;var qa=M.altBoundary;M=M.padding;M=void 0===M?0:M;M=Ia("number"!=typeof M?M:S(M,gb));var ua=q.rects.popper;qa=q.elements[void 0!==qa&&qa?"popper"===V?"reference":"popper":V];qa=
(f=r(qa)?qa:qa.contextElement||X(q.elements.popper),t=void 0===U?"clippingParents":U,w=void 0===oa?"viewport":oa,I=(E=[].concat("clippingParents"===t?(y=Na(W(f)),r(B=0<=["absolute","fixed"].indexOf(K(f).position)&&u(f)?ka(f):f)?y.filter(function(Fa){return r(Fa)&&O(Fa,B)&&"body"!==k(Fa)}):[]):[].concat(t),[w]))[0],(P=E.reduce(function(Fa,Ga){Ga=Aa(f,Ga,Z);return Fa.top=Da(Ga.top,Fa.top),Fa.right=Ma(Ga.right,Fa.right),Fa.bottom=Ma(Ga.bottom,Fa.bottom),Fa.left=Da(Ga.left,Fa.left),Fa},Aa(f,I,Z))).width=
P.right-P.left,P.height=P.bottom-P.top,P.x=P.left,P.y=P.top,P);t=L(q.elements.reference);w=xa({reference:t,element:ua,strategy:"absolute",placement:z});w=ja(Object.assign({},ua,w));t="popper"===V?w:t;var Ea={top:qa.top-t.top+M.top,bottom:t.bottom-qa.bottom+M.bottom,left:qa.left-t.left+M.left,right:t.right-qa.right+M.right};q=q.modifiersData.offset;if("popper"===V&&q){var fb=q[z];Object.keys(Ea).forEach(function(Fa){var Ga=0<=["right","bottom"].indexOf(Fa)?1:-1,ob=0<=["top","bottom"].indexOf(Fa)?"y":
"x";Ea[Fa]+=fb[ob]*Ga})}return Ea}function Qa(q,z,f){return void 0===f&&(f={x:0,y:0}),{top:q.top-z.height-f.y,right:q.right-z.width+f.x,bottom:q.bottom-z.height+f.y,left:q.left-z.width-f.x}}function ma(q){return["top","right","bottom","left"].some(function(z){return 0<=q[z]})}function Ua(){for(var q=arguments.length,z=Array(q),f=0;f<q;f++)z[f]=arguments[f];return!z.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}function Ja(q){void 0===q&&(q={});var z=q.defaultModifiers,
f=void 0===z?[]:z;q=q.defaultOptions;var t=void 0===q?Ze:q;return function(w,y,B){function E(){V.forEach(function(oa){return oa()});V=[]}void 0===B&&(B=t);var I,P,M={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ze,t),modifiersData:{},elements:{reference:w,popper:y},attributes:{},styles:{}},V=[],Z=!1,U={state:M,setOptions:function(oa){oa="function"==typeof oa?oa(M.options):oa;E();M.options=Object.assign({},t,M.options,oa);M.scrollParents={reference:r(w)?Na(w):w.contextElement?Na(w.contextElement):
[],popper:Na(y)};var qa,ua,Ea,fb,Fa;oa=(qa=Object.keys(Fa=[].concat(f,M.options.modifiers).reduce(function(Ga,ob){var Ta=Ga[ob.name];return Ga[ob.name]=Ta?Object.assign({},Ta,ob,{options:Object.assign({},Ta.options,ob.options),data:Object.assign({},Ta.data,ob.data)}):ob,Ga},{})).map(function(Ga){return Fa[Ga]}),ua=new Map,Ea=new Set,fb=[],qa.forEach(function(Ga){ua.set(Ga.name,Ga)}),qa.forEach(function(Ga){Ea.has(Ga.name)||function Ya(Ta){Ea.add(Ta.name);[].concat(Ta.requires||[],Ta.requiresIfExists||
[]).forEach(function(Ra){Ea.has(Ra)||(Ra=ua.get(Ra))&&Ya(Ra)});fb.push(Ta)}(Ga)}),ac.reduce(function(Ga,ob){return Ga.concat(fb.filter(function(Ta){return Ta.phase===ob}))},[]));return M.orderedModifiers=oa.filter(function(Ga){return Ga.enabled}),M.orderedModifiers.forEach(function(Ga){var ob=Ga.name,Ta=Ga.options;Ga=Ga.effect;"function"==typeof Ga&&(ob=Ga({state:M,name:ob,instance:U,options:void 0===Ta?{}:Ta}),V.push(ob||function(){}))}),U.update()},forceUpdate:function(){if(!Z){var oa=M.elements,
qa=oa.reference;oa=oa.popper;if(Ua(qa,oa)){M.rects={reference:(ua=ka(oa),Ea="fixed"===M.options.strategy,ob=u(ua),Ta=u(ua)&&(Fa=Sa((fb=ua.getBoundingClientRect()).width)/ua.offsetWidth||1,Ga=Sa(fb.height)/ua.offsetHeight||1,1!==Fa||1!==Ga),Ya=X(ua),Ra=L(qa,Ta,Ea),ab={scrollLeft:0,scrollTop:0},zb={x:0,y:0},(ob||!ob&&!Ea)&&(("body"!==k(ua)||La(Ya))&&(ab=ua!==n(ua)&&u(ua)?{scrollLeft:ua.scrollLeft,scrollTop:ua.scrollTop}:Lb(ua)),u(ua)?((zb=L(ua,!0)).x+=ua.clientLeft,zb.y+=ua.clientTop):Ya&&(zb.x=Fb(Ya))),
{x:Ra.left+ab.scrollLeft-zb.x,y:Ra.top+ab.scrollTop-zb.y,width:Ra.width,height:Ra.height}),popper:J(oa)};M.reset=!1;M.placement=M.options.placement;M.orderedModifiers.forEach(function(Hc){return M.modifiersData[Hc.name]=Object.assign({},Hc.data)});var ua,Ea,fb,Fa,Ga,ob,Ta,Ya,Ra,ab,zb;for(qa=0;qa<M.orderedModifiers.length;qa++)!0!==M.reset?(Ea=M.orderedModifiers[qa],ua=Ea.fn,fb=Ea.options,fb=void 0===fb?{}:fb,Ea=Ea.name,"function"==typeof ua&&(M=ua({state:M,options:fb,name:Ea,instance:U})||M)):(M.reset=
!1,qa=-1)}}},update:(I=function(){return new Promise(function(oa){U.forceUpdate();oa(M)})},function(){return P||=new Promise(function(oa){Promise.resolve().then(function(){P=void 0;oa(I())})}),P}),destroy:function(){E();Z=!0}};return Ua(w,y)?(U.setOptions(B).then(function(oa){!Z&&B.onFirstUpdate&&B.onFirstUpdate(oa)}),U):U}}let kb=new Map,bc={set(q,z,f){kb.has(q)||kb.set(q,new Map);q=kb.get(q);q.has(z)||0===q.size?q.set(z,f):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(q.keys())[0]}.`)},
get:(q,z)=>kb.has(q)&&kb.get(q).get(z)||null,remove(q,z){if(kb.has(q)){var f=kb.get(q);f.delete(z);0===f.size&&kb.delete(q)}}},jc=q=>(q&&window.CSS&&window.CSS.escape&&(q=q.replace(/#([^\s"#']+)/g,(z,f)=>`#${CSS.escape(f)}`)),q),Nb=q=>!(!q||"object"!=typeof q)&&(void 0!==q.jquery&&(q=q[0]),void 0!==q.nodeType),Db=q=>Nb(q)?q.jquery?q[0]:q:"string"==typeof q&&0<q.length?document.querySelector(jc(q)):null,sb=q=>{if(!Nb(q)||0===q.getClientRects().length)return!1;let z="visible"===getComputedStyle(q).getPropertyValue("visibility"),
f=q.closest("details:not([open])");return f?f!==q&&((q=q.closest("summary"))&&q.parentNode!==f||null===q)?!1:z:z},Vb=q=>!q||q.nodeType!==Node.ELEMENT_NODE||!!q.classList.contains("disabled")||(void 0!==q.disabled?q.disabled:q.hasAttribute("disabled")&&"false"!==q.getAttribute("disabled")),lb=q=>document.documentElement.attachShadow?"function"==typeof q.getRootNode?(q=q.getRootNode(),q instanceof ShadowRoot?q:null):q instanceof ShadowRoot?q:q.parentNode?lb(q.parentNode):null:null,rb=()=>{},hb=q=>{q.offsetHeight},
Tb=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ub=[],Rb=q=>{var z=()=>{let f=Tb();if(f){let t=q.NAME,w=f.fn[t];f.fn[t]=q.jQueryInterface;f.fn[t].Constructor=q;f.fn[t].noConflict=()=>(f.fn[t]=w,q.jQueryInterface)}};"loading"===document.readyState?(ub.length||document.addEventListener("DOMContentLoaded",()=>{for(let f of ub)f()}),ub.push(z)):z()},Ib=(q,z=[],f=q)=>"function"==typeof q?q(...z):f,Jc=(q,z,f=!0)=>{if(!f)return void Ib(q);f=(y=>{if(!y)return 0;let {transitionDuration:B,
transitionDelay:E}=window.getComputedStyle(y);y=Number.parseFloat(B);let I=Number.parseFloat(E);return y||I?(B=B.split(",")[0],E=E.split(",")[0],1E3*(Number.parseFloat(B)+Number.parseFloat(E))):0})(z)+5;let t=!1,w=({target:y})=>{y===z&&(t=!0,z.removeEventListener("transitionend",w),Ib(q))};z.addEventListener("transitionend",w);setTimeout(()=>{t||z.dispatchEvent(new Event("transitionend"))},f)},ec=(q,z,f,t)=>{let w=q.length;z=q.indexOf(z);return-1===z?!f&&t?q[w-1]:q[0]:(z+=f?1:-1,t&&(z=(z+w)%w),q[Math.max(0,
Math.min(z,w-1))])},Va=/[^.]*(?=\..*)\.|.*/,eb=/\..*/,Xb=/::\d+$/,Xa={},Rc=1,Sc={mouseenter:"mouseover",mouseleave:"mouseout"},A=new Set("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange touchstart touchmove touchend touchcancel pointerdown pointermove pointerup pointerleave pointercancel gesturestart gesturechange gestureend focus blur change reset select submit focusin focusout load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll".split(" ")),
sa={on(q,z,f,t){h(q,z,f,t,!1)},one(q,z,f,t){h(q,z,f,t,!0)},off(q,z,f,t){if("string"==typeof z&&q){var [w,y,B]=b(z,f,t);t=B!==z;var E=c(q),I=E[B]||{},P=z.startsWith(".");if(void 0===y){if(P)for(var M of Object.keys(E)){f=z.slice(1);for(let [V,Z]of Object.entries(E[M]||{}))V.includes(f)&&p(q,E,M,Z.callable,Z.delegationSelector)}for(let [V,Z]of Object.entries(I))M=V.replace(Xb,""),t&&!z.includes(M)||p(q,E,B,Z.callable,Z.delegationSelector)}else Object.keys(I).length&&p(q,E,B,y,w?f:null)}},trigger(q,
z,f){if("string"!=typeof z||!q)return null;let t=Tb(),w=null,y=!0,B=!0,E=!1;z!==g(z)&&t&&(w=t.Event(z,f),t(q).trigger(w),y=!w.isPropagationStopped(),B=!w.isImmediatePropagationStopped(),E=w.isDefaultPrevented());z=e(new Event(z,{bubbles:y,cancelable:!0}),f);return E&&z.preventDefault(),B&&q.dispatchEvent(z),z.defaultPrevented&&w&&w.preventDefault(),z}},uc={setDataAttribute(q,z,f){q.setAttribute(`data-bs-${l(z)}`,f)},removeDataAttribute(q,z){q.removeAttribute(`data-bs-${l(z)}`)},getDataAttributes(q){if(!q)return{};
let z={};for(let f of Object.keys(q.dataset).filter(t=>t.startsWith("bs")&&!t.startsWith("bsConfig"))){let t=f.replace(/^bs/,"");z[t=t.charAt(0).toLowerCase()+t.slice(1,t.length)]=m(q.dataset[f])}return z},getDataAttribute:(q,z)=>m(q.getAttribute(`data-bs-${l(z)}`))};class Nc{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw Error('You have to implement the static method "NAME", for each component!');}_getConfig(q){return q=this._mergeConfigObj(q),q=this._configAfterMerge(q),
this._typeCheckConfig(q),q}_configAfterMerge(q){return q}_mergeConfigObj(q,z){let f=Nb(z)?uc.getDataAttribute(z,"config"):{};return{...this.constructor.Default,...("object"==typeof f?f:{}),...(Nb(z)?uc.getDataAttributes(z):{}),...("object"==typeof q?q:{})}}_typeCheckConfig(q,z=this.constructor.DefaultType){for(let [f,t]of Object.entries(z))if(z=q[f],z=Nb(z)?"element":null==z?`${z}`:Object.prototype.toString.call(z).match(/\s([a-z]+)/i)[1].toLowerCase(),!(new RegExp(t)).test(z))throw TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${z}" but expected type "${t}".`);
}}class Wb extends Nc{dispose(){for(let q of(bc.remove(this._element,this.constructor.DATA_KEY),sa.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this)))this[q]=null}_queueCallback(q,z,f=!0){Jc(q,z,f)}_getConfig(q){return q=this._mergeConfigObj(q,this._element),q=this._configAfterMerge(q),this._typeCheckConfig(q),q}static getInstance(q){return bc.get(Db(q),this.DATA_KEY)}static getOrCreateInstance(q,z={}){return this.getInstance(q)||new this(q,"object"==typeof z?z:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(q){return`${q}${this.EVENT_KEY}`}constructor(q,
z){super();(q=Db(q))&&(this._element=q,this._config=this._getConfig(z),bc.set(this._element,this.constructor.DATA_KEY,this))}}let $c=q=>{let z=q.getAttribute("data-bs-target");if(!z||"#"===z){q=q.getAttribute("href");if(!q||!q.includes("#")&&!q.startsWith("."))return null;q.includes("#")&&!q.startsWith("#")&&(q=`#${q.split("#")[1]}`);z=q&&"#"!==q?q.trim():null}return z?z.split(",").map(f=>jc(f)).join(","):null},ta={find:(q,z=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(z,
q)),findOne:(q,z=document.documentElement)=>Element.prototype.querySelector.call(z,q),children:(q,z)=>[].concat(...q.children).filter(f=>f.matches(z)),parents(q,z){let f=[];for(q=q.parentNode.closest(z);q;)f.push(q),q=q.parentNode.closest(z);return f},prev(q,z){for(q=q.previousElementSibling;q;){if(q.matches(z))return[q];q=q.previousElementSibling}return[]},next(q,z){for(q=q.nextElementSibling;q;){if(q.matches(z))return[q];q=q.nextElementSibling}return[]},focusableChildren(q){let z='a button input textarea select details [tabindex] [contenteditable="true"]'.split(" ").map(f=>
`${f}:not([tabindex^="-"])`).join(",");return this.find(z,q).filter(f=>!Vb(f)&&sb(f))},getSelectorFromElement(q){return(q=$c(q))&&ta.findOne(q)?q:null},getElementFromSelector(q){return(q=$c(q))?ta.findOne(q):null},getMultipleElementsFromSelector(q){return(q=$c(q))?ta.find(q):[]}},fc=(q,z="hide")=>{let f=q.NAME;sa.on(document,`click.dismiss${q.EVENT_KEY}`,`[data-bs-dismiss="${f}"]`,function(t){(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Vb(this))||(t=ta.getElementFromSelector(this)||this.closest(`.${f}`),
q.getOrCreateInstance(t)[z]())})};class vc extends Wb{static get NAME(){return"alert"}close(){if(!sa.trigger(this._element,"close.bs.alert").defaultPrevented){this._element.classList.remove("show");var q=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,q)}}_destroyElement(){this._element.remove();sa.trigger(this._element,"closed.bs.alert");this.dispose()}static jQueryInterface(q){return this.each(function(){let z=vc.getOrCreateInstance(this);if("string"==
typeof q){if(void 0===z[q]||q.startsWith("_")||"constructor"===q)throw TypeError(`No method named "${q}"`);z[q](this)}})}}fc(vc,"close");Rb(vc);class C extends Wb{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(q){return this.each(function(){let z=C.getOrCreateInstance(this);"toggle"===q&&z[q]()})}}sa.on(document,"click.bs.button.data-api",'[data-bs-toggle="button"]',q=>{q.preventDefault();q=q.target.closest('[data-bs-toggle="button"]');
C.getOrCreateInstance(q).toggle()});Rb(C);let Q={endCallback:null,leftCallback:null,rightCallback:null},ca={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ea extends Nc{static get Default(){return Q}static get DefaultType(){return ca}static get NAME(){return"swipe"}dispose(){sa.off(this._element,".bs.swipe")}_start(q){this._supportPointerEvents?this._eventIsPointerPenTouch(q)&&(this._deltaX=q.clientX):this._deltaX=q.touches[0].clientX}_end(q){this._eventIsPointerPenTouch(q)&&
(this._deltaX=q.clientX-this._deltaX);this._handleSwipe();Ib(this._config.endCallback)}_move(q){this._deltaX=q.touches&&1<q.touches.length?0:q.touches[0].clientX-this._deltaX}_handleSwipe(){var q=Math.abs(this._deltaX);40>=q||(q/=this._deltaX,this._deltaX=0,q&&Ib(0<q?this._config.rightCallback:this._config.leftCallback))}_initEvents(){this._supportPointerEvents?(sa.on(this._element,"pointerdown.bs.swipe",q=>this._start(q)),sa.on(this._element,"pointerup.bs.swipe",q=>this._end(q)),this._element.classList.add("pointer-event")):
(sa.on(this._element,"touchstart.bs.swipe",q=>this._start(q)),sa.on(this._element,"touchmove.bs.swipe",q=>this._move(q)),sa.on(this._element,"touchend.bs.swipe",q=>this._end(q)))}_eventIsPointerPenTouch(q){return this._supportPointerEvents&&("pen"===q.pointerType||"touch"===q.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||0<navigator.maxTouchPoints}constructor(q,z){super();(this._element=q)&&ea.isSupported()&&(this._config=this._getConfig(z),this._deltaX=0,this._supportPointerEvents=
!!window.PointerEvent,this._initEvents())}}let F={ArrowLeft:"right",ArrowRight:"left"},N={interval:5E3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},da={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ia extends Wb{static get Default(){return N}static get DefaultType(){return da}static get NAME(){return"carousel"}next(){this._slide("next")}nextWhenVisible(){!document.hidden&&sb(this._element)&&this.next()}prev(){this._slide("prev")}pause(){this._isSliding&&
this._element.dispatchEvent(new Event("transitionend"));this._clearInterval()}cycle(){this._clearInterval();this._updateInterval();this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?sa.one(this._element,"slid.bs.carousel",()=>this.cycle()):this.cycle())}to(q){let z=this._getItems();if(!(q>z.length-1||0>q)){if(this._isSliding)return void sa.one(this._element,"slid.bs.carousel",()=>this.to(q));var f=this._getItemIndex(this._getActive());
f!==q&&this._slide(q>f?"next":"prev",z[q])}}dispose(){this._swipeHelper&&this._swipeHelper.dispose();super.dispose()}_configAfterMerge(q){return q.defaultInterval=q.interval,q}_addEventListeners(){this._config.keyboard&&sa.on(this._element,"keydown.bs.carousel",q=>this._keydown(q));"hover"===this._config.pause&&(sa.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),sa.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle()));this._config.touch&&ea.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let q of ta.find(".carousel-item img",
this._element))sa.on(q,"dragstart.bs.carousel",z=>z.preventDefault());this._swipeHelper=new ea(this._element,{leftCallback:()=>this._slide(this._directionToOrder("left")),rightCallback:()=>this._slide(this._directionToOrder("right")),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(q){if(!/input|textarea/i.test(q.target.tagName)){var z=F[q.key];
z&&(q.preventDefault(),this._slide(this._directionToOrder(z)))}}_getItemIndex(q){return this._getItems().indexOf(q)}_setActiveIndicatorElement(q){if(this._indicatorsElement){var z=ta.findOne(".active",this._indicatorsElement);z.classList.remove("active");z.removeAttribute("aria-current");(q=ta.findOne(`[data-bs-slide-to="${q}"]`,this._indicatorsElement))&&(q.classList.add("active"),q.setAttribute("aria-current","true"))}}_updateInterval(){var q=this._activeElement||this._getActive();q&&(q=Number.parseInt(q.getAttribute("data-bs-interval"),
10),this._config.interval=q||this._config.defaultInterval)}_slide(q,z=null){if(!this._isSliding){var f=this._getActive(),t="next"===q,w=z||ec(this._getItems(),f,t,this._config.wrap);if(w!==f){var y=this._getItemIndex(w),B=P=>sa.trigger(this._element,P,{relatedTarget:w,direction:this._orderToDirection(q),from:this._getItemIndex(f),to:y});if(!B("slide.bs.carousel").defaultPrevented&&f&&w){z=!!this._interval;this.pause();this._isSliding=!0;this._setActiveIndicatorElement(y);this._activeElement=w;var E=
t?"carousel-item-start":"carousel-item-end",I=t?"carousel-item-next":"carousel-item-prev";w.classList.add(I);w.offsetHeight;f.classList.add(E);w.classList.add(E);this._queueCallback(()=>{w.classList.remove(E,I);w.classList.add("active");f.classList.remove("active",I,E);this._isSliding=!1;B("slid.bs.carousel")},f,this._isAnimated());z&&this.cycle()}}}}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ta.findOne(".active.carousel-item",this._element)}_getItems(){return ta.find(".carousel-item",
this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(q){return"rtl"===document.documentElement.dir?"left"===q?"prev":"next":"left"===q?"next":"prev"}_orderToDirection(q){return"rtl"===document.documentElement.dir?"prev"===q?"left":"right":"prev"===q?"right":"left"}static jQueryInterface(q){return this.each(function(){let z=ia.getOrCreateInstance(this,q);if("number"!=typeof q){if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||
"constructor"===q)throw TypeError(`No method named "${q}"`);z[q]()}}else z.to(q)})}constructor(q,z){super(q,z);this._activeElement=this._interval=null;this._isSliding=!1;this._swipeHelper=this.touchTimeout=null;this._indicatorsElement=ta.findOne(".carousel-indicators",this._element);this._addEventListeners();"carousel"===this._config.ride&&this.cycle()}}sa.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(q){var z=ta.getElementFromSelector(this);if(z&&z.classList.contains("carousel"))return q.preventDefault(),
q=ia.getOrCreateInstance(z),z=this.getAttribute("data-bs-slide-to"),z?q.to(z):"next"===uc.getDataAttribute(this,"slide")?q.next():q.prev(),void q._maybeEnableCycle()});sa.on(window,"load.bs.carousel.data-api",()=>{for(let q of ta.find('[data-bs-ride="carousel"]'))ia.getOrCreateInstance(q)});Rb(ia);let wa={parent:null,toggle:!0},za={parent:"(null|element)",toggle:"boolean"};class cb extends Wb{static get Default(){return wa}static get DefaultType(){return za}static get NAME(){return"collapse"}toggle(){this._isShown()?
this.hide():this.show()}show(){if(!this._isTransitioning&&!this._isShown()){var q=[];if(!(this._config.parent&&(q=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(f=>f!==this._element).map(f=>cb.getOrCreateInstance(f,{toggle:!1}))),q.length&&q[0]._isTransitioning||sa.trigger(this._element,"show.bs.collapse").defaultPrevented)){for(let f of q)f.hide();var z=this._getDimension();this._element.classList.remove("collapse");this._element.classList.add("collapsing");this._element.style[z]=
0;this._addAriaAndCollapsedClass(this._triggerArray,!0);this._isTransitioning=!0;q=`scroll${z[0].toUpperCase()+z.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1;this._element.classList.remove("collapsing");this._element.classList.add("collapse","show");this._element.style[z]="";sa.trigger(this._element,"shown.bs.collapse")},this._element,!0);this._element.style[z]=`${this._element[q]}px`}}}hide(){if(!this._isTransitioning&&this._isShown()&&!sa.trigger(this._element,"hide.bs.collapse").defaultPrevented){var q=
this._getDimension();for(let z of(this._element.style[q]=`${this._element.getBoundingClientRect()[q]}px`,hb(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show"),this._triggerArray)){let f=ta.getElementFromSelector(z);f&&!this._isShown(f)&&this._addAriaAndCollapsedClass([z],!1)}this._isTransitioning=!0;this._element.style[q]="";this._queueCallback(()=>{this._isTransitioning=!1;this._element.classList.remove("collapsing");this._element.classList.add("collapse");
sa.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}}_isShown(q=this._element){return q.classList.contains("show")}_configAfterMerge(q){return q.toggle=!!q.toggle,q.parent=Db(q.parent),q}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(this._config.parent)for(let q of this._getFirstLevelChildren('[data-bs-toggle="collapse"]')){let z=ta.getElementFromSelector(q);z&&this._addAriaAndCollapsedClass([q],this._isShown(z))}}_getFirstLevelChildren(q){let z=
ta.find(":scope .collapse .collapse",this._config.parent);return ta.find(q,this._config.parent).filter(f=>!z.includes(f))}_addAriaAndCollapsedClass(q,z){if(q.length)for(let f of q)f.classList.toggle("collapsed",!z),f.setAttribute("aria-expanded",z)}static jQueryInterface(q){let z={};return"string"==typeof q&&/show|hide/.test(q)&&(z.toggle=!1),this.each(function(){let f=cb.getOrCreateInstance(this,z);if("string"==typeof q){if(void 0===f[q])throw TypeError(`No method named "${q}"`);f[q]()}})}constructor(q,
z){for(let f of(super(q,z),this._isTransitioning=!1,this._triggerArray=[],ta.find('[data-bs-toggle="collapse"]')))q=ta.getSelectorFromElement(f),z=ta.find(q).filter(t=>t===this._element),null!==q&&z.length&&this._triggerArray.push(f);this._initializeChildren();this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown());this._config.toggle&&this.toggle()}}sa.on(document,"click.bs.collapse.data-api",'[data-bs-toggle="collapse"]',function(q){for(let z of(("A"===q.target.tagName||
q.delegateTarget&&"A"===q.delegateTarget.tagName)&&q.preventDefault(),ta.getMultipleElementsFromSelector(this)))cb.getOrCreateInstance(z,{toggle:!1}).toggle()});Rb(cb);var gb=["top","bottom","right","left"],Ca=gb.reduce(function(q,z){return q.concat([z+"-start",z+"-end"])},[]),jb=[].concat(gb,["auto"]).reduce(function(q,z){return q.concat([z,z+"-start",z+"-end"])},[]),ac="beforeRead read afterRead beforeMain main afterMain beforeWrite write afterWrite".split(" ");let kc={name:"applyStyles",enabled:!0,
phase:"write",fn:function(q){var z=q.state;Object.keys(z.elements).forEach(function(f){var t=z.styles[f]||{},w=z.attributes[f]||{},y=z.elements[f];u(y)&&k(y)&&(Object.assign(y.style,t),Object.keys(w).forEach(function(B){var E=w[B];!1===E?y.removeAttribute(B):y.setAttribute(B,!0===E?"":E)}))})},effect:function(q){var z=q.state,f={popper:{position:z.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(z.elements.popper.style,f.popper),z.styles=
f,z.elements.arrow&&Object.assign(z.elements.arrow.style,f.arrow),function(){Object.keys(z.elements).forEach(function(t){var w=z.elements[t],y=z.attributes[t]||{};t=Object.keys(z.styles.hasOwnProperty(t)?z.styles[t]:f[t]).reduce(function(B,E){return B[E]="",B},{});u(w)&&k(w)&&(Object.assign(w.style,t),Object.keys(y).forEach(function(B){w.removeAttribute(B)}))})}},requires:["computeStyles"]};var Da=Math.max,Ma=Math.min,Sa=Math.round;let mb={name:"arrow",enabled:!0,phase:"main",fn:function(q){var z,
f=q.state,t=q.name,w=q.options,y=f.elements.arrow,B=f.modifiersData.popperOffsets,E=x(f.placement);q=va(E);E=0<=["left","right"].indexOf(E)?"height":"width";if(y&&B){var I;w=(I=w.padding,Ia("number"!=typeof(I="function"==typeof I?I(Object.assign({},f.rects,{placement:f.placement})):I)?I:S(I,gb)));I=J(y);var P="y"===q?"top":"left",M="y"===q?"bottom":"right",V=f.rects.reference[E]+f.rects.reference[q]-B[q]-f.rects.popper[E];B=B[q]-f.rects.reference[q];y=(y=ka(y))?"y"===q?y.clientHeight||0:y.clientWidth||
0:0;B=y/2-I[E]/2+(V/2-B/2);E=Da(w[P],Ma(B,y-I[E]-w[M]));f.modifiersData[t]=((z={})[q]=E,z.centerOffset=E-B,z)}},effect:function(q){var z=q.state;q=q.options.element;q=void 0===q?"[data-popper-arrow]":q;null!=q&&("string"!=typeof q||(q=z.elements.popper.querySelector(q)))&&O(z.elements.popper,q)&&(z.elements.arrow=q)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var pb={top:"auto",right:"auto",bottom:"auto",left:"auto"};let wc={name:"computeStyles",enabled:!0,phase:"beforeWrite",
fn:function(q){var z=q.state,f=q.options,t=f.gpuAcceleration;q=f.adaptive;f=f.roundOffsets;f=void 0===f||f;t={placement:x(z.placement),variation:ya(z.placement),popper:z.elements.popper,popperRect:z.rects.popper,gpuAcceleration:void 0===t||t,isFixed:"fixed"===z.options.strategy};null!=z.modifiersData.popperOffsets&&(z.styles.popper=Object.assign({},z.styles.popper,na(Object.assign({},t,{offsets:z.modifiersData.popperOffsets,position:z.options.strategy,adaptive:void 0===q||q,roundOffsets:f}))));null!=
z.modifiersData.arrow&&(z.styles.arrow=Object.assign({},z.styles.arrow,na(Object.assign({},t,{offsets:z.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f}))));z.attributes.popper=Object.assign({},z.attributes.popper,{"data-popper-placement":z.placement})},data:{}};var Ac={passive:!0};let Vd={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(q){var z=q.state,f=q.instance;q=q.options;var t=q.scroll,w=void 0===t||t;q=q.resize;var y=void 0===q||q,B=n(z.elements.popper),
E=[].concat(z.scrollParents.reference,z.scrollParents.popper);return w&&E.forEach(function(I){I.addEventListener("scroll",f.update,Ac)}),y&&B.addEventListener("resize",f.update,Ac),function(){w&&E.forEach(function(I){I.removeEventListener("scroll",f.update,Ac)});y&&B.removeEventListener("resize",f.update,Ac)}},data:{}};var Ed={left:"right",right:"left",bottom:"top",top:"bottom"},Ye={start:"end",end:"start"};let te={name:"flip",enabled:!0,phase:"main",fn:function(q){var z=q.state,f=q.options;q=q.name;
if(!z.modifiersData[q]._skip){var t=f.mainAxis;t=void 0===t||t;var w=f.altAxis;w=void 0===w||w;var y=f.fallbackPlacements,B=f.padding,E=f.boundary,I=f.rootBoundary,P=f.altBoundary,M=f.flipVariations,V=void 0===M||M,Z=f.allowedAutoPlacements;f=z.options.placement;M=x(f);y=y||(M!==f&&V?function(Ya){if("auto"===x(Ya))return[];var Ra=wb(Ya);return[Wa(Ya),Ra,Wa(Ra)]}(f):[wb(f)]);var U=[f].concat(y).reduce(function(Ya,Ra){var ab,zb,Hc,Jb,Gb,pc,Tc,cd,xc,cc,hc,Kc;return Ya.concat("auto"===x(Ra)?(zb=(ab={placement:Ra,
boundary:E,rootBoundary:I,padding:B,flipVariations:V,allowedAutoPlacements:Z}).placement,Hc=ab.boundary,Jb=ab.rootBoundary,Gb=ab.padding,pc=ab.flipVariations,cd=void 0===(Tc=ab.allowedAutoPlacements)?jb:Tc,0===(hc=(cc=(xc=ya(zb))?pc?Ca:Ca.filter(function(qc){return ya(qc)===xc}):gb).filter(function(qc){return 0<=cd.indexOf(qc)})).length&&(hc=cc),Object.keys(Kc=hc.reduce(function(qc,Zb){return qc[Zb]=fa(z,{placement:Zb,boundary:Hc,rootBoundary:Jb,padding:Gb})[x(Zb)],qc},{})).sort(function(qc,Zb){return Kc[qc]-
Kc[Zb]})):Ra)},[]);f=z.rects.reference;y=z.rects.popper;var oa=new Map;M=!0;for(var qa=U[0],ua=0;ua<U.length;ua++){var Ea=U[ua],fb=x(Ea),Fa="start"===ya(Ea),Ga=0<=["top","bottom"].indexOf(fb),ob=Ga?"width":"height",Ta=fa(z,{placement:Ea,boundary:E,rootBoundary:I,altBoundary:P,padding:B});Fa=Ga?Fa?"right":"left":Fa?"bottom":"top";f[ob]>y[ob]&&(Fa=wb(Fa));ob=wb(Fa);Ga=[];if(t&&Ga.push(0>=Ta[fb]),w&&Ga.push(0>=Ta[Fa],0>=Ta[ob]),Ga.every(function(Ya){return Ya})){qa=Ea;M=!1;break}oa.set(Ea,Ga)}if(M)for(t=
function(Ya){var Ra=U.find(function(ab){if(ab=oa.get(ab))return ab.slice(0,Ya).every(function(zb){return zb})});if(Ra)return qa=Ra,"break"},w=V?3:1;0<w&&"break"!==t(w);w--);z.placement!==qa&&(z.modifiersData[q]._skip=!0,z.placement=qa,z.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},gd={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(q){var z=q.state;q=q.name;var f=z.rects.reference,t=z.rects.popper,w=z.modifiersData.preventOverflow,y=fa(z,{elementContext:"reference"}),
B=fa(z,{altBoundary:!0});f=Qa(y,f);t=Qa(B,t,w);w=ma(f);B=ma(t);z.modifiersData[q]={referenceClippingOffsets:f,popperEscapeOffsets:t,isReferenceHidden:w,hasPopperEscaped:B};z.attributes.popper=Object.assign({},z.attributes.popper,{"data-popper-reference-hidden":w,"data-popper-escaped":B})}},Cc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(q){var z=q.state,f=q.name;q=q.options.offset;var t=void 0===q?[0,0]:q;q=jb.reduce(function(B,E){var I,P,M,V,Z,U;return B[E]=(I=z.rects,
M=0<=["left","top"].indexOf(P=x(E))?-1:1,Z=(V="function"==typeof t?t(Object.assign({},I,{placement:E})):t)[0],U=V[1],Z=Z||0,U=(U||0)*M,0<=["left","right"].indexOf(P)?{x:U,y:Z}:{x:Z,y:U}),B},{});var w=q[z.placement],y=w.x;w=w.y;null!=z.modifiersData.popperOffsets&&(z.modifiersData.popperOffsets.x+=y,z.modifiersData.popperOffsets.y+=w);z.modifiersData[f]=q}},ue={name:"popperOffsets",enabled:!0,phase:"read",fn:function(q){var z=q.state;z.modifiersData[q.name]=xa({reference:z.rects.reference,element:z.rects.popper,
strategy:"absolute",placement:z.placement})},data:{}},ve={name:"preventOverflow",enabled:!0,phase:"main",fn:function(q){var z=q.state,f=q.options;q=q.name;var t=f.mainAxis,w=f.altAxis,y=f.tether;y=void 0===y||y;var B=f.tetherOffset,E=void 0===B?0:B,I=fa(z,{boundary:f.boundary,rootBoundary:f.rootBoundary,padding:f.padding,altBoundary:f.altBoundary}),P=x(z.placement),M=ya(z.placement),V=!M,Z=va(P);f="x"===Z?"y":"x";B=z.modifiersData.popperOffsets;var U=z.rects.reference,oa=z.rects.popper;E="function"==
typeof E?E(Object.assign({},z.rects,{placement:z.placement})):E;var qa="number"==typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),ua=z.modifiersData.offset?z.modifiersData.offset[z.placement]:null;E={x:0,y:0};if(B){if(void 0===t||t){var Ea,fb="y"===Z?"top":"left",Fa="y"===Z?"bottom":"right",Ga="y"===Z?"height":"width";t=B[Z];var ob=t+I[fb],Ta=t-I[Fa],Ya=y?-oa[Ga]/2:0,Ra="start"===M?U[Ga]:oa[Ga];M="start"===M?-oa[Ga]:-U[Ga];var ab=z.elements.arrow;ab=y&&ab?J(ab):{width:0,height:0};
var zb=z.modifiersData["arrow#persistent"]?z.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0};fb=zb[fb];Fa=zb[Fa];ab=Da(0,Ma(U[Ga],ab[Ga]));Ra=V?U[Ga]/2-Ya-ab-fb-qa.mainAxis:Ra-ab-fb-qa.mainAxis;V=V?-U[Ga]/2+Ya+ab+Fa+qa.mainAxis:M+ab+Fa+qa.mainAxis;Ya=(Ga=z.elements.arrow&&ka(z.elements.arrow))?"y"===Z?Ga.clientTop||0:Ga.clientLeft||0:0;Ga=null!=(Ea=null==ua?void 0:ua[Z])?Ea:0;Ea=y?Ma(ob,t+Ra-Ga-Ya):ob;Ta=y?Da(Ta,t+V-Ga):Ta;Ea=Da(Ea,Ma(t,Ta));B[Z]=Ea;E[Z]=Ea-t}if(void 0!==
w&&w){var Hc,Jb;w=B[f];t="y"===f?"height":"width";Ea=w+I["x"===Z?"top":"left"];I=w-I["x"===Z?"bottom":"right"];P=-1!==["top","left"].indexOf(P);Z=null!=(Jb=null==ua?void 0:ua[f])?Jb:0;Jb=P?Ea:w-U[t]-oa[t]-Z+qa.altAxis;U=P?w+U[t]+oa[t]-Z-qa.altAxis:I;oa=y&&P?(Hc=Da(Jb,Ma(w,U)))>U?U:Hc:Da(y?Jb:Ea,Ma(w,y?U:I));B[f]=oa;E[f]=oa-w}z.modifiersData[q]=E}},requiresIfExists:["offset"]};var Ze={placement:"bottom",modifiers:[],strategy:"absolute"},Mf=Ja(),Nf=Ja({defaultModifiers:[Vd,ue,wc,kc]}),Fd=Ja({defaultModifiers:[Vd,
ue,wc,kc,Cc,te,ve,mb,gd]});let Wd=Object.freeze(Object.defineProperty({__proto__:null,afterMain:"afterMain",afterRead:"afterRead",afterWrite:"afterWrite",applyStyles:kc,arrow:mb,auto:"auto",basePlacements:gb,beforeMain:"beforeMain",beforeRead:"beforeRead",beforeWrite:"beforeWrite",bottom:"bottom",clippingParents:"clippingParents",computeStyles:wc,createPopper:Fd,createPopperBase:Mf,createPopperLite:Nf,detectOverflow:fa,end:"end",eventListeners:Vd,flip:te,hide:gd,left:"left",main:"main",modifierPhases:ac,
offset:Cc,placements:jb,popper:"popper",popperGenerator:Ja,popperOffsets:ue,preventOverflow:ve,read:"read",reference:"reference",right:"right",start:"start",top:"top",variationPlacements:Ca,viewport:"viewport",write:"write"},Symbol.toStringTag,{value:"Module"})),Xd="rtl"===document.documentElement.dir?"top-end":"top-start",$e="rtl"===document.documentElement.dir?"top-start":"top-end",Of="rtl"===document.documentElement.dir?"bottom-end":"bottom-start",af="rtl"===document.documentElement.dir?"bottom-start":
"bottom-end",bf="rtl"===document.documentElement.dir?"left-start":"right-start",cf="rtl"===document.documentElement.dir?"right-start":"left-start",Pf={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Qf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Lc extends Wb{static get Default(){return Pf}static get DefaultType(){return Qf}static get NAME(){return"dropdown"}toggle(){return this._isShown()?
this.hide():this.show()}show(){if(!Vb(this._element)&&!this._isShown()){var q={relatedTarget:this._element};if(!sa.trigger(this._element,"show.bs.dropdown",q).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(let z of[].concat(...document.body.children))sa.on(z,"mouseover",rb);this._element.focus();this._element.setAttribute("aria-expanded",!0);this._menu.classList.add("show");this._element.classList.add("show");sa.trigger(this._element,
"shown.bs.dropdown",q)}}}hide(){!Vb(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy();super.dispose()}update(){this._inNavbar=this._detectNavbar();this._popper&&this._popper.update()}_completeHide(q){if(!sa.trigger(this._element,"hide.bs.dropdown",q).defaultPrevented){if("ontouchstart"in document.documentElement)for(let z of[].concat(...document.body.children))sa.off(z,"mouseover",rb);this._popper&&this._popper.destroy();
this._menu.classList.remove("show");this._element.classList.remove("show");this._element.setAttribute("aria-expanded","false");uc.removeDataAttribute(this._menu,"popper");sa.trigger(this._element,"hidden.bs.dropdown",q)}}_getConfig(q){if("object"==typeof(q=super._getConfig(q)).reference&&!Nb(q.reference)&&"function"!=typeof q.reference.getBoundingClientRect)throw TypeError('DROPDOWN: Option "reference" provided type "object" without a required "getBoundingClientRect" method.');return q}_createPopper(){if(void 0===
Wd)throw TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let q=this._element;"parent"===this._config.reference?q=this._parent:Nb(this._config.reference)?q=Db(this._config.reference):"object"==typeof this._config.reference&&(q=this._config.reference);let z=this._getPopperConfig();this._popper=Fd(q,this._menu,z)}_isShown(){return this._menu.classList.contains("show")}_getPlacement(){let q=this._parent;if(q.classList.contains("dropend"))return bf;if(q.classList.contains("dropstart"))return cf;
if(q.classList.contains("dropup-center"))return"top";if(q.classList.contains("dropdown-center"))return"bottom";let z="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return q.classList.contains("dropup")?z?$e:Xd:z?af:Of}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){let {offset:q}=this._config;return"string"==typeof q?q.split(",").map(z=>Number.parseInt(z,10)):"function"==typeof q?z=>q(z,this._element):q}_getPopperConfig(){let q={placement:this._getPlacement(),
modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(uc.setDataAttribute(this._menu,"popper","static"),q.modifiers=[{name:"applyStyles",enabled:!1}]),{...q,...Ib(this._config.popperConfig,[q])}}_selectMenuItem({key:q,target:z}){let f=ta.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(t=>sb(t));f.length&&ec(f,z,"ArrowDown"===q,
!f.includes(z)).focus()}static jQueryInterface(q){return this.each(function(){let z=Lc.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q])throw TypeError(`No method named "${q}"`);z[q]()}})}static clearMenus(q){if(2!==q.button&&("keyup"!==q.type||"Tab"===q.key))for(let f of ta.find('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled).show')){let t=Lc.getInstance(f);if(!t||!1===t._config.autoClose)continue;var z=q.composedPath();let w=z.includes(t._menu);z.includes(t._element)||
"inside"===t._config.autoClose&&!w||"outside"===t._config.autoClose&&w||t._menu.contains(q.target)&&("keyup"===q.type&&"Tab"===q.key||/input|select|option|textarea|form/i.test(q.target.tagName))||(z={relatedTarget:t._element},"click"===q.type&&(z.clickEvent=q),t._completeHide(z))}}static dataApiKeydownHandler(q){var z=/input|textarea/i.test(q.target.tagName),f="Escape"===q.key;let t=["ArrowUp","ArrowDown"].includes(q.key);if((t||f)&&(!z||f)){q.preventDefault();z=this.matches('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')?
this:ta.prev(this,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')[0]||ta.next(this,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')[0]||ta.findOne('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',q.delegateTarget.parentNode);f=Lc.getOrCreateInstance(z);if(t)return q.stopPropagation(),f.show(),void f._selectMenuItem(q);f._isShown()&&(q.stopPropagation(),f.hide(),z.focus())}}constructor(q,z){super(q,z);this._popper=null;this._parent=this._element.parentNode;this._menu=
ta.next(this._element,".dropdown-menu")[0]||ta.prev(this._element,".dropdown-menu")[0]||ta.findOne(".dropdown-menu",this._parent);this._inNavbar=this._detectNavbar()}}sa.on(document,"keydown.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Lc.dataApiKeydownHandler);sa.on(document,"keydown.bs.dropdown.data-api",".dropdown-menu",Lc.dataApiKeydownHandler);sa.on(document,"click.bs.dropdown.data-api",Lc.clearMenus);sa.on(document,"keyup.bs.dropdown.data-api",Lc.clearMenus);
sa.on(document,"click.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',function(q){q.preventDefault();Lc.getOrCreateInstance(this).toggle()});Rb(Lc);let Yd={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},sd={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Gd extends Nc{static get Default(){return Yd}static get DefaultType(){return sd}static get NAME(){return"backdrop"}show(q){if(!this._config.isVisible)return void Ib(q);
this._append();let z=this._getElement();this._config.isAnimated&&z.offsetHeight;z.classList.add("show");this._emulateAnimation(()=>{Ib(q)})}hide(q){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose();Ib(q)})):Ib(q)}dispose(){this._isAppended&&(sa.off(this._element,"mousedown.bs.backdrop"),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let q=document.createElement("div");q.className=this._config.className;this._config.isAnimated&&
q.classList.add("fade");this._element=q}return this._element}_configAfterMerge(q){return q.rootElement=Db(q.rootElement),q}_append(){if(!this._isAppended){var q=this._getElement();this._config.rootElement.append(q);sa.on(q,"mousedown.bs.backdrop",()=>{Ib(this._config.clickCallback)});this._isAppended=!0}}_emulateAnimation(q){Jc(q,this._getElement(),this._config.isAnimated)}constructor(q){super();this._config=this._getConfig(q);this._isAppended=!1;this._element=null}}let Rf={autofocus:!0,trapElement:null},
Sf={autofocus:"boolean",trapElement:"element"};class td extends Nc{static get Default(){return Rf}static get DefaultType(){return Sf}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),sa.off(document,".bs.focustrap"),sa.on(document,"focusin.bs.focustrap",q=>this._handleFocusin(q)),sa.on(document,"keydown.tab.bs.focustrap",q=>this._handleKeydown(q)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,sa.off(document,
".bs.focustrap"))}_handleFocusin(q){let {trapElement:z}=this._config;q.target===document||q.target===z||z.contains(q.target)||(q=ta.focusableChildren(z),0===q.length?z.focus():"backward"===this._lastTabNavDirection?q[q.length-1].focus():q[0].focus())}_handleKeydown(q){"Tab"===q.key&&(this._lastTabNavDirection=q.shiftKey?"backward":"forward")}constructor(q){super();this._config=this._getConfig(q);this._isActive=!1;this._lastTabNavDirection=null}}class we{getWidth(){return Math.abs(window.innerWidth-
document.documentElement.clientWidth)}hide(){let q=this.getWidth();this._disableOverFlow();this._setElementAttributes(this._element,"padding-right",z=>z+q);this._setElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","padding-right",z=>z+q);this._setElementAttributes(".sticky-top","margin-right",z=>z-q)}reset(){this._resetElementAttributes(this._element,"overflow");this._resetElementAttributes(this._element,"padding-right");this._resetElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",
"padding-right");this._resetElementAttributes(".sticky-top","margin-right")}isOverflowing(){return 0<this.getWidth()}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow");this._element.style.overflow="hidden"}_setElementAttributes(q,z,f){let t=this.getWidth();this._applyManipulationCallback(q,w=>{if(!(w!==this._element&&window.innerWidth>w.clientWidth+t)){this._saveInitialAttribute(w,z);var y=window.getComputedStyle(w).getPropertyValue(z);w.style.setProperty(z,`${f(Number.parseFloat(y))}px`)}})}_saveInitialAttribute(q,
z){let f=q.style.getPropertyValue(z);f&&uc.setDataAttribute(q,z,f)}_resetElementAttributes(q,z){this._applyManipulationCallback(q,f=>{let t=uc.getDataAttribute(f,z);null!==t?(uc.removeDataAttribute(f,z),f.style.setProperty(z,t)):f.style.removeProperty(z)})}_applyManipulationCallback(q,z){if(Nb(q))z(q);else for(let f of ta.find(q,this._element))z(f)}constructor(){this._element=document.body}}let Hd={backdrop:!0,focus:!0,keyboard:!0},Tf={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};
class ud extends Wb{static get Default(){return Hd}static get DefaultType(){return Tf}static get NAME(){return"modal"}toggle(q){return this._isShown?this.hide():this.show(q)}show(q){this._isShown||this._isTransitioning||sa.trigger(this._element,"show.bs.modal",{relatedTarget:q}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._backdrop.show(()=>this._showElement(q)))}hide(){this._isShown&&!this._isTransitioning&&
(sa.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){sa.off(window,".bs.modal");sa.off(this._dialog,".bs.modal");this._backdrop.dispose();this._focustrap.deactivate();super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Gd({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new td({trapElement:this._element})}_showElement(q){document.body.contains(this._element)||
document.body.append(this._element);this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",!0);this._element.setAttribute("role","dialog");this._element.scrollTop=0;let z=ta.findOne(".modal-body",this._dialog);z&&(z.scrollTop=0);this._element.offsetHeight;this._element.classList.add("show");this._queueCallback(()=>{this._config.focus&&this._focustrap.activate();this._isTransitioning=!1;sa.trigger(this._element,"shown.bs.modal",{relatedTarget:q})},
this._dialog,this._isAnimated())}_addEventListeners(){sa.on(this._element,"keydown.dismiss.bs.modal",q=>{"Escape"===q.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())});sa.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()});sa.on(this._element,"mousedown.dismiss.bs.modal",q=>{sa.one(this._element,"click.dismiss.bs.modal",z=>{this._element===q.target&&this._element===z.target&&("static"!==this._config.backdrop?this._config.backdrop&&
this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none";this._element.setAttribute("aria-hidden",!0);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._isTransitioning=!1;this._backdrop.hide(()=>{document.body.classList.remove("modal-open");this._resetAdjustments();this._scrollBar.reset();sa.trigger(this._element,"hidden.bs.modal")})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(!sa.trigger(this._element,
"hidePrevented.bs.modal").defaultPrevented){var q=this._element.scrollHeight>document.documentElement.clientHeight,z=this._element.style.overflowY;"hidden"===z||this._element.classList.contains("modal-static")||(q||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static"),this._queueCallback(()=>{this._element.classList.remove("modal-static");this._queueCallback(()=>{this._element.style.overflowY=z},this._dialog)},this._dialog),this._element.focus())}}_adjustDialog(){let q=
this._element.scrollHeight>document.documentElement.clientHeight,z=this._scrollBar.getWidth(),f=0<z;f&&!q&&(this._element.style["rtl"===document.documentElement.dir?"paddingLeft":"paddingRight"]=`${z}px`);!f&&q&&(this._element.style["rtl"===document.documentElement.dir?"paddingRight":"paddingLeft"]=`${z}px`)}_resetAdjustments(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}static jQueryInterface(q,z){return this.each(function(){let f=ud.getOrCreateInstance(this,q);if("string"==
typeof q){if(void 0===f[q])throw TypeError(`No method named "${q}"`);f[q](z)}})}constructor(q,z){super(q,z);this._dialog=ta.findOne(".modal-dialog",this._element);this._backdrop=this._initializeBackDrop();this._focustrap=this._initializeFocusTrap();this._isTransitioning=this._isShown=!1;this._scrollBar=new we;this._addEventListeners()}}sa.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(q){let z=ta.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&q.preventDefault();
sa.one(z,"show.bs.modal",f=>{f.defaultPrevented||sa.one(z,"hidden.bs.modal",()=>{sb(this)&&this.focus()})});(q=ta.findOne(".modal.show"))&&ud.getInstance(q).hide();ud.getOrCreateInstance(z).toggle(this)});fc(ud);Rb(ud);let Uf={backdrop:!0,keyboard:!0,scroll:!1},Vf={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ic extends Wb{static get Default(){return Uf}static get DefaultType(){return Vf}static get NAME(){return"offcanvas"}toggle(q){return this._isShown?this.hide():this.show(q)}show(q){this._isShown||
sa.trigger(this._element,"show.bs.offcanvas",{relatedTarget:q}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new we).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("showing"),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate();this._element.classList.add("show");this._element.classList.remove("showing");sa.trigger(this._element,"shown.bs.offcanvas",
{relatedTarget:q})},this._element,!0))}hide(){this._isShown&&(sa.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding");this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._config.scroll||(new we).reset();sa.trigger(this._element,"hidden.bs.offcanvas")},this._element,
!0)))}dispose(){this._backdrop.dispose();this._focustrap.deactivate();super.dispose()}_initializeBackDrop(){let q=!!this._config.backdrop;return new Gd({className:"offcanvas-backdrop",isVisible:q,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:q?()=>{"static"!==this._config.backdrop?this.hide():sa.trigger(this._element,"hidePrevented.bs.offcanvas")}:null})}_initializeFocusTrap(){return new td({trapElement:this._element})}_addEventListeners(){sa.on(this._element,"keydown.dismiss.bs.offcanvas",
q=>{"Escape"===q.key&&(this._config.keyboard?this.hide():sa.trigger(this._element,"hidePrevented.bs.offcanvas"))})}static jQueryInterface(q){return this.each(function(){let z=Ic.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||"constructor"===q)throw TypeError(`No method named "${q}"`);z[q](this)}})}constructor(q,z){super(q,z);this._isShown=!1;this._backdrop=this._initializeBackDrop();this._focustrap=this._initializeFocusTrap();this._addEventListeners()}}sa.on(document,
"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(q){let z=ta.getElementFromSelector(this);(["A","AREA"].includes(this.tagName)&&q.preventDefault(),Vb(this))||(sa.one(z,"hidden.bs.offcanvas",()=>{sb(this)&&this.focus()}),(q=ta.findOne(".offcanvas.show"))&&q!==z&&Ic.getInstance(q).hide(),Ic.getOrCreateInstance(z).toggle(this))});sa.on(window,"load.bs.offcanvas.data-api",()=>{for(let q of ta.find(".offcanvas.show"))Ic.getOrCreateInstance(q).show()});sa.on(window,"resize.bs.offcanvas",
()=>{for(let q of ta.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(q).position&&Ic.getOrCreateInstance(q).hide()});fc(Ic);Rb(Ic);let xe={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:"src srcset alt title width height".split(" "),li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},
ye=new Set("background cite href itemtype longdesc poster src xlink:href".split(" ")),df=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ef=(q,z)=>{let f=q.nodeName.toLowerCase();return z.includes(f)?!ye.has(f)||!!df.test(q.nodeValue):z.filter(t=>t instanceof RegExp).some(t=>t.test(f))},Wf={allowList:xe,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ff={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",
sanitizeFn:"(null|function)",template:"string"},Xf={entry:"(string|element|function|null)",selector:"(string|element)"};class Yf extends Nc{static get Default(){return Wf}static get DefaultType(){return ff}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(q=>this._resolvePossibleFunction(q)).filter(Boolean)}hasContent(){return 0<this.getContent().length}changeContent(q){return this._checkContent(q),this._config.content={...this._config.content,...q},
this}toHtml(){var q=document.createElement("div");for(let [f,t]of(q.innerHTML=this._maybeSanitize(this._config.template),Object.entries(this._config.content)))this._setContent(q,t,f);q=q.children[0];let z=this._resolvePossibleFunction(this._config.extraClass);return z&&q.classList.add(...z.split(" ")),q}_typeCheckConfig(q){super._typeCheckConfig(q);this._checkContent(q.content)}_checkContent(q){for(let [z,f]of Object.entries(q))super._typeCheckConfig({selector:z,entry:f},Xf)}_setContent(q,z,f){(q=
ta.findOne(f,q))&&((z=this._resolvePossibleFunction(z))?Nb(z)?this._putElementInTemplate(Db(z),q):this._config.html?q.innerHTML=this._maybeSanitize(z):q.textContent=z:q.remove())}_maybeSanitize(q){if(this._config.sanitize){var z=this._config.allowList;var f=this._config.sanitizeFn;if(q.length)if(f&&"function"==typeof f)z=f(q);else{q=(new window.DOMParser).parseFromString(q,"text/html");for(let w of[].concat(...q.body.querySelectorAll("*"))){var t=w.nodeName.toLowerCase();if(Object.keys(z).includes(t)){f=
[].concat(...w.attributes);t=[].concat(z["*"]||[],z[t]||[]);for(let y of f)ef(y,t)||w.removeAttribute(y.nodeName)}else w.remove()}z=q.body.innerHTML}else z=q}else z=q;return z}_resolvePossibleFunction(q){return Ib(q,[this])}_putElementInTemplate(q,z){if(this._config.html)return z.innerHTML="",void z.append(q);z.textContent=q.textContent}constructor(q){super();this._config=this._getConfig(q)}}let Zf=new Set(["sanitize","allowList","sanitizeFn"]),$f={AUTO:"auto",TOP:"top",RIGHT:"rtl"===document.documentElement.dir?
"left":"right",BOTTOM:"bottom",LEFT:"rtl"===document.documentElement.dir?"right":"left"},ag={allowList:xe,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},bg={allowList:"object",
animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class vd extends Wb{static get Default(){return ag}static get DefaultType(){return bg}static get NAME(){return"tooltip"}enable(){this._isEnabled=
!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout);sa.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler);this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title"));this._disposePopper();super.dispose()}show(){if("none"===
this._element.style.display)throw Error("Please use show on visible elements");if(this._isWithContent()&&this._isEnabled){var q=sa.trigger(this._element,this.constructor.eventName("show")),z=(lb(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(!q.defaultPrevented&&z){this._disposePopper();q=this._getTipElement();this._element.setAttribute("aria-describedby",q.getAttribute("id"));({container:z}=this._config);if(this._element.ownerDocument.documentElement.contains(this.tip)||
(z.append(q),sa.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(q),q.classList.add("show"),"ontouchstart"in document.documentElement)for(let f of[].concat(...document.body.children))sa.on(f,"mouseover",rb);this._queueCallback(()=>{sa.trigger(this._element,this.constructor.eventName("shown"));!1===this._isHovered&&this._leave();this._isHovered=!1},this.tip,this._isAnimated())}}}hide(){if(this._isShown()&&!sa.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove("show"),
"ontouchstart"in document.documentElement)for(let q of[].concat(...document.body.children))sa.off(q,"mouseover",rb);this._activeTrigger.click=!1;this._activeTrigger.focus=!1;this._activeTrigger.hover=!1;this._isHovered=null;this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),sa.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||
(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(q){q=this._getTemplateFactory(q).toHtml();if(!q)return null;q.classList.remove("fade","show");q.classList.add(`bs-${this.constructor.NAME}-auto`);var z=this.constructor.NAME;do z+=Math.floor(1E6*Math.random());while(document.getElementById(z));return q.setAttribute("id",z.toString()),this._isAnimated()&&q.classList.add("fade"),q}setContent(q){this._newContent=q;this._isShown()&&(this._disposePopper(),
this.show())}_getTemplateFactory(q){return this._templateFactory?this._templateFactory.changeContent(q):this._templateFactory=new Yf({...this._config,content:q,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(q){return this.constructor.getOrCreateInstance(q.delegateTarget,
this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains("fade")}_isShown(){return this.tip&&this.tip.classList.contains("show")}_createPopper(q){let z=$f[Ib(this._config.placement,[this,q,this._element]).toUpperCase()];return Fd(this._element,q,this._getPopperConfig(z))}_getOffset(){let {offset:q}=this._config;return"string"==typeof q?q.split(",").map(z=>Number.parseInt(z,10)):"function"==typeof q?z=>q(z,this._element):q}_resolvePossibleFunction(q){return Ib(q,
[this._element])}_getPopperConfig(q){q={placement:q,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:z=>{this._getTipElement().setAttribute("data-popper-placement",z.state.placement)}}]};return{...q,...Ib(this._config.popperConfig,
[q])}}_setListeners(){for(let q of this._config.trigger.split(" "))if("click"===q)sa.on(this._element,this.constructor.eventName("click"),this._config.selector,z=>{this._initializeOnDelegatedTarget(z).toggle()});else if("manual"!==q){let z="hover"===q?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),f="hover"===q?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");sa.on(this._element,z,this._config.selector,t=>{let w=this._initializeOnDelegatedTarget(t);
w._activeTrigger["focusin"===t.type?"focus":"hover"]=!0;w._enter()});sa.on(this._element,f,this._config.selector,t=>{let w=this._initializeOnDelegatedTarget(t);w._activeTrigger["focusout"===t.type?"focus":"hover"]=w._element.contains(t.relatedTarget);w._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()};sa.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler)}_fixTitle(){let q=this._element.getAttribute("title");q&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||
this._element.setAttribute("aria-label",q),this._element.setAttribute("data-bs-original-title",q),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(q,z){clearTimeout(this._timeout);this._timeout=setTimeout(q,
z)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(q){let z=uc.getDataAttributes(this._element);for(let f of Object.keys(z))Zf.has(f)&&delete z[f];return q={...z,...("object"==typeof q&&q?q:{})},q=this._mergeConfigObj(q),q=this._configAfterMerge(q),this._typeCheckConfig(q),q}_configAfterMerge(q){return q.container=!1===q.container?document.body:Db(q.container),"number"==typeof q.delay&&(q.delay={show:q.delay,hide:q.delay}),"number"==typeof q.title&&(q.title=
q.title.toString()),"number"==typeof q.content&&(q.content=q.content.toString()),q}_getDelegateConfig(){let q={};for(let [z,f]of Object.entries(this._config))this.constructor.Default[z]!==f&&(q[z]=f);return q.selector=!1,q.trigger="manual",q}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null);this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(q){return this.each(function(){let z=vd.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q])throw TypeError(`No method named "${q}"`);
z[q]()}})}constructor(q,z){if(void 0===Wd)throw TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(q,z);this._isEnabled=!0;this._timeout=0;this._isHovered=null;this._activeTrigger={};this.tip=this._newContent=this._templateFactory=this._popper=null;this._setListeners();this._config.selector||this._fixTitle()}}Rb(vd);let cg={...vd.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',
trigger:"click"},gf={...vd.DefaultType,content:"(null|string|element|function)"};class Id extends vd{static get Default(){return cg}static get DefaultType(){return gf}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(q){return this.each(function(){let z=Id.getOrCreateInstance(this,
q);if("string"==typeof q){if(void 0===z[q])throw TypeError(`No method named "${q}"`);z[q]()}})}}Rb(Id);let hf={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ze={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Zd extends Wb{static get Default(){return hf}static get DefaultType(){return ze}static get NAME(){return"scrollspy"}refresh(){for(let q of(this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),
this._observer?this._observer.disconnect():this._observer=this._getNewObserver(),this._observableSections.values()))this._observer.observe(q)}dispose(){this._observer.disconnect();super.dispose()}_configAfterMerge(q){return q.target=Db(q.target)||document.body,q.rootMargin=q.offset?`${q.offset}px 0px -30%`:q.rootMargin,"string"==typeof q.threshold&&(q.threshold=q.threshold.split(",").map(z=>Number.parseFloat(z))),q}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(sa.off(this._config.target,
"click.bs.scrollspy"),sa.on(this._config.target,"click.bs.scrollspy","[href]",q=>{var z=this._observableSections.get(q.target.hash);if(z){q.preventDefault();q=this._rootElement||window;z=z.offsetTop-this._element.offsetTop;if(q.scrollTo)return void q.scrollTo({top:z,behavior:"smooth"});q.scrollTop=z}}))}_getNewObserver(){return new IntersectionObserver(q=>this._observerCallback(q),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(q){let z=
y=>this._targetLinks.get(`#${y.target.id}`),f=y=>{this._previousScrollData.visibleEntryTop=y.target.offsetTop;this._process(z(y))},t=(this._rootElement||document.documentElement).scrollTop,w=t>=this._previousScrollData.parentScrollTop;for(let y of(this._previousScrollData.parentScrollTop=t,q))if(y.isIntersecting)if(q=y.target.offsetTop>=this._previousScrollData.visibleEntryTop,w&&q){if(f(y),!t)break}else w||q||f(y);else this._activeTarget=null,this._clearActiveClass(z(y))}_initializeTargetsAndObservables(){for(let q of(this._targetLinks=
new Map,this._observableSections=new Map,ta.find("[href]",this._config.target))){if(!q.hash||Vb(q))continue;let z=ta.findOne(decodeURI(q.hash),this._element);sb(z)&&(this._targetLinks.set(decodeURI(q.hash),q),this._observableSections.set(q.hash,z))}}_process(q){this._activeTarget!==q&&(this._clearActiveClass(this._config.target),this._activeTarget=q,q.classList.add("active"),this._activateParents(q),sa.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:q}))}_activateParents(q){if(q.classList.contains("dropdown-item"))ta.findOne(".dropdown-toggle",
q.closest(".dropdown")).classList.add("active");else for(let z of ta.parents(q,".nav, .list-group"))for(let f of ta.prev(z,".nav-link, .nav-item > .nav-link, .list-group-item"))f.classList.add("active")}_clearActiveClass(q){for(let z of(q.classList.remove("active"),ta.find("[href].active",q)))z.classList.remove("active")}static jQueryInterface(q){return this.each(function(){let z=Zd.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||"constructor"===q)throw TypeError(`No method named "${q}"`);
z[q]()}})}constructor(q,z){super(q,z);this._targetLinks=new Map;this._observableSections=new Map;this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element;this._observer=this._activeTarget=null;this._previousScrollData={visibleEntryTop:0,parentScrollTop:0};this.refresh()}}sa.on(window,"load.bs.scrollspy.data-api",()=>{for(let q of ta.find('[data-bs-spy="scroll"]'))Zd.getOrCreateInstance(q)});Rb(Zd);class Oc extends Wb{static get NAME(){return"tab"}show(){let q=this._element;
if(!this._elemIsActive(q)){var z=this._getActiveElem(),f=z?sa.trigger(z,"hide.bs.tab",{relatedTarget:q}):null;sa.trigger(q,"show.bs.tab",{relatedTarget:z}).defaultPrevented||f&&f.defaultPrevented||(this._deactivate(z,q),this._activate(q,z))}}_activate(q,z){q&&(q.classList.add("active"),this._activate(ta.getElementFromSelector(q)),this._queueCallback(()=>{"tab"===q.getAttribute("role")?(q.removeAttribute("tabindex"),q.setAttribute("aria-selected",!0),this._toggleDropDown(q,!0),sa.trigger(q,"shown.bs.tab",
{relatedTarget:z})):q.classList.add("show")},q,q.classList.contains("fade")))}_deactivate(q,z){q&&(q.classList.remove("active"),q.blur(),this._deactivate(ta.getElementFromSelector(q)),this._queueCallback(()=>{"tab"===q.getAttribute("role")?(q.setAttribute("aria-selected",!1),q.setAttribute("tabindex","-1"),this._toggleDropDown(q,!1),sa.trigger(q,"hidden.bs.tab",{relatedTarget:z})):q.classList.remove("show")},q,q.classList.contains("fade")))}_keydown(q){if("ArrowLeft ArrowRight ArrowUp ArrowDown Home End".split(" ").includes(q.key)){q.stopPropagation();
q.preventDefault();var z=this._getChildren().filter(f=>!Vb(f));if(["Home","End"].includes(q.key))q=z["Home"===q.key?0:z.length-1];else{let f=["ArrowRight","ArrowDown"].includes(q.key);q=ec(z,q.target,f,!0)}q&&(q.focus({preventScroll:!0}),Oc.getOrCreateInstance(q).show())}}_getChildren(){return ta.find('.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), [data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',this._parent)}_getActiveElem(){return this._getChildren().find(q=>
this._elemIsActive(q))||null}_setInitialAttributes(q,z){for(let f of(this._setAttributeIfNotExists(q,"role","tablist"),z))this._setInitialAttributesOnChild(f)}_setInitialAttributesOnChild(q){q=this._getInnerElement(q);let z=this._elemIsActive(q),f=this._getOuterElement(q);q.setAttribute("aria-selected",z);f!==q&&this._setAttributeIfNotExists(f,"role","presentation");z||q.setAttribute("tabindex","-1");this._setAttributeIfNotExists(q,"role","tab");this._setInitialAttributesOnTargetPanel(q)}_setInitialAttributesOnTargetPanel(q){let z=
ta.getElementFromSelector(q);z&&(this._setAttributeIfNotExists(z,"role","tabpanel"),q.id&&this._setAttributeIfNotExists(z,"aria-labelledby",`${q.id}`))}_toggleDropDown(q,z){q=this._getOuterElement(q);if(q.classList.contains("dropdown")){var f=ta.findOne(".dropdown-toggle",q);f&&f.classList.toggle("active",z);(f=ta.findOne(".dropdown-menu",q))&&f.classList.toggle("show",z);q.setAttribute("aria-expanded",z)}}_setAttributeIfNotExists(q,z,f){q.hasAttribute(z)||q.setAttribute(z,f)}_elemIsActive(q){return q.classList.contains("active")}_getInnerElement(q){return q.matches('.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), [data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]')?
q:ta.findOne('.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), [data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',q)}_getOuterElement(q){return q.closest(".nav-item, .list-group-item")||q}static jQueryInterface(q){return this.each(function(){let z=Oc.getOrCreateInstance(this);if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||"constructor"===q)throw TypeError(`No method named "${q}"`);z[q]()}})}constructor(q){super(q);
(this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'))&&(this._setInitialAttributes(this._parent,this._getChildren()),sa.on(this._element,"keydown.bs.tab",z=>this._keydown(z)))}}sa.on(document,"click.bs.tab",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(q){["A","AREA"].includes(this.tagName)&&q.preventDefault();Vb(this)||Oc.getOrCreateInstance(this).show()});sa.on(window,"load.bs.tab",()=>{for(let q of ta.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))Oc.getOrCreateInstance(q)});
Rb(Oc);let jf={animation:"boolean",autohide:"boolean",delay:"number"},Ae={animation:!0,autohide:!0,delay:5E3};class $d extends Wb{static get Default(){return Ae}static get DefaultType(){return jf}static get NAME(){return"toast"}show(){sa.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.offsetHeight,this._element.classList.add("show","showing"),this._queueCallback(()=>
{this._element.classList.remove("showing");sa.trigger(this._element,"shown.bs.toast");this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(sa.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add("showing"),this._queueCallback(()=>{this._element.classList.add("hide");this._element.classList.remove("showing","show");sa.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout();
this.isShown()&&this._element.classList.remove("show");super.dispose()}isShown(){return this._element.classList.contains("show")}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(q,z){switch(q.type){case "mouseover":case "mouseout":this._hasMouseInteraction=z;break;case "focusin":case "focusout":this._hasKeyboardInteraction=z}if(z)return void this._clearTimeout();q=
q.relatedTarget;this._element===q||this._element.contains(q)||this._maybeScheduleHide()}_setListeners(){sa.on(this._element,"mouseover.bs.toast",q=>this._onInteraction(q,!0));sa.on(this._element,"mouseout.bs.toast",q=>this._onInteraction(q,!1));sa.on(this._element,"focusin.bs.toast",q=>this._onInteraction(q,!0));sa.on(this._element,"focusout.bs.toast",q=>this._onInteraction(q,!1))}_clearTimeout(){clearTimeout(this._timeout);this._timeout=null}static jQueryInterface(q){return this.each(function(){let z=
$d.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q])throw TypeError(`No method named "${q}"`);z[q](this)}})}constructor(q,z){super(q,z);this._timeout=null;this._hasKeyboardInteraction=this._hasMouseInteraction=!1;this._setListeners()}}return fc($d),Rb($d),{Alert:vc,Button:C,Carousel:ia,Collapse:cb,Dropdown:Lc,Modal:ud,Offcanvas:Ic,Popover:Id,ScrollSpy:Zd,Tab:Oc,Toast:$d,Tooltip:vd}}();var Sb={};for(let a of(!function(c){function d(L,J){for(var O=L.length;O--;)if(L[O]===J)return O;
return-1}function b(L,J,O){var K=p(L);void 0===O&&(O=J,J="all");for(var X=0;X<K.length;X++){var W=[];1<(L=K[X].split("+")).length&&(W=g(L),L=[L[L.length-1]]);(L=v(L=L[0]))in l||(l[L]=[]);l[L].push({shortcut:K[X],scope:J,method:O,key:K[X],mods:W})}}function h(){return n||"all"}function p(L){var J;return""==(J=L.replace(/\s/g,"").split(","))[J.length-1]&&(J[J.length-2]+=","),J}function g(L){L=L.slice(0,L.length-1);for(var J=0;J<L.length;J++)L[J]=r[L[J]];return L}function e(L,J,O){L.addEventListener&&
L.addEventListener(J,O,!1)}var m,l={},k={16:!1,18:!1,17:!1,91:!1},n="all",r={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},u={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},v=function(L){L=u[L]||L.toUpperCase().charCodeAt(0);return"function"==
typeof L?L():L},x=[];for(m=1;20>m;m++)u["f"+m]=111+m;var D={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(m in r)b[m]=!1;e(document,"keydown",function(L){!function(J){var O,K,X,W,Y;if(-1==d(x,O=Jg(J.key))&&x.push(O),O in k)for(X in k[O]=!0,r)r[X]==O&&(b[X]=!0);else{for(m in k)k[m]=J[D[m]];if(b.filter.call(this,J)&&O in l){var ka=0;for(Y=h();ka<l[O].length;ka++)if((K=l[O][ka]).scope==Y||"all"==K.scope){for(X in W=0<K.mods.length,k)(!k[X]&&-1<d(K.mods,+X)||k[X]&&-1==d(K.mods,+X))&&(W=!1);
(0!=K.mods.length||k[16]||k[18]||k[17]||k[91])&&!W||!1===K.method(J,K)&&(J.preventDefault?J.preventDefault():J.returnValue=!1,J.stopPropagation&&J.stopPropagation(),J.cancelBubble&&(J.cancelBubble=!0))}}}}(L)});e(document,"keyup",function(L){var J;L=Jg(L.key);var O=d(x,L);if(0<=O&&x.splice(O,1),L in k)for(J in k[L]=!1,r)r[J]==L&&(b[J]=!1)});e(window,"focus",function(){for(m in k)k[m]=!1;for(m in r)b[m]=!1});var H=c.key;c.key=b;c.key.setScope=function(L){n=L||"all"};c.key.getScope=h;c.key.deleteScope=
function(L){var J,O;for(J in l){var K=0;for(O=l[J];K<O.length;)O[K].scope===L?O.splice(K,1):K++}};c.key.filter=function(L){L=(L.target||L.srcElement).tagName;return"INPUT"!=L&&"SELECT"!=L&&"TEXTAREA"!=L};c.key.isPressed=function(L){return"string"==typeof L&&(L=v(L)),-1!=d(x,L)};c.key.getPressedKeyCodes=function(){return x.slice(0)};c.key.noConflict=function(){var L=c.key;return c.key=H,L};c.key.unbind=function(L,J){var O,K,X,W,Y=[];var ka=0;for(O=p(L);ka<O.length&&(1<(K=O[ka].split("+")).length&&
(Y=g(K)),L=v(L=K[K.length-1]),void 0===J&&(J=h()),l[L]);ka++)for(X=0;X<l[L].length;X++){var va;if(va=(W=l[L][X]).scope===J)a:if(W=W.mods,W.length!=Y.length)va=!1;else{for(va=0;va<W.length;va++)if(W[va]!==Y[va]){va=!1;break a}va=!0}va&&(l[L][X]={})}};Sb=b}(Sb||{}),ed.getRef=function(){return null==ed.instance&&(ed.instance=new ed),ed.instance},window.onWacomPluginLoaded=function(){ed.getRef().pluginLoaded()},Dd.prototype.clone=function(){for(var c=new Dd(Array(this.points.length)),d=0;d<this.points.length;d++)c.points[d]=
{x:this.points[d].x,y:this.points[d].y};return c},Dd.prototype.getTransformed=function(c){for(var d=new Dd(Array(this.points.length)),b=0;b<this.points.length;b++)d.points[b]=c.getTransformedPoint(this.points[b]);return d},Dd.prototype.getCenter=function(){for(var c=this.points[0].x,d=this.points[0].y,b=1;b<this.points.length;b++)c+=this.points[b].x,d+=this.points[b].y;return{x:c/this.points.length,y:d/this.points.length}},Dd.prototype.containsPoint=function(c){var d,b=!1;var h=0;for(d=this.points.length-
1;h<this.points.length;d=h++)this.points[h].y>c.y!=this.points[d].y>c.y&&c.x<(this.points[d].x-this.points[h].x)*(c.y-this.points[h].y)/(this.points[d].y-this.points[h].y)+this.points[h].x&&(b=!b);return b},Mb.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Mb.prototype.normalize=function(){var c=this.getLength();return this.x/=c,this.y/=c,this},Mb.prototype.getDotProduct=function(c){return this.x*c.x+this.y*c.y},Mb.prototype.scale=function(c){return this.x*=c,this.y*=
c,this},Mb.prototype.getScaled=function(c){var d=new Mb(this.x,this.y);return d.scale(c),d},Mb.prototype.getRounded=function(){return new Mb(Math.round(this.x),Math.round(this.y))},Mb.prototype.getTruncated=function(){return new Mb(~~this.x,~~this.y)},Mb.prototype.getPerpendicular=function(){return new Mb(-this.y,this.x)},Mb.prototype.add=function(c){return this.x+=c.x,this.y+=c.y,this},Mb.prototype.subtract=function(c){return this.x-=c.x,this.y-=c.y,this},Mb.prototype.getSum=function(c){return new Mb(this.x+
c.x,this.y+c.y)},Mb.subtractPoints=function(c,d){return new Mb(c.x-d.x,c.y-d.y)},ne.prototype=Object.create(pa(Yb).prototype),ne.prototype.constructor=ne,nc.MODE_INDEX_DEFAULT=0,nc.MODE_INDEX_USER=1,nc.prototype.setMode=function(c,d){var b=this.modes[c];b!=d&&(b&&b.leave(),this.modes[c]=d,d.enter())},nc.prototype.setDefaultMode=function(c){c.transient=!1;c.capture=!1;this.setMode(nc.MODE_INDEX_DEFAULT,c)},nc.prototype.setUserMode=function(c){for(var d=this.modes.length-1;d>nc.MODE_INDEX_USER;d--)this.modes[d].leave(),
this.modes.splice(d,1);c.transient=!1;c.capture=!1;this.setMode(nc.MODE_INDEX_USER,c)},nc.prototype.deliverEvent=function(c,d){for(var b=this.modes.length-1;0<=b;b--){var h=this.modes[b];if(h[c].apply(h,d)||h.capture&&"paint"!=c)return!0}return!1},["mouseDown","mouseUp"]))nc.prototype[a]=function(c,d,b){this.deliverEvent(a,[c,d,b])};for(let a of["mouseDrag","mouseMove"])nc.prototype[a]=function(c,d){this.deliverEvent(a,[c,d])};for(let a of["keyDown","keyUp"])nc.prototype[a]=function(c){this.deliverEvent(a,
[c])&&c.preventDefault()};nc.prototype.paint=function(a){this.deliverEvent("paint",[a])};nc.prototype.push=function(a,c){var d=this.peek();d&&d.suspend();a.transient=c;a.capture=!1;a.enter();this.modes.push(a)};nc.prototype.peek=function(){return 0<this.modes.length?this.modes[this.modes.length-1]:null};nc.prototype.pop=function(){var a=this.modes.pop(),c=this.peek();return a&&a.leave(),c&&c.resume(),c};Le.prototype=Object.create(pa(Yb).prototype);Le.prototype.constructor=Le;lc.prototype=Object.create(pa(Yb).prototype);
lc.prototype.constructor=pa(Yb);Me.prototype=Object.create(lc.prototype);Me.prototype.constructor=Me;Ne.prototype=Object.create(lc.prototype);Ne.prototype.constructor=Ne;Oe.prototype=Object.create(lc.prototype);Oe.prototype.constructor=Oe;let kf=window.devicePixelRatio||1,Jd=Math.round(128*kf),Kd=Math.round(128*kf);class Ng{_makeBitmap(){if(this._bitmapInvalid){var a=0,c=this._imageData.data;if(this._greyscale)for(var d=0;d<Kd;d++){var b=255-Math.round(d/(Kd-1)*255);for(var h=0;h<Jd;h++)c[a+G.RED_BYTE_OFFSET]=
b,c[a+G.GREEN_BYTE_OFFSET]=b,c[a+G.BLUE_BYTE_OFFSET]=b,c[a+G.ALPHA_BYTE_OFFSET]=255,a+=G.BYTES_PER_PIXEL}else for(d=this.color.clone(),b=0;b<Kd;b++)for(d.setValue(255-~~(b/(Kd-1)*255)),h=0;h<Jd;h++)d.setSaturation(Math.round(h/(Jd-1)*255)),c[a+G.RED_BYTE_OFFSET]=d.rgb>>16&255,c[a+G.GREEN_BYTE_OFFSET]=d.rgb>>8&255,c[a+G.BLUE_BYTE_OFFSET]=255&d.rgb,c[a+G.ALPHA_BYTE_OFFSET]=255,a+=G.BYTES_PER_PIXEL;this._bitmapInvalid=!1}}paint(){this._makeBitmap();this._canvasContext.putImageData(this._imageData,0,
0);let a=this.color.getSaturation()/255*(Jd-1),c=(255-this.color.getValue())/255*(Kd-1);Ke(this._canvasContext,"stroke");this._canvasContext.lineWidth=1.5*kf;this._canvasContext.beginPath();this._greyscale?(this._canvasContext.moveTo(0,c),this._canvasContext.lineTo(Jd,c)):this._canvasContext.arc(a,c,5*kf,0,2*Math.PI);this._canvasContext.stroke();this._canvasContext.globalCompositeOperation="source-over"}_mousePickColor(a){let c=this._canvas.getBoundingClientRect();var d=a.pageX-window.scrollX-c.left;
a=Math.max(Math.min(255-~~(255*(a.pageY-window.scrollY-c.top)/127),255),0);this._greyscale?this.color.setGreyscale(a):(d=Math.max(Math.min(~~(255*d/127),255),0),this.color.setHsv(this.color.getHue(),d,a));this.paint();this._controller.setCurColor(this.color)}_endDrag(a){this._canvas.releasePointerCapture(a.pointerId);this._capturedMouse=!1;this._canvas.removeEventListener("pointerup",this._handleEndDrag);this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}_startDrag(a){this._capturedMouse||
(this._capturedMouse=!0,this._canvas.setPointerCapture(a.pointerId),this._canvas.addEventListener("pointerup",this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor));this._handleMousePickColor(a)}setHue(a){this.color.getHue()!=a&&(this.color.setHue(a),this._controller.setCurColor(this.color))}getElement(){return this._canvas}constructor(a,c){Bc(this,"_controller",void 0);Bc(this,"_canvas",void 0);Bc(this,"_canvasContext",void 0);Bc(this,"_imageData",void 0);Bc(this,
"_bitmapInvalid",!0);Bc(this,"_capturedMouse",!1);Bc(this,"_greyscale",!1);Bc(this,"color",new Bb(0));this._controller=a;let d=document.createElement("canvas");this._canvas=d;d.className="chickenpaint-colorpicker-select";d.setAttribute("touch-action","none");d.width=Jd;d.height=Kd;d.style.width="128px";d.style.height="128px";this._canvasContext=d.getContext("2d");this._imageData=this._canvasContext.createImageData(Jd,Kd);this._canvasContext.getImageData(0,0,1,1);this._handleEndDrag=this._endDrag.bind(this);
this._handleMousePickColor=this._mousePickColor.bind(this);d.addEventListener("pointerdown",b=>this._startDrag(b));c&&this.color.copyFrom(c);a.on("colorChange",b=>{this.color.copyFrom(b);this._bitmapInvalid=!0;this.paint()});a.on("colorModeChange",b=>{this._greyscale="greyscale"==b;this._bitmapInvalid=!0;this.paint()});this.paint()}}class Og{paint(){this._canvasContext.putImageData(this._imageData,0,0);let a=128*this.hue/360;Ke(this._canvasContext,"stroke");this._canvasContext.lineWidth=1.5;this._canvasContext.beginPath();
this._canvasContext.moveTo(0,a);this._canvasContext.lineTo(24,a);this._canvasContext.stroke();this._canvasContext.globalCompositeOperation="source-over"}_mousePickColor(a){let c=this._canvas.getBoundingClientRect();this.hue=Math.max(0,Math.min(359,~~(360*(a.pageY-c.top)/128)));this.paint();this.selecter&&this.selecter.setHue(this.hue)}_endDrag(a){this._canvas.releasePointerCapture(a.pointerId);this._capturedMouse=!1;this._canvas.removeEventListener("pointerup",this._handleEndDrag);this._canvas.removeEventListener("pointermove",
this._handleMousePickColor)}_startDrag(a){this._capturedMouse||(this._capturedMouse=!0,this._canvas.setPointerCapture(a.pointerId),this._canvas.addEventListener("pointerup",this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor));this._handleMousePickColor(a)}getElement(){return this._canvas}setHue(a){this.hue=a;this.paint()}constructor(a,c,d){Bc(this,"hue",void 0);Bc(this,"selecter",void 0);Bc(this,"_canvas",void 0);Bc(this,"_canvasContext",void 0);Bc(this,"_imageData",
void 0);Bc(this,"_capturedMouse",!1);this.selecter=c;this.hue=d||0;let b=document.createElement("canvas");this._canvas=b;a.on("colorChange",h=>{this.setHue(h.getHue())});a.on("colorModeChange",h=>{b.style.display="greyscale"==h?"none":"block"});b.setAttribute("touch-action","none");b.addEventListener("pointerdown",h=>this._startDrag(h));b.width=24;b.height=128;b.className="chickenpaint-colorpicker-slider";this._canvasContext=b.getContext("2d");this._imageData=this._canvasContext.createImageData(24,
128);this._canvasContext.getImageData(0,0,1,1);this._handleEndDrag=this._endDrag.bind(this);this._handleMousePickColor=this._mousePickColor.bind(this);(function(h){let p=new Bb(65535),g=0,e=h.data;for(let m=0;m<h.height;m++){p.setHue(359*m/h.height);for(let l=0;l<h.width;l++)e[g+G.RED_BYTE_OFFSET]=p.rgb>>16&255,e[g+G.GREEN_BYTE_OFFSET]=p.rgb>>8&255,e[g+G.BLUE_BYTE_OFFSET]=255&p.rgb,e[g+G.ALPHA_BYTE_OFFSET]=255,g+=G.BYTES_PER_PIXEL}})(this._imageData);this.paint()}}Pe.prototype=Object.create(lc.prototype);
Pe.prototype.constructor=Pe;Sd.prototype=Object.create(pa(Yb).prototype);Sd.prototype.constructor=Sd;Fc.prototype=Object.create(pa(Yb).prototype);Fc.prototype.constructor=Fc;oe.prototype=Object.create(pa(Yb).prototype);oe.prototype.constructor=oe;Td.prototype=Object.create(lc.prototype);Td.prototype.constructor=Td;Td.CPBrushPreview=function(a){function c(){g.clearRect(0,0,p.width,p.height);g.beginPath();g.arc(p.width/2,p.height/2,h/2*window.devicePixelRatio,0,2*Math.PI);g.stroke()}function d(m){let l=
p.getBoundingClientRect();var k=m.clientX-l.left-p.clientWidth/2;m=m.clientY-l.top-p.clientHeight/2;k=Math.max(1,Math.min(200,Math.round(2*Math.sqrt(k*k+m*m))));c();a.setBrushSize(k)}function b(m){e&&(e=!1,document.removeEventListener("pointerup",b,{passive:!0,capture:!1}),document.removeEventListener("pointermove",d,{passive:!0,capture:!1}))}let h=16,p=document.createElement("canvas"),g=p.getContext("2d"),e=!1;p.addEventListener("pointerdown",function(m){e||(e=!0,document.addEventListener("pointerup",
b,{passive:!0,capture:!1}),document.addEventListener("pointermove",d,{passive:!0,capture:!1}),d(m))});this.getElement=function(){return p};a.on("toolChange",function(m,l){l.size!=h&&(h=l.size,c())});p.width=64;p.height=64;1<window.devicePixelRatio&&(p.style.width=p.width+"px",p.style.height=p.height+"px",p.width*=window.devicePixelRatio,p.height*=window.devicePixelRatio);p.className="chickenpaint-brush-preview";g.strokeStyle="black";g.lineWidth=+window.devicePixelRatio;c()};var Oa={};!function(a,
c){"object"==typeof Oa?Oa=a.document?c(a,!0):function(d){if(!d.document)throw Error("jQuery requires a window with a document");return c(d)}:c(a)}("undefined"!=typeof window?window:Oa,function(a,c){function d(f,t,w){var y,B,E=(w=w||Xa).createElement("script");if(E.text=f,t)for(y in Rc)(B=t[y]||t.getAttribute&&t.getAttribute(y))&&E.setAttribute(y,B);w.head.appendChild(E).parentNode.removeChild(E)}function b(f){return null==f?f+"":"object"==typeof f||"function"==typeof f?ub[Rb.call(f)]||"object":typeof f}
function h(f){var t=!!f&&"length"in f&&f.length,w=b(f);return!(eb(f)||Xb(f))&&("array"===w||0===t||"number"==typeof t&&0<t&&t-1 in f)}function p(f,t){return f.nodeName&&f.nodeName.toLowerCase()===t.toLowerCase()}function g(f,t){return t?"\x00"===f?"\ufffd":f.slice(0,-1)+"\\"+f.charCodeAt(f.length-1).toString(16)+" ":"\\"+f}function e(f,t,w){return eb(t)?A.grep(f,function(y,B){return!!t.call(y,B,y)!==w}):t.nodeType?A.grep(f,function(y){return y===t!==w}):"string"!=typeof t?A.grep(f,function(y){return-1<
Tb.call(t,y)!==w}):A.filter(t,f,w)}function m(f,t){for(;(f=f[t])&&1!==f.nodeType;);return f}function l(f){return f}function k(f){throw f;}function n(f,t,w,y){var B;try{f&&eb(B=f.promise)?B.call(f).done(t).fail(w):f&&eb(B=f.then)?B.call(f,t,w):t.apply(void 0,[f].slice(y))}catch(E){w.apply(void 0,[E])}}function r(){Xa.removeEventListener("DOMContentLoaded",r);a.removeEventListener("load",r);A.ready()}function u(f,t){return t.toUpperCase()}function v(f){return f.replace(za,"ms-").replace(cb,u)}function x(){this.expando=
A.expando+x.uid++}function D(f,t,w){var y;if(void 0===w&&1===f.nodeType)if(y="data-"+t.replace(kc,"-$&").toLowerCase(),"string"==typeof(w=f.getAttribute(y))){try{var B=w;w="true"===B||"false"!==B&&("null"===B?null:B===+B+""?+B:ac.test(B)?JSON.parse(B):B)}catch(E){}jb.set(f,t,w)}else w=void 0;return w}function H(f,t,w,y){var B,E,I=20,P=y?function(){return y.cur()}:function(){return A.css(f,t,"")},M=P(),V=w&&w[3]||(A.cssNumber[t]?"":"px"),Z=f.nodeType&&(A.cssNumber[t]||"px"!==V&&+M)&&Ma.exec(A.css(f,
t));if(Z&&Z[3]!==V){M/=2;V=V||Z[3];for(Z=+M||1;I--;)A.style(f,t,Z+V),0>=(1-E)*(1-(E=P()/M||.5))&&(I=0),Z/=E;Z*=2;A.style(f,t,Z+V);w=w||[]}return w&&(Z=+Z||+M||0,B=w[1]?Z+(w[1]+1)*w[2]:+w[2],y&&(y.unit=V,y.start=Z,y.end=B)),B}function L(f,t){for(var w,y,B=[],E=0,I=f.length;E<I;E++)if((y=f[E]).style)if(w=y.style.display,t){if("none"===w&&(B[E]=Ca.get(y,"display")||null,B[E]||(y.style.display="")),""===y.style.display&&Ac(y)){w=E;var P=void 0;var M=y.ownerDocument;y=y.nodeName;var V=Vd[y];M=(V||(P=M.body.appendChild(M.createElement(y)),
V=A.css(P,"display"),P.parentNode.removeChild(P),"none"===V&&(V="block"),Vd[y]=V),V);B[w]=M}}else"none"!==w&&(B[E]="none",Ca.set(y,"display",w));for(E=0;E<I;E++)null!=B[E]&&(f[E].style.display=B[E]);return f}function J(f,t){var w;return(w=void 0!==f.getElementsByTagName?f.getElementsByTagName(t||"*"):void 0!==f.querySelectorAll?f.querySelectorAll(t||"*"):[],void 0===t||t&&p(f,t))?A.merge([f],w):w}function O(f,t){for(var w=0,y=f.length;w<y;w++)Ca.set(f[w],"globalEval",!t||Ca.get(t[w],"globalEval"))}
function K(f,t,w,y,B){for(var E,I,P,M,V=t.createDocumentFragment(),Z=[],U=0,oa=f.length;U<oa;U++)if((E=f[U])||0===E)if("object"===b(E))A.merge(Z,E.nodeType?[E]:E);else if(ue.test(E)){I=I||V.appendChild(t.createElement("div"));P=Cc[(Ye.exec(E)||["",""])[1].toLowerCase()]||Cc._default;I.innerHTML=P[1]+A.htmlPrefilter(E)+P[2];for(P=P[0];P--;)I=I.lastChild;A.merge(Z,I.childNodes);(I=V.firstChild).textContent=""}else Z.push(t.createTextNode(E));V.textContent="";for(U=0;E=Z[U++];)if(y&&-1<A.inArray(E,y))B&&
B.push(E);else if(M=pb(E),I=J(V.appendChild(E),"script"),M&&O(I),w)for(P=0;E=I[P++];)te.test(E.type||"")&&w.push(E);return V}function X(){return!0}function W(){return!1}function Y(f,t,w,y,B,E){var I,P;if("object"==typeof t){for(P in"string"!=typeof w&&(y=y||w,w=void 0),t)Y(f,P,w,y,t[P],E);return f}if(null==y&&null==B?(B=w,y=w=void 0):null==B&&("string"==typeof w?(B=y,y=void 0):(B=y,y=w,w=void 0)),!1===B)B=W;else if(!B)return f;return 1===E&&(I=B,(B=function(M){return A().off(M),I.apply(this,arguments)}).guid=
I.guid||(I.guid=A.guid++)),f.each(function(){A.event.add(this,t,B,y,w)})}function ka(f,t,w){w?(Ca.set(f,t,!1),A.event.add(f,t,{namespace:!1,handler:function(y){var B,E=Ca.get(this,t);if(1&y.isTrigger&&this[t])if(E)(A.event.special[t]||{}).delegateType&&y.stopPropagation();else{if(E=lb.call(arguments),Ca.set(this,t,E),this[t](),B=Ca.get(this,t),Ca.set(this,t,!1),E!==B)return y.stopImmediatePropagation(),y.preventDefault(),B}else E&&(Ca.set(this,t,A.event.trigger(E[0],E.slice(1),this)),y.stopPropagation(),
y.isImmediatePropagationStopped=X)}})):void 0===Ca.get(f,t)&&A.event.add(f,t,X)}function va(f,t){return p(f,"table")&&p(11!==t.nodeType?t:t.firstChild,"tr")&&A(f).children("tbody")[0]||f}function Ia(f){return f.type=(null!==f.getAttribute("type"))+"/"+f.type,f}function S(f){return"true/"===(f.type||"").slice(0,5)?f.type=f.type.slice(5):f.removeAttribute("type"),f}function ya(f,t){var w,y,B,E,I;if(1===t.nodeType){if(Ca.hasData(f)&&(I=Ca.get(f).events))for(y in Ca.remove(t,"handle events"),I){var P=
0;for(w=I[y].length;P<w;P++)A.event.add(t,y,I[y][P])}jb.hasData(f)&&(B=jb.access(f),E=A.extend({},B),jb.set(t,E))}}function na(f,t,w,y){t=rb(t);var B,E,I,P=0,M=f.length,V=M-1,Z=t[0],U=eb(Z);if(U||1<M&&"string"==typeof Z&&!Va.checkClone&&Mf.test(Z))return f.each(function(qa){var ua=f.eq(qa);U&&(t[0]=Z.call(this,qa,ua.html()));na(ua,t,w,y)});if(M&&(E=(B=K(t,f[0].ownerDocument,!1,f,y)).firstChild,1===B.childNodes.length&&(B=E),E||y)){for(I=(E=A.map(J(B,"script"),Ia)).length;P<M;P++){var oa=B;P!==V&&
(oa=A.clone(oa,!0,!0),I&&A.merge(E,J(oa,"script")));w.call(f[P],oa,P)}if(I)for(B=E[E.length-1].ownerDocument,A.map(E,S),P=0;P<I;P++)oa=E[P],te.test(oa.type||"")&&!Ca.access(oa,"globalEval")&&A.contains(B,oa)&&(oa.src&&"module"!==(oa.type||"").toLowerCase()?A._evalUrl&&!oa.noModule&&A._evalUrl(oa.src,{nonce:oa.nonce||oa.getAttribute("nonce")},B):d(oa.textContent.replace(Nf,""),oa,B))}return f}function wb(f,t,w){for(var y=t?A.filter(t,f):f,B=0;null!=(t=y[B]);B++)w||1!==t.nodeType||A.cleanData(J(t)),
t.parentNode&&(w&&pb(t)&&O(J(t,"script")),t.parentNode.removeChild(t));return f}function Wa(f,t,w){var y,B,E,I,P=Wd.test(t),M=f.style;return(w=w||Xd(f))&&(I=w.getPropertyValue(t)||w[t],P&&I&&(I=I.replace(Wb,"$1")||void 0),""!==I||pb(f)||(I=A.style(f,t)),!Va.pixelBoxStyles()&&Fd.test(I)&&Of.test(t)&&(y=M.width,B=M.minWidth,E=M.maxWidth,M.minWidth=M.maxWidth=M.width=I,I=w.width,M.width=y,M.minWidth=B,M.maxWidth=E)),void 0!==I?I+"":I}function Lb(f,t){return{get:function(){if(f())delete this.get;else return(this.get=
t).apply(this,arguments)}}}function Fb(f){var t;if(!(t=A.cssProps[f]||cf[f])){if(!(f in bf)){a:{t=f;for(var w=t[0].toUpperCase()+t.slice(1),y=af.length;y--;)if((t=af[y]+w)in bf)break a;t=void 0}f=cf[f]=t||f}t=f}return t}function La(f,t,w){return(f=Ma.exec(t))?Math.max(0,f[2]-(w||0))+(f[3]||"px"):t}function Na(f,t,w,y,B,E){var I=+("width"===t),P=0,M=0,V=0;if(w===(y?"border":"content"))return 0;for(;4>I;I+=2)"margin"===w&&(V+=A.css(f,w+Sa[I],!0,B)),y?("content"===w&&(M-=A.css(f,"padding"+Sa[I],!0,B)),
"margin"!==w&&(M-=A.css(f,"border"+Sa[I]+"Width",!0,B))):(M+=A.css(f,"padding"+Sa[I],!0,B),"padding"!==w?M+=A.css(f,"border"+Sa[I]+"Width",!0,B):P+=A.css(f,"border"+Sa[I]+"Width",!0,B));return!y&&0<=E&&(M+=Math.max(0,Math.ceil(f["offset"+t[0].toUpperCase()+t.slice(1)]-E-M-P-.5))||0),M+V}function ja(f,t,w){var y=Xd(f),B=(!Va.boxSizingReliable()||w)&&"border-box"===A.css(f,"boxSizing",!1,y),E=B,I=Wa(f,t,y),P="offset"+t[0].toUpperCase()+t.slice(1);if(Fd.test(I)){if(!w)return I;I="auto"}return(!Va.boxSizingReliable()&&
B||!Va.reliableTrDimensions()&&p(f,"tr")||"auto"===I||!parseFloat(I)&&"inline"===A.css(f,"display",!1,y))&&f.getClientRects().length&&(B="border-box"===A.css(f,"boxSizing",!1,y),(E=P in f)&&(I=f[P])),(I=parseFloat(I)||0)+Na(f,t,w||(B?"border":"content"),E,y,I)+"px"}function Aa(f,t,w,y,B){return new Aa.prototype.init(f,t,w,y,B)}function xa(){return a.setTimeout(function(){sd=void 0}),sd=Date.now()}function fa(f,t){var w,y=0,B={height:f};for(t=+!!t;4>y;y+=2-t)B["margin"+(w=Sa[y])]=B["padding"+w]=f;
return t&&(B.opacity=B.width=f),B}function Qa(f,t,w){for(var y,B=(ma.tweeners[t]||[]).concat(ma.tweeners["*"]),E=0,I=B.length;E<I;E++)if(y=B[E].call(w,t,f))return y}function ma(f,t,w){var y,B=0,E=ma.prefilters.length,I=A.Deferred().always(function(){delete P.elem}),P=function(){if(y)return!1;var V=sd||xa();V=Math.max(0,M.startTime+M.duration-V);for(var Z=1-(V/M.duration||0),U=0,oa=M.tweens.length;U<oa;U++)M.tweens[U].run(Z);return(I.notifyWith(f,[M,Z,V]),1>Z&&oa)?V:(oa||I.notifyWith(f,[M,1,0]),I.resolveWith(f,
[M]),!1)},M=I.promise({elem:f,props:A.extend({},t),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},w),originalProperties:t,originalOptions:w,startTime:sd||xa(),duration:w.duration,tweens:[],createTween:function(V,Z){V=A.Tween(f,M.opts,V,Z,M.opts.specialEasing[V]||M.opts.easing);return M.tweens.push(V),V},stop:function(V){var Z=0,U=V?M.tweens.length:0;if(y)return this;for(y=!0;Z<U;Z++)M.tweens[Z].run(1);return V?(I.notifyWith(f,[M,1,0]),I.resolveWith(f,[M,V])):I.rejectWith(f,[M,V]),this}});
w=M.props;!function(V,Z){var U,oa,qa,ua,Ea;for(U in V)if(qa=Z[oa=v(U)],Array.isArray(ua=V[U])&&(qa=ua[1],ua=V[U]=ua[0]),U!==oa&&(V[oa]=ua,delete V[U]),(Ea=A.cssHooks[oa])&&"expand"in Ea)for(U in ua=Ea.expand(ua),delete V[oa],ua)U in V||(V[U]=ua[U],Z[U]=qa);else Z[oa]=qa}(w,M.opts.specialEasing);for(;B<E;B++)if(t=ma.prefilters[B].call(M,f,w,M.opts))return eb(t.stop)&&(A._queueHooks(M.elem,M.opts.queue).stop=t.stop.bind(t)),t;return A.map(w,Qa,M),eb(M.opts.start)&&M.opts.start.call(f,M),M.progress(M.opts.progress).done(M.opts.done,
M.opts.complete).fail(M.opts.fail).always(M.opts.always),A.fx.timer(A.extend(P,{elem:f,anim:M,queue:M.opts.queue})),M}function Ua(f){return(f.match(N)||[]).join(" ")}function Ja(f){return f.getAttribute&&f.getAttribute("class")||""}function kb(f){return Array.isArray(f)?f:"string"==typeof f&&f.match(N)||[]}function bc(f){return function(t,w){"string"!=typeof t&&(w=t,t="*");var y=0,B=t.toLowerCase().match(N)||[];if(eb(w))for(;t=B[y++];)"+"===t[0]?(f[t=t.slice(1)||"*"]=f[t]||[]).unshift(w):(f[t]=f[t]||
[]).push(w)}}function jc(f,t,w,y){function B(P){var M;return E[P]=!0,A.each(f[P]||[],function(V,Z){V=Z(t,w,y);return"string"!=typeof V||I||E[V]?I?!(M=V):void 0:(t.dataTypes.unshift(V),B(V),!1)}),M}var E={},I=f===Id;return B(t.dataTypes[0])||!E["*"]&&B("*")}function Nb(f,t){var w,y,B=A.ajaxSettings.flatOptions||{};for(w in t)void 0!==t[w]&&((B[w]?f:y||={})[w]=t[w]);return y&&A.extend(!0,f,y),f}var Db,sb=[],Vb=Object.getPrototypeOf,lb=sb.slice,rb=sb.flat?function(f){return sb.flat.call(f)}:function(f){return sb.concat.apply([],
f)},hb=sb.push,Tb=sb.indexOf,ub={},Rb=ub.toString,Ib=ub.hasOwnProperty,Jc=Ib.toString,ec=Jc.call(Object),Va={},eb=function(f){return"function"==typeof f&&"number"!=typeof f.nodeType&&"function"!=typeof f.item},Xb=function(f){return null!=f&&f===f.window},Xa=a.document,Rc={type:!0,src:!0,nonce:!0,noModule:!0},Sc=/HTML$/i,A=function(f,t){return new A.fn.init(f,t)};A.fn=A.prototype={jquery:"3.7.1",constructor:A,length:0,toArray:function(){return lb.call(this)},get:function(f){return null==f?lb.call(this):
0>f?this[f+this.length]:this[f]},pushStack:function(f){f=A.merge(this.constructor(),f);return f.prevObject=this,f},each:function(f){return A.each(this,f)},map:function(f){return this.pushStack(A.map(this,function(t,w){return f.call(t,w,t)}))},slice:function(){return this.pushStack(lb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(f,t){return(t+1)%2}))},odd:function(){return this.pushStack(A.grep(this,
function(f,t){return t%2}))},eq:function(f){var t=this.length;f=+f+(0>f?t:0);return this.pushStack(0<=f&&f<t?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:hb,sort:sb.sort,splice:sb.splice};A.extend=A.fn.extend=function(){var f,t,w,y,B,E=arguments[0]||{},I=1,P=arguments.length,M=!1;"boolean"==typeof E&&(M=E,E=arguments[I]||{},I++);"object"==typeof E||eb(E)||(E={});for(I===P&&(E=this,I--);I<P;I++)if(null!=(f=arguments[I]))for(t in f){var V=f[t];"__proto__"!==t&&E!==
V&&(M&&V&&(A.isPlainObject(V)||(y=Array.isArray(V)))?(w=E[t],B=y&&!Array.isArray(w)?[]:y||A.isPlainObject(w)?w:{},y=!1,E[t]=A.extend(M,B,V)):void 0!==V&&(E[t]=V))}return E};A.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(f){throw Error(f);},noop:function(){},isPlainObject:function(f){var t,w;return!!f&&"[object Object]"===Rb.call(f)&&(!(t=Vb(f))||"function"==typeof(w=Ib.call(t,"constructor")&&t.constructor)&&Jc.call(w)===ec)},isEmptyObject:function(f){for(var t in f)return!1;
return!0},globalEval:function(f,t,w){d(f,{nonce:t&&t.nonce},w)},each:function(f,t){var w,y=0;if(h(f))for(w=f.length;y<w&&!1!==t.call(f[y],y,f[y]);y++);else for(y in f)if(!1===t.call(f[y],y,f[y]))break;return f},text:function(f){var t,w="",y=0,B=f.nodeType;if(!B)for(;t=f[y++];)w+=A.text(t);return 1===B||11===B?f.textContent:9===B?f.documentElement.textContent:3===B||4===B?f.nodeValue:w},makeArray:function(f,t){t=t||[];return null!=f&&(h(Object(f))?A.merge(t,"string"==typeof f?[f]:f):hb.call(t,f)),
t},inArray:function(f,t,w){return null==t?-1:Tb.call(t,f,w)},isXMLDoc:function(f){var t=f&&(f.ownerDocument||f).documentElement;return!Sc.test(f&&f.namespaceURI||t&&t.nodeName||"HTML")},merge:function(f,t){for(var w=+t.length,y=0,B=f.length;y<w;y++)f[B++]=t[y];return f.length=B,f},grep:function(f,t,w){var y=[],B=0,E=f.length;for(w=!w;B<E;B++)!t(f[B],B)!==w&&y.push(f[B]);return y},map:function(f,t,w){var y,B,E=0,I=[];if(h(f))for(y=f.length;E<y;E++)null!=(B=t(f[E],E,w))&&I.push(B);else for(E in f)null!=
(B=t(f[E],E,w))&&I.push(B);return rb(I)},guid:1,support:Va});"function"==typeof Symbol&&(A.fn[Symbol.iterator]=sb[Symbol.iterator]);A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(f,t){ub["[object "+t+"]"]=t.toLowerCase()});var sa=sb.pop,uc=sb.sort,Nc=sb.splice,Wb=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");A.contains=function(f,t){t=t&&t.parentNode;return f===t||!!(t&&1===t.nodeType&&(f.contains?f.contains(t):
f.compareDocumentPosition&&16&f.compareDocumentPosition(t)))};var $c=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;A.escapeSelector=function(f){return(f+"").replace($c,g)};!function(){function f(R,aa,ba,ra){var Ka,ib,bb,tb,db=aa&&aa.ownerDocument;var Ab=aa?aa.nodeType:9;if(ba=ba||[],"string"!=typeof R||!R||1!==Ab&&9!==Ab&&11!==Ab)return ba;if(!ra&&(P(aa),aa=aa||Ya,ab)){if(11!==Ab&&(tb=ri.exec(R)))if(Ka=tb[1])if(9===Ab){if(!(ib=aa.getElementById(Ka)))return ba;if(ib.id===Ka)return Jb.call(ba,ib),
ba}else{if(db&&(ib=db.getElementById(Ka))&&f.contains(aa,ib)&&ib.id===Ka)return Jb.call(ba,ib),ba}else{if(tb[2])return Jb.apply(ba,aa.getElementsByTagName(R)),ba;if((Ka=tb[3])&&aa.getElementsByClassName)return Jb.apply(ba,aa.getElementsByClassName(Ka)),ba}if(!(hc[R+" "]||zb&&zb.test(R))){if(Ka=R,db=aa,1===Ab&&(rc.test(R)||Ob.test(R))){(db=dg.test(R)&&I(aa.parentNode)||aa)==aa&&Va.scope||((bb=aa.getAttribute("id"))?bb=A.escapeSelector(bb):aa.setAttribute("id",bb=Gb));for(Ab=(Ka=V(R)).length;Ab--;)Ka[Ab]=
(bb?"#"+bb:":scope")+" "+Z(Ka[Ab]);Ka=Ka.join(",")}try{return Jb.apply(ba,db.querySelectorAll(Ka)),ba}catch(xb){hc(R,!0)}finally{bb===Gb&&aa.removeAttribute("id")}}}return Ea(R.replace(Wb,"$1"),aa,ba,ra)}function t(){function R(ba,ra){return aa.push(ba+" ")>Fa.cacheLength&&delete R[aa.shift()],R[ba+" "]=ra}var aa=[];return R}function w(R){return R[Gb]=!0,R}function y(R){var aa=Ya.createElement("fieldset");try{return!!R(aa)}catch(ba){return!1}finally{aa.parentNode&&aa.parentNode.removeChild(aa)}}function B(R){return function(aa){return"form"in
aa?aa.parentNode&&!1===aa.disabled?"label"in aa?"label"in aa.parentNode?aa.parentNode.disabled===R:aa.disabled===R:aa.isDisabled===R||!R!==aa.isDisabled&&si(aa)===R:aa.disabled===R:"label"in aa&&aa.disabled===R}}function E(R){return w(function(aa){return aa*=1,w(function(ba,ra){for(var Ka,ib=R([],ba.length,aa),bb=ib.length;bb--;)ba[Ka=ib[bb]]&&(ba[Ka]=!(ra[Ka]=ba[Ka]))})})}function I(R){return R&&void 0!==R.getElementsByTagName&&R}function P(R){var aa;R=R?R.ownerDocument||R:Xa;return R!=Ya&&9===R.nodeType&&
R.documentElement&&(Ra=(Ya=R).documentElement,ab=!A.isXMLDoc(Ya),Hc=Ra.matches||Ra.webkitMatchesSelector||Ra.msMatchesSelector,Ra.msMatchesSelector&&Xa!=Ya&&(aa=Ya.defaultView)&&aa.top!==aa&&aa.addEventListener("unload",ti),Va.getById=y(function(ba){return Ra.appendChild(ba).id=A.expando,!Ya.getElementsByName||!Ya.getElementsByName(A.expando).length}),Va.disconnectedMatch=y(function(ba){return Hc.call(ba,"*")}),Va.scope=y(function(){return Ya.querySelectorAll(":scope")}),Va.cssHas=y(function(){try{return Ya.querySelector(":has(*,:jqfake)"),
!1}catch(ba){return!0}}),Va.getById?(Fa.filter.ID=function(ba){var ra=ba.replace(hd,id);return function(Ka){return Ka.getAttribute("id")===ra}},Fa.find.ID=function(ba,ra){if(void 0!==ra.getElementById&&ab)return(ba=ra.getElementById(ba))?[ba]:[]}):(Fa.filter.ID=function(ba){var ra=ba.replace(hd,id);return function(Ka){return(Ka=void 0!==Ka.getAttributeNode&&Ka.getAttributeNode("id"))&&Ka.value===ra}},Fa.find.ID=function(ba,ra){if(void 0!==ra.getElementById&&ab){var Ka,ib=ra.getElementById(ba);if(ib){if((Ka=
ib.getAttributeNode("id"))&&Ka.value===ba)return[ib];var bb=ra.getElementsByName(ba);for(ra=0;ib=bb[ra++];)if((Ka=ib.getAttributeNode("id"))&&Ka.value===ba)return[ib]}return[]}}),Fa.find.TAG=function(ba,ra){return void 0!==ra.getElementsByTagName?ra.getElementsByTagName(ba):ra.querySelectorAll(ba)},Fa.find.CLASS=function(ba,ra){if(void 0!==ra.getElementsByClassName&&ab)return ra.getElementsByClassName(ba)},zb=[],y(function(ba){var ra;Ra.appendChild(ba).innerHTML="<a id='"+Gb+"' href='' disabled='disabled'></a><select id='"+
Gb+"-\r\\' disabled='disabled'><option selected=''></option></select>";ba.querySelectorAll("[selected]").length||zb.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");ba.querySelectorAll("[id~="+Gb+"-]").length||zb.push("~=");ba.querySelectorAll("a#"+Gb+"+*").length||zb.push(".#.+[+~]");ba.querySelectorAll(":checked").length||zb.push(":checked");(ra=Ya.createElement("input")).setAttribute("type",
"hidden");ba.appendChild(ra).setAttribute("name","D");Ra.appendChild(ba).disabled=!0;2!==ba.querySelectorAll(":disabled").length&&zb.push(":enabled",":disabled");(ra=Ya.createElement("input")).setAttribute("name","");ba.appendChild(ra);ba.querySelectorAll("[name='']").length||zb.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")")}),Va.cssHas||zb.push(":has"),zb=zb.length&&new RegExp(zb.join("|")),Kc=function(ba,ra){if(ba===ra)return Ta=!0,0;var Ka=!ba.compareDocumentPosition-
!ra.compareDocumentPosition;return Ka?Ka:1&(Ka=(ba.ownerDocument||ba)==(ra.ownerDocument||ra)?ba.compareDocumentPosition(ra):1)||!Va.sortDetached&&ra.compareDocumentPosition(ba)===Ka?ba===Ya||ba.ownerDocument==Xa&&f.contains(Xa,ba)?-1:ra===Ya||ra.ownerDocument==Xa&&f.contains(Xa,ra)?1:ob?Tb.call(ob,ba)-Tb.call(ob,ra):0:4&Ka?-1:1}),Ya}function M(){}function V(R,aa){var ba,ra,Ka,ib,bb,tb;if(bb=xc[R+" "])return aa?0:bb.slice(0);bb=R;var db=[];for(tb=Fa.preFilter;bb;){for(ib in(!ba||(ra=Zb.exec(bb)))&&
(ra&&(bb=bb.slice(ra[0].length)||bb),db.push(Ka=[])),ba=!1,(ra=Ob.exec(bb))&&(ba=ra.shift(),Ka.push({value:ba,type:ra[0].replace(Wb," ")}),bb=bb.slice(ba.length)),Fa.filter)(ra=Mc[ib].exec(bb))&&(!tb[ib]||(ra=tb[ib](ra)))&&(ba=ra.shift(),Ka.push({value:ba,type:ib,matches:ra}),bb=bb.slice(ba.length));if(!ba)break}return aa?bb.length:bb?f.error(R):xc(R,db).slice(0)}function Z(R){for(var aa=0,ba=R.length,ra="";aa<ba;aa++)ra+=R[aa].value;return ra}function U(R,aa,ba){var ra=aa.dir,Ka=aa.next,ib=Ka||ra,
bb=ba&&"parentNode"===ib,tb=Tc++;return aa.first?function(db,Ab,xb){for(;db=db[ra];)if(1===db.nodeType||bb)return R(db,Ab,xb);return!1}:function(db,Ab,xb){var sc,Cb,Hb=[pc,tb];if(xb)for(;db=db[ra];){if((1===db.nodeType||bb)&&R(db,Ab,xb))return!0}else for(;db=db[ra];)if(1===db.nodeType||bb)if(Cb=db[Gb]||(db[Gb]={}),Ka&&p(db,Ka))db=db[ra]||db;else{if((sc=Cb[ib])&&sc[0]===pc&&sc[1]===tb)return Hb[2]=sc[2];if(Cb[ib]=Hb,Hb[2]=R(db,Ab,xb))return!0}return!1}}function oa(R){return 1<R.length?function(aa,
ba,ra){for(var Ka=R.length;Ka--;)if(!R[Ka](aa,ba,ra))return!1;return!0}:R[0]}function qa(R,aa,ba,ra,Ka){for(var ib,bb=[],tb=0,db=R.length,Ab=null!=aa;tb<db;tb++)(ib=R[tb])&&(!ba||ba(ib,ra,Ka))&&(bb.push(ib),Ab&&aa.push(tb));return bb}function ua(R,aa){var ba,ra,Ka,ib,bb=[],tb=[],db=cc[R+" "];if(!db){aa||=V(R);for(ib=aa.length;ib--;)(db=function sc(xb){var Cb,Hb,$b=xb.length,Pc=Fa.relative[xb[0].type];var tc=Pc||Fa.relative[" "];for(var yb=+!!Pc,Vc=U(function(Uc){return Uc===Cb},tc,!0),jd=U(function(Uc){return-1<
Tb.call(Cb,Uc)},tc,!0),xd=[function(Uc,Qc,wd){Uc=!Pc&&(wd||Qc!=Ga)||((Cb=Qc).nodeType?Vc(Uc,Qc,wd):jd(Uc,Qc,wd));return Cb=null,Uc}];yb<$b;yb++)if(tc=Fa.relative[xb[yb].type])xd=[U(oa(xd),tc)];else{if((tc=Fa.filter[xb[yb].type].apply(null,xb[yb].matches))[Gb]){for(Hb=++yb;Hb<$b&&!Fa.relative[xb[Hb].type];Hb++);return function mh(Qc,wd,ae,Ld,Wc,ui){return Ld&&!Ld[Gb]&&(Ld=mh(Ld)),Wc&&!Wc[Gb]&&(Wc=mh(Wc,ui)),w(function(be,ce,ic,Be){var Md,yc,nh=[],eg=[],oh=ce.length,Xc;if(!(Xc=be)){Xc=wd||"*";for(var ph=
ic.nodeType?[ic]:ic,qh=[],fg=0,vi=ph.length;fg<vi;fg++)f(Xc,ph[fg],qh);Xc=qh}Xc=!Qc||!be&&wd?Xc:qa(Xc,nh,Qc,ic,Be);if(ae?ae(Xc,yc=Wc||(be?Qc:oh||Ld)?[]:ce,ic,Be):yc=Xc,Ld){var kd=qa(yc,eg);Ld(kd,[],ic,Be);for(ic=kd.length;ic--;)(Md=kd[ic])&&(yc[eg[ic]]=!(Xc[eg[ic]]=Md))}if(be){if(Wc||Qc){if(Wc){kd=[];for(ic=yc.length;ic--;)(Md=yc[ic])&&kd.push(Xc[ic]=Md);Wc(null,yc=[],kd,Be)}for(ic=yc.length;ic--;)(Md=yc[ic])&&-1<(kd=Wc?Tb.call(be,Md):nh[ic])&&(be[kd]=!(ce[kd]=Md))}}else yc=qa(yc===ce?yc.splice(oh,
yc.length):yc),Wc?Wc(null,ce,yc,Be):Jb.apply(ce,yc)})}(1<yb&&oa(xd),1<yb&&Z(xb.slice(0,yb-1).concat({value:" "===xb[yb-2].type?"*":""})).replace(Wb,"$1"),tc,yb<Hb&&sc(xb.slice(yb,Hb)),Hb<$b&&sc(xb=xb.slice(Hb)),Hb<$b&&Z(xb))}xd.push(tc)}return oa(xd)}(aa[ib]))[Gb]?bb.push(db):tb.push(db);(db=cc(R,(ba=0<bb.length,ra=0<tb.length,Ka=function(Ab,xb,sc,Cb,Hb){var $b,Pc,tc=0,yb="0",Vc=Ab&&[],jd=[],xd=Ga,Uc=Ab||ra&&Fa.find.TAG("*",Hb),Qc=pc+=null==xd?1:Math.random()||.1,wd=Uc.length;for(Hb&&(Ga=xb==Ya||
xb||Hb);yb!==wd&&null!=($b=Uc[yb]);yb++){if(ra&&$b){var ae=0;for(xb||$b.ownerDocument==Ya||(P($b),sc=!ab);Pc=tb[ae++];)if(Pc($b,xb||Ya,sc)){Jb.call(Cb,$b);break}Hb&&(pc=Qc)}ba&&(($b=!Pc&&$b)&&tc--,Ab&&Vc.push($b))}if(tc+=yb,ba&&yb!==tc){for(ae=0;Pc=bb[ae++];)Pc(Vc,jd,xb,sc);if(Ab){if(0<tc)for(;yb--;)Vc[yb]||jd[yb]||(jd[yb]=sa.call(Cb));jd=qa(jd)}Jb.apply(Cb,jd);Hb&&!Ab&&0<jd.length&&1<tc+bb.length&&A.uniqueSort(Cb)}return Hb&&(pc=Qc,Ga=xd),Vc},ba?w(Ka):Ka))).selector=R}return db}function Ea(R,aa,
ba,ra){var Ka,ib,bb,tb,db,Ab="function"==typeof R&&R,xb=!ra&&V(R=Ab.selector||R);if(ba=ba||[],1===xb.length){if(2<(ib=xb[0]=xb[0].slice(0)).length&&"ID"===(bb=ib[0]).type&&9===aa.nodeType&&ab&&Fa.relative[ib[1].type]){if(!(aa=(Fa.find.ID(bb.matches[0].replace(hd,id),aa)||[])[0]))return ba;Ab&&(aa=aa.parentNode);R=R.slice(ib.shift().value.length)}for(Ka=Mc.needsContext.test(R)?0:ib.length;Ka--&&(bb=ib[Ka],!Fa.relative[tb=bb.type]);)if((db=Fa.find[tb])&&(ra=db(bb.matches[0].replace(hd,id),dg.test(ib[0].type)&&
I(aa.parentNode)||aa))){if(ib.splice(Ka,1),!(R=ra.length&&Z(ib)))return Jb.apply(ba,ra),ba;break}}return(Ab||ua(R,xb))(ra,aa,!ab,ba,!aa||dg.test(R)&&I(aa.parentNode)||aa),ba}var fb,Fa,Ga,ob,Ta,Ya,Ra,ab,zb,Hc,Jb=hb,Gb=A.expando,pc=0,Tc=0,cd=t(),xc=t(),cc=t(),hc=t(),Kc=function(R,aa){return R===aa&&(Ta=!0),0},qc=RegExp("[\\x20\\t\\r\\n\\f]+","g"),Zb=RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Ob=RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),rc=RegExp("[\\x20\\t\\r\\n\\f]|>"),
Yc=RegExp(":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
dc=RegExp("^(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+$"),Mc={ID:RegExp("^#((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),CLASS:RegExp("^\\.((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),TAG:RegExp("^((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+|[*])"),ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\]"),
PSEUDO:RegExp("^:((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},de=/^(?:input|select|textarea|button)$/i,gg=/^h\d$/i,ri=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dg=/[+~]/,hd=RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),id=function(R,aa){R="0x"+R.slice(1)-65536;return aa||(0>R?String.fromCharCode(R+65536):String.fromCharCode(R>>10|55296,1023&R|56320))},ti=function(){P()},si=U(function(R){return!0===R.disabled&&p(R,"fieldset")},{dir:"parentNode",next:"legend"});try{Jb.apply(sb=lb.call(Xa.childNodes),Xa.childNodes),sb[Xa.childNodes.length].nodeType}catch(R){Jb=
{apply:function(aa,ba){hb.apply(aa,lb.call(ba))},call:function(aa){hb.apply(aa,lb.call(arguments,1))}}}for(fb in f.matches=function(R,aa){return f(R,null,null,aa)},f.matchesSelector=function(R,aa){if(P(R),!(!ab||hc[aa+" "]||zb&&zb.test(aa)))try{var ba=Hc.call(R,aa);if(ba||Va.disconnectedMatch||R.document&&11!==R.document.nodeType)return ba}catch(ra){hc(aa,!0)}return 0<f(aa,Ya,null,[R]).length},f.contains=function(R,aa){return(R.ownerDocument||R)!=Ya&&P(R),A.contains(R,aa)},f.attr=function(R,aa){(R.ownerDocument||
R)!=Ya&&P(R);var ba=Fa.attrHandle[aa.toLowerCase()];ba=ba&&Ib.call(Fa.attrHandle,aa.toLowerCase())?ba(R,aa,!ab):void 0;return void 0!==ba?ba:R.getAttribute(aa)},f.error=function(R){throw Error("Syntax error, unrecognized expression: "+R);},A.uniqueSort=function(R){var aa,ba=[],ra=0,Ka=0;if(Ta=!Va.sortStable,ob=!Va.sortStable&&lb.call(R,0),uc.call(R,Kc),Ta){for(;aa=R[Ka++];)aa===R[Ka]&&(ra=ba.push(Ka));for(;ra--;)Nc.call(R,ba[ra],1)}return ob=null,R},A.fn.uniqueSort=function(){return this.pushStack(A.uniqueSort(lb.apply(this)))},
(Fa=A.expr={cacheLength:50,createPseudo:w,match:Mc,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(R){return R[1]=R[1].replace(hd,id),R[3]=(R[3]||R[4]||R[5]||"").replace(hd,id),"~="===R[2]&&(R[3]=" "+R[3]+" "),R.slice(0,4)},CHILD:function(R){return R[1]=R[1].toLowerCase(),"nth"===R[1].slice(0,3)?(R[3]||f.error(R[0]),R[4]=+(R[4]?R[5]+(R[6]||1):2*("even"===R[3]||"odd"===
R[3])),R[5]=+(R[7]+R[8]||"odd"===R[3])):R[3]&&f.error(R[0]),R},PSEUDO:function(R){var aa,ba=!R[6]&&R[2];return Mc.CHILD.test(R[0])?null:(R[3]?R[2]=R[4]||R[5]||"":ba&&Yc.test(ba)&&(aa=V(ba,!0))&&(aa=ba.indexOf(")",ba.length-aa)-ba.length)&&(R[0]=R[0].slice(0,aa),R[2]=ba.slice(0,aa)),R.slice(0,3))}},filter:{TAG:function(R){var aa=R.replace(hd,id).toLowerCase();return"*"===R?function(){return!0}:function(ba){return p(ba,aa)}},CLASS:function(R){var aa=cd[R+" "];return aa||(aa=RegExp("(^|[\\x20\\t\\r\\n\\f])"+
R+"([\\x20\\t\\r\\n\\f]|$)"),cd(R,function(ba){return aa.test("string"==typeof ba.className&&ba.className||void 0!==ba.getAttribute&&ba.getAttribute("class")||"")}))},ATTR:function(R,aa,ba){return function(ra){ra=f.attr(ra,R);return null==ra?"!="===aa:!aa||((ra+="","="===aa)?ra===ba:"!="===aa?ra!==ba:"^="===aa?ba&&0===ra.indexOf(ba):"*="===aa?ba&&-1<ra.indexOf(ba):"$="===aa?ba&&ra.slice(-ba.length)===ba:"~="===aa?-1<(" "+ra.replace(qc," ")+" ").indexOf(ba):"|="===aa&&(ra===ba||ra.slice(0,ba.length+
1)===ba+"-"))}},CHILD:function(R,aa,ba,ra,Ka){var ib="nth"!==R.slice(0,3),bb="last"!==R.slice(-4),tb="of-type"===aa;return 1===ra&&0===Ka?function(db){return!!db.parentNode}:function(db,Ab,xb){var sc,Cb,Hb;Ab=ib!==bb?"nextSibling":"previousSibling";var $b=db.parentNode,Pc=tb&&db.nodeName.toLowerCase(),tc=!xb&&!tb,yb=!1;if($b){if(ib){for(;Ab;){for(Cb=db;Cb=Cb[Ab];)if(tb?p(Cb,Pc):1===Cb.nodeType)return!1;var Vc=Ab="only"===R&&!Vc&&"nextSibling"}return!0}if(Vc=[bb?$b.firstChild:$b.lastChild],bb&&tc)for(yb=
(Hb=(sc=(xb=$b[Gb]||($b[Gb]={}))[R]||[])[0]===pc&&sc[1])&&sc[2],Cb=Hb&&$b.childNodes[Hb];Cb=++Hb&&Cb&&Cb[Ab]||(yb=Hb=0)||Vc.pop();){if(1===Cb.nodeType&&++yb&&Cb===db){xb[R]=[pc,Hb,yb];break}}else if(tc&&(yb=Hb=(sc=(db[Gb]||(db[Gb]={}))[R]||[])[0]===pc&&sc[1]),!1===yb)for(;(Cb=++Hb&&Cb&&Cb[Ab]||(yb=Hb=0)||Vc.pop())&&((tb?!p(Cb,Pc):1!==Cb.nodeType)||!++yb||(tc&&((xb=Cb[Gb]||(Cb[Gb]={}))[R]=[pc,yb]),Cb!==db)););return(yb-=Ka)===ra||0==yb%ra&&0<=yb/ra}}},PSEUDO:function(R,aa){var ba,ra=Fa.pseudos[R]||
Fa.setFilters[R.toLowerCase()]||f.error("unsupported pseudo: "+R);return ra[Gb]?ra(aa):1<ra.length?(ba=[R,R,"",aa],Fa.setFilters.hasOwnProperty(R.toLowerCase())?w(function(Ka,ib){for(var bb,tb=ra(Ka,aa),db=tb.length;db--;)bb=Tb.call(Ka,tb[db]),Ka[bb]=!(ib[bb]=tb[db])}):function(Ka){return ra(Ka,0,ba)}):ra}},pseudos:{not:w(function(R){var aa=[],ba=[],ra=ua(R.replace(Wb,"$1"));return ra[Gb]?w(function(Ka,ib,bb,tb){var db;bb=ra(Ka,null,tb,[]);for(tb=Ka.length;tb--;)(db=bb[tb])&&(Ka[tb]=!(ib[tb]=db))}):
function(Ka,ib,bb){return aa[0]=Ka,ra(aa,null,bb,ba),aa[0]=null,!ba.pop()}}),has:w(function(R){return function(aa){return 0<f(R,aa).length}}),contains:w(function(R){return R=R.replace(hd,id),function(aa){return-1<(aa.textContent||A.text(aa)).indexOf(R)}}),lang:w(function(R){return dc.test(R||"")||f.error("unsupported lang: "+R),R=R.replace(hd,id).toLowerCase(),function(aa){var ba;do if(ba=ab?aa.lang:aa.getAttribute("xml:lang")||aa.getAttribute("lang"))return(ba=ba.toLowerCase())===R||0===ba.indexOf(R+
"-");while((aa=aa.parentNode)&&1===aa.nodeType);return!1}}),target:function(R){var aa=a.location&&a.location.hash;return aa&&aa.slice(1)===R.id},root:function(R){return R===Ra},focus:function(R){a:{try{var aa=Ya.activeElement;break a}catch(ba){}aa=void 0}return R===aa&&Ya.hasFocus()&&!!(R.type||R.href||~R.tabIndex)},enabled:B(!1),disabled:B(!0),checked:function(R){return p(R,"input")&&!!R.checked||p(R,"option")&&!!R.selected},selected:function(R){return R.parentNode&&R.parentNode.selectedIndex,!0===
R.selected},empty:function(R){for(R=R.firstChild;R;R=R.nextSibling)if(6>R.nodeType)return!1;return!0},parent:function(R){return!Fa.pseudos.empty(R)},header:function(R){return gg.test(R.nodeName)},input:function(R){return de.test(R.nodeName)},button:function(R){return p(R,"input")&&"button"===R.type||p(R,"button")},text:function(R){var aa;return p(R,"input")&&"text"===R.type&&(null==(aa=R.getAttribute("type"))||"text"===aa.toLowerCase())},first:E(function(){return[0]}),last:E(function(R,aa){return[aa-
1]}),eq:E(function(R,aa,ba){return[0>ba?ba+aa:ba]}),even:E(function(R,aa){for(var ba=0;ba<aa;ba+=2)R.push(ba);return R}),odd:E(function(R,aa){for(var ba=1;ba<aa;ba+=2)R.push(ba);return R}),lt:E(function(R,aa,ba){for(aa=0>ba?ba+aa:ba>aa?aa:ba;0<=--aa;)R.push(aa);return R}),gt:E(function(R,aa,ba){for(ba=0>ba?ba+aa:ba;++ba<aa;)R.push(ba);return R})}}).pseudos.nth=Fa.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Fa.pseudos[fb]=function(R){return function(aa){return p(aa,"input")&&aa.type===
R}}(fb);for(fb in{submit:!0,reset:!0})Fa.pseudos[fb]=function(R){return function(aa){return(p(aa,"input")||p(aa,"button"))&&aa.type===R}}(fb);M.prototype=Fa.filters=Fa.pseudos;Fa.setFilters=new M;Va.sortStable=Gb.split("").sort(Kc).join("")===Gb;P();Va.sortDetached=y(function(R){return 1&R.compareDocumentPosition(Ya.createElement("fieldset"))});A.find=f;A.expr[":"]=A.expr.pseudos;A.unique=A.uniqueSort;f.compile=ua;f.select=Ea;f.setDocument=P;f.tokenize=V;f.escape=A.escapeSelector;f.getText=A.text;
f.isXML=A.isXMLDoc;f.selectors=A.expr;f.support=A.support;f.uniqueSort=A.uniqueSort}();var ta=function(f,t,w){for(var y=[],B=void 0!==w;(f=f[t])&&9!==f.nodeType;)if(1===f.nodeType){if(B&&A(f).is(w))break;y.push(f)}return y},fc=function(f,t){for(var w=[];f;f=f.nextSibling)1===f.nodeType&&f!==t&&w.push(f);return w},vc=A.expr.match.needsContext,C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;A.filter=function(f,t,w){var y=t[0];return(w&&(f=":not("+f+")"),1===t.length&&1===y.nodeType)?
A.find.matchesSelector(y,f)?[y]:[]:A.find.matches(f,A.grep(t,function(B){return 1===B.nodeType}))};A.fn.extend({find:function(f){var t,w=this.length,y=this;if("string"!=typeof f)return this.pushStack(A(f).filter(function(){for(B=0;B<w;B++)if(A.contains(y[B],this))return!0}));var B=0;for(t=this.pushStack([]);B<w;B++)A.find(f,y[B],t);return 1<w?A.uniqueSort(t):t},filter:function(f){return this.pushStack(e(this,f||[],!1))},not:function(f){return this.pushStack(e(this,f||[],!0))},is:function(f){return!!e(this,
"string"==typeof f&&vc.test(f)?A(f):f||[],!1).length}});var Q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(f,t,w){var y,B;if(!f)return this;if(w=w||ca,"string"==typeof f){if((y="<"===f[0]&&">"===f[f.length-1]&&3<=f.length?[null,f,null]:Q.exec(f))&&(y[1]||!t)){if(y[1]){if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(y[1],t&&t.nodeType?t.ownerDocument||t:Xa,!0)),C.test(y[1])&&A.isPlainObject(t))for(y in t)eb(this[y])?this[y](t[y]):this.attr(y,t[y]);return this}return(B=Xa.getElementById(y[2]))&&
(this[0]=B,this.length=1),this}return!t||t.jquery?(t||w).find(f):this.constructor(t).find(f)}return f.nodeType?(this[0]=f,this.length=1,this):eb(f)?void 0!==w.ready?w.ready(f):f(A):A.makeArray(f,this)}).prototype=A.fn;var ca=A(Xa);var ea=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};A.fn.extend({has:function(f){var t=A(f,this),w=t.length;return this.filter(function(){for(var y=0;y<w;y++)if(A.contains(this,t[y]))return!0})},closest:function(f,t){var w,y=0,B=this.length,
E=[],I="string"!=typeof f&&A(f);if(!vc.test(f))for(;y<B;y++)for(w=this[y];w&&w!==t;w=w.parentNode)if(11>w.nodeType&&(I?-1<I.index(w):1===w.nodeType&&A.find.matchesSelector(w,f))){E.push(w);break}return this.pushStack(1<E.length?A.uniqueSort(E):E)},index:function(f){return f?"string"==typeof f?Tb.call(A(f),this[0]):Tb.call(this,f.jquery?f[0]:f):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(f,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(f,t))))},addBack:function(f){return this.add(null==
f?this.prevObject:this.prevObject.filter(f))}});A.each({parent:function(f){return(f=f.parentNode)&&11!==f.nodeType?f:null},parents:function(f){return ta(f,"parentNode")},parentsUntil:function(f,t,w){return ta(f,"parentNode",w)},next:function(f){return m(f,"nextSibling")},prev:function(f){return m(f,"previousSibling")},nextAll:function(f){return ta(f,"nextSibling")},prevAll:function(f){return ta(f,"previousSibling")},nextUntil:function(f,t,w){return ta(f,"nextSibling",w)},prevUntil:function(f,t,w){return ta(f,
"previousSibling",w)},siblings:function(f){return fc((f.parentNode||{}).firstChild,f)},children:function(f){return fc(f.firstChild)},contents:function(f){return null!=f.contentDocument&&Vb(f.contentDocument)?f.contentDocument:(p(f,"template")&&(f=f.content||f),A.merge([],f.childNodes))}},function(f,t){A.fn[f]=function(w,y){var B=A.map(this,t,w);return"Until"!==f.slice(-5)&&(y=w),y&&"string"==typeof y&&(B=A.filter(y,B)),1<this.length&&(F[f]||A.uniqueSort(B),ea.test(f)&&B.reverse()),this.pushStack(B)}});
var N=/[^\x20\t\r\n\f]+/g;A.Callbacks=function(f){f="string"==typeof f?(t=f,w={},A.each(t.match(N)||[],function(oa,qa){w[qa]=!0}),w):A.extend({},f);var t,w,y,B,E,I,P=[],M=[],V=-1,Z=function(){I=I||f.once;for(E=y=!0;M.length;V=-1)for(B=M.shift();++V<P.length;)!1===P[V].apply(B[0],B[1])&&f.stopOnFalse&&(V=P.length,B=!1);f.memory||(B=!1);y=!1;I&&(P=B?[]:"")},U={add:function(){return P&&(B&&!y&&(V=P.length-1,M.push(B)),!function ua(qa){A.each(qa,function(Ea,fb){eb(fb)?f.unique&&U.has(fb)||P.push(fb):
fb&&fb.length&&"string"!==b(fb)&&ua(fb)})}(arguments),B&&!y&&Z()),this},remove:function(){return A.each(arguments,function(oa,qa){for(var ua;-1<(ua=A.inArray(qa,P,ua));)P.splice(ua,1),ua<=V&&V--}),this},has:function(oa){return oa?-1<A.inArray(oa,P):0<P.length},empty:function(){return P&&=[],this},disable:function(){return I=M=[],P=B="",this},disabled:function(){return!P},lock:function(){return I=M=[],B||y||(P=B=""),this},locked:function(){return!!I},fireWith:function(oa,qa){return!I&&(qa=[oa,(qa=
qa||[]).slice?qa.slice():qa],M.push(qa),y||Z()),this},fire:function(){return U.fireWith(this,arguments),this},fired:function(){return!!E}};return U};A.extend({Deferred:function(f){var t=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],w="pending",y={state:function(){return w},always:function(){return B.done(arguments).fail(arguments),
this},catch:function(E){return y.then(null,E)},pipe:function(){var E=arguments;return A.Deferred(function(I){A.each(t,function(P,M){var V=eb(E[M[4]])&&E[M[4]];B[M[1]](function(){var Z=V&&V.apply(this,arguments);Z&&eb(Z.promise)?Z.promise().progress(I.notify).done(I.resolve).fail(I.reject):I[M[0]+"With"](this,V?[Z]:arguments)})});E=null}).promise()},then:function(E,I,P){function M(Z,U,oa,qa){return function(){var ua=this,Ea=arguments,fb=function(){var Ga,ob;if(!(Z<V)){if((Ga=oa.apply(ua,Ea))===U.promise())throw TypeError("Thenable self-resolution");
eb(ob=Ga&&("object"==typeof Ga||"function"==typeof Ga)&&Ga.then)?qa?ob.call(Ga,M(V,U,l,qa),M(V,U,k,qa)):(V++,ob.call(Ga,M(V,U,l,qa),M(V,U,k,qa),M(V,U,l,U.notifyWith))):(oa!==l&&(ua=void 0,Ea=[Ga]),(qa||U.resolveWith)(ua,Ea))}},Fa=qa?fb:function(){try{fb()}catch(Ga){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(Ga,Fa.error),Z+1>=V&&(oa!==k&&(ua=void 0,Ea=[Ga]),U.rejectWith(ua,Ea))}};Z?Fa():(A.Deferred.getErrorHook?Fa.error=A.Deferred.getErrorHook():A.Deferred.getStackHook&&(Fa.error=A.Deferred.getStackHook()),
a.setTimeout(Fa))}}var V=0;return A.Deferred(function(Z){t[0][3].add(M(0,Z,eb(P)?P:l,Z.notifyWith));t[1][3].add(M(0,Z,eb(E)?E:l));t[2][3].add(M(0,Z,eb(I)?I:k))}).promise()},promise:function(E){return null!=E?A.extend(E,y):y}},B={};return A.each(t,function(E,I){var P=I[2],M=I[5];y[I[1]]=P.add;M&&P.add(function(){w=M},t[3-E][2].disable,t[3-E][3].disable,t[0][2].lock,t[0][3].lock);P.add(I[3].fire);B[I[0]]=function(){return B[I[0]+"With"](this===B?void 0:this,arguments),this};B[I[0]+"With"]=P.fireWith}),
y.promise(B),f&&f.call(B,B),B},when:function(f){var t=arguments.length,w=t,y=Array(w),B=lb.call(arguments),E=A.Deferred(),I=function(P){return function(M){y[P]=this;B[P]=1<arguments.length?lb.call(arguments):M;--t||E.resolveWith(y,B)}};if(1>=t&&(n(f,E.done(I(w)).resolve,E.reject,!t),"pending"===E.state()||eb(B[w]&&B[w].then)))return E.then();for(;w--;)n(B[w],I(w),E.reject);return E.promise()}});var da=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(f,t){a.console&&
a.console.warn&&f&&da.test(f.name)&&a.console.warn("jQuery.Deferred exception: "+f.message,f.stack,t)};A.readyException=function(f){a.setTimeout(function(){throw f;})};var ia=A.Deferred();A.fn.ready=function(f){return ia.then(f).catch(function(t){A.readyException(t)}),this};A.extend({isReady:!1,readyWait:1,ready:function(f){(!0===f?!--A.readyWait:!A.isReady)&&(A.isReady=!0,!0!==f&&0<--A.readyWait||ia.resolveWith(Xa,[A]))}});A.ready.then=ia.then;"complete"===Xa.readyState||"loading"!==Xa.readyState&&
!Xa.documentElement.doScroll?a.setTimeout(A.ready):(Xa.addEventListener("DOMContentLoaded",r),a.addEventListener("load",r));var wa=function(f,t,w,y,B,E,I){var P=0,M=f.length,V=null==w;if("object"===b(w))for(P in B=!0,w)wa(f,t,P,w[P],!0,E,I);else if(void 0!==y&&(B=!0,eb(y)||(I=!0),V&&(I?(t.call(f,y),t=null):(V=t,t=function(Z,U,oa){return V.call(A(Z),oa)})),t))for(;P<M;P++)t(f[P],w,I?y:y.call(f[P],P,t(f[P],w)));return B?f:V?t.call(f):M?t(f[0],w):E},za=/^-ms-/,cb=/-([a-z])/g,gb=function(f){return 1===
f.nodeType||9===f.nodeType||!+f.nodeType};x.uid=1;x.prototype={cache:function(f){var t=f[this.expando];return!t&&(t={},gb(f)&&(f.nodeType?f[this.expando]=t:Object.defineProperty(f,this.expando,{value:t,configurable:!0}))),t},set:function(f,t,w){var y;f=this.cache(f);if("string"==typeof t)f[v(t)]=w;else for(y in t)f[v(y)]=t[y];return f},get:function(f,t){return void 0===t?this.cache(f):f[this.expando]&&f[this.expando][v(t)]},access:function(f,t,w){return void 0===t||t&&"string"==typeof t&&void 0===
w?this.get(f,t):(this.set(f,t,w),void 0!==w?w:t)},remove:function(f,t){var w=f[this.expando];if(void 0!==w){if(void 0!==t){var y=(t=Array.isArray(t)?t.map(v):(t=v(t))in w?[t]:t.match(N)||[]).length;for(;y--;)delete w[t[y]]}(void 0===t||A.isEmptyObject(w))&&(f.nodeType?f[this.expando]=void 0:delete f[this.expando])}},hasData:function(f){f=f[this.expando];return void 0!==f&&!A.isEmptyObject(f)}};var Ca=new x,jb=new x,ac=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,kc=/[A-Z]/g;A.extend({hasData:function(f){return jb.hasData(f)||
Ca.hasData(f)},data:function(f,t,w){return jb.access(f,t,w)},removeData:function(f,t){jb.remove(f,t)},_data:function(f,t,w){return Ca.access(f,t,w)},_removeData:function(f,t){Ca.remove(f,t)}});A.fn.extend({data:function(f,t){var w,y,B,E=this[0],I=E&&E.attributes;if(void 0===f){if(this.length&&(B=jb.get(E),1===E.nodeType&&!Ca.get(E,"hasDataAttrs"))){for(w=I.length;w--;)I[w]&&0===(y=I[w].name).indexOf("data-")&&D(E,y=v(y.slice(5)),B[y]);Ca.set(E,"hasDataAttrs",!0)}return B}return"object"==typeof f?
this.each(function(){jb.set(this,f)}):wa(this,function(P){var M;if(E&&void 0===P)return void 0!==(M=jb.get(E,f))||void 0!==(M=D(E,f))?M:void 0;this.each(function(){jb.set(this,f,P)})},null,t,1<arguments.length,null,!0)},removeData:function(f){return this.each(function(){jb.remove(this,f)})}});A.extend({queue:function(f,t,w){var y;if(f)return t=(t||"fx")+"queue",y=Ca.get(f,t),w&&(!y||Array.isArray(w)?y=Ca.access(f,t,A.makeArray(w)):y.push(w)),y||[]},dequeue:function(f,t){t=t||"fx";var w=A.queue(f,
t),y=w.length,B=w.shift(),E=A._queueHooks(f,t);"inprogress"===B&&(B=w.shift(),y--);B&&("fx"===t&&w.unshift("inprogress"),delete E.stop,B.call(f,function(){A.dequeue(f,t)},E));!y&&E&&E.empty.fire()},_queueHooks:function(f,t){var w=t+"queueHooks";return Ca.get(f,w)||Ca.access(f,w,{empty:A.Callbacks("once memory").add(function(){Ca.remove(f,[t+"queue",w])})})}});A.fn.extend({queue:function(f,t){var w=2;return("string"!=typeof f&&(t=f,f="fx",w--),arguments.length<w)?A.queue(this[0],f):void 0===t?this:
this.each(function(){var y=A.queue(this,f,t);A._queueHooks(this,f);"fx"===f&&"inprogress"!==y[0]&&A.dequeue(this,f)})},dequeue:function(f){return this.each(function(){A.dequeue(this,f)})},clearQueue:function(f){return this.queue(f||"fx",[])},promise:function(f,t){var w,y=1,B=A.Deferred(),E=this,I=this.length,P=function(){--y||B.resolveWith(E,[E])};"string"!=typeof f&&(t=f,f=void 0);for(f=f||"fx";I--;)(w=Ca.get(E[I],f+"queueHooks"))&&w.empty&&(y++,w.empty.add(P));return P(),B.promise(t)}});var Da=
/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ma=RegExp("^(?:([+-])=|)("+Da+")([a-z%]*)$","i"),Sa=["Top","Right","Bottom","Left"],mb=Xa.documentElement,pb=function(f){return A.contains(f.ownerDocument,f)},wc={composed:!0};mb.getRootNode&&(pb=function(f){return A.contains(f.ownerDocument,f)||f.getRootNode(wc)===f.ownerDocument});var Ac=function(f,t){return"none"===(f=t||f).style.display||""===f.style.display&&pb(f)&&"none"===A.css(f,"display")},Vd={};A.fn.extend({show:function(){return L(this,!0)},
hide:function(){return L(this)},toggle:function(f){return"boolean"==typeof f?f?this.show():this.hide():this.each(function(){Ac(this)?A(this).show():A(this).hide()})}});var Ed=/^(?:checkbox|radio)$/i,Ye=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,te=/^$|^module$|\/(?:java|ecma)script/i;var gd=Xa.createDocumentFragment().appendChild(Xa.createElement("div"));(Yd=Xa.createElement("input")).setAttribute("type","radio");Yd.setAttribute("checked","checked");Yd.setAttribute("name","t");gd.appendChild(Yd);Va.checkClone=
gd.cloneNode(!0).cloneNode(!0).lastChild.checked;gd.innerHTML="<textarea>x</textarea>";Va.noCloneChecked=!!gd.cloneNode(!0).lastChild.defaultValue;gd.innerHTML="<option></option>";Va.option=!!gd.lastChild;var Cc={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Cc.tbody=Cc.tfoot=Cc.colgroup=Cc.caption=Cc.thead;Cc.th=Cc.td;Va.option||(Cc.optgroup=Cc.option=
[1,"<select multiple='multiple'>","</select>"]);var ue=/<|&#?\w+;/,ve=/^([^.]*)(?:\.(.+)|)/;A.event={global:{},add:function(f,t,w,y,B){var E,I,P,M,V,Z,U,oa;var qa=Ca.get(f);if(gb(f))for(w.handler&&(w=(E=w).handler,B=E.selector),B&&A.find.matchesSelector(mb,B),w.guid||(w.guid=A.guid++),(M=qa.events)||(M=qa.events=Object.create(null)),(I=qa.handle)||(I=qa.handle=function(Ea){return A.event.triggered!==Ea.type?A.event.dispatch.apply(f,arguments):void 0}),qa=(t=(t||"").match(N)||[""]).length;qa--;){var ua=
oa=(P=ve.exec(t[qa])||[])[1];P=(P[2]||"").split(".").sort();ua&&(Z=A.event.special[ua]||{},ua=(B?Z.delegateType:Z.bindType)||ua,Z=A.event.special[ua]||{},V=A.extend({type:ua,origType:oa,data:y,handler:w,guid:w.guid,selector:B,needsContext:B&&A.expr.match.needsContext.test(B),namespace:P.join(".")},E),(U=M[ua])||((U=M[ua]=[]).delegateCount=0,(!Z.setup||!1===Z.setup.call(f,y,P,I))&&f.addEventListener&&f.addEventListener(ua,I)),Z.add&&(Z.add.call(f,V),V.handler.guid||(V.handler.guid=w.guid)),B?U.splice(U.delegateCount++,
0,V):U.push(V),A.event.global[ua]=!0)}},remove:function(f,t,w,y,B){var E,I,P,M,V,Z,U,oa,qa=Ca.hasData(f)&&Ca.get(f);if(qa&&(M=qa.events)){for(V=(t=(t||"").match(N)||[""]).length;V--;)if(Z=oa=(P=ve.exec(t[V])||[])[1],U=(P[2]||"").split(".").sort(),Z){var ua=A.event.special[Z]||{};var Ea=M[Z=(y?ua.delegateType:ua.bindType)||Z]||[];P=P[2]&&RegExp("(^|\\.)"+U.join("\\.(?:.*\\.|)")+"(\\.|$)");for(I=E=Ea.length;E--;){var fb=Ea[E];!B&&oa!==fb.origType||w&&w.guid!==fb.guid||P&&!P.test(fb.namespace)||y&&y!==
fb.selector&&("**"!==y||!fb.selector)||(Ea.splice(E,1),fb.selector&&Ea.delegateCount--,!ua.remove||ua.remove.call(f,fb))}I&&!Ea.length&&(ua.teardown&&!1!==ua.teardown.call(f,U,qa.handle)||A.removeEvent(f,Z,qa.handle),delete M[Z])}else for(Z in M)A.event.remove(f,Z+t[V],w,y,!0);A.isEmptyObject(M)&&Ca.remove(f,"handle events")}},dispatch:function(f){var t,w,y,B=Array(arguments.length),E=A.event.fix(f);var I=(Ca.get(this,"events")||Object.create(null))[E.type]||[];var P=A.event.special[E.type]||{};var M=
1;for(B[0]=E;M<arguments.length;M++)B[M]=arguments[M];if(E.delegateTarget=this,!P.preDispatch||!1!==P.preDispatch.call(this,E)){var V=A.event.handlers.call(this,E,I);for(M=0;(w=V[M++])&&!E.isPropagationStopped();)for(E.currentTarget=w.elem,I=0;(y=w.handlers[I++])&&!E.isImmediatePropagationStopped();)E.rnamespace&&!1!==y.namespace&&!E.rnamespace.test(y.namespace)||(E.handleObj=y,E.data=y.data,void 0===(t=((A.event.special[y.origType]||{}).handle||y.handler).apply(w.elem,B))||!1!==(E.result=t)||(E.preventDefault(),
E.stopPropagation()));return P.postDispatch&&P.postDispatch.call(this,E),E.result}},handlers:function(f,t){var w,y,B,E=[],I=t.delegateCount,P=f.target;if(I&&P.nodeType&&!("click"===f.type&&1<=f.button))for(;P!==this;P=P.parentNode||this)if(1===P.nodeType&&("click"!==f.type||!0!==P.disabled)){var M=0;var V=[];for(B={};M<I;M++)void 0===B[y=(w=t[M]).selector+" "]&&(B[y]=w.needsContext?-1<A(y,this).index(P):A.find(y,this,null,[P]).length),B[y]&&V.push(w);V.length&&E.push({elem:P,handlers:V})}return P=
this,I<t.length&&E.push({elem:P,handlers:t.slice(I)}),E},addProp:function(f,t){Object.defineProperty(A.Event.prototype,f,{enumerable:!0,configurable:!0,get:eb(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[f]},set:function(w){Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:w})}})},fix:function(f){return f[A.expando]?f:new A.Event(f)},special:{load:{noBubble:!0},click:{setup:function(f){f=this||
f;return Ed.test(f.type)&&f.click&&p(f,"input")&&ka(f,"click",!0),!1},trigger:function(f){f=this||f;return Ed.test(f.type)&&f.click&&p(f,"input")&&ka(f,"click"),!0},_default:function(f){f=f.target;return Ed.test(f.type)&&f.click&&p(f,"input")&&Ca.get(f,"click")||p(f,"a")}},beforeunload:{postDispatch:function(f){void 0!==f.result&&f.originalEvent&&(f.originalEvent.returnValue=f.result)}}}};A.removeEvent=function(f,t,w){f.removeEventListener&&f.removeEventListener(t,w)};A.Event=function(f,t){if(!(this instanceof
A.Event))return new A.Event(f,t);f&&f.type?(this.originalEvent=f,this.type=f.type,this.isDefaultPrevented=f.defaultPrevented||void 0===f.defaultPrevented&&!1===f.returnValue?X:W,this.target=f.target&&3===f.target.nodeType?f.target.parentNode:f.target,this.currentTarget=f.currentTarget,this.relatedTarget=f.relatedTarget):this.type=f;t&&A.extend(this,t);this.timeStamp=f&&f.timeStamp||Date.now();this[A.expando]=!0};A.Event.prototype={constructor:A.Event,isDefaultPrevented:W,isPropagationStopped:W,isImmediatePropagationStopped:W,
isSimulated:!1,preventDefault:function(){var f=this.originalEvent;this.isDefaultPrevented=X;f&&!this.isSimulated&&f.preventDefault()},stopPropagation:function(){var f=this.originalEvent;this.isPropagationStopped=X;f&&!this.isSimulated&&f.stopPropagation()},stopImmediatePropagation:function(){var f=this.originalEvent;this.isImmediatePropagationStopped=X;f&&!this.isSimulated&&f.stopImmediatePropagation();this.stopPropagation()}};A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,
detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp);A.each({focus:"focusin",blur:"focusout"},function(f,t){function w(y){if(Xa.documentMode){var B=Ca.get(this,"handle"),E=A.event.fix(y);E.type="focusin"===y.type?"focus":"blur";E.isSimulated=!0;B(y);E.target===
E.currentTarget&&B(E)}else A.event.simulate(t,y.target,A.event.fix(y))}A.event.special[f]={setup:function(){var y;if(ka(this,f,!0),!Xa.documentMode)return!1;(y=Ca.get(this,t))||this.addEventListener(t,w);Ca.set(this,t,(y||0)+1)},trigger:function(){return ka(this,f),!0},teardown:function(){var y;if(!Xa.documentMode)return!1;(y=Ca.get(this,t)-1)?Ca.set(this,t,y):(this.removeEventListener(t,w),Ca.remove(this,t))},_default:function(y){return Ca.get(y.target,f)},delegateType:t};A.event.special[t]={setup:function(){var y=
this.ownerDocument||this.document||this,B=Xa.documentMode?this:y,E=Ca.get(B,t);E||(Xa.documentMode?this.addEventListener(t,w):y.addEventListener(f,w,!0));Ca.set(B,t,(E||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,B=Xa.documentMode?this:y,E=Ca.get(B,t)-1;E?Ca.set(B,t,E):(Xa.documentMode?this.removeEventListener(t,w):y.removeEventListener(f,w,!0),Ca.remove(B,t))}}});A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},
function(f,t){A.event.special[f]={delegateType:t,bindType:t,handle:function(w){var y,B=w.relatedTarget,E=w.handleObj;return B&&(B===this||A.contains(this,B))||(w.type=E.origType,y=E.handler.apply(this,arguments),w.type=t),y}}});A.fn.extend({on:function(f,t,w,y){return Y(this,f,t,w,y)},one:function(f,t,w,y){return Y(this,f,t,w,y,1)},off:function(f,t,w){var y,B;if(f&&f.preventDefault&&f.handleObj)return y=f.handleObj,A(f.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,
y.handler),this;if("object"==typeof f){for(B in f)this.off(B,t,f[B]);return this}return(!1===t||"function"==typeof t)&&(w=t,t=void 0),!1===w&&(w=W),this.each(function(){A.event.remove(this,f,w,t)})}});var Ze=/<script|<style|<link/i,Mf=/checked\s*(?:[^=]|=\s*.checked.)/i,Nf=/^\s*<!\[CDATA\[|\]\]>\s*$/g;A.extend({htmlPrefilter:function(f){return f},clone:function(f,t,w){var y,B,E=f.cloneNode(!0),I=pb(f);if(!(Va.noCloneChecked||1!==f.nodeType&&11!==f.nodeType||A.isXMLDoc(f))){var P=0;var M=J(E);for(y=
(B=J(f)).length;P<y;P++){var V=B[P],Z=M[P],U=Z.nodeName.toLowerCase();"input"===U&&Ed.test(V.type)?Z.checked=V.checked:("input"===U||"textarea"===U)&&(Z.defaultValue=V.defaultValue);!0}}if(t)if(w)for(P=0,B=B||J(f),M=M||J(E),y=B.length;P<y;P++)ya(B[P],M[P]);else ya(f,E);return 0<(M=J(E,"script")).length&&O(M,!I&&J(f,"script")),E},cleanData:function(f){for(var t,w,y,B=A.event.special,E=0;void 0!==(w=f[E]);E++)if(gb(w)){if(t=w[Ca.expando]){if(t.events)for(y in t.events)B[y]?A.event.remove(w,y):A.removeEvent(w,
y,t.handle);w[Ca.expando]=void 0}w[jb.expando]&&(w[jb.expando]=void 0)}}});A.fn.extend({detach:function(f){return wb(this,f,!0)},remove:function(f){return wb(this,f)},text:function(f){return wa(this,function(t){return void 0===t?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,f,arguments.length)},append:function(){return na(this,arguments,function(f){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||va(this,f).appendChild(f)})},
prepend:function(){return na(this,arguments,function(f){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=va(this,f);t.insertBefore(f,t.firstChild)}})},before:function(){return na(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this)})},after:function(){return na(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this.nextSibling)})},empty:function(){for(var f,t=0;null!=(f=this[t]);t++)1===f.nodeType&&(A.cleanData(J(f,!1)),f.textContent=
"");return this},clone:function(f,t){return f=null!=f&&f,t=null==t?f:t,this.map(function(){return A.clone(this,f,t)})},html:function(f){return wa(this,function(t){var w=this[0]||{},y=0,B=this.length;if(void 0===t&&1===w.nodeType)return w.innerHTML;if("string"==typeof t&&!Ze.test(t)&&!Cc[(Ye.exec(t)||["",""])[1].toLowerCase()]){t=A.htmlPrefilter(t);try{for(;y<B;y++)w=this[y]||{},1===w.nodeType&&(A.cleanData(J(w,!1)),w.innerHTML=t);w=0}catch(E){}}w&&this.empty().append(t)},null,f,arguments.length)},
replaceWith:function(){var f=[];return na(this,arguments,function(t){var w=this.parentNode;0>A.inArray(this,f)&&(A.cleanData(J(this)),w&&w.replaceChild(t,this))},f)}});A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,t){A.fn[f]=function(w){for(var y=[],B=A(w),E=B.length-1,I=0;I<=E;I++)w=I===E?this:this.clone(!0),A(B[I])[t](w),hb.apply(y,w.get());return this.pushStack(y)}});var Fd=RegExp("^("+Da+")(?!px)[a-z%]+$","i"),Wd=/^--/,
Xd=function(f){var t=f.ownerDocument.defaultView;return t&&t.opener||(t=a),t.getComputedStyle(f)},$e=function(f,t,w){var y,B={};for(y in t)B[y]=f.style[y],f.style[y]=t[y];for(y in w=w.call(f),t)f.style[y]=B[y];return w},Of=RegExp(Sa.join("|"),"i");!function(){function f(){if(M){P.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";M.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";
mb.appendChild(P).appendChild(M);var V=a.getComputedStyle(M);t="1%"!==V.top;I=12===Math.round(parseFloat(V.marginLeft));M.style.right="60%";B=36===Math.round(parseFloat(V.right));w=36===Math.round(parseFloat(V.width));M.style.position="absolute";y=12===Math.round(parseFloat(M.offsetWidth/3));mb.removeChild(P);M=null}}var t,w,y,B,E,I,P=Xa.createElement("div"),M=Xa.createElement("div");M.style&&(M.style.backgroundClip="content-box",M.cloneNode(!0).style.backgroundClip="",Va.clearCloneStyle="content-box"===
M.style.backgroundClip,A.extend(Va,{boxSizingReliable:function(){return f(),w},pixelBoxStyles:function(){return f(),B},pixelPosition:function(){return f(),t},reliableMarginLeft:function(){return f(),I},scrollboxSize:function(){return f(),y},reliableTrDimensions:function(){var V,Z,U,oa;return null==E&&(V=Xa.createElement("table"),Z=Xa.createElement("tr"),U=Xa.createElement("div"),V.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Z.style.cssText="box-sizing:content-box;border:1px solid",
Z.style.height="1px",U.style.height="9px",U.style.display="block",mb.appendChild(V).appendChild(Z).appendChild(U),E=parseInt((oa=a.getComputedStyle(Z)).height,10)+parseInt(oa.borderTopWidth,10)+parseInt(oa.borderBottomWidth,10)===Z.offsetHeight,mb.removeChild(V)),E}}))}();var af=["Webkit","Moz","ms"],bf=Xa.createElement("div").style,cf={},Pf=/^(none|table(?!-c[ea]).+)/,Qf={position:"absolute",visibility:"hidden",display:"block"},Lc={letterSpacing:"0",fontWeight:"400"};A.extend({cssHooks:{opacity:{get:function(f,
t){if(t)return f=Wa(f,"opacity"),""===f?"1":f}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(f,t,w,y){if(f&&3!==f.nodeType&&
8!==f.nodeType&&f.style){var B,E,I,P=v(t),M=Wd.test(t),V=f.style;if(M||(t=Fb(P)),I=A.cssHooks[t]||A.cssHooks[P],void 0===w)return I&&"get"in I&&void 0!==(B=I.get(f,!1,y))?B:V[t];if("string"==(E=typeof w)&&(B=Ma.exec(w))&&B[1]&&(w=H(f,t,B),E="number"),null!=w&&w==w)"number"!==E||M||(w+=B&&B[3]||(A.cssNumber[P]?"":"px")),Va.clearCloneStyle||""!==w||0!==t.indexOf("background")||(V[t]="inherit"),I&&"set"in I&&void 0===(w=I.set(f,w,y))||(M?V.setProperty(t,w):V[t]=w)}},css:function(f,t,w,y){var B,E,I,P=
v(t);return(Wd.test(t)||(t=Fb(P)),(I=A.cssHooks[t]||A.cssHooks[P])&&"get"in I&&(B=I.get(f,!0,w)),void 0===B&&(B=Wa(f,t,y)),"normal"===B&&t in Lc&&(B=Lc[t]),""===w||w)?(E=parseFloat(B),!0===w||isFinite(E)?E||0:B):B}});A.each(["height","width"],function(f,t){A.cssHooks[t]={get:function(w,y,B){if(y)return!Pf.test(A.css(w,"display"))||w.getClientRects().length&&w.getBoundingClientRect().width?ja(w,t,B):$e(w,Qf,function(){return ja(w,t,B)})},set:function(w,y,B){var E,I=Xd(w),P=!Va.scrollboxSize()&&"absolute"===
I.position,M=(P||B)&&"border-box"===A.css(w,"boxSizing",!1,I);B=B?Na(w,t,B,M,I):0;return M&&P&&(B-=Math.ceil(w["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(I[t])-Na(w,t,"border",!1,I)-.5)),B&&(E=Ma.exec(y))&&"px"!==(E[3]||"px")&&(w.style[t]=y,y=A.css(w,t)),La(w,y,B)}}});A.cssHooks.marginLeft=Lb(Va.reliableMarginLeft,function(f,t){if(t)return(parseFloat(Wa(f,"marginLeft"))||f.getBoundingClientRect().left-$e(f,{marginLeft:0},function(){return f.getBoundingClientRect().left}))+"px"});A.each({margin:"",
padding:"",border:"Width"},function(f,t){A.cssHooks[f+t]={expand:function(w){var y=0,B={};for(w="string"==typeof w?w.split(" "):[w];4>y;y++)B[f+Sa[y]+t]=w[y]||w[y-2]||w[0];return B}};"margin"!==f&&(A.cssHooks[f+t].set=La)});A.fn.extend({css:function(f,t){return wa(this,function(w,y,B){var E,I={},P=0;if(Array.isArray(y)){B=Xd(w);for(E=y.length;P<E;P++)I[y[P]]=A.css(w,y[P],!1,B);return I}return void 0!==B?A.style(w,y,B):A.css(w,y)},f,t,1<arguments.length)}});A.Tween=Aa;Aa.prototype={constructor:Aa,
init:function(f,t,w,y,B,E){this.elem=f;this.prop=w;this.easing=B||A.easing._default;this.options=t;this.start=this.now=this.cur();this.end=y;this.unit=E||(A.cssNumber[w]?"":"px")},cur:function(){var f=Aa.propHooks[this.prop];return f&&f.get?f.get(this):Aa.propHooks._default.get(this)},run:function(f){var t,w=Aa.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](f,this.options.duration*f,0,1,this.options.duration):this.pos=t=f,this.now=(this.end-this.start)*t+this.start,
this.options.step&&this.options.step.call(this.elem,this.now,this),w&&w.set?w.set(this):Aa.propHooks._default.set(this),this}};Aa.prototype.init.prototype=Aa.prototype;Aa.propHooks={_default:{get:function(f){var t;return 1!==f.elem.nodeType||null!=f.elem[f.prop]&&null==f.elem.style[f.prop]?f.elem[f.prop]:(t=A.css(f.elem,f.prop,""))&&"auto"!==t?t:0},set:function(f){A.fx.step[f.prop]?A.fx.step[f.prop](f):1!==f.elem.nodeType||!A.cssHooks[f.prop]&&null==f.elem.style[Fb(f.prop)]?f.elem[f.prop]=f.now:A.style(f.elem,
f.prop,f.now+f.unit)}}};Aa.propHooks.scrollTop=Aa.propHooks.scrollLeft={set:function(f){f.elem.nodeType&&f.elem.parentNode&&(f.elem[f.prop]=f.now)}};A.easing={linear:function(f){return f},swing:function(f){return.5-Math.cos(f*Math.PI)/2},_default:"swing"};A.fx=Aa.prototype.init;A.fx.step={};var Yd,sd,Gd,Rf=/^(?:toggle|show|hide)$/,Sf=/queueHooks$/;A.Animation=A.extend(ma,{tweeners:{"*":[function(f,t){var w=this.createTween(f,t);return H(w.elem,f,Ma.exec(t),w),w}]},tweener:function(f,t){eb(f)?(t=f,
f=["*"]):f=f.match(N);for(var w,y=0,B=f.length;y<B;y++)w=f[y],ma.tweeners[w]=ma.tweeners[w]||[],ma.tweeners[w].unshift(t)},prefilters:[function(f,t,w){var y,B,E,I,P,M,V,Z="width"in t||"height"in t,U=this,oa={},qa=f.style,ua=f.nodeType&&Ac(f),Ea=Ca.get(f,"fxshow");for(y in w.queue||(null==(I=A._queueHooks(f,"fx")).unqueued&&(I.unqueued=0,P=I.empty.fire,I.empty.fire=function(){I.unqueued||P()}),I.unqueued++,U.always(function(){U.always(function(){I.unqueued--;A.queue(f,"fx").length||I.empty.fire()})})),
t)if(B=t[y],Rf.test(B)){if(delete t[y],E=E||"toggle"===B,B===(ua?"hide":"show"))if("show"===B&&Ea&&void 0!==Ea[y])ua=!0;else continue;oa[y]=Ea&&Ea[y]||A.style(f,y)}if((t=!A.isEmptyObject(t))||!A.isEmptyObject(oa))for(y in Z&&1===f.nodeType&&(w.overflow=[qa.overflow,qa.overflowX,qa.overflowY],null==(M=Ea&&Ea.display)&&(M=Ca.get(f,"display")),"none"===(V=A.css(f,"display"))&&(M?V=M:(L([f],!0),M=f.style.display||M,V=A.css(f,"display"),L([f]))),("inline"===V||"inline-block"===V&&null!=M)&&"none"===A.css(f,
"float")&&(t||(U.done(function(){qa.display=M}),null==M&&(M="none"===(V=qa.display)?"":V)),qa.display="inline-block")),w.overflow&&(qa.overflow="hidden",U.always(function(){qa.overflow=w.overflow[0];qa.overflowX=w.overflow[1];qa.overflowY=w.overflow[2]})),t=!1,oa)t||(Ea?"hidden"in Ea&&(ua=Ea.hidden):Ea=Ca.access(f,"fxshow",{display:M}),E&&(Ea.hidden=!ua),ua&&L([f],!0),U.done(function(){for(y in ua||L([f]),Ca.remove(f,"fxshow"),oa)A.style(f,y,oa[y])})),t=Qa(ua?Ea[y]:0,y,U),y in Ea||(Ea[y]=t.start,
ua&&(t.end=t.start,t.start=0))}],prefilter:function(f,t){t?ma.prefilters.unshift(f):ma.prefilters.push(f)}});A.speed=function(f,t,w){var y=f&&"object"==typeof f?A.extend({},f):{complete:w||!w&&t||eb(f)&&f,duration:f,easing:w&&t||t&&!eb(t)&&t};return A.fx.off?y.duration=0:"number"!=typeof y.duration&&(y.duration in A.fx.speeds?y.duration=A.fx.speeds[y.duration]:y.duration=A.fx.speeds._default),(null==y.queue||!0===y.queue)&&(y.queue="fx"),y.old=y.complete,y.complete=function(){eb(y.old)&&y.old.call(this);
y.queue&&A.dequeue(this,y.queue)},y};A.fn.extend({fadeTo:function(f,t,w,y){return this.filter(Ac).css("opacity",0).show().end().animate({opacity:t},f,w,y)},animate:function(f,t,w,y){var B=A.isEmptyObject(f),E=A.speed(t,w,y);t=function(){var I=ma(this,A.extend({},f),E);(B||Ca.get(this,"finish"))&&I.stop(!0)};return t.finish=t,B||!1===E.queue?this.each(t):this.queue(E.queue,t)},stop:function(f,t,w){var y=function(B){var E=B.stop;delete B.stop;E(w)};return"string"!=typeof f&&(w=t,t=f,f=void 0),t&&this.queue(f||
"fx",[]),this.each(function(){var B=!0,E=null!=f&&f+"queueHooks",I=A.timers,P=Ca.get(this);if(E)P[E]&&P[E].stop&&y(P[E]);else for(E in P)P[E]&&P[E].stop&&Sf.test(E)&&y(P[E]);for(E=I.length;E--;)I[E].elem!==this||null!=f&&I[E].queue!==f||(I[E].anim.stop(w),B=!1,I.splice(E,1));!B&&w||A.dequeue(this,f)})},finish:function(f){return!1!==f&&(f=f||"fx"),this.each(function(){var t=Ca.get(this),w=t[f+"queue"];var y=t[f+"queueHooks"];var B=A.timers,E=w?w.length:0;t.finish=!0;A.queue(this,f,[]);y&&y.stop&&y.stop.call(this,
!0);for(y=B.length;y--;)B[y].elem===this&&B[y].queue===f&&(B[y].anim.stop(!0),B.splice(y,1));for(y=0;y<E;y++)w[y]&&w[y].finish&&w[y].finish.call(this);delete t.finish})}});A.each(["toggle","show","hide"],function(f,t){var w=A.fn[t];A.fn[t]=function(y,B,E){return null==y||"boolean"==typeof y?w.apply(this,arguments):this.animate(fa(t,!0),y,B,E)}});A.each({slideDown:fa("show"),slideUp:fa("hide"),slideToggle:fa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(f,t){A.fn[f]=function(w,y,B){return this.animate(t,w,y,B)}});A.timers=[];A.fx.tick=function(){var f,t=0,w=A.timers;for(sd=Date.now();t<w.length;t++)(f=w[t])()||w[t]!==f||w.splice(t--,1);w.length||A.fx.stop();sd=void 0};A.fx.timer=function(f){A.timers.push(f);A.fx.start()};A.fx.interval=13;A.fx.start=function(){Gd||(Gd=!0,function t(){Gd&&(!1===Xa.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(t):a.setTimeout(t,A.fx.interval),A.fx.tick())}())};A.fx.stop=function(){Gd=null};A.fx.speeds=
{slow:600,fast:200,_default:400};A.fn.delay=function(f,t){return f=A.fx&&A.fx.speeds[f]||f,t=t||"fx",this.queue(t,function(w,y){var B=a.setTimeout(w,f);y.stop=function(){a.clearTimeout(B)}})};var td=Xa.createElement("input");var we=Xa.createElement("select").appendChild(Xa.createElement("option"));td.type="checkbox";Va.checkOn=""!==td.value;Va.optSelected=we.selected;(td=Xa.createElement("input")).value="t";td.type="radio";Va.radioValue="t"===td.value;var Hd=A.expr.attrHandle;A.fn.extend({attr:function(f,
t){return wa(this,A.attr,f,t,1<arguments.length)},removeAttr:function(f){return this.each(function(){A.removeAttr(this,f)})}});A.extend({attr:function(f,t,w){var y,B,E=f.nodeType;if(3!==E&&8!==E&&2!==E){if(void 0===f.getAttribute)return A.prop(f,t,w);if(1===E&&A.isXMLDoc(f)||(B=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?Tf:void 0)),void 0!==w){if(null===w){A.removeAttr(f,t);return}return B&&"set"in B&&void 0!==(y=B.set(f,w,t))?y:(f.setAttribute(t,w+""),w)}return B&&"get"in B&&null!==
(y=B.get(f,t))?y:null==(y=A.find.attr(f,t))?void 0:y}},attrHooks:{type:{set:function(f,t){if(!Va.radioValue&&"radio"===t&&p(f,"input")){var w=f.value;return f.setAttribute("type",t),w&&(f.value=w),t}}}},removeAttr:function(f,t){var w=0,y=t&&t.match(N);if(y&&1===f.nodeType)for(;t=y[w++];)f.removeAttribute(t)}});var Tf={set:function(f,t,w){return!1===t?A.removeAttr(f,w):f.setAttribute(w,w),w}};A.each(A.expr.match.bool.source.match(/\w+/g),function(f,t){var w=Hd[t]||A.find.attr;Hd[t]=function(y,B,E){var I,
P,M=B.toLowerCase();return E||(P=Hd[M],Hd[M]=I,I=null!=w(y,B,E)?M:null,Hd[M]=P),I}});var ud=/^(?:input|select|textarea|button)$/i,Uf=/^(?:a|area)$/i;A.fn.extend({prop:function(f,t){return wa(this,A.prop,f,t,1<arguments.length)},removeProp:function(f){return this.each(function(){delete this[A.propFix[f]||f]})}});A.extend({prop:function(f,t,w){var y,B,E=f.nodeType;if(3!==E&&8!==E&&2!==E)return(1===E&&A.isXMLDoc(f)||(t=A.propFix[t]||t,B=A.propHooks[t]),void 0!==w)?B&&"set"in B&&void 0!==(y=B.set(f,w,
t))?y:f[t]=w:B&&"get"in B&&null!==(y=B.get(f,t))?y:f[t]},propHooks:{tabIndex:{get:function(f){var t=A.find.attr(f,"tabindex");return t?parseInt(t,10):ud.test(f.nodeName)||Uf.test(f.nodeName)&&f.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});Va.optSelected||(A.propHooks.selected={get:function(f){f=f.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(f){f=f.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}});A.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){A.propFix[this.toLowerCase()]=this});A.fn.extend({addClass:function(f){var t,w,y,B,E,I;return eb(f)?this.each(function(P){A(this).addClass(f.call(this,P,Ja(this)))}):(t=kb(f)).length?this.each(function(){if(y=Ja(this),w=1===this.nodeType&&" "+Ua(y)+" "){for(E=0;E<t.length;E++)B=t[E],0>w.indexOf(" "+B+" ")&&(w+=B+" ");y!==(I=Ua(w))&&this.setAttribute("class",I)}}):this},removeClass:function(f){var t,w,y,B,E,I;return eb(f)?this.each(function(P){A(this).removeClass(f.call(this,P,Ja(this)))}):
arguments.length?(t=kb(f)).length?this.each(function(){if(y=Ja(this),w=1===this.nodeType&&" "+Ua(y)+" "){for(E=0;E<t.length;E++)for(B=t[E];-1<w.indexOf(" "+B+" ");)w=w.replace(" "+B+" "," ");y!==(I=Ua(w))&&this.setAttribute("class",I)}}):this:this.attr("class","")},toggleClass:function(f,t){var w,y,B,E,I=typeof f,P="string"===I||Array.isArray(f);return eb(f)?this.each(function(M){A(this).toggleClass(f.call(this,M,Ja(this),t),t)}):"boolean"==typeof t&&P?t?this.addClass(f):this.removeClass(f):(w=kb(f),
this.each(function(){if(P)for(B=0,E=A(this);B<w.length;B++)y=w[B],E.hasClass(y)?E.removeClass(y):E.addClass(y);else(void 0===f||"boolean"===I)&&((y=Ja(this))&&Ca.set(this,"__className__",y),this.setAttribute&&this.setAttribute("class",y||!1===f?"":Ca.get(this,"__className__")||""))}))},hasClass:function(f){var t,w=0;for(f=" "+f+" ";t=this[w++];)if(1===t.nodeType&&-1<(" "+Ua(Ja(t))+" ").indexOf(f))return!0;return!1}});var Vf=/\r/g;A.fn.extend({val:function(f){var t,w,y,B=this[0];return arguments.length?
(y=eb(f),this.each(function(E){var I;1===this.nodeType&&(null==(I=y?f.call(this,E,A(this).val()):f)?I="":"number"==typeof I?I+="":Array.isArray(I)&&(I=A.map(I,function(P){return null==P?"":P+""})),(t=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,I,"value")||(this.value=I))})):B?(t=A.valHooks[B.type]||A.valHooks[B.nodeName.toLowerCase()])&&"get"in t&&void 0!==(w=t.get(B,"value"))?w:"string"==typeof(w=B.value)?w.replace(Vf,""):null==w?"":w:void 0}});
A.extend({valHooks:{option:{get:function(f){var t=A.find.attr(f,"value");return null!=t?t:Ua(A.text(f))}},select:{get:function(f){var t,w,y=f.options,B=f.selectedIndex,E="select-one"===f.type,I=E?null:[],P=E?B+1:y.length;for(w=0>B?P:E?B:0;w<P;w++)if(!(!(t=y[w]).selected&&w!==B||t.disabled||t.parentNode.disabled&&p(t.parentNode,"optgroup"))){if(f=A(t).val(),E)return f;I.push(f)}return I},set:function(f,t){var w,y,B=f.options;t=A.makeArray(t);for(var E=B.length;E--;)((y=B[E]).selected=-1<A.inArray(A.valHooks.option.get(y),
t))&&(w=!0);return w||(f.selectedIndex=-1),t}}}});A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(f,t){if(Array.isArray(t))return f.checked=-1<A.inArray(A(f).val(),t)}};Va.checkOn||(A.valHooks[this].get=function(f){return null===f.getAttribute("value")?"on":f.value})});var Ic=a.location,xe=Date.now(),ye=/\?/;A.parseXML=function(f){var t;if(!f||"string"!=typeof f)return null;try{var w=(new a.DOMParser).parseFromString(f,"text/xml")}catch(y){}return t=w&&w.getElementsByTagName("parsererror")[0],
(!w||t)&&A.error("Invalid XML: "+(t?A.map(t.childNodes,function(y){return y.textContent}).join("\n"):f)),w};var df=/^(?:focusinfocus|focusoutblur)$/,ef=function(f){f.stopPropagation()};A.extend(A.event,{trigger:function(f,t,w,y){var B,E,I,P,M,V,Z=[w||Xa],U=Ib.call(f,"type")?f.type:f;var oa=Ib.call(f,"namespace")?f.namespace.split("."):[];if(B=V=E=w=w||Xa,3!==w.nodeType&&8!==w.nodeType&&!df.test(U+A.event.triggered)&&(-1<U.indexOf(".")&&(U=(oa=U.split(".")).shift(),oa.sort()),I=0>U.indexOf(":")&&"on"+
U,(f=f[A.expando]?f:new A.Event(U,"object"==typeof f&&f)).isTrigger=y?2:3,f.namespace=oa.join("."),f.rnamespace=f.namespace?RegExp("(^|\\.)"+oa.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=void 0,f.target||(f.target=w),t=null==t?[f]:A.makeArray(t,[f]),M=A.event.special[U]||{},y||!M.trigger||!1!==M.trigger.apply(w,t))){if(!y&&!M.noBubble&&!Xb(w)){var qa=M.delegateType||U;for(df.test(qa+U)||(B=B.parentNode);B;B=B.parentNode)Z.push(B),E=B;E===(w.ownerDocument||Xa)&&Z.push(E.defaultView||E.parentWindow||
a)}for(oa=0;(B=Z[oa++])&&!f.isPropagationStopped();)V=B,f.type=1<oa?qa:M.bindType||U,(P=(Ca.get(B,"events")||Object.create(null))[f.type]&&Ca.get(B,"handle"))&&P.apply(B,t),(P=I&&B[I])&&P.apply&&gb(B)&&(f.result=P.apply(B,t),!1===f.result&&f.preventDefault());return f.type=U,!y&&!f.isDefaultPrevented()&&(!M._default||!1===M._default.apply(Z.pop(),t))&&gb(w)&&I&&eb(w[U])&&!Xb(w)&&((E=w[I])&&(w[I]=null),A.event.triggered=U,f.isPropagationStopped()&&V.addEventListener(U,ef),w[U](),f.isPropagationStopped()&&
V.removeEventListener(U,ef),A.event.triggered=void 0,E&&(w[I]=E)),f.result}},simulate:function(f,t,w){f=A.extend(new A.Event,w,{type:f,isSimulated:!0});A.event.trigger(f,null,t)}});A.fn.extend({trigger:function(f,t){return this.each(function(){A.event.trigger(f,t,this)})},triggerHandler:function(f,t){var w=this[0];if(w)return A.event.trigger(f,t,w,!0)}});var Wf=/\[\]$/,ff=/\r?\n/g,Xf=/^(?:submit|button|image|reset|file)$/i,Yf=/^(?:input|select|textarea|keygen)/i;A.param=function(f,t){var w,y=[],B=
function(E,I){I=eb(I)?I():I;y[y.length]=encodeURIComponent(E)+"="+encodeURIComponent(null==I?"":I)};if(null==f)return"";if(Array.isArray(f)||f.jquery&&!A.isPlainObject(f))A.each(f,function(){B(this.name,this.value)});else for(w in f)!function Z(I,P,M,V){var U;if(Array.isArray(P))A.each(P,function(oa,qa){M||Wf.test(I)?V(I,qa):Z(I+"["+("object"==typeof qa&&null!=qa?oa:"")+"]",qa,M,V)});else if(M||"object"!==b(P))V(I,P);else for(U in P)Z(I+"["+U+"]",P[U],M,V)}(w,f[w],t,B);return y.join("&")};A.fn.extend({serialize:function(){return A.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var f=A.prop(this,"elements");return f?A.makeArray(f):this}).filter(function(){var f=this.type;return this.name&&!A(this).is(":disabled")&&Yf.test(this.nodeName)&&!Xf.test(f)&&(this.checked||!Ed.test(f))}).map(function(f,t){f=A(this).val();return null==f?null:Array.isArray(f)?A.map(f,function(w){return{name:t.name,value:w.replace(ff,"\r\n")}}):{name:t.name,value:f.replace(ff,"\r\n")}}).get()}});var Zf=/%20/g,$f=/#.*$/,ag=/([?&])_=[^&]*/,bg=/^(.*?):[ \t]*([^\r\n]*)$/mg,
vd=/^(?:GET|HEAD)$/,cg=/^\/\//,gf={},Id={},hf="*/".concat("*"),ze=Xa.createElement("a");ze.href=Ic.href;A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ic.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ic.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":hf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,
html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(f,t){return t?Nb(Nb(f,A.ajaxSettings),t):Nb(A.ajaxSettings,f)},ajaxPrefilter:bc(gf),ajaxTransport:bc(Id),ajax:function(f,t){function w(Ra,ab,zb,Hc){var Jb,Gb,pc,Tc,cd,xc=ab;!Ya&&(Ya=!0,P&&a.clearTimeout(P),y=void 0,E=Hc||"",Ta.readyState=4*(0<Ra),Jb=200<=
Ra&&300>Ra||304===Ra,zb&&(Tc=function(cc,hc,Kc){for(var qc,Zb,Ob,rc,Yc=cc.contents,dc=cc.dataTypes;"*"===dc[0];)dc.shift(),void 0===qc&&(qc=cc.mimeType||hc.getResponseHeader("Content-Type"));if(qc)for(Zb in Yc)if(Yc[Zb]&&Yc[Zb].test(qc)){dc.unshift(Zb);break}if(dc[0]in Kc)Ob=dc[0];else{for(Zb in Kc){if(!dc[0]||cc.converters[Zb+" "+dc[0]]){Ob=Zb;break}rc||=Zb}Ob=Ob||rc}if(Ob)return Ob!==dc[0]&&dc.unshift(Ob),Kc[Ob]}(U,Ta,zb)),!Jb&&-1<A.inArray("script",U.dataTypes)&&0>A.inArray("json",U.dataTypes)&&
(U.converters["text script"]=function(){}),Tc=function(cc,hc,Kc,qc){var Zb,Ob,rc,Yc,dc,Mc={},de=cc.dataTypes.slice();if(de[1])for(rc in cc.converters)Mc[rc.toLowerCase()]=cc.converters[rc];for(Ob=de.shift();Ob;)if(cc.responseFields[Ob]&&(Kc[cc.responseFields[Ob]]=hc),!dc&&qc&&cc.dataFilter&&(hc=cc.dataFilter(hc,cc.dataType)),dc=Ob,Ob=de.shift())if("*"===Ob)Ob=dc;else if("*"!==dc&&dc!==Ob){if(!(rc=Mc[dc+" "+Ob]||Mc["* "+Ob]))for(Zb in Mc)if((Yc=Zb.split(" "))[1]===Ob&&(rc=Mc[dc+" "+Yc[0]]||Mc["* "+
Yc[0]])){!0===rc?rc=Mc[Zb]:!0!==Mc[Zb]&&(Ob=Yc[0],de.unshift(Yc[1]));break}if(!0!==rc)if(rc&&cc.throws)hc=rc(hc);else try{hc=rc(hc)}catch(gg){return{state:"parsererror",error:rc?gg:"No conversion from "+dc+" to "+Ob}}}return{state:"success",data:hc}}(U,Tc,Ta,Jb),Jb?(U.ifModified&&((cd=Ta.getResponseHeader("Last-Modified"))&&(A.lastModified[B]=cd),(cd=Ta.getResponseHeader("etag"))&&(A.etag[B]=cd)),204===Ra||"HEAD"===U.type?xc="nocontent":304===Ra?xc="notmodified":(xc=Tc.state,Gb=Tc.data,Jb=!(pc=Tc.error))):
(pc=xc,(Ra||!xc)&&(xc="error",0>Ra&&(Ra=0))),Ta.status=Ra,Ta.statusText=(ab||xc)+"",Jb?ua.resolveWith(oa,[Gb,xc,Ta]):ua.rejectWith(oa,[Ta,xc,pc]),Ta.statusCode(fb),fb=void 0,M&&qa.trigger(Jb?"ajaxSuccess":"ajaxError",[Ta,U,Jb?Gb:pc]),Ea.fireWith(oa,[Ta,xc]),M&&(qa.trigger("ajaxComplete",[Ta,U]),--A.active||A.event.trigger("ajaxStop")))}"object"==typeof f&&(t=f,f=void 0);t=t||{};var y,B,E,I,P,M,V,Z,U=A.ajaxSetup({},t),oa=U.context||U,qa=U.context&&(oa.nodeType||oa.jquery)?A(oa):A.event,ua=A.Deferred(),
Ea=A.Callbacks("once memory"),fb=U.statusCode||{},Fa={},Ga={},ob="canceled",Ta={readyState:0,getResponseHeader:function(Ra){var ab;if(Ya){if(!I)for(I={};ab=bg.exec(E);)I[ab[1].toLowerCase()+" "]=(I[ab[1].toLowerCase()+" "]||[]).concat(ab[2]);ab=I[Ra.toLowerCase()+" "]}return null==ab?null:ab.join(", ")},getAllResponseHeaders:function(){return Ya?E:null},setRequestHeader:function(Ra,ab){return null==Ya&&(Fa[Ra=Ga[Ra.toLowerCase()]=Ga[Ra.toLowerCase()]||Ra]=ab),this},overrideMimeType:function(Ra){return null==
Ya&&(U.mimeType=Ra),this},statusCode:function(Ra){var ab;if(Ra)if(Ya)Ta.always(Ra[Ta.status]);else for(ab in Ra)fb[ab]=[fb[ab],Ra[ab]];return this},abort:function(Ra){Ra=Ra||ob;return y&&y.abort(Ra),w(0,Ra),this}};if(ua.promise(Ta),U.url=((f||U.url||Ic.href)+"").replace(cg,Ic.protocol+"//"),U.type=t.method||t.type||U.method||U.type,U.dataTypes=(U.dataType||"*").toLowerCase().match(N)||[""],null==U.crossDomain){f=Xa.createElement("a");try{f.href=U.url,f.href=f.href,U.crossDomain=ze.protocol+"//"+ze.host!=
f.protocol+"//"+f.host}catch(Ra){U.crossDomain=!0}}if(U.data&&U.processData&&"string"!=typeof U.data&&(U.data=A.param(U.data,U.traditional)),jc(gf,U,t,Ta),Ya)return Ta;for(V in(M=A.event&&U.global)&&0==A.active++&&A.event.trigger("ajaxStart"),U.type=U.type.toUpperCase(),U.hasContent=!vd.test(U.type),B=U.url.replace($f,""),U.hasContent?U.data&&U.processData&&0===(U.contentType||"").indexOf("application/x-www-form-urlencoded")&&(U.data=U.data.replace(Zf,"+")):(Z=U.url.slice(B.length),U.data&&(U.processData||
"string"==typeof U.data)&&(B+=(ye.test(B)?"&":"?")+U.data,delete U.data),!1===U.cache&&(B=B.replace(ag,"$1"),Z=(ye.test(B)?"&":"?")+"_="+xe++ +Z),U.url=B+Z),U.ifModified&&(A.lastModified[B]&&Ta.setRequestHeader("If-Modified-Since",A.lastModified[B]),A.etag[B]&&Ta.setRequestHeader("If-None-Match",A.etag[B])),(U.data&&U.hasContent&&!1!==U.contentType||t.contentType)&&Ta.setRequestHeader("Content-Type",U.contentType),Ta.setRequestHeader("Accept",U.dataTypes[0]&&U.accepts[U.dataTypes[0]]?U.accepts[U.dataTypes[0]]+
("*"!==U.dataTypes[0]?", "+hf+"; q=0.01":""):U.accepts["*"]),U.headers)Ta.setRequestHeader(V,U.headers[V]);if(U.beforeSend&&(!1===U.beforeSend.call(oa,Ta,U)||Ya))return Ta.abort();if(ob="abort",Ea.add(U.complete),Ta.done(U.success),Ta.fail(U.error),y=jc(Id,U,t,Ta)){if(Ta.readyState=1,M&&qa.trigger("ajaxSend",[Ta,U]),Ya)return Ta;U.async&&0<U.timeout&&(P=a.setTimeout(function(){Ta.abort("timeout")},U.timeout));try{var Ya=!1;y.send(Fa,w)}catch(Ra){if(Ya)throw Ra;w(-1,Ra)}}else w(-1,"No Transport");
return Ta},getJSON:function(f,t,w){return A.get(f,t,w,"json")},getScript:function(f,t){return A.get(f,void 0,t,"script")}});A.each(["get","post"],function(f,t){A[t]=function(w,y,B,E){return eb(y)&&(E=E||B,B=y,y=void 0),A.ajax(A.extend({url:w,type:t,dataType:E,data:y,success:B},A.isPlainObject(w)&&w))}});A.ajaxPrefilter(function(f){for(var t in f.headers)"content-type"===t.toLowerCase()&&(f.contentType=f.headers[t]||"")});A._evalUrl=function(f,t,w){return A.ajax({url:f,type:"GET",dataType:"script",
cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){A.globalEval(y,t,w)}})};A.fn.extend({wrapAll:function(f){var t;return this[0]&&(eb(f)&&(f=f.call(this[0])),t=A(f,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var w=this;w.firstElementChild;)w=w.firstElementChild;return w}).append(this)),this},wrapInner:function(f){return eb(f)?this.each(function(t){A(this).wrapInner(f.call(this,t))}):this.each(function(){var t=
A(this),w=t.contents();w.length?w.wrapAll(f):t.append(f)})},wrap:function(f){var t=eb(f);return this.each(function(w){A(this).wrapAll(t?f.call(this,w):f)})},unwrap:function(f){return this.parent(f).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}});A.expr.pseudos.hidden=function(f){return!A.expr.pseudos.visible(f)};A.expr.pseudos.visible=function(f){return!!(f.offsetWidth||f.offsetHeight||f.getClientRects().length)};A.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(f){}};
var Zd={0:200,1223:204},Oc=A.ajaxSettings.xhr();Va.cors=!!Oc&&"withCredentials"in Oc;Va.ajax=Oc=!!Oc;A.ajaxTransport(function(f){var t,w;if(Va.cors||Oc&&!f.crossDomain)return{send:function(y,B){var E,I=f.xhr();if(I.open(f.type,f.url,f.async,f.username,f.password),f.xhrFields)for(E in f.xhrFields)I[E]=f.xhrFields[E];for(E in f.mimeType&&I.overrideMimeType&&I.overrideMimeType(f.mimeType),f.crossDomain||y["X-Requested-With"]||(y["X-Requested-With"]="XMLHttpRequest"),y)I.setRequestHeader(E,y[E]);t=function(P){return function(){t&&
(t=w=I.onload=I.onerror=I.onabort=I.ontimeout=I.onreadystatechange=null,"abort"===P?I.abort():"error"===P?"number"!=typeof I.status?B(0,"error"):B(I.status,I.statusText):B(Zd[I.status]||I.status,I.statusText,"text"!==(I.responseType||"text")||"string"!=typeof I.responseText?{binary:I.response}:{text:I.responseText},I.getAllResponseHeaders()))}};I.onload=t();w=I.onerror=I.ontimeout=t("error");void 0!==I.onabort?I.onabort=w:I.onreadystatechange=function(){4===I.readyState&&a.setTimeout(function(){t&&
w()})};t=t("abort");try{I.send(f.hasContent&&f.data||null)}catch(P){if(t)throw P;}},abort:function(){t&&t()}}});A.ajaxPrefilter(function(f){f.crossDomain&&(f.contents.script=!1)});A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(f){return A.globalEval(f),f}}});A.ajaxPrefilter("script",function(f){void 0===f.cache&&(f.cache=!1);f.crossDomain&&(f.type=
"GET")});A.ajaxTransport("script",function(f){if(f.crossDomain||f.scriptAttrs){var t,w;return{send:function(y,B){t=A("<script>").attr(f.scriptAttrs||{}).prop({charset:f.scriptCharset,src:f.url}).on("load error",w=function(E){t.remove();w=null;E&&B("error"===E.type?404:200,E.type)});Xa.head.appendChild(t[0])},abort:function(){w&&w()}}}});var jf=[],Ae=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var f=jf.pop()||A.expando+"_"+xe++;return this[f]=!0,f}});A.ajaxPrefilter("json jsonp",
function(f,t,w){var y,B,E,I=!1!==f.jsonp&&(Ae.test(f.url)?"url":"string"==typeof f.data&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ae.test(f.data)&&"data");if(I||"jsonp"===f.dataTypes[0])return y=f.jsonpCallback=eb(f.jsonpCallback)?f.jsonpCallback():f.jsonpCallback,I?f[I]=f[I].replace(Ae,"$1"+y):!1!==f.jsonp&&(f.url+=(ye.test(f.url)?"&":"?")+f.jsonp+"="+y),f.converters["script json"]=function(){return E||A.error(y+" was not called"),E[0]},f.dataTypes[0]="json",B=a[y],a[y]=
function(){E=arguments},w.always(function(){void 0===B?A(a).removeProp(y):a[y]=B;f[y]&&(f.jsonpCallback=t.jsonpCallback,jf.push(y));E&&eb(B)&&B(E[0]);E=B=void 0}),"script"});(Db=Xa.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>";Va.createHTMLDocument=2===Db.childNodes.length;A.parseHTML=function(f,t,w){var y,B,E;return"string"!=typeof f?[]:("boolean"==typeof t&&(w=t,t=!1),t||(Va.createHTMLDocument?((y=(t=Xa.implementation.createHTMLDocument("")).createElement("base")).href=
Xa.location.href,t.head.appendChild(y)):t=Xa),B=C.exec(f),E=!w&&[],B)?[t.createElement(B[1])]:(B=K([f],t,E),E&&E.length&&A(E).remove(),A.merge([],B.childNodes))};A.fn.load=function(f,t,w){var y,B,E,I=this,P=f.indexOf(" ");return-1<P&&(y=Ua(f.slice(P)),f=f.slice(0,P)),eb(t)?(w=t,t=void 0):t&&"object"==typeof t&&(B="POST"),0<I.length&&A.ajax({url:f,type:B||"GET",dataType:"html",data:t}).done(function(M){E=arguments;I.html(y?A("<div>").append(A.parseHTML(M)).find(y):M)}).always(w&&function(M,V){I.each(function(){w.apply(this,
E||[M.responseText,V,M])})}),this};A.expr.pseudos.animated=function(f){return A.grep(A.timers,function(t){return f===t.elem}).length};A.offset={setOffset:function(f,t,w){var y,B,E,I=A.css(f,"position"),P=A(f),M={};"static"===I&&(f.style.position="relative");var V=P.offset();var Z=A.css(f,"top");var U=A.css(f,"left");("absolute"===I||"fixed"===I)&&-1<(Z+U).indexOf("auto")?(E=(y=P.position()).top,B=y.left):(E=parseFloat(Z)||0,B=parseFloat(U)||0);eb(t)&&(t=t.call(f,w,A.extend({},V)));null!=t.top&&(M.top=
t.top-V.top+E);null!=t.left&&(M.left=t.left-V.left+B);"using"in t?t.using.call(f,M):P.css(M)}};A.fn.extend({offset:function(f){if(arguments.length)return void 0===f?this:this.each(function(B){A.offset.setOffset(this,f,B)});var t,w,y=this[0];if(y)return y.getClientRects().length?(t=y.getBoundingClientRect(),w=y.ownerDocument.defaultView,{top:t.top+w.pageYOffset,left:t.left+w.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var f,t=this[0],w={top:0,left:0};if("fixed"===A.css(t,"position"))var y=
t.getBoundingClientRect();else{y=this.offset();var B=t.ownerDocument;for(f=t.offsetParent||B.documentElement;f&&(f===B.body||f===B.documentElement)&&"static"===A.css(f,"position");)f=f.parentNode;f&&f!==t&&1===f.nodeType&&(w=A(f).offset(),w.top+=A.css(f,"borderTopWidth",!0),w.left+=A.css(f,"borderLeftWidth",!0))}return{top:y.top-w.top-A.css(t,"marginTop",!0),left:y.left-w.left-A.css(t,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var f=this.offsetParent;f&&"static"===
A.css(f,"position");)f=f.offsetParent;return f||mb})}});A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,t){var w="pageYOffset"===t;A.fn[f]=function(y){return wa(this,function(B,E,I){var P;if(Xb(B)?P=B:9===B.nodeType&&(P=B.defaultView),void 0===I)return P?P[t]:B[E];P?P.scrollTo(w?P.pageXOffset:I,w?I:P.pageYOffset):B[E]=I},f,y,arguments.length)}});A.each(["top","left"],function(f,t){A.cssHooks[t]=Lb(Va.pixelPosition,function(w,y){if(y)return y=Wa(w,t),Fd.test(y)?A(w).position()[t]+
"px":y})});A.each({Height:"height",Width:"width"},function(f,t){A.each({padding:"inner"+f,content:t,"":"outer"+f},function(w,y){A.fn[y]=function(B,E){var I=arguments.length&&(w||"boolean"!=typeof B),P=w||(!0===B||!0===E?"margin":"border");return wa(this,function(M,V,Z){var U;return Xb(M)?0===y.indexOf("outer")?M["inner"+f]:M.document.documentElement["client"+f]:9===M.nodeType?(U=M.documentElement,Math.max(M.body["scroll"+f],U["scroll"+f],M.body["offset"+f],U["offset"+f],U["client"+f])):void 0===Z?
A.css(M,V,P):A.style(M,V,Z,P)},t,I?B:void 0,I)}})});A.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(f,t){A.fn[t]=function(w){return this.on(t,w)}});A.fn.extend({bind:function(f,t,w){return this.on(f,null,t,w)},unbind:function(f,t){return this.off(f,null,t)},delegate:function(f,t,w,y){return this.on(t,f,w,y)},undelegate:function(f,t,w){return 1==arguments.length?this.off(f,"**"):this.off(t,f||"**",w)},hover:function(f,t){return this.on("mouseenter",f).on("mouseleave",
t||f)}});A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(f,t){A.fn[t]=function(w,y){return 0<arguments.length?this.on(t,null,w,y):this.trigger(t)}});var $d=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;A.proxy=function(f,t){var w,y,B;if("string"==typeof t&&(w=f[t],t=f,f=w),eb(f))return y=lb.call(arguments,2),(B=function(){return f.apply(t||
this,y.concat(lb.call(arguments)))}).guid=f.guid=f.guid||A.guid++,B};A.holdReady=function(f){f?A.readyWait++:A.ready(!0)};A.isArray=Array.isArray;A.parseJSON=JSON.parse;A.nodeName=p;A.isFunction=eb;A.isWindow=Xb;A.camelCase=v;A.type=b;A.now=Date.now;A.isNumeric=function(f){var t=A.type(f);return("number"===t||"string"===t)&&!isNaN(f-parseFloat(f))};A.trim=function(f){return null==f?"":(f+"").replace($d,"$1")};"function"==typeof define&&define.amd&&define("jquery",[],function(){return A});var q=a.jQuery,
z=a.$;return A.noConflict=function(f){return a.$===A&&(a.$=z),f&&a.jQuery===A&&(a.jQuery=q),A},void 0===c&&(a.jQuery=a.$=A),A});Qe.prototype=Object.create(lc.prototype);Qe.prototype.constructor=Qe;Re.prototype=Object.create(lc.prototype);Re.prototype.constructor=Re;Se.prototype=Object.create(lc.prototype);Se.prototype.constructor=Se;Te.prototype=Object.create(pa(Yb).prototype);Te.prototype.constructor=Te;let Sg=[{name:"File",mnemonic:"F",children:[{name:"Save to my computer",action:"CPSave",mnemonic:"S",
shortcut:"ctrl+s"},{name:"Save Oekaki",action:"CPSend",mnemonic:"S",shortcut:"ctrl+s"}]},{name:"Edit",mnemonic:"E",children:[{name:"Undo",action:"CPUndo",mnemonic:"U",shortcut:"ctrl+z"},{name:"Redo",action:"CPRedo",mnemonic:"R",shortcut:"ctrl+y"},{name:"Clear history",action:"CPClearHistory",mnemonic:"H",title:ha("Removes all undo/redo information to regain memory")},{name:"-"},{name:"Cut",action:"CPCut",mnemonic:"T",shortcut:"ctrl+x"},{name:"Copy",action:"CPCopy",mnemonic:"C",shortcut:"ctrl+c"},
{name:"Copy merged",action:"CPCopyMerged",mnemonic:"Y",shortcut:"shift+ctrl+c"},{name:"Paste",action:"CPPaste",mnemonic:"P",shortcut:"ctrl+v"},{name:"-"},{name:"Select all",action:"CPSelectAll",mnemonic:"A",shortcut:"ctrl+a"},{name:"Deselect",action:"CPDeselectAll",mnemonic:"D",shortcut:"ctrl+d"},{name:"-"},{name:"Transform",action:"CPTransform",mnemonic:"T",shortcut:"ctrl+h"}]},{name:"Layers",mnemonic:"L",children:[{name:"Duplicate",action:"CPLayerDuplicate",mnemonic:"D",shortcut:"shift+ctrl+d"},
{name:"-"},{name:"Merge down",action:"CPLayerMergeDown",mnemonic:"E",shortcut:"ctrl+e"},{name:"Merge group",action:"CPGroupMerge",mnemonic:"G",shortcut:"shift+ctrl+g"},{name:"Merge all layers",action:"CPLayerMergeAll",shortcut:"shift+ctrl+e",mnemonic:"A"},{name:"-"},{hideIfNotAvailable:!0,name:"Add layer mask",action:"CPAddLayerMask"},{hideIfNotAvailable:!0,name:"Delete layer mask",action:"CPRemoveLayerMask",shortcut:"shift+m"},{hideIfNotAvailable:!0,name:"Apply layer mask",action:"CPApplyLayerMask",
shortcut:"ctrl+m"},{name:"-"},{hideIfNotAvailable:!0,name:"Clip to the layer below",action:"CPCreateClippingMask"},{hideIfNotAvailable:!0,name:"Unclip from the layer below",action:"CPReleaseClippingMask"}]},{name:"Effects",mnemonic:"E",children:[{name:"Clear",action:"CPClear",mnemonic:"D",shortcut:"del,backspace"},{name:"Fill",action:"CPFill",mnemonic:"F",shortcut:"ctrl+f"},{name:"Flip horizontal",action:"CPHFlip",mnemonic:"H",shortcut:"h"},{name:"Flip vertical",action:"CPVFlip",mnemonic:"V"},{name:"Invert",
action:"CPFXInvert",mnemonic:"I",shortcut:"ctrl+i",title:ha("Invert the image colors")},{name:"-"},{name:"Convert brightness to opacity",action:"CPBrightnessToOpacity",mnemonic:"B",title:ha("Convert brightness to opacity")},{name:"-"},{name:"Box blur...",action:"CPFXBoxBlur",mnemonic:"B"},{name:"-"},{name:"Monochromatic noise",action:"CPMNoise",mnemonic:"M",title:ha("Fills the selection with noise")},{name:"Color noise",action:"CPCNoise",mnemonic:"C",title:ha("Fills the selection with colored noise")}]},
{name:"View",mnemonic:"V",children:[{name:"Full-screen mode",action:"CPFullScreen",mnemonic:"F",checkbox:!0,checked:!1},{name:"-"},{name:"Zoom in",action:"CPZoomIn",mnemonic:"I",shortcut:"="},{name:"Zoom out",action:"CPZoomOut",mnemonic:"O",shortcut:"-"},{name:"Zoom 100%",action:"CPZoom100",mnemonic:"1",shortcut:"ctrl+0"},{action:"CPLinearInterpolation",name:"-"},{name:"Smooth-out zoomed canvas",action:"CPLinearInterpolation",mnemonic:"L",title:ha("Linear interpolation is used to give a smoothed looked to the picture when zoomed in"),
checkbox:!0,checked:!0},{name:"-"},{name:"Show grid",action:"CPToggleGrid",mnemonic:"G",shortcut:"ctrl+g",checkbox:!0,checked:!1},{name:"Grid options...",action:"CPGridOptions",mnemonic:"D"}]},{name:"Palettes",mnemonic:"P",children:[{name:"Rearrange",action:"CPArrangePalettes",title:ha("Rearrange the palette windows")},{name:"Toggle palettes",action:"CPTogglePalettes",mnemonic:"P",shortcut:"tab",title:ha("Hides or shows all palettes")},{name:"-"},{name:"Show tools",action:"CPPalTool",mnemonic:"T",
checkbox:!0,checked:!0},{name:"Show color",action:"CPPalColor",mnemonic:"C",checkbox:!0,checked:!0},{name:"Show stroke",action:"CPPalStroke",mnemonic:"S",checkbox:!0,checked:!0},{name:"Show misc",action:"CPPalMisc",mnemonic:"M",checkbox:!0,checked:!0},{name:"Show swatches",action:"CPPalSwatches",mnemonic:"W",checkbox:!0,checked:!0},{name:"Show textures",action:"CPPalTextures",mnemonic:"X",checkbox:!0,checked:!0},{name:"Show tool options",action:"CPPalBrush",mnemonic:"B",checkbox:!0,checked:!0},{name:"Show layers",
action:"CPPalLayers",mnemonic:"L",checkbox:!0,checked:!0}]},{name:"Help",mnemonic:"H",children:[{name:"Tablet support",mnemonic:"T",action:"CPTabletSupport"},{name:"Shortcuts",mnemonic:"S",action:"CPShortcuts"},{name:"-"},{name:"About",mnemonic:"A",action:"CPAbout"}]}];Ue.prototype=Object.create(pa(Yb).prototype);Ue.prototype.constructor=Ue;Ve.prototype=Object.create(pa(Yb).prototype);Ve.prototype.constructor=Ve;let Tg=navigator.userAgent.toLowerCase().includes("mac os")?"\u2318":"Ctrl";We.prototype=
Object.create(pa(Yb).prototype);We.prototype.constructor=We;let ld={toolbarStyle:"new"};class Xh extends pa(Yb){setDefaults(){for(let a in ld)ld.hasOwnProperty(a)&&this.set(a,ld[a])}load(){let a={};try{a=JSON.parse(localStorage.getItem("chickenpaint-prefs"))}catch(c){console.error(c)}for(let c in a&&"object"==typeof a||(a={}),ld)if(ld.hasOwnProperty(c))try{this.set(c,a.hasOwnProperty(c)?a[c]:ld[c])}catch(d){console.error(d)}}save(){try{let a=!1;for(let c in ld)if(ld.hasOwnProperty(c)&&this[c]!=ld[c]){a=
!0;break}a?localStorage.setItem("chickenpaint-prefs",JSON.stringify({toolbarStyle:this.toolbarStyle})):localStorage.removeItem("chickenpaint-prefs")}catch(a){console.error(a)}}set(a,c){this[a]=c;this.emitEvent(a,[c])}get(a){return this[a]}constructor(){super();Bc(this,"toolbarStyle",void 0);this.setDefaults()}}window.PointerEvent&&(window.hasNativePointerEvents=!0);la.prototype=Object.create(pa(Yb).prototype);la.prototype.constructor=la;la.UnsupportedBrowserException=function(a){this.message=a};la.UnsupportedBrowserException.prototype.toString=
function(){let a="Sorry, your web browser does not support ChickenPaint.";return this.message?a+=" "+this.message:a+=" Please try a modern browser like Chrome, Safari, Firefox, or Edge.",a};la.M_DRAW=0;la.M_FLOODFILL=1;la.M_RECT_SELECTION=2;la.M_MOVE_TOOL=3;la.M_ROTATE_CANVAS=4;la.M_COLOR_PICKER=5;la.M_GRADIENTFILL=6;la.M_TRANSFORM=7;la.M_PAN_CANVAS=8;la.T_PENCIL=0;la.T_ERASER=1;la.T_PEN=2;la.T_SOFTERASER=3;la.T_AIRBRUSH=4;la.T_DODGE=5;la.T_BURN=6;la.T_WATER=7;la.T_BLUR=8;la.T_SMUDGE=9;la.T_BLENDER=
10;la.T_MAX=11;la.COLOR_MODE_RGB=0;la.COLOR_MODE_GREYSCALE=1;window.ChickenPaint=la}();
